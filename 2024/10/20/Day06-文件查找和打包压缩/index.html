<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>文件查找和打包压缩 | Blog</title><meta name="author" content="W"><meta name="copyright" content="W"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="老马 2023 SRE">
<meta property="og:type" content="article">
<meta property="og:title" content="文件查找和打包压缩">
<meta property="og:url" content="http://example.com/2024/10/20/Day06-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/index.html">
<meta property="og:site_name" content="Blog">
<meta property="og:description" content="老马 2023 SRE">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/title/linux1.jpg">
<meta property="article:published_time" content="2024-10-19T16:00:00.000Z">
<meta property="article:modified_time" content="2024-10-20T06:41:18.848Z">
<meta property="article:author" content="W">
<meta property="article:tag" content="SRE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/title/linux1.jpg"><link rel="shortcut icon" href="/../images/title/user.webp"><link rel="canonical" href="http://example.com/2024/10/20/Day06-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '文件查找和打包压缩',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2024-10-20 14:41:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/../images/title/user.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../images/title/linux1.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Blog"><span class="site-name">Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">文件查找和打包压缩</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-10-19T16:00:00.000Z" title="发表于 2024-10-20 00:00:00">2024-10-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-20T06:41:18.848Z" title="更新于 2024-10-20 14:41:18">2024-10-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E9%87%8C%E9%9B%BE%E9%87%8C/">云里雾里</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>49分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="文件查找和打包压缩"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h1><h2 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h2><ul>
<li>locate 查询系统上预建的文件索引数据库 /var/lib/mlocate/mlocate.db</li>
<li>索引的构建是在系统较为空闲时自动进行(周期任务)，执行updatedb可以更新数据库</li>
<li>索引构建过程需要遍历整个根文件系统，很消耗资源</li>
<li>locate和update命令来自于mlocate包</li>
</ul>
<p>工作特点： </p>
<ul>
<li>查找速度快 模糊查找</li>
<li>非实时查找</li>
<li>搜索的是文件全路径，不仅仅是文件名</li>
<li>可能只搜索用户具备读取和执行权限的目录</li>
</ul>
<p>如果没有程序，可先安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#rehl系列</span></span><br><span class="line">yum install -y mlocate</span><br><span class="line"></span><br><span class="line"><span class="comment">#ubuntu </span></span><br><span class="line">apt install -y mlocate</span><br></pre></td></tr></table></figure>

<p>格式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">locate [OPTION]... [PATTERN]...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-A|--all                    <span class="comment">#输出所有能匹配到的文件名，不管文件是否存在</span></span><br><span class="line">-b|--<span class="built_in">basename</span>               <span class="comment">#仅匹配文件名部份，而不匹配路径中的内容</span></span><br><span class="line">-c|--count                  <span class="comment">#只输出找到的数量</span></span><br><span class="line">-d｜--database DBPATH       <span class="comment">#指定数据库</span></span><br><span class="line">-e|--existing               <span class="comment">#仅打印当前现有文件的条目</span></span><br><span class="line">-L|--follow                 <span class="comment">#遇到软链接时则跟随软链接去其对应的目标文件中查找 (默认)</span></span><br><span class="line">-n                          <span class="comment">#指定输出的个数</span></span><br><span class="line">-i|--ignore-case            <span class="comment">#忽略大小写</span></span><br><span class="line">-l|--<span class="built_in">limit</span>|-n N             <span class="comment">#只显示前N条匹配数据</span></span><br><span class="line">-P|--nofollow, -H           <span class="comment">#不跟随软链</span></span><br><span class="line">-q|--quiet                  <span class="comment">#安静模式，不输出错误信息 </span></span><br><span class="line">-r|--regexp REGEXP          <span class="comment">#使用基本正则表达式</span></span><br><span class="line">--regex                     <span class="comment">#使用扩展正则表达式</span></span><br><span class="line">-s|--stdio                  <span class="comment">#忽略向后兼容</span></span><br><span class="line">-w|--wholename              <span class="comment">#全路径匹配，就是只要在路径里面出现关键字（默认）</span></span><br></pre></td></tr></table></figure>



<p>范例：locatedb创建数据库</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># dnf -y install mlocate</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate conf</span></span><br><span class="line"> locate: can not <span class="built_in">stat</span> () `/var/lib/mlocate/mlocate.db<span class="string">&#x27;: No such file or directory</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@rocky8 ~]# updatedb</span></span><br><span class="line"><span class="string">[root@rocky8 ~]# ll /var/lib/mlocate/mlocate.db </span></span><br><span class="line"><span class="string">-rw-r----- 1 root slocate 3143608 Jun 18 08:58 /var/lib/mlocate/mlocate.db</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@rocky8 ~]# locate -n 3 conf</span></span><br><span class="line"><span class="string"> /boot/config-4.18.0-348.el8.0.2.x86_64</span></span><br><span class="line"><span class="string"> /boot/grub2/i386-pc/configfile.mod</span></span><br><span class="line"><span class="string"> /boot/loader/entries/c0298860b41f4cd296da0d2853451604-0-rescue.conf</span></span><br></pre></td></tr></table></figure>

<p>范例：文件新创建和删除，无法马上更新locate数据库</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># touch test.log</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate test.log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#更新数据库之后再查找</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># updatedb</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate test.log</span></span><br><span class="line"> /root/test.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#文件被删除，还能查到</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -f test.log</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate test.log</span></span><br><span class="line"> /root/test.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#但实际上文件己经不存在了</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># stat /root/test.log</span></span><br><span class="line"> <span class="built_in">stat</span>: cannot statx <span class="string">&#x27;/root/test.log&#x27;</span>: No such file or directory</span><br><span class="line"></span><br><span class="line"><span class="comment">#再次更新数据库</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># updatedb</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate test.log</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#搜索名称或路径中包含“conf”的文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#搜索ect目录中以a开头的文件或目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate /etc/a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#仅搜索文件名中包含share 的内容</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate -b share</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#显示数量</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate -c conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示前10条</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate -n 10 conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用基本正则表达式</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate -r &#x27;\.conf$&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#指定数据库</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># locate -d /tmp/nofile  conf</span></span><br><span class="line"> locate: can not <span class="built_in">stat</span> () `/tmp/nofile<span class="string">&#x27;: No such file or directory</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#安静模式，不输出错误信息</span></span><br><span class="line"><span class="string">[root@rocky86 ~]# locate -qd /tmp/nofile  conf</span></span><br></pre></td></tr></table></figure>

<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>find 是实时查找工具，通过遍历指定路径完成文件查找； </p>
<p>工作特点： </p>
<ul>
<li>查找速度略慢</li>
<li>精确查找</li>
<li>实时查找</li>
<li>查找条件丰富</li>
<li>可能只搜索用户具备读取和执行权限的目录</li>
</ul>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec] [path...] [expression]</span></span><br><span class="line"></span><br><span class="line">find [OPTION]... [查找路径] [查找条件] [处理动作]</span><br></pre></td></tr></table></figure>

<p>查找路径：指定具体目标路径；默认为当前目录</p>
<p>查找条件：指定的查找标准，可以文件名、大小、类型、权限等标准进行；默认为找出指定路径下的所有文件</p>
<p>处理动作：对符合条件的文件做操作，默认输出至屏幕</p>
<p>范例： </p>
<p>默认列出当前目录下的所有文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># find</span></span><br><span class="line">.</span><br><span class="line">./.vimrc</span><br><span class="line">./.bash_logout</span><br><span class="line">./.bash_profile</span><br><span class="line">./.cshrc</span><br><span class="line">./.tcshrc</span><br><span class="line">./.bash_history</span><br></pre></td></tr></table></figure>

<h3 id="指定搜索目录层级"><a href="#指定搜索目录层级" class="headerlink" title="指定搜索目录层级"></a>指定搜索目录层级</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-maxdepth N             <span class="comment">#最大搜索目录深度,指定目录下的文件为第1级</span></span><br><span class="line">-mindepth N             <span class="comment">#最小搜索目录深度</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#最大搜索深度</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># find /etc/ -maxdepth 2</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#最小搜索深度</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># find /etc/ -mindepth 2</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#仅搜索第二层目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># find /etc/ -maxdepth 2 -mindepth 2</span></span><br></pre></td></tr></table></figure>

<h3 id="先处理文件再处理目录"><a href="#先处理文件再处理目录" class="headerlink" title="先处理文件再处理目录"></a>先处理文件再处理目录</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-depth      <span class="comment">#先处理文件</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># mkdir -p dir1/dir2/dir3</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># touch &#123;fstab,.issue,dir1/&#123;f1,f2&#125;,dir1/dir2/&#123;fa,fb&#125;,dir1/dir2/dir3/&#123;fx,fy&#125;&#125;</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># tree -a</span></span><br><span class="line">.</span><br><span class="line">├── dir1</span><br><span class="line">│   ├── dir2</span><br><span class="line">│   │   ├── dir3</span><br><span class="line">│   │   │   ├── fx</span><br><span class="line">│   │   │   └── fy</span><br><span class="line">│   │   ├── fa</span><br><span class="line">│   │   └── fb</span><br><span class="line">│   ├── f1</span><br><span class="line">│   └── f2</span><br><span class="line">├── fstab</span><br><span class="line">└── .issue</span><br><span class="line"></span><br><span class="line"> <span class="comment">#默认先显示目录</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find</span></span><br><span class="line"> .</span><br><span class="line"> ./dir1</span><br><span class="line"> ./dir1/dir2</span><br><span class="line"> ./dir1/dir2/dir3</span><br><span class="line"> ./dir1/dir2/dir3/fx</span><br><span class="line"> ./dir1/dir2/dir3/fy</span><br><span class="line"> ./dir1/dir2/fa</span><br><span class="line"> ./dir1/dir2/fb</span><br><span class="line"> ./dir1/f1</span><br><span class="line"> ./dir1/f2</span><br><span class="line"> ./fstab</span><br><span class="line"> ./.issue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">#先显示文件</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -depth</span></span><br><span class="line"> ./dir1/dir2/dir3/fx</span><br><span class="line"> ./dir1/dir2/dir3/fy</span><br><span class="line"> ./dir1/dir2/dir3</span><br><span class="line"> ./dir1/dir2/fa</span><br><span class="line"> ./dir1/dir2/fb</span><br><span class="line"> ./dir1/dir2</span><br><span class="line"> ./dir1/f1</span><br><span class="line"> ./dir1/f2</span><br><span class="line"> ./dir1</span><br><span class="line"> ./fstab</span><br><span class="line"> ./.issue</span><br><span class="line"> .</span><br></pre></td></tr></table></figure>

<h3 id="根据文件名和inode查找"><a href="#根据文件名和inode查找" class="headerlink" title="根据文件名和inode查找"></a>根据文件名和inode查找</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-name name              <span class="comment">#支持使用glob，如：*, ?, [], [^],通配符要加双引号引起来</span></span><br><span class="line">-iname name             <span class="comment">#不区分字母大小写</span></span><br><span class="line">-inum number            <span class="comment">#按inode号查找</span></span><br><span class="line">-samefile name          <span class="comment">#相同inode号的文件</span></span><br><span class="line">-links n                <span class="comment">#链接数为n的文件</span></span><br><span class="line">-regex <span class="string">&quot;PATTERN&quot;</span>        <span class="comment">#以PATTERN匹配整个文件路径，而非文件名称</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 0723]<span class="comment"># touch test-&#123;a,A,b,B&#125;.log</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># touch test-&#123;a,A,b,B&#125;.txt</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># ls</span></span><br><span class="line">dir1   test-a.log  test-a.txt  test-b.log  test-b.txt</span><br><span class="line">fstab  test-A.<span class="built_in">log</span>  test-A.txt  test-B.<span class="built_in">log</span>  test-B.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定文件名，忽略大小写</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -iname test-a.log</span></span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-A.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通配符</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -name &quot;*txt&quot;</span></span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.txt</span><br><span class="line"> ./test-A.txt</span><br><span class="line"> ./test-B.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#通配符</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -name &quot;test-a*&quot;</span></span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#正则表达式</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -regex &quot;.*\.log$&quot;</span></span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-b.log</span><br><span class="line"> ./test-A.<span class="built_in">log</span></span><br><span class="line"> ./test-B.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#正则表达式</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -regex &quot;.*test-[a-z].*&quot;</span></span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.log</span><br><span class="line"> ./test-b.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#正则表达式，路径匹配</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -regex &quot;.*dir3.*&quot;</span></span><br><span class="line"> ./dir1/dir2/dir3</span><br><span class="line"> ./dir1/dir2/dir3/fx</span><br><span class="line"> ./dir1/dir2/dir3/fy</span><br><span class="line"></span><br><span class="line"><span class="comment">#正则表达式，路径匹配</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -regex &quot;.*dir3$&quot;</span></span><br><span class="line"> ./dir1/dir2/dir3</span><br></pre></td></tr></table></figure>

<h3 id="根据属主属组查找"><a href="#根据属主属组查找" class="headerlink" title="根据属主属组查找"></a>根据属主属组查找</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-user USERNAME          <span class="comment">#查找属主为指定用户(UID)的文件</span></span><br><span class="line">-group GRPNAME          <span class="comment">#查找属组为指定组(GID)的文件</span></span><br><span class="line">-uid UserID             <span class="comment">#查找属主为指定的UID号的文件</span></span><br><span class="line">-gid GroupID            <span class="comment">#查找属组为指定的GID号的文件</span></span><br><span class="line">-nouser                 <span class="comment">#查找没有属主的文件</span></span><br><span class="line">-nogroup                <span class="comment">#查找没有属组的文件</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0723]<span class="comment"># ll dir1/</span></span><br><span class="line"> total 0</span><br><span class="line">drwxr-xr-x 3 root root 38 Jul 23 10:21 dir2</span><br><span class="line">-rw-r--r-- 1  123  456  0 Jul 23 10:14 f1</span><br><span class="line">-rw-r--r-- 1  789 root  0 Jul 23 10:14 f2</span><br><span class="line">-rw-r--r-- 1 jose root  0 Jul 23 10:48 fa.txt</span><br><span class="line">-rw-r--r-- 1 jose root  0 Jul 23 10:48 fb.txt</span><br><span class="line">-rw-r--r-- 1 root mage  0 Jul 23 10:48 fc.txt</span><br><span class="line">-rw-r--r-- 1 root mage  0 Jul 23 10:48 fd.txt</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#指定属主</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -user jose</span></span><br><span class="line"> ./dir1/fa.txt</span><br><span class="line"> ./dir1/fb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属主可以用 UID</span></span><br><span class="line"> [root@rocky86 0725]<span class="comment"># find -user 1010</span></span><br><span class="line"> ./fa.txt</span><br><span class="line"> ./fb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属组</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -group mage</span></span><br><span class="line"> ./dir1/fc.txt</span><br><span class="line"> ./dir1/fd.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属组可以用GID</span></span><br><span class="line"> [root@rocky86 0725]<span class="comment"># find -group 1000</span></span><br><span class="line"> ./fc.txt</span><br><span class="line"> ./fd.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属主属组</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -user jose -group root</span></span><br><span class="line"> ./dir1/fa.txt</span><br><span class="line"> ./dir1/fb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属主ID</span></span><br><span class="line"> [root@rocky86 0723]<span class="comment"># find -uid 1010</span></span><br><span class="line"> ./dir1/fa.txt</span><br><span class="line"> ./dir1/fb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属组ID</span></span><br><span class="line"> [root@rocky86 0723]<span class="comment"># find  -gid 456</span></span><br><span class="line"> ./dir1/f1</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定属主属组ID</span></span><br><span class="line"> [root@rocky86 0723]<span class="comment"># find -uid 1010 -gid 0</span></span><br><span class="line"> ./dir1/fa.txt</span><br><span class="line"> ./dir1/fb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#属主用户不存在</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -nouser</span></span><br><span class="line"> ./dir1/f1</span><br><span class="line"> ./dir1/f2</span><br><span class="line"></span><br><span class="line"><span class="comment">#属组不在在</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -nogroup</span></span><br><span class="line"> ./dir1/f1</span><br><span class="line"></span><br><span class="line"><span class="comment">#属主属组不存在</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -nouser -nogroup</span></span><br><span class="line"> ./dir1/f1</span><br></pre></td></tr></table></figure>

<h3 id="根据文件类型查找"><a href="#根据文件类型查找" class="headerlink" title="根据文件类型查找"></a>根据文件类型查找</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">type</span> TYPE          <span class="comment">#指定文件类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#type 值</span></span><br><span class="line">f       <span class="comment">#普通文件</span></span><br><span class="line">d       <span class="comment">#目录文件</span></span><br><span class="line">l       <span class="comment">#符号链接文件</span></span><br><span class="line">s       <span class="comment">#套接字文件</span></span><br><span class="line">b       <span class="comment">#块设备文件</span></span><br><span class="line">c       <span class="comment">#字符设备文件</span></span><br><span class="line">p       <span class="comment">#管道文件</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前目录下的所有目录文件</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -type d</span></span><br><span class="line"> .</span><br><span class="line"> ./dir1</span><br><span class="line"> ./dir1/dir2</span><br><span class="line"> ./dir1/dir2/dir3</span><br><span class="line"></span><br><span class="line"><span class="comment">#查找run 目录下所有管道文件</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find /run/ -type p</span></span><br></pre></td></tr></table></figure>

<h3 id="空文件或目录"><a href="#空文件或目录" class="headerlink" title="空文件或目录"></a>空文件或目录</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-empty          <span class="comment">#空文件或空目录</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#空文件或空目录</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find dir1/dir2/dir3/ -empty</span></span><br><span class="line"> dir1/dir2/dir3/fx</span><br><span class="line"> dir1/dir2/dir3/fy</span><br><span class="line"> dir1/dir2/dir3/dir4</span><br><span class="line"></span><br><span class="line"><span class="comment">#查找空目录</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find dir1/dir2/dir3/ -empty -type d</span></span><br><span class="line"> dir1/dir2/dir3/dir4</span><br><span class="line"></span><br><span class="line"><span class="comment">#查找空文件</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find dir1/dir2/dir3/ -empty -type f</span></span><br><span class="line"> dir1/dir2/dir3/fx</span><br><span class="line"> dir1/dir2/dir3/fy</span><br></pre></td></tr></table></figure>

<h3 id="组合条件"><a href="#组合条件" class="headerlink" title="组合条件"></a>组合条件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-a           <span class="comment">#与，多条件默认就是与关系，可省略</span></span><br><span class="line">-o           <span class="comment">#或</span></span><br><span class="line">-not|！      <span class="comment">#非</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认 -a， 可省略</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -name &quot;*log&quot; -a -type f</span></span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-b.log</span><br><span class="line"> ./test-A.<span class="built_in">log</span></span><br><span class="line"> ./test-B.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -name &quot;test*log&quot; -o -name &quot;test*txt&quot;</span></span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.log</span><br><span class="line"> ./test-b.txt</span><br><span class="line"> </span><br><span class="line"><span class="comment">#非</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find dir1/dir2/dir3/ -empty -not -type d </span></span><br><span class="line"> dir1/dir2/dir3/fx</span><br><span class="line"> dir1/dir2/dir3/fy</span><br><span class="line"></span><br><span class="line"><span class="comment">#非</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find dir1/dir2/dir3/ -empty ! -type d </span></span><br><span class="line"> dir1/dir2/dir3/fx</span><br><span class="line"> dir1/dir2/dir3/fy</span><br></pre></td></tr></table></figure>

<p>范例：配合处理动作</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0723]<span class="comment"># find -user jose -o  -name &quot;*log&quot;</span></span><br><span class="line"> ./dir1/fa.txt</span><br><span class="line"> ./dir1/fb.txt</span><br><span class="line"> ./test-a.log</span><br><span class="line"> ./test-b.log</span><br><span class="line"> ./test-A.<span class="built_in">log</span></span><br><span class="line"> ./test-B.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#此处 ls 只列出了后一个条件的匹配</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -user jose -o -name &quot;*.log&quot; -ls </span></span><br><span class="line">   816459      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-a.log</span><br><span class="line">   816460      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-A.<span class="built_in">log</span></span><br><span class="line">   816461      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-b.log</span><br><span class="line">   816462      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-B.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#把条件括起来才表示全部</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find \( -user jose -o -name &quot;*.log&quot; \) -ls</span></span><br><span class="line">134688729      0 -rw-r--r--   1  jose     root            0 Oct 13 17:52 ./dir1/fa.txt</span><br><span class="line">134688730      0 -rw-r--r--   1  jose     root            0 Oct 13 17:53 ./dir1/fb.txt</span><br><span class="line">   816459      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-a.log</span><br><span class="line">   816460      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-A.<span class="built_in">log</span></span><br><span class="line">   816461      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-b.log</span><br><span class="line">   816462      0 -rw-r--r--   1  root     root            0 Oct 13 16:55 ./test-B.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p>德·摩根定律：</p>
<ul>
<li>  (非A)且(非B)=非(A或B)</li>
<li> (非A)或(非B)=非(A且B)</li>
</ul>
<p>示例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!A -a !B = !(A -o B)</span><br><span class="line">!A -o !B = !(A -a B)</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># !A -a !B</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find ! -name &quot;f*&quot; -a ! -name &quot;dir*&quot;</span></span><br><span class="line">.</span><br><span class="line">./.issue</span><br><span class="line">./test-a.log</span><br><span class="line">./test-A.<span class="built_in">log</span></span><br><span class="line">./test-b.log</span><br><span class="line">./test-B.<span class="built_in">log</span></span><br><span class="line">./test-a.txt</span><br><span class="line">./test-A.txt</span><br><span class="line">./test-b.txt</span><br><span class="line">./test-B.txt</span><br><span class="line"></span><br><span class="line"> <span class="comment"># !(A -o B)</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find ./ ! \( -name &quot;f*&quot; -o -name &quot;dir*&quot; \)</span></span><br><span class="line">./</span><br><span class="line">./.issue</span><br><span class="line">./test-a.log</span><br><span class="line">./test-A.<span class="built_in">log</span></span><br><span class="line">./test-b.log</span><br><span class="line">./test-B.<span class="built_in">log</span></span><br><span class="line">./test-a.txt</span><br><span class="line">./test-A.txt</span><br><span class="line">./test-b.txt</span><br><span class="line">./test-B.txt</span><br><span class="line"></span><br><span class="line"> <span class="comment"># !A -o !B</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find ! -type f -o ! -empty</span></span><br><span class="line">.</span><br><span class="line">./dir1</span><br><span class="line">./dir1/dir2</span><br><span class="line">./dir1/dir2/dir3</span><br><span class="line"></span><br><span class="line"> <span class="comment"># !(A -a B)</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find ! \( -type f -a -empty \)</span></span><br><span class="line">.</span><br><span class="line">./dir1</span><br><span class="line">./dir1/dir2</span><br><span class="line">./dir1/dir2/dir3</span><br></pre></td></tr></table></figure>

<h3 id="排除目录"><a href="#排除目录" class="headerlink" title="排除目录"></a>排除目录</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-prune          <span class="comment">#跳过，排除指定目录,必须配合 -path使用</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查找所有 txt文件</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -name &quot;*.txt&quot;</span></span><br><span class="line"> ./dir1/fa.txt</span><br><span class="line"> ./dir1/fb.txt</span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.txt</span><br><span class="line"> ./dir4/f-x.txt</span><br><span class="line"> ./dir4/f-y.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#排除 dir1 目录中的 txt 文件，但还是会输出 dir1</span></span><br><span class="line"> [root@rocky86 0723]<span class="comment"># find -path &#x27;./dir1&#x27; -prune -o  -name &quot;*.txt&quot;</span></span><br><span class="line"> ./dir1</span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.txt</span><br><span class="line"> ./dir4/f-x.txt</span><br><span class="line"> ./dir4/f-y.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#action 作用在后一个条件上</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find -path &#x27;./dir1&#x27; -prune -o  -name &quot;*.txt&quot; -print</span></span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.txt</span><br><span class="line"> ./dir4/f-x.txt</span><br><span class="line"> ./dir4/f-y.txt</span><br><span class="line"></span><br><span class="line"> <span class="comment">#排除多个目录</span></span><br><span class="line">[root@rocky86 0723]<span class="comment"># find \( -path &#x27;./dir1&#x27; -o -path &#x27;./dir4&#x27; \) -prune -o  -name &quot;*.txt&quot; -print</span></span><br><span class="line"> ./test-a.txt</span><br><span class="line"> ./test-b.txt</span><br></pre></td></tr></table></figure>

<h3 id="根据文件大小来查找"><a href="#根据文件大小来查找" class="headerlink" title="根据文件大小来查找"></a>根据文件大小来查找</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-size [+|-]N UNIT           <span class="comment"># N为数字，UNIT为常用单位 k, M, G, c(byte) 等</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解释</span></span><br><span class="line">10k                         <span class="comment">#表示(9k,10k],大于9k 且小于或等于10k</span></span><br><span class="line">-10k                        <span class="comment">#表示[0k,9k],大于等于0k 且小于或等于9k</span></span><br><span class="line">+10k                        <span class="comment">#表示(10k,∞)，大于10k</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#大于4K，小于或等于5K的文件</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find /var/log/ -size 5k -ls</span></span><br><span class="line">335686295      8 -rw-r-----   1  root     root         4464 Sep  9 15:21 /var/log/firewalld</span><br><span class="line">269307741      8 -rw-r--r--   1  root     root         4685 Sep  9 15:41 /var/log/httpd/access_log-20240918</span><br><span class="line">269184430      8 -rw-r--r--   1  root     root         4321 Sep 29 09:10 /var/log/httpd/error_log-20240929</span><br><span class="line"></span><br><span class="line"> <span class="comment">#小于或等于2k</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find /var/log/ -size -3k -name &quot;*gz&quot; -ls</span></span><br><span class="line">   473414      4 -rw-------   1  root     root          239 Sep 29 08:13 /var/log/sssd/sssd_implicit_files.log-20240929.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">#大于2k</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find /var/log/ -size +2k -name &quot;*.gz&quot; -ls</span></span><br><span class="line">   473419     12 -rw-------   1  root     root         9617 Sep 29 09:10 /var/log/sssd/sssd.log-20240929.gz</span><br><span class="line">   808277      8 -rw-------   1  root     root         5783 Sep 29 08:13 /var/log/sssd/sssd_nss.log-20240929.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#大于2k，小于或等于9k</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find /var/log/ -size +2k -size -10k -name &quot;*.gz&quot; -ls</span></span><br><span class="line">   808277      8 -rw-------   1  root     root         5783 Sep 29 08:13 /var/log/sssd/sssd_nss.log-20240929.gz</span><br></pre></td></tr></table></figure>

<h3 id="根据时间戳"><a href="#根据时间戳" class="headerlink" title="根据时间戳"></a>根据时间戳</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以天为单位</span></span><br><span class="line">-atime [+|-]N</span><br><span class="line">-mtime [+|-]N</span><br><span class="line">-ctime [+|-]N</span><br><span class="line"></span><br><span class="line"><span class="comment">#以分钟为单位</span></span><br><span class="line">-amin [+|-]N</span><br><span class="line">-mmin [+|-]N</span><br><span class="line">-cmin [+|-]N</span><br><span class="line"></span><br><span class="line"><span class="comment">#解释</span></span><br><span class="line">N                       <span class="comment">#表示[N,N+1),大于或等于N，小于N+1，表示第N天(分钟)</span></span><br><span class="line">+N                      <span class="comment">#表示[N+1,∞],大于或等于N+1，表示N+1天之前(包括)</span></span><br><span class="line">-N                      <span class="comment">#表示[0,N),大于或等于0，小于N，表示N天(分钟)内</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#查找五分钟内被访问过的文件</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -amin -5</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#查找十分钟前被访问过的文件</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -amin +10</span></span><br></pre></td></tr></table></figure>

<p><img src="../../../../images/image/SRE/day06/1.png" alt="1"></p>
<h3 id="根据权限查找"><a href="#根据权限查找" class="headerlink" title="根据权限查找"></a>根据权限查找</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-perm [/|-]MODE</span><br><span class="line"></span><br><span class="line"> MODE            <span class="comment">#精确权限匹配</span></span><br><span class="line">/MODE            <span class="comment">#任何一类(u,g,o)对象的权限中只要有一位匹配即可，表示或者(or)关系</span></span><br><span class="line">+MODE            <span class="comment">#从CentOS 7开始己淘汰</span></span><br><span class="line">-MODE            <span class="comment">#每一类对象都必须同时拥有指定权限，表示与(and)关系</span></span><br><span class="line"></span><br><span class="line">                 <span class="comment">#0 如果要找时权限位上的值为0，则表示不关注该角色权限</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0724]<span class="comment"># ll</span></span><br><span class="line"> total 0</span><br><span class="line"> ---------- 1 root root 0 Jul 25 09:12 f-1.txt</span><br><span class="line"> -r--r--r-- 1 root root 0 Jul 25 09:12 f-2.txt</span><br><span class="line"> --w--w--w- 1 root root 0 Jul 25 09:12 f-3.txt</span><br><span class="line"> ---x--x--x 1 root root 0 Jul 25 09:17 f-4.txt</span><br><span class="line"> -rw-r--r-- 1 root root 0 Jul 25 09:17 f-5.txt</span><br><span class="line"> -rwxrwxrwx 1 root root 0 Jul 25 09:17 f-6.txt</span><br><span class="line"> -r---w---x 1 root root 0 Jul 25 09:22 f-8.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#精确匹配，ugo都只能是 r权限</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -perm 444 -ls </span></span><br><span class="line">   816460      0 -r--r--r--   1  root     root            0 Oct 13 18:41 ./f-2.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#或关系，ugo只要有一个角色有r权限即可</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -perm /444 -ls </span></span><br><span class="line">   816458      0 drwxr-xr-x   2  root     root          125 Oct 13 18:43 .</span><br><span class="line">402653958      0 -rw-r--r--   1  root     root            0 Oct 13 16:52 ./.issue</span><br><span class="line">   816460      0 -r--r--r--   1  root     root            0 Oct 13 18:41 ./f-2.txt</span><br><span class="line">   816463      0 -rw-r--r--   1  root     root            0 Oct 13 18:41 ./f-5.txt</span><br><span class="line">   816464      0 -rwxrwxrwx   1  root     root            0 Oct 13 18:41 ./f-6.txt</span><br><span class="line">   816466      0 -r---w---x   1  root     root            0 Oct 13 18:41 ./f-8.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#报错</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -perm +444 -ls </span></span><br><span class="line">find: invalid mode ‘+444’</span><br><span class="line"></span><br><span class="line"><span class="comment">#ugo三个角色至少都要有r权限</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -perm -444 -ls </span></span><br><span class="line">   816458      0 drwxr-xr-x   2  root     root          125 Oct 13 18:43 .</span><br><span class="line">402653958      0 -rw-r--r--   1  root     root            0 Oct 13 16:52 ./.issue</span><br><span class="line">   816460      0 -r--r--r--   1  root     root            0 Oct 13 18:41 ./f-2.txt</span><br><span class="line">   816463      0 -rw-r--r--   1  root     root            0 Oct 13 18:41 ./f-5.txt</span><br><span class="line">   816464      0 -rwxrwxrwx   1  root     root            0 Oct 13 18:41 ./f-6.txt</span><br><span class="line">   </span><br><span class="line"><span class="comment">#只关注属主权限，6拆分成4+2，所以只要属主有r或w权限即可</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -perm /600 -ls </span></span><br><span class="line">   816458      0 drwxr-xr-x   2  root     root          125 Oct 13 18:43 .</span><br><span class="line">402653958      0 -rw-r--r--   1  root     root            0 Oct 13 16:52 ./.issue</span><br><span class="line">   816460      0 -r--r--r--   1  root     root            0 Oct 13 18:41 ./f-2.txt</span><br><span class="line">   816461      0 --w--w--w-   1  root     root            0 Oct 13 18:41 ./f-3.txt</span><br><span class="line">   816463      0 -rw-r--r--   1  root     root            0 Oct 13 18:41 ./f-5.txt</span><br><span class="line">   816464      0 -rwxrwxrwx   1  root     root            0 Oct 13 18:41 ./f-6.txt</span><br><span class="line">   816466      0 -r---w---x   1  root     root            0 Oct 13 18:41 ./f-8.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#只关注属主权限，6拆分成4+2，所以只要属主至少要有有rw权限</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -perm -600 -ls </span></span><br><span class="line">   816458      0 drwxr-xr-x   2  root     root          125 Oct 13 18:43 .</span><br><span class="line">402653958      0 -rw-r--r--   1  root     root            0 Oct 13 16:52 ./.issue</span><br><span class="line">   816463      0 -rw-r--r--   1  root     root            0 Oct 13 18:41 ./f-5.txt</span><br><span class="line">   816464      0 -rwxrwxrwx   1  root     root            0 Oct 13 18:41 ./f-6.txt</span><br></pre></td></tr></table></figure>

<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-regextype <span class="built_in">type</span>         <span class="comment">#正则表达式类型，emacs|posix-awk|posix-basic|posix-egrep|posix-extended</span></span><br><span class="line">-regex pattern          <span class="comment">#正则表达式</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0724]<span class="comment"># find -regextype posix-egrep -regex &quot;.*log&quot;</span></span><br><span class="line"> ./ls.log</span><br><span class="line"></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -regextype posix-egrep -regex &quot;.*5.*&quot;</span></span><br><span class="line"> ./f-5.txt</span><br></pre></td></tr></table></figure>

<h3 id="处理动作"><a href="#处理动作" class="headerlink" title="处理动作"></a>处理动作</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">print</span>                  <span class="comment">#默认的处理动作，显示至屏幕</span></span><br><span class="line">-print0                 <span class="comment">#不换行输出，常用于配合xargs</span></span><br><span class="line">-<span class="built_in">ls</span>                     <span class="comment">#类似于对查找到的文件执行&quot;ls -ils&quot;命令格式输出</span></span><br><span class="line">-fls file               <span class="comment">#查找到的所有文件的长格式信息保存至指定文件中，相当于 -ls &gt; file</span></span><br><span class="line">-delete                 <span class="comment">#删除查找到的文件，慎用！</span></span><br><span class="line">-ok COMMAND &#123;&#125; \;       <span class="comment">#对查找到的每个文件执行由COMMAND指定的命令，对于每个文件执行命令之前，都会交互式要求用户确认</span></span><br><span class="line">-<span class="built_in">exec</span> COMMAND &#123;&#125; \;     <span class="comment">#对查找到的每个文件执行由COMMAND指定的命令</span></span><br><span class="line">&#123;&#125;                      <span class="comment">#用于引用查找到的文件名称自身</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认 -print</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find</span></span><br><span class="line"> .</span><br><span class="line"> ./f-1.txt</span><br><span class="line"> ./f-2.txt</span><br><span class="line"> ./f-3.txt</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#长格式显示</span></span><br><span class="line">[root@rocky8 0723]<span class="comment"># find -ls</span></span><br><span class="line">   816458      0 drwxr-xr-x   2  root     root          125 Oct 13 18:43 .</span><br><span class="line">402653958      0 -rw-r--r--   1  root     root            0 Oct 13 16:52 ./.issue</span><br><span class="line">   816459      0 ----------   1  root     root            0 Oct 13 18:41 ./f-1.txt</span><br><span class="line">   816460      0 -r--r--r--   1  root     root            0 Oct 13 18:41 ./f-2.txt</span><br><span class="line">            </span><br><span class="line"> <span class="comment">#查找结果保存至文件</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -fls ls.log</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#删除</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -name &quot;*.sh&quot; -delete</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#备份以log结尾的文件</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -name &quot;*log&quot; -exec cp &#123;&#125; &#123;&#125;.bak \;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 0724]<span class="comment"># ls *log*</span></span><br><span class="line"> f-1.log  f-1.log.bak  f-2.log  f-2.log.bak  f-3.log  f-3.log.bak</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#删除15分钟内没被访问过的文件</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -amin +15 -ok rm &#123;&#125; \;</span></span><br><span class="line"> &lt; <span class="built_in">rm</span> ... ./f-1.txt &gt; ? </span><br><span class="line"> </span><br><span class="line"> <span class="comment">#将other权限有w的文件的权限去掉w权限</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -perm -002 -exec chmod o-w &#123;&#125; \;</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#查找权限为644，后缀为sh的普通文件，增加执行权限</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -type f -perm 644 -name &quot;*.sh&quot; -exec chmod 755 &#123;&#125; \;</span></span><br></pre></td></tr></table></figure>

<h2 id="参数替换xargs"><a href="#参数替换xargs" class="headerlink" title="参数替换xargs"></a>参数替换xargs</h2><p>由于很多命令不支持管道|来传递参数，为了使用更灵活的参数，我们就城要用 xargs 产生命令参数， </p>
<p>xargs 可以读入 stdin 的数据，并且以空格符或回车符将 stdin 的数据分隔，使其成为另一个命令的参数， </p>
<p>另外，许多命令不能接受过多参数，命令执行可能会失败，xargs 也可以解决此问题；</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xargs [OPTION]... COMMAND [INITIAL-ARGS]...</span><br><span class="line"></span><br><span class="line"> <span class="comment">#常用选项</span></span><br><span class="line">-0|--null                       <span class="comment">#用 assic 中的0或 null 作分隔符</span></span><br><span class="line">-a|--arg-file=FILE              <span class="comment">#从文件中读入作为输入</span></span><br><span class="line">-d|--delimiter=CHARACTER        <span class="comment">#指定分隔符</span></span><br><span class="line">-E END                          <span class="comment">#指定结束符，执行到此处时停止，不管后面的数据</span></span><br><span class="line">-L|--max-lines=N                <span class="comment">#从标准输入一次读取N行送给 command 命令</span></span><br><span class="line">-l                              <span class="comment">#同上</span></span><br><span class="line">-n|--max-args=MAX-ARGS          <span class="comment">#一次执行用几个参数</span></span><br><span class="line">-p|--interactive                <span class="comment">#每次执行前确认</span></span><br><span class="line">-r|--no-run-if-empty            <span class="comment">#当xargs的输入为空的时候则停止xargs，不用再去执行了</span></span><br><span class="line">-s|--max-chars=MAX-CHARS        <span class="comment">#命令行最大字符数</span></span><br><span class="line">-t|--verbose                    <span class="comment">#显示过程，先打印要执行的命令</span></span><br><span class="line">-x|--<span class="built_in">exit</span>                       <span class="comment">#退出，主要配合-s使用</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0724]<span class="comment"># ls f-1.log</span></span><br><span class="line"> f-1.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#无法用管道传参</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo &quot;f-1.log&quot; | ls</span></span><br><span class="line"> ...</span><br><span class="line"> ...</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#命令展开</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># ls `echo f-1.txt`</span></span><br><span class="line"> f-1.txt</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#xargs</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo &quot;f-1.log&quot; | xargs ls</span></span><br><span class="line"> f-1.log</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#还可以让不支持标准输入的命令支持标输输入(ctrl+d 结束)</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># xargs ls -l</span></span><br><span class="line"> f-1.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 Jul 25 09:43 f-1.log</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#让命令支持标准输入重定向</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># cat ls.log </span></span><br><span class="line"> f-1.log</span><br><span class="line"> f-2.log</span><br><span class="line"></span><br><span class="line">[root@rocky86 0724]<span class="comment"># xargs -a ls.log ls -l</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 25 09:43 f-1.log</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 25 09:43 f-2.log</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0724]<span class="comment"># seq 3</span></span><br><span class="line"> 1</span><br><span class="line"> 2</span><br><span class="line"> 3</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># seq 3 | xargs</span></span><br><span class="line"> 1 2 3</span><br><span class="line"></span><br><span class="line"> <span class="comment">#指定分割符</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo -e &quot;1-2-3\c&quot; | xargs -d &#x27;-&#x27;</span></span><br><span class="line"> 1 2 3</span><br><span class="line"></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo &#123;1..5&#125;</span></span><br><span class="line"> 1 2 3 4 5</span><br><span class="line"></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo &#123;1..5&#125; | xargs</span></span><br><span class="line"> 1 2 3 4 5</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定每次使用2个参数</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo &#123;1..5&#125; | xargs -n 2</span></span><br><span class="line"> 1 2</span><br><span class="line"> 3 4</span><br><span class="line"> 5</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#批量创建用户并显示命令</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo user&#123;1..5&#125; |xargs -t -n1 useradd</span></span><br><span class="line"> useradd user1 </span><br><span class="line"> useradd user2 </span><br><span class="line"> useradd user3 </span><br><span class="line"> useradd user4 </span><br><span class="line"> useradd user5 </span><br><span class="line"> </span><br><span class="line"> <span class="comment">#批量删除用户</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># echo user&#123;1..5&#125; |xargs -n1 userdel -r</span></span><br></pre></td></tr></table></figure>

<p>范例：批量创建文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 0723]<span class="comment"># df -i</span></span><br><span class="line">Filesystem            Inodes IUsed    IFree IUse% Mounted on</span><br><span class="line">devtmpfs              224364   398   223966    1% /dev</span><br><span class="line">tmpfs                 229154     1   229153    1% /dev/shm</span><br><span class="line">tmpfs                 229154   612   228542    1% /run</span><br><span class="line">tmpfs                 229154    17   229137    1% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rl-root 68157440 61837 68095603    1% /</span><br><span class="line">/dev/sda1             524288   310   523978    1% /boot</span><br><span class="line">/dev/mapper/rl-home 34078720    51 34078669    1% /home</span><br><span class="line">tmpfs                 229154     5   229149    1% /run/user/0</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数太长，执行失败</span></span><br><span class="line">[root@rocky86 <span class="built_in">test</span>]<span class="comment"># touch f-&#123;1..523975&#125;.txt</span></span><br><span class="line">-bash: /usr/bin/touch: Argument list too long</span><br><span class="line"></span><br><span class="line"><span class="comment">#一次创建1w个</span></span><br><span class="line">[root@rocky86 <span class="built_in">test</span>]<span class="comment"># echo f-&#123;1..523975&#125;.txt | xargs -n 10000 touch</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#inode 资源耗尽</span></span><br><span class="line">[root@rocky86 <span class="built_in">test</span>]<span class="comment"># df -i</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>范例：批量下载B站视频</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># yum install python3-pip -y</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># pip3 install you-get</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#如果前一条install报错，可以用这个</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># pip3 --default-timeout=100 install -U you-get</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 还是报错的话，安装开发库</span></span><br><span class="line">sudo dnf update</span><br><span class="line">sudo dnf install python3-devel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">#批量下载 后面的是视频链接</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># seq 60 | xargs -i -P3 you-get https://www.bilibili.com/video/BV14K411W7UF?p=&#123;&#125;</span></span><br></pre></td></tr></table></figure>

<p>范例：以 ascii中的空白符分隔参数</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0724]<span class="comment"># ls</span></span><br><span class="line"> <span class="string">&#x27;a b&#x27;</span> f-1.txt   f-2.txt   f-3.txt</span><br><span class="line"></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -type f | xargs echo</span></span><br><span class="line"> ./f-1.txt ./f-2.txt ./f-3.txt ./a b</span><br><span class="line"></span><br><span class="line"><span class="comment">#在此处有空格的文件名被拆分成两个文件了，xargs 默认以空格拆分</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -type f | xargs ls</span></span><br><span class="line"> <span class="built_in">ls</span>: cannot access <span class="string">&#x27;./a&#x27;</span>: No such file or directory</span><br><span class="line"> <span class="built_in">ls</span>: cannot access <span class="string">&#x27;b&#x27;</span>: No such file or directory</span><br><span class="line"> ./f-1.txt  ./f-2.txt  ./f-3.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#正常显示</span></span><br><span class="line">[root@rocky86 0724]<span class="comment"># find -type f -print0 |xargs -0 ls</span></span><br><span class="line"> <span class="string">&#x27;./a b&#x27;</span> ./f-1.txt   ./f-2.txt   ./f-3.txt</span><br></pre></td></tr></table></figure>



<p>练习</p>
<ol>
<li>查找/var目录下属主为root，且属组为mail的所有文件 </li>
<li>查找/var目录下不属于root、lp、gdm的所有文件 </li>
<li>查找/var目录下最近一周内其内容修改过，同时属主不为root，也不是postfix的文件 </li>
<li>查找当前系统上没有属主或属组，且最近一个周内曾被访问过的文件 </li>
<li>查找/etc目录下大于1M且类型为普通文件的所有文件 </li>
<li>查找/etc目录下所有用户都没有写权限的文件 </li>
<li>查找/etc目录下至少有一类用户没有执行权限的文件 </li>
<li>查找/etc/init.d目录下，所有用户都有执行权限，且其它用户有写权限的文件</li>
</ol>
<h1 id="压缩和解压缩"><a href="#压缩和解压缩" class="headerlink" title="压缩和解压缩"></a>压缩和解压缩</h1><p>主要针对单个文件压缩，而非目录</p>
<h2 id="compress-和-uncompress"><a href="#compress-和-uncompress" class="headerlink" title="compress 和 uncompress"></a>compress 和 uncompress</h2><p>此工具来自于ncompress包,此工具目前已经很少使用 </p>
<p>对应的文件是 .Z 后缀</p>
<p>格式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#常用选项</span></span><br><span class="line"></span><br><span class="line">-d              <span class="comment">#解压缩，相当于于uncompress</span></span><br><span class="line">-c              <span class="comment">#结果输出至标准输出,不删除原文件</span></span><br><span class="line">-f              <span class="comment">#覆盖己存在目标文件</span></span><br><span class="line">-v              <span class="comment">#显示过程</span></span><br><span class="line">-r              <span class="comment">#递归压缩目录里面所有文件</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># ls</span></span><br><span class="line"> fstab</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#默认选项压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># compress fstab </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ls</span></span><br><span class="line"> fstab.Z</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#解压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># uncompress fstab.Z </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ls</span></span><br><span class="line"> fstab</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#显示过程</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># compress -v fstab </span></span><br><span class="line">fstab:  -- replaced with fstab.Z Compression: 33.88%</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#解压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># compress -dv fstab.Z</span></span><br><span class="line"> fstab.Z:  -- replaced with fstab</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#保留源文件</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># compress -c fstab &gt; fstab.Z</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ls</span></span><br><span class="line"> fstab  fstab.Z</span><br></pre></td></tr></table></figure>

<p>范例：递归压缩目录</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tree dir1/</span></span><br><span class="line"> dir1/</span><br><span class="line"> ├── dir2</span><br><span class="line"> │   └── messages</span><br><span class="line"> ├── dnf.log</span><br><span class="line"> ├── fstab</span><br><span class="line"> └── passwd</span><br><span class="line"> 1 directory, 4 files</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># compress -vr dir1/</span></span><br><span class="line"> dir1//dir2/messages:  -- replaced with dir1//dir2/messages.Z Compression: 71.74%</span><br><span class="line"> dir1//fstab:  -- replaced with dir1//fstab.Z Compression: 33.88%</span><br><span class="line"> dir1//dnf.log:  -- replaced with dir1//dnf.log.Z Compression: 80.21%</span><br><span class="line"> dir1//passwd:  -- replaced with dir1//passwd.Z Compression: 45.24%</span><br><span class="line"> </span><br><span class="line">[root@rocky86 0726]<span class="comment"># tree dir1/</span></span><br><span class="line"> dir1/</span><br><span class="line"> ├── dir2</span><br><span class="line"> │   └── messages.Z</span><br><span class="line"> ├── dnf.log.Z</span><br><span class="line"> ├── fstab.Z</span><br><span class="line"> └── passwd.Z</span><br><span class="line"> 1 directory, 4 files</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#递归解压缩目录</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># compress -drv dir1/</span></span><br><span class="line"> dir1//dir2/messages.Z:  -- replaced with dir1//dir2/messages</span><br><span class="line"> dir1//fstab.Z:  -- replaced with dir1//fstab</span><br><span class="line"> dir1//dnf.log.Z:  -- replaced with dir1//dnf.log</span><br><span class="line"> dir1//passwd.Z:  -- replaced with dir1//passwd</span><br></pre></td></tr></table></figure>

<h2 id="gzip和gunzip"><a href="#gzip和gunzip" class="headerlink" title="gzip和gunzip"></a>gzip和gunzip</h2><p>来自于 gzip 包  </p>
<p>对应的文件是 .gz 后缀</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gzip [OPTION]... FILE ...</span><br><span class="line">gunzip [OPTION]... FILE ...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-c|--stdout             <span class="comment">#将压缩数据输出到标准输出中，并保留原文件</span></span><br><span class="line">-d|--decompress         <span class="comment">#解压缩,相当于gunzip</span></span><br><span class="line">-f|--force              <span class="comment">#覆盖己存在目标文件</span></span><br><span class="line">-k|--keep               <span class="comment">#保留原文件</span></span><br><span class="line">-l|--list               <span class="comment">#显示原文件大小，压缩文件大小，压缩比，压缩前文件名</span></span><br><span class="line">-q|--quiet              <span class="comment">#安静模式，忽略警告</span></span><br><span class="line">-r｜--recursive         <span class="comment">#递归压缩目录内所有文件</span></span><br><span class="line">-S|--suffix=SUF         <span class="comment">#指定压缩文件后缀</span></span><br><span class="line">-t|--<span class="built_in">test</span>               <span class="comment">#测试，检测压缩文件是否完整</span></span><br><span class="line">-v|--verbose            <span class="comment">#显示过程</span></span><br><span class="line">-1|--fast               <span class="comment">#最快压缩，压缩比最底，但压缩速度快</span></span><br><span class="line">-9|--best               <span class="comment">#最好压缩，压缩比最高，但压缩速度慢</span></span><br><span class="line">-N                      <span class="comment">#指定压缩等级，取值为1-9之间，默认6</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#保留原文件，并显示压缩过程</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># gzip -vk fstab passwd </span></span><br><span class="line">fstab:   50.3% -- created fstab.gz</span><br><span class="line">passwd:  61.2% -- created passwd.gz</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ls</span></span><br><span class="line"> dir1  fstab  fstab.gz  passwd  passwd.gz  shadow</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#重定向到文件</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># gzip fstab -c &gt; fstab.gz</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#管道</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># cat passwd | gzip &gt; pwd.gz</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#自定义后缀名</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># gzip -kv fstab -S .gzzz</span></span><br><span class="line"> fstab:   50.3% -- created fstab.gzzz</span><br><span class="line">     </span><br><span class="line"> <span class="comment">#递归压缩目录</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># gzip -vrk dir1/</span></span><br><span class="line"> dir1/dir2/messages:  86.1% -- created dir1/dir2/messages.gz</span><br><span class="line"> dir1/fstab:          50.3% -- created dir1/fstab.gz</span><br><span class="line"> dir1/dnf.log:        91.2% -- created dir1/dnf.log.gz</span><br><span class="line"> dir1/passwd:         61.2% -- created dir1/passwd.gz</span><br><span class="line"></span><br><span class="line"> <span class="comment">#显示压缩文件信息</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># gzip -l fstab.gz</span></span><br><span class="line">         compressed        uncompressed  ratio uncompressed_name</span><br><span class="line">                382                 720  50.3% fstab</span><br><span class="line"> </span><br><span class="line">[root@rocky86 0726]<span class="comment"># gzip -l fstab.gz passwd.gz</span></span><br><span class="line">         compressed        uncompressed  ratio uncompressed_name</span><br><span class="line">                382                 720  50.3% fstab</span><br><span class="line">               1134                2858  61.2% passwd</span><br><span class="line">               1516                3578  58.3% (totals)</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#解压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># gunzip -vkf fstab.gz passwd.gz </span></span><br><span class="line">  fstab.gz:    50.3% -- replaced with fstab</span><br><span class="line"> passwd.gz:    61.2% -- replaced with passwd</span><br></pre></td></tr></table></figure>

<h2 id="bzip2和bunzip2"><a href="#bzip2和bunzip2" class="headerlink" title="bzip2和bunzip2"></a>bzip2和bunzip2</h2><p>来自于 bzip2 包</p>
<p>对应的文件是 .bz2 后缀</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">bzip2 [OPTION]... FILE ...</span><br><span class="line">bunzip2 [OPTION]... FILE ...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-d|--decompress             <span class="comment">#解压缩,相当于bunzip2</span></span><br><span class="line">-z|--compress               <span class="comment">#强制压缩</span></span><br><span class="line">-k|--keep                   <span class="comment">#保留原文件</span></span><br><span class="line">-f|--force                  <span class="comment">#覆盖己存在目标文件</span></span><br><span class="line">-t|--<span class="built_in">test</span>                   <span class="comment">#测试，检测压缩文件是否完整</span></span><br><span class="line">-c|--stdout                 <span class="comment">#将压缩数据输出到标准输出中，并保留原文件</span></span><br><span class="line">-q|--quiet                  <span class="comment">#安静模式，忽略警告</span></span><br><span class="line">-v|--verbose                <span class="comment">#显示过程</span></span><br><span class="line">-N                          <span class="comment">#指定压缩等级，取值为1-9之间，默认9</span></span><br><span class="line">--fast                      <span class="comment">#同 -1</span></span><br><span class="line">--best                      <span class="comment">#同 -9</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#保留原文件，并显示过程</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># bzip2 -kv fstab passwd </span></span><br><span class="line">  fstab:    1.731:1,  4.622 bits/byte, 42.22% saved, 720 <span class="keyword">in</span>, 416 out.</span><br><span class="line">  passwd:   2.516:1,  3.180 bits/byte, 60.25% saved, 2858 <span class="keyword">in</span>, 1136 out.</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#输出重定向</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># bzip2 fstab -cv &gt; fstab.bz2</span></span><br><span class="line">  fstab:    1.731:1,  4.622 bits/byte, 42.22% saved, 720 <span class="keyword">in</span>, 416 out.</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#管道+输出重寅</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># cat fstab | bzip2 -cv &gt;fstab.bz2 </span></span><br><span class="line">  (stdin):  1.731:1,  4.622 bits/byte, 42.22% saved, 720 <span class="keyword">in</span>, 416 out.</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#解压缩  </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># bunzip2 -kfv fstab.bz2 </span></span><br><span class="line">  fstab.bz2: <span class="keyword">done</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#不解压查看文件内容</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># bzcat fstab.bz2</span></span><br></pre></td></tr></table></figure>

<h2 id="xz-和-unxz"><a href="#xz-和-unxz" class="headerlink" title="xz 和 unxz"></a>xz 和 unxz</h2><p>来自于 xz 包</p>
<p>对应的文件是 .xz 后缀</p>
<p>格式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xz [OPTION]... FILE ...</span><br><span class="line">unxz [OPTION]... FILE ...</span><br><span class="line"></span><br><span class="line"> <span class="comment">#常用选项</span></span><br><span class="line"> -z|--compress               <span class="comment">#强制压缩</span></span><br><span class="line"> -d|--decompress             <span class="comment">#解压缩,相当于unxz</span></span><br><span class="line"> -t|--<span class="built_in">test</span>                   <span class="comment">#测试，检测压缩文件是否完整</span></span><br><span class="line"> -l|--list                   <span class="comment">#查看压缩文件相关信息</span></span><br><span class="line"> -k|--keep                   <span class="comment">#保留原文件</span></span><br><span class="line"> -f|--force                  <span class="comment">#覆盖己存在目标文件</span></span><br><span class="line"> -c|--stdout                 <span class="comment">#将压缩数据输出到标准输出中，并保留原文件</span></span><br><span class="line"> -T|--threads=NUM            <span class="comment">#开多线程，默认1</span></span><br><span class="line"> -q|--quiet                  <span class="comment">#安静模式，忽略警告</span></span><br><span class="line"> -v|--verbose                <span class="comment">#显示过程</span></span><br><span class="line"> -N                          <span class="comment">#指定压缩等级，取值为1-9之间，默认6</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#保留原文件</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># xz -kv messages </span></span><br><span class="line">messages (1/1)</span><br><span class="line"> 100 %        29.5 KiB / 393.1 KiB = 0.075 </span><br><span class="line"></span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># xz -l messages.xz </span></span><br><span class="line">Strms  Blocks   Compressed Uncompressed  Ratio  Check   Filename</span><br><span class="line">    1       1     29.5 KiB    393.1 KiB  0.075  CRC64   messages.xz </span><br><span class="line"></span><br><span class="line"><span class="comment">#重定向  </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># xz -kcv messages &gt; msg.xz</span></span><br><span class="line"> messages (1/1)</span><br><span class="line"> 100 %        29.5 KiB / 393.1 KiB = 0.075 </span><br><span class="line"></span><br><span class="line"><span class="comment">#解压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unxz -vfk fstab.xz msg.xz </span></span><br><span class="line">fstab.xz (1/2)</span><br><span class="line"> 100 %        444 B / 720 B = 0.617                                    </span><br><span class="line">msg.xz (2/2)</span><br><span class="line"> 100 %        29.5 KiB / 393.1 KiB = 0.075 </span><br></pre></td></tr></table></figure>

<h2 id="zip-和-unzip"><a href="#zip-和-unzip" class="headerlink" title="zip 和 unzip"></a>zip 和 unzip</h2><p>zip 可以实现打包目录和多个文件成一个文件并压缩，但可能会丢失文件属性信息，如：所有者和组信息</p>
<p>分别来自于 zip 和 unzip 包</p>
<p>对应的文件是 .zip 后缀 </p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"> zip [OPTION]... zipfile [FILE]...</span><br><span class="line"> unzip [OPTION]... zipfile [FILE]...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">#zip常用选项</span></span><br><span class="line"> -f                  <span class="comment">#更换较新的文件到压缩文件内</span></span><br><span class="line"> -u                  <span class="comment">#如果压缩包内有，则更新，如果没有，则追加进去</span></span><br><span class="line"> -d                  <span class="comment">#从压缩包内删除指定的文件</span></span><br><span class="line"> -m                  <span class="comment">#将文件压缩之后，删除原始文件</span></span><br><span class="line"> -r                  <span class="comment">#递归压缩目录</span></span><br><span class="line"> -j                  <span class="comment">#只保存文件名称及其内容，而不存放任何目录名称</span></span><br><span class="line"> -l                  <span class="comment">#压缩文件时，把LF字符置换成LF+CR字符，unzip -l 表示显示压缩文件的内容</span></span><br><span class="line"> -1                  <span class="comment">#最快压缩，数字1</span></span><br><span class="line"> -9                  <span class="comment">#最高压缩比，数字9</span></span><br><span class="line"> -q                  <span class="comment">#安静模式 </span></span><br><span class="line"> -v                  <span class="comment">#显示过程</span></span><br><span class="line"> -c                  <span class="comment">#替每个被压缩的文件加上注释</span></span><br><span class="line"> -z                  <span class="comment">#给压缩包加注释，unzip -z 查看注释</span></span><br><span class="line"> -x                  <span class="comment">#压缩时排除指定文件</span></span><br><span class="line"> -i                  <span class="comment">#仅压缩指定文件</span></span><br><span class="line"> -D                  <span class="comment">#压缩文件内不建立目录名称</span></span><br><span class="line"> -T                  <span class="comment">#测试，检测压缩文件是否完整 </span></span><br><span class="line"> -X                  <span class="comment">#不保存额外的文件属性</span></span><br><span class="line"> -y                  <span class="comment">#直接保存符号连接，而非该链接所指向的文件</span></span><br><span class="line"> -n                  <span class="comment">#不压缩以特定字符串结尾的文件</span></span><br><span class="line"> -P                  <span class="comment">#加密码</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#unzip常用选项</span></span><br><span class="line">-p                  <span class="comment">#将压缩内容通过管道传送</span></span><br><span class="line">-l                  <span class="comment">#显示压缩文件内所包含的文件</span></span><br><span class="line">-t                  <span class="comment">#测试，检测压缩文件是否完整</span></span><br><span class="line">-z                  <span class="comment">#查看注释</span></span><br><span class="line">-v                  <span class="comment">#列出包内文件信息</span></span><br><span class="line">-x                  <span class="comment">#指定不需要解压缩的文件</span></span><br><span class="line">-d                  <span class="comment">#指定解压后的目标目录</span></span><br><span class="line">-n                  <span class="comment">#解压缩时不要覆盖原有的文件 </span></span><br><span class="line">-q                  <span class="comment">#安静模式</span></span><br><span class="line">-o                  <span class="comment">#直接覆盖</span></span><br><span class="line">-a                  <span class="comment">#对文本文件进行必要的字符转换</span></span><br><span class="line">-j                  <span class="comment">#不处理压缩文件中原有的目录路径</span></span><br><span class="line">-C                  <span class="comment">#压缩文件中的文件名称区分大小写</span></span><br><span class="line">-L                  <span class="comment">#将压缩文件中的全部文件名改为小写</span></span><br><span class="line">-X                  <span class="comment">#解压缩时同时回存文件原来的UID/GID</span></span><br><span class="line">-V                  <span class="comment">#保留VMS的文件版本信息</span></span><br><span class="line">-K                  <span class="comment">#解压缩后还原权限</span></span><br><span class="line">-M                  <span class="comment">#将输出结果送到more程序处理</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># zip -v msg.zip messages </span></span><br><span class="line">  adding: messages  (<span class="keyword">in</span>=402508) (out=56530) (deflated 86%)</span><br><span class="line"> total bytes=402508, compressed=56530 -&gt; 86% savings</span><br><span class="line"></span><br><span class="line"> <span class="comment">#查看内容</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l msg.zip </span></span><br><span class="line">Archive:  msg.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">  402508  07-26-2022 09:03   messages</span><br><span class="line">---------                     ------</span><br><span class="line">402508                        1 file</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#管道，往压缩包中添加新文件</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># cat passwd | zip msg.zip passwd</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#查看</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l msg.zip </span></span><br><span class="line">Archive:  msg.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">   402508  07-26-2022 09:03   messages</span><br><span class="line">     2858  07-25-2022 22:09   passwd</span><br><span class="line">---------                     -------</span><br><span class="line">   405366                     2 files</span><br><span class="line">   </span><br><span class="line"><span class="comment">#只压缩txt</span></span><br><span class="line"> [root@rocky86 0726]<span class="comment"># zip -i&quot;*txt&quot; txt.zip *</span></span><br><span class="line">  adding: f1.txt (deflated 86%)</span><br><span class="line">  adding: f2.txt (deflated 86%)</span><br><span class="line">  adding: f3.txt (deflated 86%)</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#只压缩txt</span></span><br><span class="line"> [root@rocky86 0726]<span class="comment"># zip txt2.zip ./*txt</span></span><br><span class="line">  adding: f1.txt (stored 0%)</span><br><span class="line">  adding: f2.txt (deflated 86%)</span><br><span class="line">  adding: f3.txt (deflated 86%)</span><br></pre></td></tr></table></figure>

<p>范例：递归压缩</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tree dir1/</span></span><br><span class="line"> dir1/</span><br><span class="line"> ├── dir2</span><br><span class="line"> │   └── messages</span><br><span class="line"> ├── dnf.log</span><br><span class="line"> ├── fstab</span><br><span class="line"> └── passwd</span><br><span class="line"> </span><br><span class="line"> 1 directory, 4 files</span><br><span class="line"></span><br><span class="line"><span class="comment">#递归压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zip -r test1.zip dir1/</span></span><br><span class="line">  adding: dir1/ (stored 0%)</span><br><span class="line">  adding: dir1/dir2/ (stored 0%)</span><br><span class="line">  adding: dir1/dir2/messages (deflated 86%)</span><br><span class="line">  adding: dir1/fstab (deflated 50%)</span><br><span class="line">  adding: dir1/passwd (deflated 61%)</span><br><span class="line">  adding: dir1/dnf.log (deflated 91%)</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#当前目录所有文件</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># cd dir1/</span></span><br><span class="line">[root@rocky86 dir1]<span class="comment"># zip ../test2.zip *</span></span><br><span class="line">  adding: dir2/ (stored 0%)</span><br><span class="line">  adding: dnf.log (deflated 91%)</span><br><span class="line">  adding: fstab (deflated 50%)</span><br><span class="line">  adding: passwd (deflated 61%)</span><br><span class="line"> </span><br><span class="line">[root@rocky86 dir1]<span class="comment"># cd ..</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ll test*</span></span><br><span class="line">-rw-r--r-- 1 root root 76768 Jul 26 15:02 test1.zip</span><br><span class="line">-rw-r--r-- 1 root root 46255 Jul 26 15:02 test2.zip</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l test1.zip </span></span><br><span class="line">Archive:  test1.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">        0  07-26-2022 15:01   dir1/</span><br><span class="line">        0  07-25-2022 22:30   dir1/dir2/</span><br><span class="line">   216607  07-25-2022 21:41   dir1/dir2/messages</span><br><span class="line">      720  07-25-2022 21:39   dir1/fstab</span><br><span class="line">     2858  07-25-2022 21:43   dir1/passwd</span><br><span class="line">   501645  07-25-2022 21:40   dir1/dnf.log</span><br><span class="line">---------                     ------</span><br><span class="line">   721830                     6 files</span><br><span class="line">   </span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l test2.zip</span></span><br><span class="line"> Archive:  test2.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">        0  07-25-2022 22:30   dir2/</span><br><span class="line">   501645  07-25-2022 21:40   dnf.log</span><br><span class="line">      720  07-25-2022 21:39   fstab</span><br><span class="line">     2858  07-25-2022 21:43   passwd</span><br><span class="line">---------                     ------</span><br><span class="line">   505223                     4 files</span><br></pre></td></tr></table></figure>

<p>范例：设置密码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#非交互式加密解密</span></span><br><span class="line">[root@rocky86 dir1]<span class="comment"># zip -vP 123456 test.zip dnf.log </span></span><br><span class="line">  adding: dnf.log   (<span class="keyword">in</span>=501645) (out=44208) (deflated 91%)</span><br><span class="line"> total bytes=501645, compressed=44220 -&gt; 91% savings</span><br><span class="line"></span><br><span class="line">[root@rocky86 dir1]<span class="comment"># unzip -P 123456 test.zip </span></span><br><span class="line">Archive:  test.zip</span><br><span class="line">  inflating: dnf.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#交互式加密解密</span></span><br><span class="line">[root@rocky86 dir1]<span class="comment"># zip -ve test.zip dnf.log </span></span><br><span class="line">Enter password: </span><br><span class="line">Verify password: </span><br><span class="line">updating: dnf.log   (<span class="keyword">in</span>=501645) (out=44208) (deflated 91%)</span><br><span class="line">total bytes=501645, compressed=44220 -&gt; 91% savings</span><br><span class="line"></span><br><span class="line">[root@rocky86 dir1]<span class="comment"># unzip test.zip </span></span><br><span class="line">Archive:  test.zip</span><br><span class="line"> [test.zip] dnf.log password: </span><br><span class="line">  inflating: dnf.log </span><br></pre></td></tr></table></figure>

<p>范例：更新和删除</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l txt.zip </span></span><br><span class="line">Archive:  txt.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">  2226376  07-26-2022 14:12   f1.txt</span><br><span class="line">  1946847  07-26-2022 14:09   f2.txt</span><br><span class="line">  1814952  07-26-2022 14:09   f3.txt</span><br><span class="line">---------                     ------</span><br><span class="line">  5988175                     3 files</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># echo &quot;123&quot;&gt;f1.txt</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ll f1.txt passwd</span></span><br><span class="line">-rw------- 1 root root    4 Jul 26 14:19 f1.txt</span><br><span class="line">-rw-r--r-- 1 root root 2858 Jul 25 22:09 passwd</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#如果包内不存在，则追加</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zip -vu txt.zip f1.txt passwd</span></span><br><span class="line"> updating: f1.txt    (<span class="keyword">in</span>=4) (out=4) (stored 0%)</span><br><span class="line">  adding: passwd     (<span class="keyword">in</span>=2858) (out=1109) (deflated 61%)</span><br><span class="line"> total bytes=3764661, compressed=525257 -&gt; 86% savings</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#再次查看，f1.txt 更新了</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l txt.zip </span></span><br><span class="line">Archive:  txt.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">        4  07-26-2022 14:19   f1.txt</span><br><span class="line">  1946847  07-26-2022 14:09   f2.txt</span><br><span class="line">  1814952  07-26-2022 14:09   f3.txt</span><br><span class="line">     2858  07-25-2022 22:09   passwd</span><br><span class="line">---------                     -------</span><br><span class="line">  3764661                     4 files</span><br><span class="line"></span><br><span class="line"> <span class="comment">#仅更新，不追加新文件  </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zip -vf txt.zip f1.txt messages </span></span><br><span class="line">freshening: f1.txt  (<span class="keyword">in</span>=7) (out=7) (stored 0%)</span><br><span class="line"> total bytes=3764664, compressed=525260 -&gt; 86% savings</span><br><span class="line"></span><br><span class="line"> <span class="comment">#messages没有被追加到压缩文件内</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l txt.zip </span></span><br><span class="line">Archive:  txt.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">        7  07-26-2022 14:24   f1.txt</span><br><span class="line">  1946847  07-26-2022 14:09   f2.txt</span><br><span class="line">  1814952  07-26-2022 14:09   f3.txt</span><br><span class="line">     2858  07-25-2022 22:09   passwd</span><br><span class="line">---------                     ------</span><br><span class="line">  3764664                     4 files</span><br><span class="line"></span><br><span class="line"> <span class="comment">#从 txt.zip 中删除 f3.txt</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zip -d txt.zip f3.txt </span></span><br><span class="line">deleting: f3.txt</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -l txt.zip </span></span><br><span class="line">Archive:  txt.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">        7  07-26-2022 14:24   f1.txt</span><br><span class="line">  1946847  07-26-2022 14:09   f2.txt</span><br><span class="line">     2858  07-25-2022 22:09   passwd</span><br><span class="line">---------                     ------</span><br><span class="line">  1949712                     3 files</span><br></pre></td></tr></table></figure>

<p>范例：注释</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#添加注释信息，ctrl+d结束</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zip -z txt.zip </span></span><br><span class="line">enter new zip file comment (end with .):</span><br><span class="line">this is <span class="built_in">test</span> des</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#查看注释，unzip -l 也可查看</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -z txt.zip </span></span><br><span class="line">Archive:  txt.zip</span><br><span class="line">this is <span class="built_in">test</span> des</span><br></pre></td></tr></table></figure>

<p>范例：解压缩</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定解压目录，不解压指定文件</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip txt.zip -x f3.txt -d ./txt</span></span><br><span class="line"> Archive:  txt.zip</span><br><span class="line">  inflating: ./txt/f1.txt            </span><br><span class="line">  inflating: ./txt/f2.txt   </span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ll txt</span></span><br><span class="line"> total 1912</span><br><span class="line"> -rw-r--r-- 1 root root    4453 Jul 26 15:19 f1.txt</span><br><span class="line"> -rw------- 1 root root 1946847 Jul 26 14:09 f2.txt</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#查看</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># unzip -v txt.zip</span></span><br><span class="line">Archive:  txt.zip</span><br><span class="line"> Length   Method    Size  Cmpr    Date    Time   CRC-32   Name</span><br><span class="line">--------  ------  ------- ---- ---------- ----- --------  ----</span><br><span class="line">    4453  Defl:N     1661  63% 07-26-2022 15:19 a30efa6e  f1.txt</span><br><span class="line"> 1946847  Defl:N   269213  86% 07-26-2022 14:09 add171e4  f2.txt</span><br><span class="line"> 1814952  Defl:N   254931  86% 07-26-2022 14:09 eb2f160b  f3.txt</span><br><span class="line">--------          -------  ---                            ------</span><br><span class="line"> 3766252           525805  86%                            3 files </span><br></pre></td></tr></table></figure>

<h2 id="zcat"><a href="#zcat" class="headerlink" title="zcat"></a>zcat</h2><p>zcat 来源于 “zip cat” 的缩写，见字知义</p>
<p>其功能是在不解压的情况下查看压缩文件内容</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">zcat [OPTION]... [FILE]...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-c              <span class="comment">#将内容输出到标准输出，默认</span></span><br><span class="line">-d              <span class="comment">#解压缩</span></span><br><span class="line">-l              <span class="comment">#显示压缩文件(包)内的文件列表</span></span><br><span class="line">-r              <span class="comment">#在目上递归操作</span></span><br><span class="line">-t              <span class="comment">#测试压缩文件完整性</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># zcat fstab.Z </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zcat fstab.gz </span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># zcat fstab.zip</span></span><br></pre></td></tr></table></figure>

<h2 id="压缩率比较"><a href="#压缩率比较" class="headerlink" title="压缩率比较"></a>压缩率比较</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0725]<span class="comment"># compress hwdb.bin -vc &gt; hwdb.bin.Z</span></span><br><span class="line">[root@rocky86 0725]<span class="comment"># gzip -kv hwdb.bin</span></span><br><span class="line">[root@rocky86 0725]<span class="comment"># bzip2 -kv hwdb.bin</span></span><br><span class="line">[root@rocky86 0725]<span class="comment"># xz -kv hwdb.bin</span></span><br><span class="line">[root@rocky86 0725]<span class="comment"># zip -v hwdb.zip hwdb.bin</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 0725]<span class="comment"># ll hwdb.* -h -S</span></span><br><span class="line">-r--r--r-- 1 root root  11M Jul 26 20:48 hwdb.bin</span><br><span class="line">-rw-r--r-- 1 root root 2.8M Jul 26 21:40 hwdb.bin.Z</span><br><span class="line">-rw-r--r-- 1 root root 2.0M Jul 26 21:41 hwdb.zip</span><br><span class="line">-r--r--r-- 1 root root 2.0M Jul 26 20:48 hwdb.bin.gz</span><br><span class="line">-r--r--r-- 1 root root 1.7M Jul 26 20:48 hwdb.bin.bz2</span><br><span class="line">-r--r--r-- 1 root root 1.4M Jul 26 20:48 hwdb.bin.xz</span><br></pre></td></tr></table></figure>

<h1 id="打包和解包"><a href="#打包和解包" class="headerlink" title="打包和解包"></a>打包和解包</h1><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><p>tar 即 Tape ARchive 磁带归档，可以对目录和多个文件打包成一个文件进行归档；</p>
<p> 其本身不具备压缩功能，但可以使用参数调用相应的压缩命令进行压缩； </p>
<p>此命令可以保留文件属性，推荐使用； </p>
<p>对应的文件是 .tar 后缀</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar [OPTION...] [FILE]...</span><br><span class="line"><span class="comment">#tar &#123;A|c|d|r|t|u|x&#125;[GnSkUWOmpsMBiajJzZhPlRvwo] [ARG...]</span></span><br></pre></td></tr></table></figure>

<p> UNIX 风格写法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar -A [OPTIONS] ARCHIVE ARCHIVE</span><br><span class="line">tar -c [-f ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar -d [-f ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar -t [-f ARCHIVE] [OPTIONS] [MEMBER...]</span><br><span class="line">tar -r [-f ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar -u [-f ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar -x [-f ARCHIVE] [OPTIONS] [MEMBER...]</span><br></pre></td></tr></table></figure>

<p>GNU 风格写法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tar &#123;--catenate|--concatenate&#125; [OPTIONS] ARCHIVE ARCHIVE</span><br><span class="line">tar --create [--file ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar &#123;--diff|--compare&#125; [--file ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar --delete [--file ARCHIVE] [OPTIONS] [MEMBER...]</span><br><span class="line">tar --append [-f ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar --list [-f ARCHIVE] [OPTIONS] [MEMBER...]</span><br><span class="line">tar --test-label [--file ARCHIVE] [OPTIONS] [LABEL...]</span><br><span class="line">tar --update [--file ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar --update [-f ARCHIVE] [OPTIONS] [FILE...]</span><br><span class="line">tar &#123;--extract|--get&#125; [-f ARCHIVE] [OPTIONS] [MEMBER...]</span><br></pre></td></tr></table></figure>

<p>常用选项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#必选项 &#123;A|c|d|r|t|u|x&#125;</span></span><br><span class="line">-A|--catenate|--concatenate         <span class="comment">#追加 tar 文件至归档</span></span><br><span class="line">-c|--create                         <span class="comment">#创建一个新归档</span></span><br><span class="line">-d|--diff|--compare                 <span class="comment">#找出归档和文件系统的差异</span></span><br><span class="line">--delete                            <span class="comment">#从归档(非磁带！)中删除</span></span><br><span class="line">-r|--append                         <span class="comment">#追加文件至归档结尾</span></span><br><span class="line">-t|--list                           <span class="comment">#列出归档内容</span></span><br><span class="line">--test-label                        <span class="comment">#测试归档卷标并退出</span></span><br><span class="line">-u|--update                         <span class="comment">#仅追加比归档中副本更新的文件</span></span><br><span class="line">-x|--extract|--get                  <span class="comment">#从归档中解出文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -f 选项</span></span><br><span class="line">-f|--file=ARCHIVE                   <span class="comment">#指定压缩包文件，大多数必选</span></span><br></pre></td></tr></table></figure>

<p>OPTIONS选项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#OPTIONS选项 [GnSkUWOmpsMBiajJzZhPlRvwo],这些选项要注意位置</span></span><br><span class="line"></span><br><span class="line">-G|--incremental                    <span class="comment">#处理老式的 GNU 格式的增量备份</span></span><br><span class="line">-n|--seek                           <span class="comment">#归档可检索</span></span><br><span class="line">-S|--sparse                         <span class="comment">#高效处理离散文件</span></span><br><span class="line">-k|--keep-old-files                 <span class="comment">#解包时不覆盖已有的文件</span></span><br><span class="line">-U|--unlink-first                   <span class="comment">#解压之前先删除文件的链接</span></span><br><span class="line">-W|--verify                         <span class="comment">#在写入以后尝试校验归档</span></span><br><span class="line">-O|--to-stdout                      <span class="comment">#解压文件至标准输出</span></span><br><span class="line">--to-command=COMMAND                <span class="comment">#将解压的文件通过管道传送至另一个程序</span></span><br><span class="line">-m|--<span class="built_in">touch</span>                          <span class="comment">#不要解压文件的修改时间</span></span><br><span class="line">-p|--preserve-permissions|--same-permissions       <span class="comment">#保留文件权限信息</span></span><br><span class="line">-s|--preserve-order|--same-order    <span class="comment">#成员参数按归档中的文件顺序列出</span></span><br><span class="line">-M|--multi-volume                   <span class="comment">#创建/列出/解压多卷归档文件</span></span><br><span class="line">-B|--read-full-records              <span class="comment">#读取时重新分块(只对 4.2BSD 管道有效)</span></span><br><span class="line">-i|--ignore-zeros                   <span class="comment">#忽略归档中的零字节块(即文件结尾)</span></span><br><span class="line">-a|--auto-compress                  <span class="comment">#使用归档后缀名来决定压缩程序</span></span><br><span class="line">-j|--bzip2                          <span class="comment">#使用 bzip2 压缩或解压缩</span></span><br><span class="line">-J|--xz                             <span class="comment">#使用 xz 压缩或解压缩</span></span><br><span class="line">--lzip|--lzma|--lzop                <span class="comment">#lzip|xz --format=lzma|lzop</span></span><br><span class="line">-z|--gzip|--gunzip|--ungzip         <span class="comment">#通过 gzip 压缩或解压缩</span></span><br><span class="line">-Z|--compress|--uncompress          <span class="comment">#通过 compress 压缩或解压缩</span></span><br><span class="line">-h|--dereference                    <span class="comment">#将软链接指向的目标文件也压缩打包</span></span><br><span class="line">--hard-dereference                  <span class="comment">#将硬链接指向的目标文件也压缩打包</span></span><br><span class="line">-P|--absolute-names                 <span class="comment">#不要从文件名中清除引导符‘/’</span></span><br><span class="line">-l|--check-links                    <span class="comment">#只输出非链接文件的信息</span></span><br><span class="line">-R|--block-number                   <span class="comment">#每个信息都显示归档内的块数</span></span><br><span class="line">-v|--verbose                        <span class="comment">#列出文件详细信息</span></span><br><span class="line">-w|--interactive|--confirmation     <span class="comment">#操作前手动确认</span></span><br><span class="line">-o                                  <span class="comment">#用老旧的 V7 tar 格式打包或解包</span></span><br></pre></td></tr></table></figure>

<p>压缩选项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-z                     <span class="comment">#相当于gzip压缩工具</span></span><br><span class="line">-j                     <span class="comment">#相当于bzip2压缩工具</span></span><br><span class="line">-J                     <span class="comment">#相当于xz压缩工具</span></span><br></pre></td></tr></table></figure>

<p>其它选项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--show-defaults                     <span class="comment">#显示 tar 默认选项</span></span><br><span class="line">--exclude                           <span class="comment">#排除文件</span></span><br><span class="line">-C|--directory=DIR                  <span class="comment">#指定目录</span></span><br><span class="line">-T|--files-from=FILE                <span class="comment">#从文件中读取要处理的文件</span></span><br><span class="line">-X|--exclude-from=FILE              <span class="comment">#从文件中读取要排除的文件</span></span><br><span class="line">--version                           <span class="comment">#显示版本号</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认采用相对路径</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -cf etc.tar /etc</span></span><br><span class="line"> tar: Removing leading `/<span class="string">&#x27; from member names</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#P保留路径</span></span><br><span class="line"><span class="string">[root@rocky86 0726]# tar -cPf etc2.tar /etc</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#只打包，不压缩</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -cvf test.tar f1.txt f2.txt</span></span><br><span class="line"> f1.txt</span><br><span class="line"> f2.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#递归打包目录</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -cvf log.tar /var/log</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">#大小相同</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># du -sh /var/log/</span></span><br><span class="line"> 13M /var/log/</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># ll -h log.tar</span></span><br><span class="line"> -rw-r--r-- 1 root root 13M Jul 26 15:57 log.tar</span><br></pre></td></tr></table></figure>

<p>范例：只打包目录内的文件，不所括目录本身</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cd /etc/</span></span><br><span class="line">[root@rocky86 etc]<span class="comment"># tar -cf etc.tar *</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#先指定目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tar -C /etc/ -cf etc.tar ./</span></span><br></pre></td></tr></table></figure>

<p>范例：追加和删除</p>
<p>不支持对压缩文件追加</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tar -tvf test.tar</span></span><br><span class="line">-rw-r--r-- root/root      4453 2022-07-26 15:19 f1.txt</span><br><span class="line">-rw------- root/root   1946847 2022-07-26 14:09 f2.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#追加</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -rf test.tar f3.txt passwd</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -tvf test.tar</span></span><br><span class="line">-rw-r--r-- root/root      4453 2022-07-26 15:19 f1.txt</span><br><span class="line">-rw------- root/root   1946847 2022-07-26 14:09 f2.txt</span><br><span class="line">-rw------- root/root   1814952 2022-07-26 14:09 f3.txt</span><br><span class="line">-rw-r--r-- root/root      2858 2022-07-25 22:09 passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar --delete -vf test.tar f1.txt f2.txt</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -tvf test.tar</span></span><br><span class="line">-rw------- root/root   1814952 2022-07-26 14:09 f3.txt</span><br><span class="line">-rw-r--r-- root/root      2858 2022-07-25 22:09 passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">#将test1.tar 中的文件解出来再打包到  test2.tar 中，test1.tar 中不删除</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -A test.tar -f test2.tar</span></span><br></pre></td></tr></table></figure>

<p>范例：列出包内文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tar -tvf test.tar </span></span><br><span class="line">-rw------- root/root   1814952 2022-07-26 14:09 f3.txt</span><br><span class="line">-rw-r--r-- root/root      2858 2022-07-25 22:09 passwd</span><br></pre></td></tr></table></figure>

<p>范例：解包</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tar -xf log.tar</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#指定目录</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -xf log.tar -C /tmp</span></span><br></pre></td></tr></table></figure>

<p>范例：打包并压缩</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tar -zcvf etc.tar.gz /etc/</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -jcvf etc.tar.bz2 /etc/</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -Jcvf etc.tar.xz /etc/</span></span><br><span class="line"></span><br><span class="line">root@rocky86 0726]<span class="comment"># ll -h etc.tar.*</span></span><br><span class="line">-rw-r--r-- 1 root root 4.7M Jul 26 16:37 etc.tar.bz2</span><br><span class="line">-rw-r--r-- 1 root root 6.4M Jul 26 16:36 etc.tar.gz</span><br><span class="line">-rw-r--r-- 1 root root 4.0M Jul 26 16:37 etc.tar.xz</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -xf etc.tar.gz -C  /tmp/etc-gz/</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -xf etc.tar.bz2 -C /tmp/etc-bz2/</span></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -xf etc.tar.xz -C  /tmp/etc-xz/</span></span><br></pre></td></tr></table></figure>

<p>范例：从文件中读取要打包的文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># cat list.txt </span></span><br><span class="line"> f1.txt</span><br><span class="line"> f2.txt</span><br><span class="line"></span><br><span class="line">[root@rocky86 0726]<span class="comment"># tar -zcvf x.tar.gz -T list.txt </span></span><br><span class="line"> f1.txt</span><br><span class="line"> f2.txt</span><br></pre></td></tr></table></figure>

<p>范例：排除和包含文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定跳过的文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tar zcvf /root/a.tgz  --exclude=/app/host1 --exclude=/app/host2 /app</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#从文件读取</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tar zcvf mybackup.tgz -T /root/includefilelist -X /root/excludefilelist</span></span><br></pre></td></tr></table></figure>

<p>范例：查看默认选项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0726]<span class="comment"># tar --show-defaults</span></span><br><span class="line">--format=gnu -f- -b20 --quoting-style=escape --rmt-command=/etc/rmt --rsh-command=/usr/bin/ssh</span><br></pre></td></tr></table></figure>

<h2 id="split"><a href="#split" class="headerlink" title="split"></a>split</h2><p>split 命令可以分割一个文件为多个文件 </p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">split</span> [OPTION]... [FILE [PREFIX]]</span><br><span class="line"></span><br><span class="line"> <span class="comment">#常用选项</span></span><br><span class="line"> -b|--bytes=SIZE                 <span class="comment">#按大小指定分割单位</span></span><br><span class="line"> -C|--line-bytes=SIZE            <span class="comment">#同-b，但是在切割时将尽量维持每行的完整性</span></span><br><span class="line"> -d                              <span class="comment">#切割后小文件的后缀用数字表示</span></span><br><span class="line"> -l|--lines=NUMBER               <span class="comment">#指定行数，按多少行切一个小文件</span></span><br><span class="line"> --verbose                       <span class="comment">#显示过程</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将test.txt 以6行为单位进行切切割成以 x 为前缀名称的小文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># split -l 6 test.txt       </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#同上</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># split -6 test.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#以1M大小为单位切割，小文件以数字为后缀，etc.part 开头</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># split -b 1M etc.tar.gz -d etc.part</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示过程</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># split --verbose -b 1M etc.tar.gz -d etc.part</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#合并回去</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat etc.part* &gt; etc.tar.gz</span></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">W</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/10/20/Day06-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/">http://example.com/2024/10/20/Day06-文件查找和打包压缩/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SRE/">SRE</a></div><div class="post_share"><div class="social-share" data-image="/../images/title/linux1.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2024/10/12/docker-push/" title="一键 docker 打标签 &amp; 上传到 Harbor"><img class="cover" src="/../images/title/docker-sh.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">一键 docker 打标签 &amp; 上传到 Harbor</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/04/23/Day01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8CLinux%E5%AE%89%E8%A3%85/" title="计算机基础和linux安装"><img class="cover" src="/../images/title/linux1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-23</div><div class="title">计算机基础和linux安装</div></div></a></div><div><a href="/2024/08/27/Day03-Linux%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91/" title="Linux文件管理和IO重定向"><img class="cover" src="/../images/title/linux3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-27</div><div class="title">Linux文件管理和IO重定向</div></div></a></div><div><a href="/2024/04/24/Day02-Linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%92%8C%E5%B8%AE%E5%8A%A9/" title="Linux基本操作和帮助"><img class="cover" src="/../images/title/linux2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-24</div><div class="title">Linux基本操作和帮助</div></div></a></div><div><a href="/2024/08/31/Day04-%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="用户和权限管理"><img class="cover" src="/../images/title/linux4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-31</div><div class="title">用户和权限管理</div></div></a></div><div><a href="/2024/09/23/Day05-%E5%B8%B8%E8%A7%81%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="常见文本处理工具和正则表达式"><img class="cover" src="/../images/title/linux5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-23</div><div class="title">常见文本处理工具和正则表达式</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/../images/title/user.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">W</div><div class="author-info__description">O&M</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE"><span class="toc-number">1.</span> <span class="toc-text">文件查找</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#locate"><span class="toc-number">1.1.</span> <span class="toc-text">locate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#find"><span class="toc-number">1.2.</span> <span class="toc-text">find</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%90%9C%E7%B4%A2%E7%9B%AE%E5%BD%95%E5%B1%82%E7%BA%A7"><span class="toc-number">1.2.1.</span> <span class="toc-text">指定搜索目录层级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E5%86%8D%E5%A4%84%E7%90%86%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.2.</span> <span class="toc-text">先处理文件再处理目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%90%8D%E5%92%8Cinode%E6%9F%A5%E6%89%BE"><span class="toc-number">1.2.3.</span> <span class="toc-text">根据文件名和inode查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%B1%9E%E4%B8%BB%E5%B1%9E%E7%BB%84%E6%9F%A5%E6%89%BE"><span class="toc-number">1.2.4.</span> <span class="toc-text">根据属主属组查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%9F%A5%E6%89%BE"><span class="toc-number">1.2.5.</span> <span class="toc-text">根据文件类型查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.6.</span> <span class="toc-text">空文件或目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.2.7.</span> <span class="toc-text">组合条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E9%99%A4%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.8.</span> <span class="toc-text">排除目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E6%9D%A5%E6%9F%A5%E6%89%BE"><span class="toc-number">1.2.9.</span> <span class="toc-text">根据文件大小来查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.2.10.</span> <span class="toc-text">根据时间戳</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%9D%83%E9%99%90%E6%9F%A5%E6%89%BE"><span class="toc-number">1.2.11.</span> <span class="toc-text">根据权限查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.12.</span> <span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%8A%A8%E4%BD%9C"><span class="toc-number">1.2.13.</span> <span class="toc-text">处理动作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E6%9B%BF%E6%8D%A2xargs"><span class="toc-number">1.3.</span> <span class="toc-text">参数替换xargs</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-number">2.</span> <span class="toc-text">压缩和解压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#compress-%E5%92%8C-uncompress"><span class="toc-number">2.1.</span> <span class="toc-text">compress 和 uncompress</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gzip%E5%92%8Cgunzip"><span class="toc-number">2.2.</span> <span class="toc-text">gzip和gunzip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bzip2%E5%92%8Cbunzip2"><span class="toc-number">2.3.</span> <span class="toc-text">bzip2和bunzip2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xz-%E5%92%8C-unxz"><span class="toc-number">2.4.</span> <span class="toc-text">xz 和 unxz</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zip-%E5%92%8C-unzip"><span class="toc-number">2.5.</span> <span class="toc-text">zip 和 unzip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zcat"><span class="toc-number">2.6.</span> <span class="toc-text">zcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E7%8E%87%E6%AF%94%E8%BE%83"><span class="toc-number">2.7.</span> <span class="toc-text">压缩率比较</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%92%8C%E8%A7%A3%E5%8C%85"><span class="toc-number">3.</span> <span class="toc-text">打包和解包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tar"><span class="toc-number">3.1.</span> <span class="toc-text">tar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#split"><span class="toc-number">3.2.</span> <span class="toc-text">split</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/10/20/Day06-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/" title="文件查找和打包压缩"><img src="/../images/title/linux1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文件查找和打包压缩"/></a><div class="content"><a class="title" href="/2024/10/20/Day06-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/" title="文件查找和打包压缩">文件查找和打包压缩</a><time datetime="2024-10-19T16:00:00.000Z" title="发表于 2024-10-20 00:00:00">2024-10-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/12/docker-push/" title="一键 docker 打标签 &amp; 上传到 Harbor"><img src="/../images/title/docker-sh.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一键 docker 打标签 &amp; 上传到 Harbor"/></a><div class="content"><a class="title" href="/2024/10/12/docker-push/" title="一键 docker 打标签 &amp; 上传到 Harbor">一键 docker 打标签 &amp; 上传到 Harbor</a><time datetime="2024-10-11T16:16:00.000Z" title="发表于 2024-10-12 00:16:00">2024-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/12/hadoop%E8%84%9A%E6%9C%AC/" title="基于完全分布式模式部署 Hadoop"><img src="/../images/title/hadoop-jb.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于完全分布式模式部署 Hadoop"/></a><div class="content"><a class="title" href="/2024/10/12/hadoop%E8%84%9A%E6%9C%AC/" title="基于完全分布式模式部署 Hadoop">基于完全分布式模式部署 Hadoop</a><time datetime="2024-10-11T16:10:00.000Z" title="发表于 2024-10-12 00:10:00">2024-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/12/markdown%E6%96%87%E5%AD%97%E6%95%88%E6%9E%9C/" title="markdown 文字效果"><img src="/../images/title/markdown.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="markdown 文字效果"/></a><div class="content"><a class="title" href="/2024/10/12/markdown%E6%96%87%E5%AD%97%E6%95%88%E6%9E%9C/" title="markdown 文字效果">markdown 文字效果</a><time datetime="2024-10-11T16:00:00.000Z" title="发表于 2024-10-12 00:00:00">2024-10-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By W</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index"><img src="https://jihulab.com/wsq1203/images/-/raw/main/gonganbeian/icp.png" width="15" height="15">豫ICP备2023009931号</a></br><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162702000178" target="_blank"><img src="https://jihulab.com/wsq1203/images/-/raw/main/gonganbeian/beian.png" width="15" height="15">豫公网安备 41162702000178号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas id="universe"></canvas><script src="/js/universe.js"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>