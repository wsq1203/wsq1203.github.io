<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux文件管理和IO重定向 | ૮(˶ᵔ ᵕ ᵔ˶)ა</title><meta name="author" content="૮(˶ᵔ ᵕ ᵔ˶)ა"><meta name="copyright" content="૮(˶ᵔ ᵕ ᵔ˶)ა"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Site Reliability Engineering">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux文件管理和IO重定向">
<meta property="og:url" content="http://example.com/2024/08/27/SRE-Linux%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91/index.html">
<meta property="og:site_name" content="૮(˶ᵔ ᵕ ᵔ˶)ა">
<meta property="og:description" content="Site Reliability Engineering">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/TITLE/linux3.jpg">
<meta property="article:published_time" content="2024-08-26T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-01T11:34:55.908Z">
<meta property="article:author" content="૮(˶ᵔ ᵕ ᵔ˶)ა">
<meta property="article:tag" content="SRE">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/TITLE/linux3.jpg"><link rel="shortcut icon" href="/../images/TITLE/user.webp"><link rel="canonical" href="http://example.com/2024/08/27/SRE-Linux%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux文件管理和IO重定向',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2025-04-01 19:34:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/../images/TITLE/user.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">101</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">34</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../images/TITLE/linux3.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="૮(˶ᵔ ᵕ ᵔ˶)ა"><span class="site-name">૮(˶ᵔ ᵕ ᵔ˶)ა</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux文件管理和IO重定向</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-26T16:00:00.000Z" title="发表于 2024-08-27 00:00:00">2024-08-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-04-01T11:34:55.908Z" title="更新于 2025-04-01 19:34:55">2025-04-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>60分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux文件管理和IO重定向"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="文件系统目录结构"><a href="#文件系统目录结构" class="headerlink" title="文件系统目录结构"></a>文件系统目录结构</h1><p><img src="../../../../images/SRE/day03/1.png" alt="1"></p>
<p><strong>FHS文件系统</strong></p>
<p>FHS（Filesystem Hierarchy Standard：文件系统层次化标准），是由Linux基金会维护的，帮助发行版 厂商和开发者们使用共同的标准来约定其发行的Linux系统或开发的软件遵守共同的文件和目录标准。</p>
<p>FHS是多数Linux版本采用的文件组织形式，采用树形结构组织文件。FHS定义了系统中每个区域的用 途、所需要的最小构成的文件和目录，同时还给出了例外处理与矛盾处理。</p>
<p>官方网站：<a target="_blank" rel="noopener" href="https://www.pathname.com/fhs/">https://www.pathname.com/fhs/</a></p>
<h2 id="文件系统的目录结构"><a href="#文件系统的目录结构" class="headerlink" title="文件系统的目录结构"></a>文件系统的目录结构</h2><ul>
<li>文件和目录被组织成一个单根倒置树结构</li>
<li>文件系统从根目录下开始，用“/”表示</li>
<li>根文件系统(rootfs)：root filesystem</li>
<li>标准Linux文件系统（如：ext4），文件名称大小写敏感，例如：MAIL, Mail, mail, mAiL</li>
<li>以 . 开头的文件为隐藏文件</li>
<li>路径分隔的 /</li>
<li>文件名最长255个字节</li>
<li>包括路径在内文件名称最长4095个字节</li>
<li>蓝色–&gt;目录 绿色–&gt;可执行文件 红色–&gt;压缩文件 浅蓝色–&gt;链接文件 灰色–&gt;其他文件</li>
<li>除了斜杠和NUL，所有字符都有效。但使用特殊字符的目录名和文件不推荐使用，有些字符需要用引号来引用</li>
<li>每个文件都有两类相关数据：元数据：metadata，即属性， 数据：data，即文件内容</li>
</ul>
<h2 id="常见的文件系统目录功能"><a href="#常见的文件系统目录功能" class="headerlink" title="常见的文件系统目录功能"></a>常见的文件系统目录功能</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/boot              <span class="comment">#引导文件存放目录，内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录</span></span><br><span class="line">/bin               <span class="comment">#所有用户使用的基本命令；不能关联至独立分区，OS启动即会用到的程序</span></span><br><span class="line">/sbin              <span class="comment">#管理类的基本命令；不能关联至独立分区，OS启动即会用到的程序</span></span><br><span class="line">/lib               <span class="comment">#启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules)</span></span><br><span class="line">/lib64             <span class="comment">#专用于x86_64系统上的辅助共享库文件存放位置</span></span><br><span class="line">/etc               <span class="comment">#配置文件目录</span></span><br><span class="line">/home/USERNAME     <span class="comment">#普通用户家目录</span></span><br><span class="line">/root              <span class="comment">#管理员的家目录</span></span><br><span class="line">/media             <span class="comment">#便携式移动设备挂载点</span></span><br><span class="line">/mnt               <span class="comment">#临时文件系统挂载点</span></span><br><span class="line">/dev               <span class="comment">#设备文件及特殊文件存储位置, b:block device，随机访问，c:character device，线性访问</span></span><br><span class="line">/opt               <span class="comment">#第三方应用程序的安装位置</span></span><br><span class="line">/srv               <span class="comment">#系统上运行的服务用到的数据</span></span><br><span class="line">/tmp               <span class="comment">#临时文件存储位置</span></span><br><span class="line">/usr               <span class="comment">#universal shared, read-only data</span></span><br><span class="line">/usr/bin           <span class="comment">#保证系统拥有完整功能而提供的应用程序</span></span><br><span class="line">/usr/sbin          <span class="comment">#同上</span></span><br><span class="line">/usr/lib           <span class="comment">#32位使用</span></span><br><span class="line">/usr/lib64         <span class="comment">#只存在64位系统</span></span><br><span class="line">/usr/include       <span class="comment">#C程序的头文件(header files)</span></span><br><span class="line">/usr/share         <span class="comment">#结构化独立的数据，例如doc, man等</span></span><br><span class="line">/var               <span class="comment">#variable data files,可变数据目录</span></span><br><span class="line">/var/cache         <span class="comment">#应用程序缓存数据目录</span></span><br><span class="line">/var/lib           <span class="comment">#应用程序状态信息数据</span></span><br><span class="line">/var/local         <span class="comment">#专用于为/usr/local下的应用程序存储可变数据</span></span><br><span class="line">/var/lock          <span class="comment">#锁文件</span></span><br><span class="line">/var/log           <span class="comment">#日志目录及文件</span></span><br><span class="line">/var/opt           <span class="comment">#专用于为/opt下的应用程序存储可变数据</span></span><br><span class="line">/var/run           <span class="comment">#运行中的进程相关数据,通常用于存储进程pid文件</span></span><br><span class="line">/var/spool         <span class="comment">#应用程序数据池</span></span><br><span class="line">/var/tmp           <span class="comment">#保存系统两次重启之间产生的临时数据</span></span><br><span class="line">/proc              <span class="comment">#用于输出内核与进程信息相关的虚拟文件系统</span></span><br><span class="line">/sys               <span class="comment">#用于输出当前系统上硬件设备相关信息虚拟文件系统</span></span><br><span class="line">/selinux           <span class="comment">#security enhanced Linux，selinux相关的安全策略等信息的存储位置</span></span><br></pre></td></tr></table></figure>

<h2 id="应用程序的组成部分"><a href="#应用程序的组成部分" class="headerlink" title="应用程序的组成部分"></a>应用程序的组成部分</h2><p>不同类型文件常用的目录</p>
<table>
<thead>
<tr>
<th>文件类型</th>
<th>常用目录</th>
</tr>
</thead>
<tbody><tr>
<td>二进制文件</td>
<td>/bin,/sbin,/usr/bin,/usr/sbin,/usr/local/bin<br />/usr/local/sbin</td>
</tr>
<tr>
<td>库文件</td>
<td>/lib,/lib64,/usr/lib64,/usr/local/lib,/usr/local/lib64</td>
</tr>
<tr>
<td>配置文件</td>
<td>/etc,/etc/DIRECTORY,/usr/local/etc</td>
</tr>
<tr>
<td>帮助文件</td>
<td>/usr/share/man,/usr/share/doc,/usr/local/share/man<br />/usr/local/share/doc</td>
</tr>
</tbody></table>
<h2 id="新版本目录结构变化"><a href="#新版本目录结构变化" class="headerlink" title="新版本目录结构变化"></a>新版本目录结构变化</h2><ul>
<li>/bin 和 /usr/bin  </li>
<li>/sbin 和 /usr/sbin  </li>
<li>/lib 和/usr/lib  </li>
<li>/lib64 和 /usr/lib64</li>
</ul>
<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]<span class="comment">#ls /bin /sbin /lib /lib64 -ld</span></span><br><span class="line">lrwxrwxrwx. 1 root root 7 May 11 2019 /bin -&gt; usr/bin</span><br><span class="line">lrwxrwxrwx. 1 root root 7 May 11 2019 /lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx. 1 root root 9 May 11 2019 /lib64 -&gt; usr/lib64</span><br><span class="line">lrwxrwxrwx. 1 root root 8 May 11 2019 /sbin -&gt; usr/sbin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@centos6 ~]<span class="comment">#ls /bin /sbin /lib /lib64 -ld</span></span><br><span class="line">dr-xr-xr-x. 2 root root 4096 Mar 20 09:14 /bin</span><br><span class="line">dr-xr-xr-x. 11 root root 4096 Dec 12 2018 /lib</span><br><span class="line">dr-xr-xr-x. 9 root root 12288 Mar 20 09:13 /lib64</span><br><span class="line">dr-xr-xr-x. 2 root root 12288 Mar 20 09:14 /sbin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@ubuntu2004 ~]<span class="comment">#ls /bin /sbin /lib /lib64 -ld</span></span><br><span class="line">lrwxrwxrwx 1 root root 7 Aug 24 2021 /bin -&gt; usr/bin</span><br><span class="line">lrwxrwxrwx 1 root root 7 Aug 24 2021 /lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx 1 root root 9 Aug 24 2021 /lib64 -&gt; usr/lib64</span><br><span class="line">lrwxrwxrwx 1 root root 8 Aug 24 2021 /sbin -&gt; usr/sbin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@ubuntu1804 ~]<span class="comment">#ll /bin /usr/bin -d</span></span><br><span class="line">drwxr-xr-x 2 root root 4096 Jan 12 18:41 /bin/</span><br><span class="line">drwxr-xr-x 2 root root 24576 Jan 12 18:42 /usr/bin/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Linux下的文件类型"><a href="#Linux下的文件类型" class="headerlink" title="Linux下的文件类型"></a>Linux下的文件类型</h2><p><strong>linux 系统中的文件类型标识符</strong></p>
<table>
<thead>
<tr>
<th>文件类型</th>
<th>标识符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>普通文件</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>目录文件</td>
<td>d</td>
<td>directory</td>
</tr>
<tr>
<td>符号链接文件</td>
<td>l</td>
<td>link</td>
</tr>
<tr>
<td>块设备文件</td>
<td>b</td>
<td>block</td>
</tr>
<tr>
<td>字符设备文件</td>
<td>c</td>
<td>character</td>
</tr>
<tr>
<td>管道文件</td>
<td>p</td>
<td>pipe</td>
</tr>
<tr>
<td>套接字文件</td>
<td>s</td>
<td>socket</td>
</tr>
</tbody></table>
<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#ls -l /run/</span></span><br><span class="line">total 52</span><br><span class="line">drwxr-xr-x 2 root root 100 Dec 9 20:41 abrt</span><br><span class="line">-rw------- 1 root root 11 Dec 9 20:41 alsactl.pid</span><br><span class="line">-rw-r--r-- 1 root root 5 Dec 9 20:41 atd.pid</span><br><span class="line">-rw-r--r-- 1 root root 4 Dec 9 20:41 auditd.pid</span><br><span class="line">prw------- 1 root root 0 Dec 9 20:41 autofs.fifo-misc</span><br><span class="line">prw------- 1 root root 0 Dec 9 20:41 autofs.fifo-net</span><br><span class="line">drwxr-xr-x 2 avahi avahi 80 Dec 9 20:41 avahi-daemon</span><br><span class="line">drwxr-xr-x 2 root root 40 Dec 9 20:41 certmonger</span><br><span class="line">drwxr-x--- 2 chrony chrony 80 Dec 9 20:41 chrony</span><br><span class="line">drwxr-xr-x 2 root root 40 Dec 9 20:41 console</span><br><span class="line">-rw-r--r-- 1 root root 5 Dec 9 20:41 crond.pid</span><br><span class="line">---------- 1 root root 0 Dec 9 20:41 cron.reboot</span><br></pre></td></tr></table></figure>

<p><strong>linux 系统中的文件类型颜色标识</strong></p>
<p>linux 系统中，每种颜色，都有对应的含义，可以根据文件在终端中显示的颜色，来判断是什么类型的文件</p>
<p>颜色与文件类型对应关系，由配置文件定义，可更改（此处的文件类型，可以理解为文件格式）</p>
<table>
<thead>
<tr>
<th>文件类型（格式）</th>
<th>颜色</th>
</tr>
</thead>
<tbody><tr>
<td>普通文件</td>
<td>白色</td>
</tr>
<tr>
<td>目录文件</td>
<td>蓝色</td>
</tr>
<tr>
<td>符号链接文件</td>
<td>浅蓝色</td>
</tr>
<tr>
<td>块设备文件</td>
<td>黄色</td>
</tr>
<tr>
<td>字符设备文件</td>
<td>黄色</td>
</tr>
<tr>
<td>管道文件</td>
<td>青黄色</td>
</tr>
<tr>
<td>套接字文件</td>
<td>粉红色</td>
</tr>
<tr>
<td>图片文件</td>
<td>粉红色</td>
</tr>
<tr>
<td>压缩文件或文件包</td>
<td>红色</td>
</tr>
<tr>
<td>其他文件</td>
<td>灰色</td>
</tr>
</tbody></table>
<p><strong>管道文件</strong></p>
<p>所谓管道，是指用于连接一个读进程和一个写进程，以实现它们之间通信的共享文件，又称 pipe 文件。</p>
<p><img src="../../../../images/SRE/day03/2.png" alt="2"></p>
<p><strong>套接字文件</strong></p>
<p>Socket本身有“插座”的意思，在Unix/Linux环境下，用于表示进程间网络通信的特殊文件类型。本质为内核借助缓冲区形成的伪文件。</p>
<p><img src="../../../../images/SRE/day03/3.png" alt="3"></p>
<h1 id="文件操作命令"><a href="#文件操作命令" class="headerlink" title="文件操作命令"></a>文件操作命令</h1><h2 id="显示当前工作目录"><a href="#显示当前工作目录" class="headerlink" title="显示当前工作目录"></a>显示当前工作目录</h2><p>每个shell和系统进程都有一个当前的工作目录 CWD：current work directory </p>
<p>显示当前shell CWD的绝对路径</p>
<p>pwd命令: printing working directory</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span> [-LP]</span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-P      <span class="comment">#显示真实物理路径</span></span><br><span class="line">-L      <span class="comment">#显示链接路径（默认）</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]<span class="comment">#pwd</span></span><br><span class="line">/root</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]<span class="comment">#cd /data</span></span><br><span class="line">[root@centos8 data]<span class="comment">#pwd</span></span><br><span class="line">/data</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll /bin</span></span><br><span class="line">lrwxrwxrwx. 1 root root 7 Oct 11  2021 /bin -&gt; usr/bin</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># cd /bin</span></span><br><span class="line">[root@rocky8 bin]<span class="comment"># pwd</span></span><br><span class="line">/bin</span><br><span class="line"></span><br><span class="line">[root@rocky8 bin]<span class="comment"># pwd -P</span></span><br><span class="line">/usr/bin</span><br></pre></td></tr></table></figure>

<h2 id="绝对和相对路径"><a href="#绝对和相对路径" class="headerlink" title="绝对和相对路径"></a>绝对和相对路径</h2><p>描述一个文件位置有两种方式</p>
<p><strong>绝对路径</strong></p>
<ol>
<li>以正斜杠/ 即根目录开始</li>
<li>描述完整的文件的位置路径</li>
<li>可用于任何想指定一个文件名的时候</li>
</ol>
<p><strong>相对路径</strong></p>
<ol>
<li>不以斜线开始，而是以当前所在的位置开始</li>
<li>一般情况下，是指相对于当前工作目录的路径，特殊场景下，是相对于某目录的位置</li>
<li>可以作为一个简短的形式指定一个文件名</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#走绝对路径</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cd /etc/sysconfig/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#走相对路径</span></span><br><span class="line">[root@rocky86 sysconfig]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig</span><br><span class="line"></span><br><span class="line">[root@rocky86 sysconfig]<span class="comment"># cd network-scripts/</span></span><br><span class="line">[root@rocky86 network-scripts]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line"></span><br><span class="line">[root@rocky86 network-scripts]<span class="comment"># cd ../../../root/</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<p><strong>基名 &amp; 目录名</strong></p>
<p>基名：basename，只取文件名而不要路径</p>
<p>目录名：dirname，只取路径，不要文件名</p>
<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 bin]<span class="comment">#basename /etc/sysconfig/network</span></span><br><span class="line">network</span><br><span class="line"></span><br><span class="line">[root@centos8 bin]<span class="comment">#dirname /etc/sysconfig/network</span></span><br><span class="line">/etc/sysconfig</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]<span class="comment">#dirname /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]<span class="comment">#basename /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">ifcfg-eth0</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># basename http://nginx.org/download/nginx-1.18.0.tar.gz</span></span><br><span class="line">nginx-1.18.0.tar.gz</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># basename http://nginx.org/download/nginx-1.18.0.tar.gz.tar.gz</span></span><br><span class="line">nginx-1.18.0.tar.gz.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># -s删除后缀</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># basename -s .tar.gz http://nginx.org/download/nginx-1.18.0.tar.gz</span></span><br><span class="line">nginx-1.18.0</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># basename -s .tar.gz http://nginx.org/download/nginx-1.18.0.tar.gz.tar.gz</span></span><br><span class="line">nginx-1.18.0.tar.gz</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># url=http://nginx.org/download/nginx-1.18.0.tar.gz</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># wget $url</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tar xf `basename $url`</span></span><br></pre></td></tr></table></figure>

<h2 id="更改目录"><a href="#更改目录" class="headerlink" title="更改目录"></a>更改目录</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [-L|[-P [-e]] [-@]] [<span class="built_in">dir</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-L              <span class="comment">#切换至链接目录，默认选项</span></span><br><span class="line">-P              <span class="comment">#切换至真实目录，而非链接目录</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ..           <span class="comment">#切换至父目录</span></span><br><span class="line"><span class="built_in">cd</span> -            <span class="comment">#切换到上一个目录</span></span><br><span class="line"><span class="built_in">cd</span> | <span class="built_in">cd</span> ~       <span class="comment">#切换至当前用户家目录</span></span><br><span class="line"><span class="built_in">cd</span> ~username    <span class="comment">#切换至指定用户家目录</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]<span class="comment">#cd /etc/sysconfig</span></span><br><span class="line">[root@centos8 sysconfig]<span class="comment">#pwd</span></span><br><span class="line">/etc/sysconfig</span><br><span class="line"></span><br><span class="line">[root@centos8 sysconfig]<span class="comment">#cd ../../data</span></span><br><span class="line">[root@centos8 data]<span class="comment">#pwd</span></span><br><span class="line">/data</span><br><span class="line"></span><br><span class="line">[root@centos8 data]<span class="comment">#cd /bin</span></span><br><span class="line">[root@centos8 bin]<span class="comment">#pwd</span></span><br><span class="line">/bin</span><br><span class="line"></span><br><span class="line">[root@centos8 bin]<span class="comment">#cd -P /bin</span></span><br><span class="line">[root@centos8 bin]<span class="comment">#pwd</span></span><br><span class="line">/usr/bin</span><br></pre></td></tr></table></figure>

<p>相关环境变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$PWD</span>          <span class="comment">#当前目录</span></span><br><span class="line"><span class="variable">$OLDPWD</span>       <span class="comment">#上一次目录</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 boot]<span class="comment"># echo $PWD $OLDPWD</span></span><br><span class="line">/boot /var</span><br><span class="line"></span><br><span class="line">[root@rocky86 boot]<span class="comment"># cd -</span></span><br><span class="line">/var</span><br><span class="line"></span><br><span class="line">[root@rocky86 var]<span class="comment"># echo $PWD $OLDPWD</span></span><br><span class="line">/var /boot</span><br></pre></td></tr></table></figure>

<h2 id="列出目录内容"><a href="#列出目录内容" class="headerlink" title="列出目录内容"></a>列出目录内容</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> [OPTION]... [FILE]...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line"></span><br><span class="line">-a|--all                  <span class="comment">#包含隐藏文件</span></span><br><span class="line">-l                        <span class="comment">#显示额外的信息</span></span><br><span class="line">-R|--recursive            <span class="comment">#目录递归</span></span><br><span class="line">-d|--directory            <span class="comment">#仅显示当前目录</span></span><br><span class="line">-1                        <span class="comment">#数字1，文件分行显示</span></span><br><span class="line">-S                        <span class="comment">#按从大到小排序</span></span><br><span class="line">-t                        <span class="comment">#按mtime排序，时间新的靠前</span></span><br><span class="line">-u                        <span class="comment">#配合-t选项，显示并按atime从新到旧排序</span></span><br><span class="line">-U                        <span class="comment">#按目录存放顺序显示</span></span><br><span class="line">-X                        <span class="comment">#按文件后缀排序</span></span><br><span class="line">-F|--classify             <span class="comment">#对不同类型文件显示时附加不同的符号：*/=&gt;@|</span></span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<ol>
<li>ls 查看不同后缀文件时的颜色由 /etc/DIR_COLORS 和@LS_COLORS变量定义 </li>
<li>ls -l 看到文件的大小，不一定是实际文件真正占用空间的大小 </li>
<li>ll 是 ls命令的一个别名，在centos 和 ubuntu 系统中,该别名的参数不一样</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># alias ll</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -l --color=auto&#x27;</span></span><br><span class="line"></span><br><span class="line">root@ubuntu20:~<span class="comment"># alias ll</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -alF&#x27;</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]<span class="comment">#vim /etc/DIR_COLORS</span></span><br><span class="line">.jpg 01;31      <span class="comment">#修改此行</span></span><br><span class="line">[root@centos8 ~]<span class="comment">#exit</span></span><br><span class="line">[root@centos8 ~]<span class="comment">#echo $LS_COLORS</span></span><br></pre></td></tr></table></figure>

<h2 id="查看文件状态-stat"><a href="#查看文件状态-stat" class="headerlink" title="查看文件状态 stat"></a>查看文件状态 stat</h2><p>一个文件有两部份信息：元数据和具体内容</p>
<p>查看文件元数据</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> [OPTION]... FILE...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line"></span><br><span class="line">-t｜--terse            <span class="comment">#使用简洁格式显示</span></span><br><span class="line">-f|--file-system       <span class="comment">#显示相关的文件系统信息，所谓文件系统，对应的就是windows下面的硬盘分区</span></span><br><span class="line">-c|--format            <span class="comment">#使用特定格式输出</span></span><br></pre></td></tr></table></figure>

<p>每个文件有三个时间戳属性</p>
<table>
<thead>
<tr>
<th>属性</th>
<th></th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>atime</td>
<td>access time</td>
<td>访问时间，即读取文件内容时间，<br />此字段值会延时更新，以降低IO负载</td>
</tr>
<tr>
<td>mtime</td>
<td>modify time</td>
<td>修改内容的时间</td>
</tr>
<tr>
<td>ctime</td>
<td>change time</td>
<td>元数据发生改变的时间</td>
</tr>
</tbody></table>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看文件元数据</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat /etc/fstab </span></span><br><span class="line">  File: /etc/fstab</span><br><span class="line">  Size: 655       	Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768d	Inode: 268568707   Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:etc_t:s0</span><br><span class="line">Access: 2024-04-26 21:35:28.670048634 +0800</span><br><span class="line">Modify: 2024-04-24 15:23:46.540624845 +0800</span><br><span class="line">Change: 2024-04-24 15:27:00.584639230 +0800</span><br><span class="line"> Birth: 2024-04-24 15:23:46.540624845 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#目录也是一个文件</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat /boot/</span></span><br><span class="line">  File: /boot/</span><br><span class="line">  Size: 4096      	Blocks: 8          IO Block: 4096   directory</span><br><span class="line">Device: 801h/2049d	Inode: 128         Links: 5</span><br><span class="line">Access: (0555/dr-xr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:boot_t:s0</span><br><span class="line">Access: 2024-04-24 15:26:19.568636898 +0800</span><br><span class="line">Modify: 2024-04-24 16:07:59.307086248 +0800</span><br><span class="line">Change: 2024-04-24 16:07:59.307086248 +0800</span><br><span class="line"> Birth: 2024-04-24 15:23:43.025759000 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看文件所在分区的信息</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat -f /etc/fstab </span></span><br><span class="line">  File: <span class="string">&quot;/etc/fstab&quot;</span></span><br><span class="line">    ID: fd0000000000 Namelen: 255     Type: xfs</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 34062080   Free: 33422263   Available: 33422263</span><br><span class="line">Inodes: Total: 68157440   Free: 68121720</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#权限-inode-文件名</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat -c &quot;%a-%i-%n&quot; /etc/fstab </span></span><br><span class="line">644-268568707-/etc/fstab</span><br></pre></td></tr></table></figure>

<h2 id="确定文件类型"><a href="#确定文件类型" class="headerlink" title="确定文件类型"></a>确定文件类型</h2><p>文件可以包含多种类型的数据，使用file命令检查文件的类型，然后确定适当的打开命令或应用程序使用</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">file [options] &lt;filename&gt;...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line"></span><br><span class="line">-b|--brief                <span class="comment">#只显示结果，不显示文件名</span></span><br><span class="line">-f|--files-from FILE      <span class="comment">#从指定文件中获取要处理的文件名</span></span><br><span class="line">-F|--separator STRING     <span class="comment">#指定分割符</span></span><br><span class="line">-L|--dereference          <span class="comment">#跟随软链接</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># file /usr/lib/dracut/dracut-init.sh</span></span><br><span class="line">/usr/lib/dracut/dracut-init.sh: Bourne-Again shell script, ASCII text executable</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># file -b /usr/lib/dracut/dracut-init.sh</span></span><br><span class="line">Bourne-Again shell script, ASCII text executable</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># cat list.txt </span></span><br><span class="line">/etc/</span><br><span class="line">/bin</span><br><span class="line">/etc/issue</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># file -f list.txt </span></span><br><span class="line">/etc/:      directory</span><br><span class="line">/bin:       symbolic <span class="built_in">link</span> to usr/bin</span><br><span class="line">/etc/issue: ASCII text</span><br></pre></td></tr></table></figure>

<p>范例：windows的文本格式和Linux的文本格式的区别</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># cat linux.txt </span></span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># cat win.txt </span></span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c[root@rocky8 ~]<span class="comment"># file win.txt linux.txt </span></span><br><span class="line">win.txt:   ASCII text, with CRLF line terminators</span><br><span class="line">linux.txt: ASCII text</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># hexdump -C linux.txt </span></span><br><span class="line">00000000  61 0a 62 0a 63 0a                                 |a.b.c.|</span><br><span class="line">00000006</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># hexdump -C win.txt </span></span><br><span class="line">00000000  61 0d 0a 62 0d 0a 63                              |a..b..c|</span><br><span class="line">00000007</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装转换工具</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># dnf -y install dos2unix</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将Windows的文本格式转换成的Linux文本格式</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># dos2unix win.txt </span></span><br><span class="line">dos2unix: converting file win.txt to Unix format...</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># file win.txt </span></span><br><span class="line">win.txt: ASCII text</span><br><span class="line"></span><br><span class="line"><span class="comment">#将Linux的文本格式转换成Windows的文本格式</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># unix2dos win.txt </span></span><br><span class="line">unix2dos: converting file win.txt to DOS format...</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># file win.txt </span></span><br><span class="line">win.txt: ASCII text, with CRLF line terminators</span><br></pre></td></tr></table></figure>

<p>范例：转换文件字符集编码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#显示支持字符集编码列表</span></span><br><span class="line">[root@rocky8 ~]<span class="comment">#iconv -l</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#windows7上文本默认的编码ANSI（GB2312）</span></span><br><span class="line"></span><br><span class="line">[root@centos8 data]<span class="comment">#file windows.txt</span></span><br><span class="line">windows.txt: ISO-8859 text, with no line terminators</span><br><span class="line"></span><br><span class="line">[root@centos8 data]<span class="comment">#echo $LANG</span></span><br><span class="line">en_US.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment">#默认在linux无法正常显示文本内容</span></span><br><span class="line">[root@centos8 data]<span class="comment">#cat windows.txt</span></span><br><span class="line">▒▒▒▒▒▒[root@centos8 data]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将windows7上文本默认的编码ANSI（GB2312）转换成UTF-8</span></span><br><span class="line">[root@centos8 data]<span class="comment">#iconv -f gb2312 windows.txt -o windows1.txt</span></span><br><span class="line"></span><br><span class="line">[root@centos8 data]<span class="comment">#cat windows1.txt</span></span><br><span class="line">马哥教育[root@centos8 data]<span class="comment">#ll windows1.txt</span></span><br><span class="line">-rw-r--r-- 1 root root 12 Mar 23 10:13 windows1.txt</span><br><span class="line"></span><br><span class="line">[root@centos8 data]<span class="comment">#file windows1.txt</span></span><br><span class="line">windows1.txt: UTF-8 Unicode text, with no line terminators</span><br><span class="line"></span><br><span class="line"><span class="comment">#将UTF-8转换成windows10上文本默认的编码ANSI（GB2312）</span></span><br><span class="line">[root@centos8 data]<span class="comment">#iconv -f utf8 -t gb2312 windows1.txt -o windows2.txt</span></span><br><span class="line"></span><br><span class="line">[root@centos8 data]<span class="comment">#file windows2.txt</span></span><br><span class="line">windows2.txt: ISO-8859 text, with no line terminators</span><br></pre></td></tr></table></figure>

<h2 id="文件通配符模式-wildcard-pattern"><a href="#文件通配符模式-wildcard-pattern" class="headerlink" title="文件通配符模式 wildcard pattern"></a>文件通配符模式 wildcard pattern</h2><p>文件通配符可以用来匹配符合条件的多个文件，方便批量管理文件</p>
<p>通配符采有特定的符号，表示特定的含义，此特符号称为元 meta 字符</p>
<p>常见的通配符如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">*           <span class="comment">#匹配零个或多个字符，但不匹配 &quot;.&quot; 开头的文件，即隐藏文件</span></span><br><span class="line">?           <span class="comment">#匹配任何单个字符,一个汉字也算一个字符</span></span><br><span class="line">~           <span class="comment">#当前用户家目录</span></span><br><span class="line">.           <span class="comment">#当前工作目录</span></span><br><span class="line">~+          <span class="comment">#当前工作目录</span></span><br><span class="line">~-          <span class="comment">#前一个工作目录</span></span><br><span class="line">~mage       <span class="comment">#用户mage家目录</span></span><br><span class="line">[0-9]       <span class="comment">#匹配数字范围</span></span><br><span class="line">[a-z]       <span class="comment">#一个字母</span></span><br><span class="line">[A-Z]       <span class="comment">#一个字母</span></span><br><span class="line">[wang]      <span class="comment">#匹配列表中的任何的一个字符</span></span><br><span class="line">[^wang]     <span class="comment">#匹配列表中的所有字符以外的字符</span></span><br><span class="line">[^a-z]      <span class="comment">#匹配列表中的所有字符以外的字符</span></span><br></pre></td></tr></table></figure>

<p>另外还有在Linux系统中预定义的字符类表示法如下：man 7 glob</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[:digit:]     <span class="comment">#任意数字，相当于0-9</span></span><br><span class="line">[:lower:]     <span class="comment">#任意小写字母,表示 a-z</span></span><br><span class="line">[:upper:]     <span class="comment">#任意大写字母,表示 A-Z</span></span><br><span class="line">[:alpha:]     <span class="comment">#任意大小写字母</span></span><br><span class="line">[:alnum:]     <span class="comment">#任意数字或字母</span></span><br><span class="line">[:blank:]     <span class="comment">#水平空白字符</span></span><br><span class="line">[:space:]     <span class="comment">#水平或垂直空白字符</span></span><br><span class="line">[:punct:]     <span class="comment">#标点符号</span></span><br><span class="line">[:<span class="built_in">print</span>:]     <span class="comment">#可打印字符</span></span><br><span class="line">[:cntrl:]     <span class="comment">#控制（非打印）字符</span></span><br><span class="line">[:graph:]     <span class="comment">#图形字符</span></span><br><span class="line">[:xdigit:]    <span class="comment">#十六进制字符</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#匹配以a开头的</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll a*</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配包含a的</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll *a*</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配任意单字符文件名的文件</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll ?</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 10 22:34 a</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 10 22:34 马</span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配两个字符</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll ??</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 10 22:34 ab</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 10 22:34 马g</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 10 22:34 马哥</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># echo $OLDPWD</span></span><br><span class="line">/data</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看前一个目录下的linux.txt</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll ~-/linux.txt</span></span><br><span class="line">-rw-r--r-- 1 root root 6 Mar 23 09:48 /data/linux.txt</span><br></pre></td></tr></table></figure>

<p>范例: [ ] 和 { }</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># ll f&#123;1..5&#125;</span></span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">&#x27;f1&#x27;</span>: No such file or directory</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">&#x27;f2&#x27;</span>: No such file or directory</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:34 f3</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:34 f4</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:34 f5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll f[1-5]</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:34 f3</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:34 f4</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:34 f5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll f[a-c]</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 fa</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 fA</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 fb</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 fB</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 <span class="built_in">fc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll f&#123;a..c&#125;</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 fa</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 fb</span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 7 09:46 <span class="built_in">fc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#[a-z] 表示小a 到小z，大A 到大Z aAbBcC ... zZ</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls test-[a-d].txt</span></span><br><span class="line">test-a.txt test-A.txt test-b.txt test-B.txt test-c.txt test-C.txt test-d.txt</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># touch file&#123;a..z&#125;.txt file&#123;A..Z&#125;.txt file&#123;0..9&#125;.txt</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll file&#123;0..9&#125;.txt</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file0.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file1.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file2.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file3.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file4.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file5.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file6.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file7.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file8.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file9.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll file[0-9].txt</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file0.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file1.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file2.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file3.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file4.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file5.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file6.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file7.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file8.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 23 10:46 file9.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file[a-c].txt</span></span><br><span class="line">filea.txt fileA.txt fileb.txt fileB.txt filec.txt</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file[C-E].txt</span></span><br><span class="line">fileC.txt filed.txt fileD.txt filee.txt fileE.txt</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file[wang].txt</span></span><br><span class="line">filea.txt fileg.txt filen.txt filew.txt</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file[^wang].txt</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#匹配中括号中的任意一个字符</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file[:lower:].txt</span></span><br><span class="line">filee.txt filel.txt fileo.txt filer.txt filew.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配小写字母</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file[[:lower:]].txt</span></span><br><span class="line">filea.txt filed.txt fileg.txt filej.txt filem.txt filep.txt files.txt filev.txt</span><br><span class="line">filey.txt fileb.txt filee.txt fileh.txt filek.txt filen.txt fileq.txt filet.txt</span><br><span class="line">filew.txt filez.txt filec.txt filef.txt filei.txt filel.txt fileo.txt filer.txt</span><br><span class="line">fileu.txt filex.txt</span><br></pre></td></tr></table></figure>

<p>范例：比较有无*的功能区别</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> *         <span class="comment">#等同于 ls 列出当前目录内容，不包括 . 和 ..</span></span><br><span class="line"><span class="built_in">ls</span> -a *      <span class="comment">#等同于 ls 列出当前目录内容，不包括 . 和 ..</span></span><br><span class="line"><span class="built_in">ls</span> -a        <span class="comment">#列出当前目录所有内容，包括 . 和 ..</span></span><br><span class="line"><span class="built_in">ls</span> .*        <span class="comment">#列出当前目录和上级目录的内容， .* 包括 .. 也就是上级目录</span></span><br><span class="line"><span class="built_in">ls</span> -d .*     <span class="comment">#只显示当前目录的内容，有预定的别名 l.</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># ls -d /etc/*/</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># l.</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># touch file*.log</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># touch file1.log</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls file*.log</span></span><br><span class="line">file1.log <span class="string">&#x27;file*.log&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls &#x27;file*.log&#x27;</span></span><br><span class="line"><span class="string">&#x27;file*.log&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="创建空文件和刷新时间"><a href="#创建空文件和刷新时间" class="headerlink" title="创建空文件和刷新时间"></a>创建空文件和刷新时间</h2><p>touch命令可以用来创建空文件或刷新文件的时间</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> [OPTION]... FILE...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line"></span><br><span class="line">-a                         <span class="comment">#改变atime,ctime</span></span><br><span class="line">-m                         <span class="comment">#改变mtime,ctime</span></span><br><span class="line">-h|--no-dereference        <span class="comment">#touch链接文件时，默认是操作其指向的目标文件，此选项表示操作链接文件本身</span></span><br><span class="line">-r|--reference             <span class="comment">#使用某个文件的更新时间和修改时间作为当前文件的更新时间和修改时间</span></span><br><span class="line">-d|--<span class="built_in">date</span>                  <span class="comment">#指定修改时间和访问时间，而不是采用当前系统时间</span></span><br><span class="line">-t [[CC]YY]MMDDhhmm[.ss]   <span class="comment"># --time=WORD</span></span><br><span class="line">--time=STRING              <span class="comment">#指定修改项 access|atime 等同于 -a， modify|mtime 等同于 -m</span></span><br><span class="line">-c|--no-create             <span class="comment">#如果文件不存在，不创建</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># touch f1.txt</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll f1.txt </span></span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 28 16:09 f1.txt</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll /etc/issue</span></span><br><span class="line">-rw-r--r--. 1 root root 23 Oct  9  2021 /etc/issue</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># touch /etc/issue</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll /etc/issue</span></span><br><span class="line">-rw-r--r--. 1 root root 23 Apr 28 16:09 /etc/issue</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat /etc/issue</span></span><br><span class="line">  File: /etc/issue</span><br><span class="line">  Size: 23        	Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768d	Inode: 268597004   Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:etc_t:s0</span><br><span class="line">Access: 2024-04-28 16:09:42.549239569 +0800</span><br><span class="line">Modify: 2024-04-28 16:09:42.549239569 +0800</span><br><span class="line">Change: 2024-04-28 16:09:42.549239569 +0800</span><br><span class="line"> Birth: 2024-04-24 15:23:58.278625794 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># date</span></span><br><span class="line">Sun Apr 28 16:10:13 CST 2024</span><br><span class="line"></span><br><span class="line"><span class="comment"># -1 day代表减一天</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># touch `date -d &quot;-1 day&quot; +%F_%T`.log</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ls</span></span><br><span class="line">2024-04-27_16:10:55.<span class="built_in">log</span>  anaconda-ks.cfg  f1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 year代表加一年</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># touch $(date -d &quot;1 year&quot; +%F_%T).log</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ls</span></span><br><span class="line">2024-04-27_16:10:55.<span class="built_in">log</span>  2025-04-28_16:16:02.<span class="built_in">log</span>  anaconda-ks.cfg  f1.txt</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># touch -d &quot;2022-05-05 05:05:05&quot; abc</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat abc </span></span><br><span class="line">  File: abc</span><br><span class="line">  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd00h/64768d	Inode: 402660596   Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2022-05-05 05:05:05.000000000 +0800</span><br><span class="line">Modify: 2022-05-05 05:05:05.000000000 +0800</span><br><span class="line">Change: 2024-04-28 16:18:32.601257694 +0800</span><br><span class="line"> Birth: 2024-04-28 16:18:32.601257694 +0800</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#将abc 的时间赋值给abcd</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># touch -r abc abcd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将abc 时间设置为7月8日9时10分</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># touch -t 07080910 abc</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat abc</span></span><br><span class="line">  File: abc</span><br><span class="line">  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd00h/64768d	Inode: 402660596   Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2024-07-08 09:10:00.000000000 +0800</span><br><span class="line">Modify: 2024-07-08 09:10:00.000000000 +0800</span><br><span class="line">Change: 2024-04-28 16:20:46.552262274 +0800</span><br><span class="line"> Birth: 2024-04-28 16:18:32.601257694 +0800</span><br></pre></td></tr></table></figure>

<h2 id="复制文件和目录"><a href="#复制文件和目录" class="headerlink" title="复制文件和目录"></a>复制文件和目录</h2><p>利用 cp（copy）命令可以实现文件或目录的复制</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="built_in">cp</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line"><span class="built_in">cp</span> [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line"></span><br><span class="line">-i|--interactive          <span class="comment">#如果目标文件己存在，则提示是否覆盖</span></span><br><span class="line">-n|--no-clobber           <span class="comment">#如果目标文件己存在，则跳过此文件复制</span></span><br><span class="line">-R|-r|--recursive         <span class="comment">#递归复制，可用于目录的复制</span></span><br><span class="line">-a|--archive              <span class="comment">#保留所有属性 相当于 dpR 选项组合</span></span><br><span class="line">-s|--symbolic-link        <span class="comment">#不复制文件，而是创建链接</span></span><br><span class="line">-p                        <span class="comment">#同时复制访问时间，修改时间，权限等属性,同 --preserve=mode,ownership,timestamps</span></span><br><span class="line">--preserve[=ATTR_LIST]    <span class="comment">#选择属性，默认为 mode,ownership,timestamps</span></span><br><span class="line">-u|--update               <span class="comment">#当源文件比目标文件新时，才执行复制操作</span></span><br><span class="line">-v|--verbose              <span class="comment">#显示复制过程</span></span><br><span class="line">-b                        <span class="comment">#先备份再覆盖</span></span><br><span class="line">--backup=numbered         <span class="comment">#目标存在，覆盖前先备份加数字后缀，形式为 filename.~#~ ，可以保留多个版本</span></span><br><span class="line"></span><br><span class="line">mode          <span class="comment">#权限</span></span><br><span class="line">ownership     <span class="comment">#属主属组</span></span><br><span class="line">timestamp     <span class="comment">#时间戳</span></span><br><span class="line">links         <span class="comment">#保留链接</span></span><br><span class="line">xattr         <span class="comment">#保留自定义属性</span></span><br><span class="line">context       <span class="comment">#保留selinux属性</span></span><br><span class="line">all           <span class="comment">#所有属性</span></span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>源/目标</th>
<th>不存在</th>
<th>存在且为文件</th>
<th>存在且目录</th>
</tr>
</thead>
<tbody><tr>
<td>一个文件</td>
<td>新建DEST，并将SRC中<br />内容填充至DEST中</td>
<td>将SRC中的内容覆盖至 DEST中<br />注意数据丢失风 险！<br /> 建议用 –i 选项</td>
<td>在DEST下新建与原文件同名 的文件，<br />并将SRC中内容填 充至新文件中</td>
</tr>
<tr>
<td>多个文件</td>
<td>提示错误</td>
<td>提示错误</td>
<td>在DEST下新建与原文件同名 的文件，<br />并将原文件内容复 制进新文件中</td>
</tr>
<tr>
<td>目录须使<br />用-r选项</td>
<td>创建指定DEST同名目 录，<br />复制SRC目录中所 有文件至DEST下</td>
<td>提示错误</td>
<td>在DEST下新建与原目录同名 的目录，<br />并将SRC中内容复 制至新目录中</td>
</tr>
</tbody></table>
<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cp ~wang/issue /data/issue_wang.bak</span></span><br><span class="line">-rw-r--r--. 1 root root 86 Dec 13 16:21 /data/issue_wang.bak</span><br><span class="line">-rw-r--r--. 1 wang wang 86 Dec 13 16:18 /home/wang/issue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#保留属主属组，时间戳</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cp -p ~wang/issue /data/issue_wang2.bak</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll ~wang/issue /data/issue_wang2.bak</span></span><br><span class="line">-rw-r--r--. 1 wang wang 86 Dec 13 16:18 /data/issue_wang2.bak</span><br><span class="line">-rw-r--r--. 1 wang wang 86 Dec 13 16:18 /home/wang/issue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#cp 整个目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cp /etc/sysconfig/ /data/</span></span><br><span class="line"><span class="built_in">cp</span>: -r not specified; omitting directory <span class="string">&#x27;/etc/sysconfig/&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cp -r /etc/sysconfig/ /data/</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll /data</span></span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root 0 Dec 13 16:11 2019-12-12_16:11:48.<span class="built_in">log</span></span><br><span class="line">-rw-r--r--. 1 root root 0 Dec 13 16:13 2020-12-13_16:13:11.<span class="built_in">log</span></span><br><span class="line">-rw-r--r--. 1 wang wang 86 Dec 13 16:18 issue_wang2.bak</span><br><span class="line">-rw-r--r--. 1 root root 86 Dec 13 16:21 issue_wang.bak</span><br><span class="line">drwxr-xr-x. 7 root root 4096 Dec 13 16:23 sysconfig</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cp -r /etc/sysconfig/ /data/sysconfig_bak</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll /data</span></span><br><span class="line">total 16</span><br><span class="line">-rw-r--r--. 1 root root 0 Dec 13 16:11 2019-12-12_16:11:48.<span class="built_in">log</span></span><br><span class="line">-rw-r--r--. 1 root root 0 Dec 13 16:13 2020-12-13_16:13:11.<span class="built_in">log</span></span><br><span class="line">-rw-r--r--. 1 wang wang 86 Dec 13 16:18 issue_wang2.bak</span><br><span class="line">-rw-r--r--. 1 root root 86 Dec 13 16:21 issue_wang.bak</span><br><span class="line">drwxr-xr-x. 7 root root 4096 Dec 13 16:23 sysconfig</span><br><span class="line">drwxr-xr-x. 7 root root 4096 Dec 13 16:24 sysconfig_bak</span><br></pre></td></tr></table></figure>

<p>范例：复制时如果覆盖先备份再覆盖</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cp -b /etc/motd /data/issue</span></span><br><span class="line"><span class="built_in">cp</span>: overwrite <span class="string">&#x27;/data/issue&#x27;</span>? y</span><br><span class="line"></span><br><span class="line">[16:33:09 root@centos8 ~]<span class="comment">#ll /data</span></span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 1 Dec 13 16:33 issue</span><br><span class="line">-rw-r--r--. 1 root root 2610 Dec 13 16:32 issue~</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#保留多版本备份</span></span><br><span class="line">[16:33:56 root@centos8 ~]<span class="comment">#cp --backup=numbered /etc/fstab /data/issue</span></span><br><span class="line"><span class="built_in">cp</span>: overwrite <span class="string">&#x27;/data/issue&#x27;</span>? y</span><br><span class="line"></span><br><span class="line">[16:34:32 root@centos8 ~]<span class="comment">#cp --backup=numbered /etc/shadow /data/issue</span></span><br><span class="line"><span class="built_in">cp</span>: overwrite <span class="string">&#x27;/data/issue&#x27;</span>? y</span><br><span class="line"></span><br><span class="line">[16:34:41 root@centos8 ~]<span class="comment">#cp --backup=numbered /etc/os-release /data/issue</span></span><br><span class="line"><span class="built_in">cp</span>: overwrite <span class="string">&#x27;/data/issue&#x27;</span>? y</span><br><span class="line"></span><br><span class="line">[16:34:48 root@centos8 ~]<span class="comment">#ll /data</span></span><br><span class="line">total 20</span><br><span class="line">-rw-r--r--. 1 root root 420 Dec 13 16:34 issue</span><br><span class="line">-rw-r--r--. 1 root root 1 Dec 13 16:33 issue~</span><br><span class="line">-rw-r--r--. 1 root root 709 Dec 13 16:33 issue.~1~</span><br><span class="line">-rw-r--r--. 1 root root 709 Dec 13 16:34 issue.~2~</span><br><span class="line">----------. 1 root root 1349 Dec 13 16:34 issue.~3~</span><br></pre></td></tr></table></figure>

<p>范例：特殊文件复制</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#不能直接cp ,要加 a 选项</span></span><br><span class="line">[root@centos8 ~]<span class="comment">#cp /dev/zero&#123;,.bak&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="移动和重命名文件"><a href="#移动和重命名文件" class="headerlink" title="移动和重命名文件"></a>移动和重命名文件</h2><p>mv 命令可以实现文件或目录的移动和改名</p>
<p>同一分区移动数据，速度很快：数据位置没有变化</p>
<p>不同分区移动数据，速度相对慢：数据位置发生了变化</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="built_in">mv</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line"><span class="built_in">mv</span> [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-b                    <span class="comment">#如果目标存在，则先备份</span></span><br><span class="line">-n|--no-clobber       <span class="comment">#如果目标文件己存在，则跳过此文件移动</span></span><br><span class="line">-i|--interactive      <span class="comment">#如果目标文件己存在，则提示是否覆盖</span></span><br><span class="line">-u|--update           <span class="comment">#当源文件比目标文件新时，才执行移动操作</span></span><br><span class="line">-v|--verbose          <span class="comment">#显示移动过程</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#移动前备份</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># mv -b a a1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#移动多个文件到目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># mv a b c d abcd/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将 abc目录放入 abcd 目录中，如果 abcd 目录不存在，则将 abc 目录改名为 abcd 目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># mv abc/ abcd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将 abc 目录下所有内容移动到当前目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># mv abc/* .</span></span><br></pre></td></tr></table></figure>

<p>利用 rename 可以批量修改文件名</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rename [options] &lt;expression&gt; &lt;replacement&gt; &lt;file&gt;...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-v|--verbose        <span class="comment">#显示过程</span></span><br><span class="line">-s|--symlink        <span class="comment">#如果目标是链接文件，则是重命名其指向</span></span><br><span class="line">-n|--no-act         <span class="comment">#不做任何改变</span></span><br><span class="line">-o|--no-overwrite   <span class="comment">#不覆盖己存在文件</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#为所有的f开头包含conf的文件加上.bak后缀</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rename &#x27;conf&#x27; &#x27;conf.bak&#x27; f*</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#去掉所有的bak后缀</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rename &#x27;.bak&#x27; &#x27;&#x27; *.bak</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将当前目录下 以.txt结尾的文件，批量改名成 .log结尾 -v显示过程</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rename -v txt log *.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#把软连接 abc.link 指向的文件由 abc 改成 xyz</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rename -s abc xyz abc.link</span></span><br></pre></td></tr></table></figure>

<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><p>使用 rm 命令可以删除文件和目录</p>
<p>注意：此命令非常危险，慎重使用，建议使用 mv 代替 rm</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> [OPTION]... [FILE]...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-i                   <span class="comment">#删除前确认</span></span><br><span class="line">-f|--force           <span class="comment">#不确认直接删除</span></span><br><span class="line">-r|-R|--recursive    <span class="comment">#递归删除</span></span><br><span class="line">-d|--<span class="built_in">dir</span>             <span class="comment">#删除空目录</span></span><br><span class="line">--no-preserve-root   <span class="comment">#强删根目录</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># rm -rf /</span></span><br><span class="line"><span class="built_in">rm</span>: it is dangerous to operate recursively on <span class="string">&#x27;/&#x27;</span></span><br><span class="line"><span class="built_in">rm</span>: use --no-preserve-root to override this failsafe</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除根下所有内容</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -rf /*</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除所有以a开头的文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -f a*</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除当前目录下所有内容</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -f *</span></span><br></pre></td></tr></table></figure>

<p>范例：删除特殊文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0711]<span class="comment"># ls</span></span><br><span class="line">-f</span><br><span class="line"></span><br><span class="line"><span class="comment">#删不掉</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># rm -f</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># ls</span></span><br><span class="line">-f</span><br><span class="line"></span><br><span class="line"><span class="comment">#删不掉</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># rm -rf -f</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># ls</span></span><br><span class="line">-f</span><br><span class="line"></span><br><span class="line"><span class="comment">#删不掉</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># rm -rf *</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># ls</span></span><br><span class="line">-f</span><br><span class="line"></span><br><span class="line">[root@rocky86 0711]<span class="comment"># rm -rf ./-f</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># ls</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 0711]<span class="comment"># rm -- -f</span></span><br><span class="line">[root@rocky86 0711]<span class="comment"># ls</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># touch &#x27;~&#x27;</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls</span></span><br><span class="line"><span class="string">&#x27;~&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -f ~</span></span><br><span class="line"><span class="built_in">rm</span>: cannot remove <span class="string">&#x27;/root&#x27;</span>: Is a directory</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -- ~</span></span><br><span class="line"><span class="built_in">rm</span>: cannot remove <span class="string">&#x27;/root&#x27;</span>: Is a directory</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># rm -f ./~</span></span><br></pre></td></tr></table></figure>

<p>范例：避免误删除，定义别名</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mv -t 把所有指定的资源移动到/tmp下</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># alias rm=&#x27;mv -t /tmp&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h2><h3 id="显示目录树-tree"><a href="#显示目录树-tree" class="headerlink" title="显示目录树 tree"></a>显示目录树 tree</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">tree [-acdfghilnpqrstuvxACDFJQNSUX] [-H baseHREF] [-T title ]</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-a             <span class="comment">#显示所有，包括隐藏目录和文件</span></span><br><span class="line">-d             <span class="comment">#只显示目录</span></span><br><span class="line">-f             <span class="comment">#显示所有内容的完整路径</span></span><br><span class="line">-F             <span class="comment">#在执行文件，目录，Socket，符号链接，管道文件，各自加上&quot;*&quot;,&quot;/&quot;,&quot;=&quot;,&quot;@&quot;,&quot;|&quot;号</span></span><br><span class="line">-g             <span class="comment">#显示文件属组，没找到组名，以gid代替</span></span><br><span class="line">-u             <span class="comment">#显示文件属主，没找到用户名，以uid代替</span></span><br><span class="line">-p             <span class="comment">#显示内容权限</span></span><br><span class="line">-s             <span class="comment">#显示内容大小</span></span><br><span class="line">-i             <span class="comment">#不以层级结构显示</span></span><br><span class="line">-n             <span class="comment">#不显示颜色</span></span><br><span class="line">-t             <span class="comment">#显示时用修改时间排序</span></span><br><span class="line">-r             <span class="comment">#以默认显示顺序的反向规则显示，默认以数字，首字母的顺序规则来显示</span></span><br><span class="line">-o filename    <span class="comment">#将显示的内容输出到指定文件中</span></span><br><span class="line">-L n           <span class="comment">#只显示n层目录</span></span><br><span class="line">-D             <span class="comment">#显示内容修改时间</span></span><br><span class="line">-C             <span class="comment">#显示色彩</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#显示当前目录的树</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tree</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tree dir1/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#仅显示两层目录</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tree -d -L 2 /</span></span><br></pre></td></tr></table></figure>

<h3 id="创建目录-mkdir"><a href="#创建目录-mkdir" class="headerlink" title="创建目录 mkdir"></a>创建目录 mkdir</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [OPTION]... DIRECTORY...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-m|--mode       <span class="comment">#目录权限属性</span></span><br><span class="line">-p|--parents    <span class="comment">#如果要创建的目录父级目录不存在，则一起创建，是递归的意思</span></span><br><span class="line">-v|--verbose    <span class="comment">#显示创建过程</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># mkdir dira</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#指定权限</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># mkdir -m=777 dirb</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#递归创建</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># mkdir -pv dirx/diry/dirz</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;dirx&#x27;</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;dirx/diry&#x27;</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;dirx/diry/dirz&#x27;</span></span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># tree dirx</span></span><br><span class="line"> dirx</span><br><span class="line"> └── diry</span><br><span class="line">     └── dirz</span><br><span class="line">     </span><br><span class="line"> 2 directories, 0 files</span><br></pre></td></tr></table></figure>

<h3 id="删除空目录-rmdir"><a href="#删除空目录-rmdir" class="headerlink" title="删除空目录 rmdir"></a>删除空目录 rmdir</h3><p>rmdir只能删除空目录，如果想删除非空目录，可以使用rm -r 命令，递归删除目录树</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> [OPTION]... DIRECTORY...</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">--ignore-fail-on-non-empty  <span class="comment">#忽略非空错误提示</span></span><br><span class="line">-p|--parents                <span class="comment">#连着父目录一起删除</span></span><br><span class="line">-v|--verbose                <span class="comment">#显示删除过程</span></span><br></pre></td></tr></table></figure>

<p>范例：从外层开始创建，从里层开始删除</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># mkdir -pv a/b/c/d</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;a&#x27;</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;a/b&#x27;</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;a/b/c&#x27;</span></span><br><span class="line"> <span class="built_in">mkdir</span>: created directory <span class="string">&#x27;a/b/c/d&#x27;</span></span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># rmdir -pv a/b/c/d</span></span><br><span class="line"> <span class="built_in">rmdir</span>: removing directory, <span class="string">&#x27;a/b/c/d&#x27;</span></span><br><span class="line"> <span class="built_in">rmdir</span>: removing directory, <span class="string">&#x27;a/b/c&#x27;</span></span><br><span class="line"> <span class="built_in">rmdir</span>: removing directory, <span class="string">&#x27;a/b&#x27;</span></span><br><span class="line"> <span class="built_in">rmdir</span>: removing directory, <span class="string">&#x27;a&#x27;</span></span><br></pre></td></tr></table></figure>

<p>练习  </p>
<ol>
<li>如何创建/testdir/dir1/x, /testdir/dir1/y, /testdir/dir1/x/a, /testdir/dir1/x/b, /testdir/dir1/y/a, /testdir/dir1/y/b  </li>
<li>如何创建/testdir/dir2/x, /testdir/dir2/y, /testdir/dir2/x/a, /testdir/dir2/x/b  </li>
<li>如何创建/testdir/dir3, /testdir/dir4, /testdir/dir5, /testdir/dir5/dir6, /testdir/dir5/dir7</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line">[root@rocky8 ~]<span class="comment"># mkdir -pv /testdir/dir1/&#123;x,y&#125;/&#123;a,b&#125;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1/x&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1/x/a&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1/x/b&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1/y&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1/y/a&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir1/y/b&#x27;</span></span><br><span class="line"></span><br><span class="line">2.</span><br><span class="line">[root@rocky8 ~]<span class="comment"># mkdir -pv /testdir/dir2/&#123;x/&#123;a,b&#125;,y&#125;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir2&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir2/x&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir2/x/a&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir2/x/b&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir2/y&#x27;</span></span><br><span class="line"></span><br><span class="line">3.</span><br><span class="line">[root@rocky8 ~]<span class="comment"># mkdir -pv /testdir/&#123;dir3,dir4,dir5/&#123;dir6,dir7&#125;&#125;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir3&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir4&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir5&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir5/dir6&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span>: created directory <span class="string">&#x27;/testdir/dir5/dir7&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="文件元数据和节点表结构"><a href="#文件元数据和节点表结构" class="headerlink" title="文件元数据和节点表结构"></a>文件元数据和节点表结构</h1><h2 id="inode-表结构"><a href="#inode-表结构" class="headerlink" title="inode 表结构"></a>inode 表结构</h2><p>在Linux系统中，一切皆文件，</p>
<p>每个文件，又分为文件元数据和具体内容两部份， </p>
<p>一个文件元数据和其具体内容数据，在磁盘分区上，是分开存放的。 </p>
<p>这种存储文件元数据的区域就叫 inode，中文译作 “索引节点”， </p>
<p>每个文件都有一个 inode 和 n(n&gt;=1) 个 block 数据块，inode 存储文件元数据，数据块存储文件具体内容数据， </p>
<p>磁盘在格式化时，系统会自动将磁盘分为两个区域， </p>
<p>一个是 inode 区（inode table），用来存放文件的 inode， </p>
<p>另一个是数据区，分成很多个block(块)，用来存放文件的具体内容数据，</p>
<p>一个磁盘分区上有多少个inode和多少个block，由系统自行决定，跟文件系统，磁盘分区大小，数据块大小有关， </p>
<p>一个磁盘分区，能存放多少个文件，由文件大小，磁盘分区大小，inode数量决定， </p>
<p>inode 编号可重复使用，当删除一个文件之后，其inode 编号会被回收，供下次新文件使用，</p>
<p><img src="../../../../images/SRE/day03/4.png" alt="4"></p>
<p>每一个inode表记录对应的保存了以下信息：</p>
<ul>
<li>inode number（索引节点编号） </li>
<li>文件类型 </li>
<li>权限 </li>
<li>属主属组 </li>
<li>链接数 </li>
<li>文件大小 </li>
<li>各时间戳 </li>
<li>指向具体数据块的指针 </li>
<li>有关文件的其他数据</li>
</ul>
<p><img src="../../../../images/SRE/day03/5.png" alt="5"></p>
<p><strong>以指针大小为4字节，block块大小为4KB为前置条件</strong> </p>
<p>指针大小和block 块大小跟操作系统平台，以及文件系统有关； </p>
<p><strong>直接指针</strong> </p>
<p>12个直接指针，直接指向具体数据块，如果block 大小为 4096(4K)，则直接指针可以保存 48KB的文件 </p>
<p><strong>间接指针</strong> </p>
<p>1个间接指针，指向一个数据块，只不过该block上保存的是指针，而不是具体数据 </p>
<p>如果block 大小为 4096(4K)，一个指针占用4字节，所以此处可以存储 4096/4=1024个 block 地址； </p>
<p>则可以存储的数据大小为 1024*4096=4MB  </p>
<p><strong>双重间接指针</strong> </p>
<p>1个双重间接指针，指向一个数据块，只不过该block上保存的是指针，而不是具体数据 </p>
<p>如果block 大小为 4096(4K)，一个指针占用4字节，所以此处可以存储 4096/4=1024个 block 地址；</p>
<p>同理，其指向的 1024个block上，也都是存储的指针地址； </p>
<p>则此处可以存储的数据大小为  1024x1024x4096=4GB </p>
<p><strong>三重间接指针</strong> </p>
<p>1个三重间接指针，指向一个数据块，只不过该block上保存的是指针，而不是具体数据 </p>
<p>如果block 大小为 4096(4K)，一个指针占用4字节，所以此处可以存储 4096/4=1024个 block 地址； </p>
<p>同理，其指向的 1024个block上，也都是存储的指针地址 则此处可以存储的数据大小为  1024x1024x1024x4096=4TB </p>
<p><strong>单文件最大容量</strong> </p>
<p>12x直接指针 + 间接指针 + 双重间接指针 + 三重间接指针 </p>
<p><strong>目录</strong> </p>
<p>目录是个特殊文件，目录文件的内容保存了此目录中文件的列表及inode number对应关系 </p>
<ul>
<li>文件引用一个是 inode号  </li>
<li>人是通过文件名来引用一个文件  </li>
<li>一个目录是目录下的文件名和文件inode号之间的映射</li>
</ul>
<p><strong>inode表和目录</strong></p>
<p><img src="../../../../images/SRE/day03/6.png" alt="6"></p>
<p><strong>cp和inode</strong> </p>
<p>cp 命令： </p>
<ul>
<li>分配一个空闲的inode号，在inode表中生成新条目  </li>
<li>在目录中创建一个目录项，将名称与inode编号关联  </li>
<li>拷贝数据生成新的文件 </li>
</ul>
<p><strong>rm和inode</strong></p>
<p>rm 命令： </p>
<ul>
<li>链接数递减，从而释放的inode号可以被重用  </li>
<li>把数据块放在空闲列表中  </li>
<li>删除目录项  </li>
<li>数据实际上不会马上被删除，但当另一个文件使用数据块时将被覆盖 </li>
</ul>
<p><strong>mv和inode</strong> </p>
<ul>
<li>如果mv命令的目标和源在相同的文件系统，作为mv 命令 用新的文件名创建对应新的目录项  删除旧目录条目对应的旧的文件名  不影响inode表（除时间戳）或磁盘上的数据位置：没有数据被移动！ </li>
<li>如果目标和源在一个不同的文件系统， mv相当于cp和rm</li>
</ul>
<p>范例：查看文件系统类型</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># df -hT</span></span><br><span class="line">Filesystem          Type      Size  Used Avail Use% Mounted on</span><br><span class="line">devtmpfs            devtmpfs  877M     0  877M   0% /dev</span><br><span class="line">tmpfs               tmpfs     896M     0  896M   0% /dev/shm</span><br><span class="line">tmpfs               tmpfs     896M  8.7M  887M   1% /run</span><br><span class="line">tmpfs               tmpfs     896M     0  896M   0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rl-root xfs       130G  2.9G  128G   3% /</span><br><span class="line">/dev/mapper/rl-home xfs        65G  497M   65G   1% /home</span><br><span class="line">/dev/sda1           xfs      1014M  212M  803M  21% /boot</span><br><span class="line">tmpfs               tmpfs     180M     0  180M   0% /run/user/0</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># cat /etc/fstab </span></span><br><span class="line">/dev/mapper/rl-root     /                       xfs     defaults        0 0</span><br><span class="line">UUID=a8e3c539-a7e7-4828-9a4d-08a9ec290d07 /boot                   xfs     defaults        0 0</span><br><span class="line">/dev/mapper/rl-home     /home                   xfs     defaults        0 0</span><br><span class="line">/dev/mapper/rl-swap     none                    swap    defaults        0 0</span><br></pre></td></tr></table></figure>

<p>范例：查看分区inode</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># df -i</span></span><br><span class="line">Filesystem            Inodes IUsed    IFree IUse% Mounted on</span><br><span class="line">devtmpfs              224364   394   223970    1% /dev</span><br><span class="line">tmpfs                 229154     1   229153    1% /dev/shm</span><br><span class="line">tmpfs                 229154   594   228560    1% /run</span><br><span class="line">tmpfs                 229154    17   229137    1% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rl-root 68157440 52706 68104734    1% /</span><br><span class="line">/dev/mapper/rl-home 34078720     3 34078717    1% /home</span><br><span class="line">/dev/sda1             524288   310   523978    1% /boot</span><br><span class="line">tmpfs                 229154     5   229149    1% /run/user/0</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看指定分区</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># df -i /boot</span></span><br><span class="line">Filesystem     Inodes IUsed  IFree IUse% Mounted on</span><br><span class="line">/dev/sda1      524288   310 523978    1% /boot</span><br><span class="line">[root@rocky8 ~]<span class="comment"># df -i /dev/sda1</span></span><br><span class="line">Filesystem     Inodes IUsed  IFree IUse% Mounted on</span><br><span class="line">/dev/sda1      524288   310 523978    1% /boot</span><br></pre></td></tr></table></figure>

<p>范例：查看文件inode</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># ll -i abc </span></span><br><span class="line">403579895 -rw-r--r--. 1 root root 0 Aug 26 15:35 abc</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ls -i abc</span></span><br><span class="line">403579895 abc</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat abc</span></span><br><span class="line">  File: abc</span><br><span class="line">  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: fd00h/64768d	Inode: 403579895   Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2024-08-26 15:35:19.342504991 +0800</span><br><span class="line">Modify: 2024-08-26 15:35:19.342504991 +0800</span><br><span class="line">Change: 2024-08-26 15:35:19.342504991 +0800</span><br><span class="line"> Birth: 2024-08-26 15:35:19.342504991 +0800</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># stat -c &quot;%i&quot; abc</span></span><br><span class="line">403579895</span><br></pre></td></tr></table></figure>

<p> <strong>inode编号耗尽 &amp; 磁盘打满</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#分区越大，可用的节点编号就越多，当前分区有多少个节点编号，就是说能在当前分区上创建多少个文件</span></span><br><span class="line"><span class="comment">#如果当前分区上的节点编号用光，则无法再创建新文件，系统会提示 “No space left on device”</span></span><br><span class="line"><span class="comment">#如果当前分区上的空间用光，同样无法创建新文件，系统同样提示 “No space left on device”</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">test</span>-&#123;1..523977&#125;.txt | xargs <span class="built_in">touch</span>     <span class="comment">#创建大量空文件耗尽inode号  </span></span><br><span class="line"><span class="built_in">cp</span> /dev/zero /tmp/                          <span class="comment">#创真实大文件把硬盘打满</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">df</span> -i       <span class="comment">#查看磁盘分区inode编号使用情况</span></span><br><span class="line"><span class="built_in">df</span> -lh      <span class="comment">#查看磁盘分区使用情况</span></span><br></pre></td></tr></table></figure>

<p>磁盘分区还有空间，但提示没有足够空间创建文件，这就是因为 inode 编号耗尽的原因</p>
<p><img src="../../../../images/SRE/day03/7.png" alt="7"></p>
<p>inode 编号资源还有，但磁盘数据空间被耗尽，同样无法创建文件</p>
<p><img src="../../../../images/SRE/day03/8.png" alt="8"></p>
<p>范例：删除大文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cat /dev/null &gt; /var/log/huge.log</span></span><br></pre></td></tr></table></figure>

<h2 id="硬-hard-链接"><a href="#硬-hard-链接" class="headerlink" title="硬(hard)链接"></a>硬(hard)链接</h2><p>hard link</p>
<p>硬链接的作用是允许一个文件拥有多个有效的路径名， </p>
<p>新增一个文件，指向某个文件的inode，这样，这两个文件就互为硬链接， </p>
<p>也就是多个文件名，都是指向同一个inode，这是硬链接的本质。</p>
<p><img src="../../../../images/SRE/day03/9.png" alt="9"></p>
<p>硬链接特性</p>
<ul>
<li>创建硬链接会在对应的目录中增加额外的记录项以引用文件</li>
<li>对应于同一文件系统上一个物理文件</li>
<li>每个目录引用相同的inode号</li>
<li>创建时链接数递增</li>
<li>删除文件时：rm命令递减计数的链接，文件要存在，至少有一个链接数，当链接数为零时，该文件被删除</li>
<li>不能跨越驱动器或分区</li>
<li>不支持对目录创建硬链接</li>
</ul>
<p>格式: </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> filename linkname</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .  表示当前目录，目录名也表示当前目录，所以是有2次引用</span></span><br><span class="line"><span class="comment"># .. 表示上级目录，上级目录名引用一次，上级目录中的 . 引用一次，子目录中的 .. 引用一次，所是是3次引用</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 dir1]<span class="comment"># ll -ai</span></span><br><span class="line">total 0</span><br><span class="line">				  <span class="string">&#x27;被引用次数&#x27;</span></span><br><span class="line">   768482 drwxr-xr-x. 2 root root   6 Aug 26 15:56 .</span><br><span class="line">402653313 dr-xr-x---. 3 root root 168 Aug 26 15:56 ..</span><br><span class="line"></span><br><span class="line">[root@rocky8 dir1]<span class="comment"># touch a</span></span><br><span class="line">[root@rocky8 dir1]<span class="comment"># ll</span></span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--. 1 root root 0 Aug 26 16:02 a</span><br><span class="line"></span><br><span class="line">[root@rocky8 dir1]<span class="comment"># ln a b</span></span><br><span class="line">[root@rocky8 dir1]<span class="comment"># ll</span></span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--. 2 root root 0 Aug 26 16:02 a</span><br><span class="line">-rw-r--r--. 2 root root 0 Aug 26 16:02 b</span><br></pre></td></tr></table></figure>

<h2 id="符号-symbolic-或软-soft-链接"><a href="#符号-symbolic-或软-soft-链接" class="headerlink" title="符号 symbolic (或软 soft)链接"></a>符号 symbolic (或软 soft)链接</h2><p>symbolic link，也称为符号链接，类似于windows 中的快捷方式， </p>
<p>软链接是建立一个独立的文件，这个文件的指向的是目标的文件名。</p>
<p><img src="../../../../images/SRE/day03/10.png" alt="10"></p>
<p>软链接特点 </p>
<ul>
<li>一个符号链接的内容是它引用文件的名称</li>
<li>可以对目录创建软链接</li>
<li>可以跨分区的文件实现</li>
<li>指向的是另一个文件的路径；其大小为指向的路径字符串的长度；不增加或减少目标文件inode的引用计数</li>
<li>软链接如果使用相对路径，是相对于原文件的路径，而非相对于当前目录</li>
<li>删除软链接本身，不会删除源目录内容</li>
<li>删除源目录的文件，不会删除链接文件</li>
</ul>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s filename linkname</span><br></pre></td></tr></table></figure>

<p>范例: 查看软链接</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># ll /bin/sh</span></span><br><span class="line">lrwxrwxrwx. 1 root root 4 Oct  9  2021 /bin/sh -&gt; bash</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ll /bin</span></span><br><span class="line">lrwxrwxrwx. 1 root root 7 Oct 11  2021 /bin -&gt; usr/bin</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># readlink /bin/sh</span></span><br><span class="line">bash</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># readlink /bin</span></span><br><span class="line">usr/bin</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建跨目录的软链接时，源文件不能以当前路径为准，要以目标文件的路径为准（绝对路径或者目标文件的相对路径）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#错误</span></span><br><span class="line">[root@rocky86 /]<span class="comment"># ln -sv abc /boot/abc.link</span></span><br><span class="line"> <span class="string">&#x27;/boot/abc.link&#x27;</span> -&gt; <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 /]<span class="comment"># ll /boot/abc.link </span></span><br><span class="line">lrwxrwxrwx 1 root root 3 Jul 12 15:08 /boot/abc.link -&gt; abc</span><br><span class="line"></span><br><span class="line"><span class="comment">#正确</span></span><br><span class="line">[root@rocky86 /]<span class="comment"># ln -sv /root/abc /boot/abc.link2</span></span><br><span class="line"> <span class="string">&#x27;/boot/abc.link2&#x27;</span> -&gt; <span class="string">&#x27;/root/abc&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 /]<span class="comment"># ll /boot/abc.link2</span></span><br><span class="line"> lrwxrwxrwx 1 root root 9 Jul 12 15:10 /boot/abc.link2 -&gt; /root/abc</span><br><span class="line"></span><br><span class="line"><span class="comment">#正确</span></span><br><span class="line">[root@rocky86 /]<span class="comment"># ln -sv ../root/abc /boot/abc.link3</span></span><br><span class="line"> <span class="string">&#x27;/boot/abc.link3&#x27;</span> -&gt; <span class="string">&#x27;../root/abc&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 /]<span class="comment"># ll /boot/abc.link3</span></span><br><span class="line"> lrwxrwxrwx 1 root root 11 Jul 12 15:12 /boot/abc.link3 -&gt; ../root/abc</span><br></pre></td></tr></table></figure>

<p>范例：删除软链接</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 0712]<span class="comment"># ll</span></span><br><span class="line"> total 0</span><br><span class="line"> drwxr-xr-x 2 root root 48 Jul 12 15:17 dir1</span><br><span class="line"> lrwxrwxrwx 1 root root  5 Jul 12 15:18 dir1.link -&gt; dir1/</span><br><span class="line"> </span><br><span class="line"><span class="comment">#这样是删除链接指向的目录</span></span><br><span class="line">[root@rocky86 0712]<span class="comment"># rm -rf dir1.link/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#这样是删除链接文件</span></span><br><span class="line">[root@rocky86 0712]<span class="comment"># rm -rf dir1.link</span></span><br></pre></td></tr></table></figure>

<h2 id="硬链接和软链接区别总结"><a href="#硬链接和软链接区别总结" class="headerlink" title="硬链接和软链接区别总结"></a>硬链接和软链接区别总结</h2><table>
<thead>
<tr>
<th></th>
<th>硬链接</th>
<th>软连接</th>
</tr>
</thead>
<tbody><tr>
<td>本质</td>
<td>本质是同一个文件</td>
<td>本质不是同一个文件</td>
</tr>
<tr>
<td>跨设备</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>inode</td>
<td>相同</td>
<td>不同</td>
</tr>
<tr>
<td>链接数</td>
<td>创建新的硬链接，链接数会增加，<br />删除硬链接，链接数减少</td>
<td>创建或删除，链接数不会变化</td>
</tr>
<tr>
<td>文件夹</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>相对路径</td>
<td>原始文件相对路径是相对于当前工作目录</td>
<td>原始文件相对路径是相对于链接文件的相对路径</td>
</tr>
<tr>
<td>删除源文件</td>
<td>是链接数减一，但链接文件的访问不受影响</td>
<td>链接文件将无法访问</td>
</tr>
<tr>
<td>文件类型</td>
<td>和源文件相同</td>
<td>链接文件，和源文件无关</td>
</tr>
</tbody></table>
<h1 id="IO-重定向和管道"><a href="#IO-重定向和管道" class="headerlink" title="IO 重定向和管道"></a>IO 重定向和管道</h1><h2 id="标准输入和输出"><a href="#标准输入和输出" class="headerlink" title="标准输入和输出"></a>标准输入和输出</h2><p>Linux系统中有三个最基本的IO设备</p>
<ol>
<li>标准输入设备(stdin)：对应终端键盘 </li>
<li>标准输出设备(stdout)：对应终端的显示器</li>
<li>标准错误输出设备(stderr)：对应终端的显示器</li>
</ol>
<p>在Linux系统中，一切皆文件，所以，这三个设备也是以文件的形式存在于系统中；</p>
<p>程序从标准输入文件中获取数据，再将运行结果和错误信息输出到标准输出设备和标准错误输出设备；</p>
<p>在虚拟终端中，标准输入输出设备都是当前的终端窗口</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># ll /dev/std*</span></span><br><span class="line"> lrwxrwxrwx 1 root root 15 Jul 12 10:13 /dev/stderr -&gt; /proc/self/fd/2</span><br><span class="line"> lrwxrwxrwx 1 root root 15 Jul 12 10:13 /dev/stdin -&gt; /proc/self/fd/0</span><br><span class="line"> lrwxrwxrwx 1 root root 15 Jul 12 10:13 /dev/stdout -&gt; /proc/self/fd/1</span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># ll /proc/self/fd/</span></span><br><span class="line"> total 0</span><br><span class="line"> lrwx------ 1 root root 64 Jul 12 17:47 0 -&gt; /dev/pts/1</span><br><span class="line"> lrwx------ 1 root root 64 Jul 12 17:47 1 -&gt; /dev/pts/1</span><br><span class="line"> lrwx------ 1 root root 64 Jul 12 17:47 2 -&gt; /dev/pts/1</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tty</span></span><br><span class="line"> /dev/pts/1</span><br></pre></td></tr></table></figure>

<p><img src="../../../../images/SRE/day03/11.png" alt="11"></p>
<h2 id="I-O重定向-redirect"><a href="#I-O重定向-redirect" class="headerlink" title="I/O重定向 redirect"></a>I/O重定向 redirect</h2><p>重定向：redirect </p>
<p>I/O重定向：将默认的输入，输出或错误对应的设备改变，指向新的目标</p>
<h3 id="标准输出和错误重新定向"><a href="#标准输出和错误重新定向" class="headerlink" title="标准输出和错误重新定向"></a>标准输出和错误重新定向</h3><p>STDOUT 和 STDERR  默认是使用当前终端，但也可以重定向到指定终端或指定文件</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">COMMAND OPERATOR FILE|DEVICE</span><br><span class="line"></span><br><span class="line"><span class="comment">#覆盖操作符，如果文件存在，会被覆盖</span></span><br><span class="line">&gt;       <span class="comment">#把STDOUT重定向到文件</span></span><br><span class="line">1&gt;      <span class="comment">#同上</span></span><br><span class="line">2&gt;      <span class="comment">#把STDERR重定向到文件</span></span><br><span class="line">&amp;&gt;      <span class="comment">#把标准输出和错误都重定向</span></span><br><span class="line">&gt;&amp;      <span class="comment">#和上面功能一样，建议使用上面方式</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#追加操作符，在原有文件的基础上追加内容</span></span><br><span class="line">&gt;&gt;      <span class="comment">#追加标准输出重定向至文件</span></span><br><span class="line">1&gt;&gt;     <span class="comment">#同上</span></span><br><span class="line">2&gt;&gt;     <span class="comment">#追加标准错误重定向至文件</span></span><br></pre></td></tr></table></figure>

<p>范例：标准输出至其它终端</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># tty</span></span><br><span class="line"> /dev/pts/0</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat /etc/fstab &gt; /dev/pts/1</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls &gt; /dev/pts/1</span></span><br></pre></td></tr></table></figure>

<p>范例：标准错误输出至其它终端</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># tty</span></span><br><span class="line"> /dev/pts/0</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># lss 2&gt; /dev/pts/1</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat null 2&gt; /dev/pts/1</span></span><br></pre></td></tr></table></figure>

<p>范例：重定向至文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#标准输出重定向至文件，覆盖</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat fstab &gt; out.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标准输出重定向至文件，追加</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat fstab &gt;&gt; out.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标准错误输出重定向至文件，覆盖</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat null 2&gt; err.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标准错误输出重定向至文件，追加</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat null 2&gt;&gt; err.log</span></span><br></pre></td></tr></table></figure>

<p><strong>标准输出和错误输出各自定向至不同位置</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMAND &gt; sucess.out 2&gt; /path/to/error.out</span><br></pre></td></tr></table></figure>

<p>范例：同时标准输出和标准错误输出</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null</span></span><br><span class="line"> <span class="built_in">ls</span>: cannot access <span class="string">&#x27;null&#x27;</span>: No such file or directory</span><br><span class="line"> fstab</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null &gt; out.log 2&gt; err.log</span></span><br></pre></td></tr></table></figure>

<p><strong>合并标准输出和错误输出为同一个数据流进行重定向</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&amp;&gt;      <span class="comment">#覆盖重定向</span></span><br><span class="line">&amp;&gt;&gt;     <span class="comment">#追加重定向</span></span><br><span class="line"></span><br><span class="line">COMMAND &gt; /path/to/file.out 2&gt;&amp;1</span><br><span class="line">COMMAND &gt;&gt; /path/to/file.out 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>范例：标准输出和标准错误输出重定向至同一个文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#标准输出重定向至 out.log,标准错误输出重定向至标准输出</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null &gt; out.log 2&gt;&amp;1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标准错误输出重定向到 out.log,标准输出重定向至标准错误输出</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null 2&gt; out.log 1&gt;&amp;2</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null &amp;&gt; out.log</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null &gt;&amp; out.log</span></span><br></pre></td></tr></table></figure>

<p>错误写法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#标准错误输出重定向至标准输出之前，要先定义好标准输出的文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null 2&gt;&amp;1 &gt; out.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标准输出重定向至标准错误输出之前，要先定义好标准错误输出的文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null 1&gt;&amp;2 2&gt;out.log</span></span><br></pre></td></tr></table></figure>

<p>范例：清除大文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通用</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat /dev/null &gt; /data/file.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#依赖于shell类型,不通用</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># &gt; /data/file.log </span></span><br></pre></td></tr></table></figure>

<p>范例: 实现标准输出和错误的互换</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#子进程中借用中间文件描述符3，将标准输出和标准错误输出作了对换</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># (ls fstab null 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)&gt;right.out 2&gt;err.out</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat right.out </span></span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">&#x27;null&#x27;</span>: No such file or directory</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat err.out </span></span><br><span class="line">fstab</span><br></pre></td></tr></table></figure>

<h3 id="标准输入重定向"><a href="#标准输入重定向" class="headerlink" title="标准输入重定向"></a>标准输入重定向</h3><h4 id="tr-命令"><a href="#tr-命令" class="headerlink" title="tr 命令"></a>tr 命令</h4><p>用于转换字符、删除字符和压缩重复的字符。它从标准输入读取数据并将结果输出到标准输出</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tr</span> [OPTION]... SET1 [SET2]</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-c|-C|--complement      <span class="comment">#用SET2替换SET1中没有包含的字符</span></span><br><span class="line">-d|--delete             <span class="comment">#删除SET1中所有的字符，不转换</span></span><br><span class="line">-s|--squeeze-repeats    <span class="comment">#压缩SET1中重复的字符，即删除重复的字符（只留一个）</span></span><br><span class="line">-t|--truncate-set1      <span class="comment">#将SET1用SET2替换，SET2中不够的，就不处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#常用通配符</span></span><br><span class="line">[:alnum:]           <span class="comment">#字母和数字</span></span><br><span class="line">[:alpha:]           <span class="comment">#字母</span></span><br><span class="line">[:digit:]           <span class="comment">#数字</span></span><br><span class="line">[:lower:]           <span class="comment">#小写字母</span></span><br><span class="line">[:upper:]           <span class="comment">#大写字母</span></span><br><span class="line">[:space:]           <span class="comment">#空白字符</span></span><br><span class="line">[:<span class="built_in">print</span>:]           <span class="comment">#可打印字符</span></span><br><span class="line">[:punct:]           <span class="comment">#标点符号</span></span><br><span class="line">[:graph:]           <span class="comment">#图形字符</span></span><br><span class="line">[:cntrl:]           <span class="comment">#控制（非打印）字符</span></span><br><span class="line">[:xdigit:]          <span class="comment">#十六进制字符</span></span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># echo 123123 | tr 123 abc</span></span><br><span class="line">abcabc</span><br><span class="line">[root@rocky8 ~]<span class="comment"># echo 123333 | tr 123 abc</span></span><br><span class="line">abcccc</span><br><span class="line"></span><br><span class="line"><span class="comment">#小写转大写</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># echo 123abcd | tr a-z A-Z</span></span><br><span class="line">123ABCD</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># echo 123abcd | tr [:lower:] [:upper:]</span></span><br><span class="line">123ABCD</span><br><span class="line"></span><br><span class="line"><span class="comment">#非123就替换成x</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># echo 1235790 | tr -c 123 x</span></span><br><span class="line">123xxxxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除2-5</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># echo 1235790 | tr -d &#x27;2-5&#x27;</span></span><br><span class="line">1790</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除大写字母</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># echo TDlQToDHvFEeKL | tr -d [:upper:]</span></span><br><span class="line">love</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将issue文件中的小写字母换成大写，然后输出</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tr [:lower:] [:upper:] &lt;/etc/issue</span></span><br><span class="line"> \S</span><br><span class="line"> KERNEL \R ON AN \M</span><br><span class="line"> </span><br><span class="line"><span class="comment">#将issue文件中的小写字母换成大写，然后重定向输出到文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tr [:lower:] [:upper:] &lt;/etc/issue &gt; tr.tx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#命令重定向</span></span><br><span class="line">[root@rocky8 ~]<span class="comment"># tr -s &#x27; &#x27; &lt;&lt;&lt;`df`</span></span><br><span class="line">Filesystem 1K-blocks Used Available Use% Mounted on</span><br><span class="line">devtmpfs 897456 0 897456 0% /dev</span><br><span class="line">tmpfs 916616 0 916616 0% /dev/shm</span><br><span class="line">tmpfs 916616 8872 907744 1% /run</span><br><span class="line">tmpfs 916616 0 916616 0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rl-root 136248320 2968480 133279840 3% /</span><br><span class="line">/dev/mapper/rl-home 68124160 508020 67616140 1% /home</span><br><span class="line">/dev/sda1 1038336 216736 821600 21% /boot</span><br><span class="line">tmpfs 183320 0 183320 0% /run/user/0</span><br><span class="line"></span><br><span class="line"><span class="comment">#同上</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tr -s &#x27; &#x27; &lt; &lt;(df)</span></span><br></pre></td></tr></table></figure>

<h4 id="标准输入重定向-1"><a href="#标准输入重定向-1" class="headerlink" title="标准输入重定向"></a>标准输入重定向</h4><p>标准输入重定向是使用文件来代替键盘的输入， </p>
<p>从文件中读取数据，代替当前终端的输入设备输入的数据， </p>
<p>此处要严格区分命令是否支持标准输入，标准输入和参数是两个概念；</p>
<p> 怎么判断命令能使用标准输入重定向？ </p>
<p>不跟任何选项参数，直接回车，看是否等待标准输入，如果是，则该命令可以使用标准输入重定向。</p>
<p>格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">COMMAND 0&lt; FILE</span><br><span class="line"></span><br><span class="line">COMMAND &lt; FILE</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cat a.txt </span></span><br><span class="line">1+2+3+4+5+6+7+8+9+10</span><br><span class="line"></span><br><span class="line"><span class="comment">#标准输入重定向</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt; a.txt </span></span><br><span class="line">55</span><br><span class="line"></span><br><span class="line"><span class="comment">#标准输入输出重定向</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt; a.txt &gt; rs.txt</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat rs.txt </span></span><br><span class="line">55</span><br><span class="line"></span><br><span class="line"><span class="comment">#多行执行</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># seq -s + 1 10 &gt; a.txt;bc&lt;a.txt&gt;rs.txt</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat rs.txt </span></span><br><span class="line">55</span><br><span class="line"></span><br><span class="line"><span class="comment">#等价于 cat a.txt</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat &lt; a.txt </span></span><br><span class="line">1+2+3+4+5+6+7+8+9+10</span><br><span class="line"></span><br><span class="line"><span class="comment">#先输入重定向，再输出重定向</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat &lt; a.txt &gt; b.txt</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat b.txt </span></span><br><span class="line">1+2+3+4+5+6+7+8+9+10</span><br><span class="line"></span><br><span class="line"><span class="comment">#输入重定向，再将输入内容输出重定向</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat &gt; abc.txt</span></span><br></pre></td></tr></table></figure>

<h4 id="标准输入多行重定向"><a href="#标准输入多行重定向" class="headerlink" title="标准输入多行重定向"></a>标准输入多行重定向</h4><p>使用 “&lt;&lt;终止词” 命令从键盘把多行重导向给STDIN，直到终止词位置之前的所有文本都发送给STDIN，</p>
<p>有时被称为就地文本（here  documents），其中终止词可以是任何一个或多个符号，</p>
<p>比如：!，@，$，EOF（End Of File），magedu等，其中EOF比较常用</p>
<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cat &lt;&lt;EOF</span></span><br><span class="line"> &gt; 123</span><br><span class="line"> &gt; 456</span><br><span class="line"> &gt; EOF</span><br><span class="line"> 123</span><br><span class="line"> 456</span><br><span class="line"> </span><br><span class="line"> [root@rocky86 ~]<span class="comment"># bc &lt;&lt;EOF</span></span><br><span class="line"> &gt; 2+3</span><br><span class="line"> &gt; 3^4</span><br><span class="line"> &gt; EOF</span><br><span class="line"> 5</span><br><span class="line"> 81</span><br></pre></td></tr></table></figure>

<p>范例：多行覆盖</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cat &gt; abc.txt &lt;&lt;EOF</span></span><br><span class="line"> &gt; 123</span><br><span class="line"> &gt; 456</span><br><span class="line"> &gt; 789</span><br><span class="line"> &gt; EOF</span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat abc.txt </span></span><br><span class="line">123</span><br><span class="line">456</span><br><span class="line">789</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># mail -s &quot;test title&quot; 123456@qq.com &lt;&lt;EOF</span></span><br><span class="line"> &gt; hi</span><br><span class="line"> &gt; </span><br><span class="line"> &gt; this is <span class="built_in">test</span> mail</span><br><span class="line"> &gt; </span><br><span class="line"> &gt; <span class="built_in">bye</span></span><br><span class="line"> &gt; form mage</span><br><span class="line"> &gt; EOF</span><br></pre></td></tr></table></figure>

<h4 id="高级重定向写法"><a href="#高级重定向写法" class="headerlink" title="高级重定向写法"></a>高级重定向写法</h4><h5 id="cmd-lt-lt-lt-“string”"><a href="#cmd-lt-lt-lt-“string”" class="headerlink" title="cmd &lt;&lt;&lt; “string”"></a>cmd &lt;&lt;&lt; “string”</h5><p>含义是 here-string ，表示传给给cmd的stdin的内容从这里开始是一个字符串。</p>
<p>范例：直接字符串</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cat &lt;&lt;&lt; &quot;abc&quot;</span></span><br><span class="line"> abc</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt;&lt;&lt; &quot;1+2+3&quot;</span></span><br><span class="line"> 6</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tr &#x27;a-z&#x27; &#x27;A-Z&#x27; &lt;&lt;&lt; &quot;welcome to magedu&quot;</span></span><br><span class="line"> WELCOME TO MAGEDU</span><br></pre></td></tr></table></figure>

<p>范例：执行命令作重定向输入</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt;&lt;&lt; `echo 1+2+3`</span></span><br><span class="line"> 6</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt;&lt;&lt; `seq -s + 3`</span></span><br><span class="line"> 6</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tr &#x27;a-z&#x27; &#x27;A-Z&#x27; &lt;&lt;&lt; `hostname`</span></span><br><span class="line"> ROCKY86</span><br></pre></td></tr></table></figure>

<h5 id="cmd1-lt-lt-cmd2"><a href="#cmd1-lt-lt-cmd2" class="headerlink" title="cmd1 &lt; &lt;(cmd2)"></a>cmd1 &lt; &lt;(cmd2)</h5><p>名称为 Process substitution ，是由两个部分组成 </p>
<p>&lt;(cmd2) 表示把cmd2的输出写入一个临时文件，注意：&lt; 符号 与（ 符号之间没有空格 </p>
<p>cmd1 &lt; 这是一个标准的stdin重定向</p>
<p>把两个合起来，就是把cmd2的输出stdout传递给cmd1作为输入stdin， 中间通过临时文件做传递</p>
<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt; &lt;(echo 1+2+3)</span></span><br><span class="line"> 6</span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># bc &lt; &lt;(seq -s + 3)</span></span><br><span class="line"> 6</span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># tr &#x27;a-z&#x27; &#x27;A-Z&#x27; &lt; &lt;(hostname)</span></span><br><span class="line"> ROCKY86</span><br></pre></td></tr></table></figure>

<p>范例：查看中间文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]<span class="comment"># ll &lt;(hostname)</span></span><br><span class="line">lr-x------. 1 root root 64 Aug 26 20:56 /dev/fd/63 -&gt; <span class="string">&#x27;pipe:[33862]&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><h3 id="管道-1"><a href="#管道-1" class="headerlink" title="管道"></a>管道</h3><p>管道(pipe)：名顾思义，水管，从一端进去，再从另一端出来。 </p>
<p>在shell 中，可以将两个或多个命令(程序|进程)连接起来，将前一个命令的输出作为后一个命令的输入，就像拿水管将两个命令连起来；</p>
<p>使用管道，要求前一个命令必须支持标准输出，后一个命令必须支持标准输入；</p>
<p><img src="../../../../images/SRE/day03/12.png" alt="12"></p>
<p>格式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMAND1|COMMAND2|COMMAND3|...</span><br></pre></td></tr></table></figure>

<p>功能说明： </p>
<ul>
<li>将命令1的STDOUT发送给命令2的STDIN，命令2的STDOUT发送到命令3的STDIN  </li>
<li>所有命令会在当前shell进程的子shell进程中执行  </li>
<li>组合多种工具的功能 </li>
</ul>
<p>注意：STDERR默认不能通过管道转发，可利用2&gt;&amp;1 或 |&amp; 实现，格式如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">COMMAND1 2&gt;&amp;1 | COMMAND2 </span><br><span class="line"></span><br><span class="line">COMMAND1 |&amp; COMMAND2</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># echo 1+2+3|bc</span></span><br><span class="line"> 6</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat /var/log/messages | more</span></span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]<span class="comment"># ls --help | grep size</span></span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo $PATH | tr &#x27;:&#x27; &#x27;\n&#x27;</span></span><br><span class="line"> /usr/local/sbin</span><br><span class="line"> /usr/local/bin</span><br><span class="line"> /usr/sbin</span><br><span class="line"> /usr/bin</span><br><span class="line"> /root/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#多重管道</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo $PATH | tr &#x27;:&#x27; &#x27;\n&#x27; | sort</span></span><br><span class="line"> /root/bin</span><br><span class="line"> /usr/bin</span><br><span class="line"> /usr/local/bin</span><br><span class="line"> /usr/local/sbin</span><br><span class="line"> /usr/sbin</span><br><span class="line"></span><br><span class="line"><span class="comment">#多重管道（ifconfig命令需要安装net-tools）</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># ifconfig | head -n 2 | tail -n 1 | tr -s &#x27; &#x27; | cut -d &quot; &quot; -f 3</span></span><br><span class="line"> 192.168.1.11</span><br></pre></td></tr></table></figure>

<p>范例：标准输出和标准错误输出同时使用管道</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null 2&gt;&amp;1 | tr &#x27;a-z&#x27; &#x27;A-Z&#x27;</span></span><br><span class="line"> LS: CANNOT ACCESS <span class="string">&#x27;NULL&#x27;</span>: NO SUCH FILE OR DIRECTORY</span><br><span class="line"> FSTAB</span><br><span class="line"> </span><br><span class="line">[root@rocky86 ~]<span class="comment"># ls fstab null |&amp; tr &#x27;a-z&#x27; &#x27;A-Z&#x27;</span></span><br><span class="line"> LS: CANNOT ACCESS <span class="string">&#x27;NULL&#x27;</span>: NO SUCH FILE OR DIRECTORY</span><br><span class="line"> FSTAB</span><br></pre></td></tr></table></figure>

<p>范例：实现邮件服务</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># vim /etc/mail.rc</span></span><br><span class="line"> <span class="built_in">set</span> from=3311987957@qq.com</span><br><span class="line"> <span class="built_in">set</span> smtp=smtp.qq.com</span><br><span class="line"> <span class="built_in">set</span> smtp-auth-user=3311987957@qq.com</span><br><span class="line"> <span class="built_in">set</span> smtp-auth-password=meenopnxjawzbfcc</span><br><span class="line"> <span class="built_in">set</span> smtp-auth=login</span><br><span class="line"> <span class="built_in">set</span> ssl-verify=ignore</span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test email&quot;</span> | mail  -s <span class="string">&quot;test&quot;</span> 123456@qq.com</span><br></pre></td></tr></table></figure>

<p>范例：用户密码修改</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># passwd --stdin jose</span></span><br><span class="line"> Changing password <span class="keyword">for</span> user jose.</span><br><span class="line"> magedu</span><br><span class="line"> passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@centos8 ~]<span class="comment">#cat pass.txt</span></span><br><span class="line"> centos</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># passwd --stdin jose &lt; pass.txt</span></span><br><span class="line"> Changing password <span class="keyword">for</span> user jose.</span><br><span class="line"> passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># cat pass.txt | passwd --stdin jose</span></span><br><span class="line"> Changing password <span class="keyword">for</span> user jose.</span><br><span class="line"> passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo magedu | passwd --stdin jose</span></span><br><span class="line"> Changing password <span class="keyword">for</span> user jose.</span><br><span class="line"> passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo magedu | passwd --stdin jose &amp;&gt; /dev/null</span></span><br></pre></td></tr></table></figure>

<h3 id="tee-命令"><a href="#tee-命令" class="headerlink" title="tee 命令"></a>tee 命令</h3><p>将标准输入复制到每个指定文件，并显示到标准输出</p>
<p>格式</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tee</span> [OPTION]... [FILE]...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-a|--append             <span class="comment">#内容追加到给定的文件而非覆盖</span></span><br><span class="line">-i|--ignore-interrupts  <span class="comment">#忽略中断信号</span></span><br><span class="line">-p                      <span class="comment">#对写入非管道的行为排查错误，其使用的是 warn-nopipe</span></span><br><span class="line">--output-error[=模式]    <span class="comment">#设置写入出错时的行为 (warn|warn-nopipe|exit|exit-nopipe)         </span></span><br><span class="line"></span><br><span class="line">cmd1 | <span class="built_in">tee</span> [-a ] filename | cmd2 </span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#接受标准输入，在标准输出上打印，并写文件</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># tee tee.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#管道重定向</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo hello | tee tee.log</span></span><br><span class="line"> hello</span><br><span class="line"></span><br><span class="line"><span class="comment">#tee.log 里面是hello,终端输出是HELLO</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo hello | tee tee.log | tr &#x27;a-z&#x27; &#x27;A-Z&#x27;</span></span><br><span class="line"> HELLO</span><br><span class="line"></span><br><span class="line"><span class="comment">#tee.log 和终端输出都是大写</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo hello | tr &#x27;a-z&#x27; &#x27;A-Z&#x27; | tee tee.log</span></span><br><span class="line"> HELLO</span><br><span class="line"></span><br><span class="line"><span class="comment">#追加</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo hello | tr &#x27;a-z&#x27; &#x27;A-Z&#x27; | tee -a tee.log</span></span><br><span class="line"> HELLO</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># echo &#123;1..100&#125; | tr &#x27; &#x27; + | bc</span></span><br><span class="line"> 5050</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># echo &#123;1..100..2&#125; | tr &#x27; &#x27; + | bc </span></span><br><span class="line"> 2500</span><br><span class="line"></span><br><span class="line"><span class="comment"># seq 输出1-100的每一个数字，-s指定用+隔开数字</span></span><br><span class="line">[root@rocky86 ~]<span class="comment"># seq -s + 1 100 | bc</span></span><br><span class="line"> 5050</span><br><span class="line"></span><br><span class="line">[root@rocky86 ~]<span class="comment"># seq -s+ 1 2 100 | bc</span></span><br><span class="line"> 2500</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky86 ~]<span class="comment"># cat &lt;&lt;EOF | tee tee.log</span></span><br><span class="line"> &gt; 123</span><br><span class="line"> &gt; 456</span><br><span class="line"> &gt; EOF</span><br><span class="line"> 123</span><br><span class="line"> 456</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">૮(˶ᵔ ᵕ ᵔ˶)ა</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/08/27/SRE-Linux%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%92%8CIO%E9%87%8D%E5%AE%9A%E5%90%91/">http://example.com/2024/08/27/SRE-Linux文件管理和IO重定向/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">૮(˶ᵔ ᵕ ᵔ˶)ა</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SRE/">SRE</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="/../images/TITLE/linux3.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/24/SRE-Linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%92%8C%E5%B8%AE%E5%8A%A9/" title="Linux基本操作和帮助"><img class="cover" src="/../images/TITLE/linux2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux基本操作和帮助</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/27/Blog%E6%90%AD%E5%BB%BA/" title="Bolg搭建"><img class="cover" src="/../images/TITLE/butterfiy.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Bolg搭建</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/04/24/SRE-Linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%92%8C%E5%B8%AE%E5%8A%A9/" title="Linux基本操作和帮助"><img class="cover" src="/../images/TITLE/linux2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-24</div><div class="title">Linux基本操作和帮助</div></div></a></div><div><a href="/2024/12/08/SRE-Linux%E9%98%B2%E7%81%AB%E5%A2%99/" title="Linux防火墙"><img class="cover" src="/../images/SRE/day17/12.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-08</div><div class="title">Linux防火墙</div></div></a></div><div><a href="/2024/11/05/SRE-Shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" title="shell脚本编程"><img class="cover" src="/../images/TITLE/linux2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-05</div><div class="title">shell脚本编程</div></div></a></div><div><a href="/2024/12/08/SRE-linux%E5%91%BD%E4%BB%A4%E7%B4%A2%E5%BC%95/" title="linux命令索引"><img class="cover" src="/../images/TITLE/linux3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-08</div><div class="title">linux命令索引</div></div></a></div><div><a href="/2024/12/04/SRE-%E5%8A%A0%E5%AF%86%E5%92%8C%E5%AE%89%E5%85%A8/" title="加密和安全"><img class="cover" src="/../images/SRE/day15/13.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-04</div><div class="title">加密和安全</div></div></a></div><div><a href="/2024/10/20/SRE-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/" title="文件查找和打包压缩"><img class="cover" src="/../images/TITLE/linux1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-20</div><div class="title">文件查找和打包压缩</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/../images/TITLE/user.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">૮(˶ᵔ ᵕ ᵔ˶)ა</div><div class="author-info__description">这家伙很勤奋，什么都留下了</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">101</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">34</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">文件系统目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">文件系统的目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.</span> <span class="toc-text">常见的文件系统目录功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">1.3.</span> <span class="toc-text">应用程序的组成部分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E7%89%88%E6%9C%AC%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%8F%98%E5%8C%96"><span class="toc-number">1.4.</span> <span class="toc-text">新版本目录结构变化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.</span> <span class="toc-text">Linux下的文件类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">文件操作命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95"><span class="toc-number">2.1.</span> <span class="toc-text">显示当前工作目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9D%E5%AF%B9%E5%92%8C%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.2.</span> <span class="toc-text">绝对和相对路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E7%9B%AE%E5%BD%95"><span class="toc-number">2.3.</span> <span class="toc-text">更改目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E5%87%BA%E7%9B%AE%E5%BD%95%E5%86%85%E5%AE%B9"><span class="toc-number">2.4.</span> <span class="toc-text">列出目录内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81-stat"><span class="toc-number">2.5.</span> <span class="toc-text">查看文件状态 stat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9A%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.6.</span> <span class="toc-text">确定文件类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E9%80%9A%E9%85%8D%E7%AC%A6%E6%A8%A1%E5%BC%8F-wildcard-pattern"><span class="toc-number">2.7.</span> <span class="toc-text">文件通配符模式 wildcard pattern</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%A9%BA%E6%96%87%E4%BB%B6%E5%92%8C%E5%88%B7%E6%96%B0%E6%97%B6%E9%97%B4"><span class="toc-number">2.8.</span> <span class="toc-text">创建空文件和刷新时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-number">2.9.</span> <span class="toc-text">复制文件和目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E5%92%8C%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6"><span class="toc-number">2.10.</span> <span class="toc-text">移动和重命名文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-number">2.11.</span> <span class="toc-text">删除文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-number">2.12.</span> <span class="toc-text">目录操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E7%9B%AE%E5%BD%95%E6%A0%91-tree"><span class="toc-number">2.12.1.</span> <span class="toc-text">显示目录树 tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95-mkdir"><span class="toc-number">2.12.2.</span> <span class="toc-text">创建目录 mkdir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%A9%BA%E7%9B%AE%E5%BD%95-rmdir"><span class="toc-number">2.12.3.</span> <span class="toc-text">删除空目录 rmdir</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%85%83%E6%95%B0%E6%8D%AE%E5%92%8C%E8%8A%82%E7%82%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">文件元数据和节点表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#inode-%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">inode 表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC-hard-%E9%93%BE%E6%8E%A5"><span class="toc-number">3.2.</span> <span class="toc-text">硬(hard)链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7-symbolic-%E6%88%96%E8%BD%AF-soft-%E9%93%BE%E6%8E%A5"><span class="toc-number">3.3.</span> <span class="toc-text">符号 symbolic (或软 soft)链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BD%AF%E9%93%BE%E6%8E%A5%E5%8C%BA%E5%88%AB%E6%80%BB%E7%BB%93"><span class="toc-number">3.4.</span> <span class="toc-text">硬链接和软链接区别总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IO-%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E7%AE%A1%E9%81%93"><span class="toc-number">4.</span> <span class="toc-text">IO 重定向和管道</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA"><span class="toc-number">4.1.</span> <span class="toc-text">标准输入和输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O%E9%87%8D%E5%AE%9A%E5%90%91-redirect"><span class="toc-number">4.2.</span> <span class="toc-text">I&#x2F;O重定向 redirect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF%E9%87%8D%E6%96%B0%E5%AE%9A%E5%90%91"><span class="toc-number">4.2.1.</span> <span class="toc-text">标准输出和错误重新定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.2.2.</span> <span class="toc-text">标准输入重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tr-%E5%91%BD%E4%BB%A4"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">tr 命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91-1"><span class="toc-number">4.2.2.2.</span> <span class="toc-text">标准输入重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%A4%9A%E8%A1%8C%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.2.2.3.</span> <span class="toc-text">标准输入多行重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E9%87%8D%E5%AE%9A%E5%90%91%E5%86%99%E6%B3%95"><span class="toc-number">4.2.2.4.</span> <span class="toc-text">高级重定向写法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cmd-lt-lt-lt-%E2%80%9Cstring%E2%80%9D"><span class="toc-number">4.2.2.4.1.</span> <span class="toc-text">cmd &lt;&lt;&lt; “string”</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cmd1-lt-lt-cmd2"><span class="toc-number">4.2.2.4.2.</span> <span class="toc-text">cmd1 &lt; &lt;(cmd2)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93"><span class="toc-number">4.3.</span> <span class="toc-text">管道</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E9%81%93-1"><span class="toc-number">4.3.1.</span> <span class="toc-text">管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tee-%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.2.</span> <span class="toc-text">tee 命令</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/05/09/SRE-jenkins/" title="DevOps之CICD工具Jenkins"><img src="/../images/SRE/day55/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps之CICD工具Jenkins"/></a><div class="content"><a class="title" href="/2025/05/09/SRE-jenkins/" title="DevOps之CICD工具Jenkins">DevOps之CICD工具Jenkins</a><time datetime="2025-05-09T09:30:43.000Z" title="发表于 2025-05-09 17:30:43">2025-05-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/24/SRE-git/" title="版本管理系统Git和GitLab"><img src="/../images/SRE/day53/77.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="版本管理系统Git和GitLab"/></a><div class="content"><a class="title" href="/2025/04/24/SRE-git/" title="版本管理系统Git和GitLab">版本管理系统Git和GitLab</a><time datetime="2025-04-24T01:21:27.000Z" title="发表于 2025-04-24 09:21:27">2025-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/21/SRE-kafka/" title="消息队列和微服务"><img src="/../images/SRE/day52/30.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="消息队列和微服务"/></a><div class="content"><a class="title" href="/2025/04/21/SRE-kafka/" title="消息队列和微服务">消息队列和微服务</a><time datetime="2025-04-21T15:34:02.000Z" title="发表于 2025-04-21 23:34:02">2025-04-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/19/SRE-redis/" title="企业级NoSQL数据库Redis"><img src="/../images/SRE/day49/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="企业级NoSQL数据库Redis"/></a><div class="content"><a class="title" href="/2025/04/19/SRE-redis/" title="企业级NoSQL数据库Redis">企业级NoSQL数据库Redis</a><time datetime="2025-04-19T15:34:02.000Z" title="发表于 2025-04-19 23:34:02">2025-04-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By ૮(˶ᵔ ᵕ ᵔ˶)ა</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index"><img src="../images/BEIAN/icp.png" width="15" height="15">豫ICP备2023009931号</a></br><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162702000178" target="_blank"><img src="../images/BEIAN/beian.png" width="15" height="15">豫公网安备 41162702000178号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas id="universe"></canvas><script src="/js/universe.js"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>