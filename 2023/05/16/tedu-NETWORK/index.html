<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>NetWork | CLOUD</title><meta name="author" content="W"><meta name="copyright" content="W"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="网络基础知识">
<meta property="og:type" content="article">
<meta property="og:title" content="NetWork">
<meta property="og:url" content="http://example.com/2023/05/16/tedu-NETWORK/index.html">
<meta property="og:site_name" content="CLOUD">
<meta property="og:description" content="网络基础知识">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/jihu/wallpaper/used/network.jpg">
<meta property="article:published_time" content="2023-05-16T09:12:00.000Z">
<meta property="article:modified_time" content="2024-04-02T09:59:58.614Z">
<meta property="article:author" content="W">
<meta property="article:tag" content="NetWork">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/jihu/wallpaper/used/network.jpg"><link rel="shortcut icon" href="/../jihu/wallpaper/used/user.jpg"><link rel="canonical" href="http://example.com/2023/05/16/tedu-NETWORK/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'NetWork',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-02 17:59:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/../jihu/wallpaper/used/user.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../jihu/wallpaper/used/network.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="CLOUD"><span class="site-name">CLOUD</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">NetWork</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-16T09:12:00.000Z" title="发表于 2023-05-16 17:12:00">2023-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-04-02T09:59:58.614Z" title="更新于 2024-04-02 17:59:58">2024-04-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E8%AE%A1%E7%AE%97%E8%81%8C%E4%B8%9A%E6%8A%80%E8%83%BD%E7%AB%9E%E8%B5%9B/">云计算职业技能竞赛</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="NetWork"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="网络概述"><a href="#网络概述" class="headerlink" title="网络概述"></a>网络概述</h1><h2 id="什么是计算机网络"><a href="#什么是计算机网络" class="headerlink" title="什么是计算机网络"></a>什么是计算机网络</h2><ul>
<li><p>硬件方面：通过线缆将网络设备和计算机连接起来</p>
</li>
<li><p>软件方面：操作系统，应用软件，应用程序通过通信线路互联</p>
</li>
<li><p>实现资源共享、信息传递、增加可靠性、提高系统处理能力</p>
</li>
</ul>
<h2 id="计算机网络发展阶段"><a href="#计算机网络发展阶段" class="headerlink" title="计算机网络发展阶段"></a>计算机网络发展阶段</h2><ul>
<li><p>60年代</p>
<p>–分组交换</p>
</li>
<li><p>70-80年代</p>
<p>–TCP/IP</p>
</li>
<li><p>90年代后</p>
<p>–Web技术</p>
</li>
</ul>
<h2 id="网络标准"><a href="#网络标准" class="headerlink" title="网络标准"></a>网络标准</h2><ul>
<li>标准化组织</li>
<li>ISO（国际标准化组织）</li>
<li>IEEE（电气电子工程师学会）</li>
</ul>
<h2 id="WAN与LAN"><a href="#WAN与LAN" class="headerlink" title="WAN与LAN"></a>WAN与LAN</h2><h3 id="广域网（Wide-Area-Network）"><a href="#广域网（Wide-Area-Network）" class="headerlink" title="广域网（Wide-Area Network）"></a>广域网（<code>W</code>ide-<code>A</code>rea <code>N</code>etwork）</h3><ul>
<li>范围：几十到几千千米</li>
<li>作用：用于连接远距离计算机网络</li>
<li>典型应用：Internet</li>
</ul>
<h3 id="局域网（Local-Area-Network）"><a href="#局域网（Local-Area-Network）" class="headerlink" title="局域网（Local-Area Network）"></a>局域网（<code>L</code>ocal-<code>A</code>rea <code>N</code>etwork）</h3><ul>
<li>范围：1km左右</li>
<li>作用：用于连接较短距离内的计算机</li>
<li>典型应用：企业网，校园网</li>
</ul>
<h2 id="网络拓扑结构"><a href="#网络拓扑结构" class="headerlink" title="网络拓扑结构"></a>网络拓扑结构</h2><h3 id="线缆连接计算机和网络设备的布局"><a href="#线缆连接计算机和网络设备的布局" class="headerlink" title="线缆连接计算机和网络设备的布局"></a>线缆连接计算机和网络设备的布局</h3><ul>
<li>点对点</li>
<li>两台设备之间有一条单独的连接</li>
<li>专用的广域网中电路连接的两台路由器</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/1.png" alt="1.png"></p>
<ul>
<li><p>星型及扩展的星型</p>
</li>
<li><p>优点</p>
<p>易于实现</p>
<p>易于网络扩展</p>
<p>易于故障排查</p>
</li>
<li><p>缺点</p>
<p>中心节点压力大</p>
<p>组网成本高</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/2.png" alt="2.png"></p>
<ul>
<li><p>网状</p>
<p>一个节点与其他多个节点相连</p>
<p>提供冗余性和容错性</p>
<p>可靠性高</p>
<p>组网成本高</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/3.png" alt="3.png"></p>
<h1 id="网络模型参考"><a href="#网络模型参考" class="headerlink" title="网络模型参考"></a>网络模型参考</h1><h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><h3 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h3><ul>
<li><p>分层思想</p>
<p>将复杂的流程分解，复杂问题简单化</p>
<p>更容易发现问题并针对性的解决问题</p>
</li>
<li><p>OSI参考模型</p>
<p>国际标准化组织（International Standard Organization, ISO）于1984年颁布了开放系统互连（Open System Interconnection, OSI）参考模型</p>
<p>它规定将网络分为七层，从上往下依次是：物理层、数据链路层、网络层、传输层、会话层、表示层和应用层</p>
</li>
</ul>
<h3 id="TCP-IP模型"><a href="#TCP-IP模型" class="headerlink" title="TCP/IP模型"></a>TCP/IP模型</h3><ul>
<li>TCP/IP五层模型、OSI七层模型</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/4.png" alt="4.png"></p>
<h3 id="TCP-IP协议族的组成"><a href="#TCP-IP协议族的组成" class="headerlink" title="TCP/IP协议族的组成"></a>TCP/IP协议族的组成</h3><p><img src="../../../../jihu/image/NETWORK/5.png" alt="5.png"></p>
<h3 id="什么是协议"><a href="#什么是协议" class="headerlink" title="什么是协议"></a>什么是协议</h3><ul>
<li>为了使数据可以在网络上从源传递到目的地，网络上所有设备需要“讲”相同的“语言”</li>
<li>描述网络通信中“语言”规范的一组规则就是协议</li>
</ul>
<h2 id="数据的封装与解封装"><a href="#数据的封装与解封装" class="headerlink" title="数据的封装与解封装"></a>数据的封装与解封装</h2><h3 id="数据封装过程"><a href="#数据封装过程" class="headerlink" title="数据封装过程"></a>数据封装过程</h3><p><img src="../../../../jihu/image/NETWORK/6.png" alt="6.png"></p>
<h3 id="数据解封装过程"><a href="#数据解封装过程" class="headerlink" title="数据解封装过程"></a>数据解封装过程</h3><p><img src="../../../../jihu/image/NETWORK/7.png" alt="7.png"></p>
<h3 id="协议数据单元（PDU）"><a href="#协议数据单元（PDU）" class="headerlink" title="协议数据单元（PDU）"></a>协议数据单元（PDU）</h3><p><img src="../../../../jihu/image/NETWORK/8.png" alt="8.png"></p>
<h3 id="设备与层对应关系"><a href="#设备与层对应关系" class="headerlink" title="设备与层对应关系"></a>设备与层对应关系</h3><p><img src="../../../../jihu/image/NETWORK/9.png" alt="9.png"></p>
<h1 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h1><h2 id="IP地址的组成"><a href="#IP地址的组成" class="headerlink" title="IP地址的组成"></a>IP地址的组成</h2><ul>
<li><p>IP地址由两部分组成</p>
<p>网络部分（NETWORK）</p>
<p>主机部分（HOST）</p>
</li>
<li><p>192.168.1.22</p>
<p>192.168.1（网络部分）.22（主机部分）</p>
</li>
<li><p>IP地址分为A、B、C、D、E五类，每一类有不同的划分规则</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/10.png" alt="10.png"></p>
<ul>
<li><p>A、B、C三类IP地址组成</p>
<p>网络部分（NETWORK）</p>
<p>主机部分（HOST）</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/11.png" alt="11.png"></p>
<h2 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h2><ul>
<li><p>用来确定IP的网络地址</p>
</li>
<li><p>32个二进制位</p>
<p>对应IP地址的网络部分用1表示</p>
<p>对应IP地址的主机部分用0表示</p>
</li>
<li><p>A、B、C三类地址的默认子网掩码</p>
<p>A类：255.0.0.0</p>
<p>B类：255.255.0.0</p>
<p>C类：255.255.255.0</p>
</li>
</ul>
<h1 id="交换机命令行"><a href="#交换机命令行" class="headerlink" title="交换机命令行"></a>交换机命令行</h1><h2 id="交换机命令行视图"><a href="#交换机命令行视图" class="headerlink" title="交换机命令行视图"></a>交换机命令行视图</h2><ul>
<li><p>华为交换机的命令行</p>
<p><strong>·用户视图</strong>：</p>
<p>&lt;Huawei&gt;</p>
<p><strong>·系统视图</strong>：</p>
<p>&lt;Huawei&gt;system-view<br>[Huawei]</p>
<p><strong>·接口视图</strong>：</p>
<p>[Huawei]interface Ethernet 0/0/1<br>[Huawei-Ethernet0/0/1]</p>
<ul>
<li><p>interface：接口</p>
</li>
<li><p>Ethernet：接口类型</p>
</li>
<li><p>0/0/1：第一个0代表槽位号，第二个0代表子卡号，1代表接口号</p>
</li>
</ul>
<p><strong>·协议视图</strong>：</p>
<p>[Huawei]ospf<br>[Huawei-ospf-1]</p>
</li>
</ul>
<ul>
<li>quit：退出，返回上一层</li>
<li>return/Ctrl+z：返回用户视图</li>
<li>Ctrl+]：直接退出交换机</li>
<li>可用Tab键补全命令</li>
<li>?：列出当前视图下命令</li>
<li>可简写：输入的开头位当前视图下唯一</li>
<li>若配置错误可以使用undo 后跟上一行错误命令就可删除</li>
</ul>
<h2 id="命令行层次关系"><a href="#命令行层次关系" class="headerlink" title="命令行层次关系"></a>命令行层次关系</h2><p><img src="../../../../jihu/image/NETWORK/12.png" alt="12.png"></p>
<h1 id="交换机配置"><a href="#交换机配置" class="headerlink" title="交换机配置"></a>交换机配置</h1><h2 id="配置主机名"><a href="#配置主机名" class="headerlink" title="配置主机名"></a>配置主机名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]sysname Tedu-sw1</span><br><span class="line">[Tedu-sw1]</span><br></pre></td></tr></table></figure>

<h2 id="显示VRP版本"><a href="#显示VRP版本" class="headerlink" title="显示VRP版本"></a>显示VRP版本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;display version</span><br><span class="line">Huawei Versatile Routing Platform Software</span><br><span class="line">VRP (R) software, Version 5.110 (S3700 V200R001C00)</span><br><span class="line">Copyright (c) 2000-2011 HUAWEI TECH CO., LTD</span><br></pre></td></tr></table></figure>

<h2 id="查看交换机配置"><a href="#查看交换机配置" class="headerlink" title="查看交换机配置"></a>查看交换机配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;display current-configuration</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">sysname Huawei</span><br><span class="line">#</span><br><span class="line">cluster enable</span><br><span class="line">ntdp enable</span><br><span class="line">ndp enable</span><br><span class="line">#</span><br><span class="line">drop illegal-mac alarm</span><br><span class="line">#</span><br><span class="line">diffserv domain default</span><br><span class="line">#</span><br><span class="line">drop-profile default</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">······</span><br></pre></td></tr></table></figure>

<h2 id="使用密码登录终端"><a href="#使用密码登录终端" class="headerlink" title="使用密码登录终端"></a>使用密码登录终端</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]aaa	</span><br><span class="line">[Huawei-aaa]local-user admin01 password cipher admin01</span><br><span class="line"></span><br><span class="line"># cipher表示不明文存储，simple表示明文存储 可以通过display current-configuration查看，在aaa下存储</span><br><span class="line"></span><br><span class="line">[Huawei-aaa]quit </span><br><span class="line">[Huawei]user-interface console 0  # 用户控制台接口</span><br><span class="line">[Huawei-ui-console0]authentication-mode aaa</span><br><span class="line"></span><br><span class="line">Username:admin01</span><br><span class="line">Password:admin01</span><br></pre></td></tr></table></figure>

<h2 id="保存交换机配置"><a href="#保存交换机配置" class="headerlink" title="保存交换机配置"></a>保存交换机配置</h2><ul>
<li>因为不保存关机重启后配置会消失</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;save</span><br><span class="line"></span><br><span class="line">Are you sure to continue?[Y/N]y  # 输入y确定</span><br><span class="line"></span><br><span class="line">Save the configuration successfully.</span><br></pre></td></tr></table></figure>

<h2 id="恢复交换机出厂默认值"><a href="#恢复交换机出厂默认值" class="headerlink" title="恢复交换机出厂默认值"></a>恢复交换机出厂默认值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;reset saved-configuration </span><br><span class="line"></span><br><span class="line">The configuration will be erased to reconfigure. Continue? [Y/N]:y     # 确认</span><br><span class="line"></span><br><span class="line">Info: Succeeded in clearing the configuration in the device.</span><br></pre></td></tr></table></figure>

<h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;reboot</span><br><span class="line"></span><br><span class="line"># 是否保存配置</span><br><span class="line">Warning: All the configuration will be saved to the configuration file for the next startup:, Continue?[Y/N]:n</span><br><span class="line"></span><br><span class="line"># 是否重启</span><br><span class="line">System will reboot! Continue?[Y/N]:y</span><br></pre></td></tr></table></figure>

<h2 id="避免自动退出配置页面"><a href="#避免自动退出配置页面" class="headerlink" title="避免自动退出配置页面"></a>避免自动退出配置页面</h2><ul>
<li>空闲一段时间后（默认10分钟）重回初始化界面</li>
<li>解决方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line"></span><br><span class="line">[Huawei]user-interface console 0</span><br><span class="line"></span><br><span class="line">[Huawei-ui-console0]idle-timeout 100 # 修改为100分钟 0为永久</span><br></pre></td></tr></table></figure>

<h2 id="关闭信息提示"><a href="#关闭信息提示" class="headerlink" title="关闭信息提示"></a>关闭信息提示</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;undo terminal ?</span><br><span class="line">  debugging  Debug information to terminal</span><br><span class="line">  logging    Log information to terminal</span><br><span class="line">  monitor    Out information to terminal</span><br><span class="line">  trapping   Trap information to terminal</span><br><span class="line"></span><br><span class="line">&lt;Huawei&gt;undo terminal debugging		# 关闭调试信息</span><br><span class="line">	</span><br><span class="line">&lt;Huawei&gt;undo terminal logging 		# 关闭日志信息</span><br><span class="line">	</span><br><span class="line">&lt;Huawei&gt;undo terminal monitor 		# 关闭监控输出信息</span><br><span class="line">	</span><br><span class="line">&lt;Huawei&gt;undo terminal trapping 		# 关闭陷阱信息</span><br></pre></td></tr></table></figure>

<h1 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h1><h2 id="以太网MAC地址"><a href="#以太网MAC地址" class="headerlink" title="以太网MAC地址"></a>以太网MAC地址</h2><ul>
<li>用来识别一个以太网上的单独的设备或一组设备</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/13.png" alt="13.png"></p>
<h2 id="以太网帧格式"><a href="#以太网帧格式" class="headerlink" title="以太网帧格式"></a>以太网帧格式</h2><ul>
<li>数据链路层的协议数据单元</li>
<li>通过ARP协议，从IP获取对方MAC地址</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/14.png" alt="14.png"></p>
<h2 id="交换机工作原理"><a href="#交换机工作原理" class="headerlink" title="交换机工作原理"></a>交换机工作原理</h2><ul>
<li><p><strong>交换机的转发原理</strong></p>
<p>初始状态</p>
<p><img src="../../../../jihu/image/NETWORK/15.png" alt="15.png"></p>
<p>MAC地址学习</p>
<p><img src="../../../../jihu/image/NETWORK/16.png" alt="16.png"></p>
<p>广播未知数据帧</p>
<p><img src="../../../../jihu/image/NETWORK/17.png" alt="17.png"></p>
<p>接收方回应</p>
<p><img src="../../../../jihu/image/NETWORK/18.png" alt="18.png"></p>
<p>交换机实现单播通信</p>
<p><img src="../../../../jihu/image/NETWORK/19.png" alt="19.png"></p>
</li>
<li><p><strong>学习：通过学习数据帧的源MAC地址来形成MAC地址表</strong></p>
</li>
<li><p><strong>广播：若目标地址在MAC地址表中没有，交换机向该数据帧的来源端口外的其他所有端口广播该数据帧</strong></p>
</li>
<li><p><strong>转发：交换机根据MAC地址单播转发数据帧</strong></p>
</li>
<li><p><strong>更新：</strong></p>
<p><strong>交换机MAC地址的老化时间是300秒</strong></p>
<p><strong>如果发现一个帧的入端口和MAC地址表中源MAC地址的所在端口不同，交换机将MAC地址重新学习到新的端口</strong></p>
</li>
<li><p><strong>查看MAC地址表</strong></p>
<p><strong><Huawei>display mac-address</strong></p>
</li>
</ul>
<h2 id="交换机工作原理案例"><a href="#交换机工作原理案例" class="headerlink" title="交换机工作原理案例"></a>交换机工作原理案例</h2><p><strong><code>主机11给主机33发数据帧</code></strong></p>
<p><img src="../../../../jihu/image/NETWORK/20.png" alt="20.png"></p>
<p><img src="../../../../jihu/image/NETWORK/21.png" alt="21.png"></p>
<p><strong><code>交换机SW1在接收到数据帧后，执行以下操作</code></strong></p>
<ul>
<li>交换机SW1查找MAC地址表</li>
<li>交换机SW1学习主机11的MAC地址</li>
<li>交换机SW1向除接收端口外所有其他端口广播</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/22.png" alt="22.png"></p>
<p><img src="../../../../jihu/image/NETWORK/23.png" alt="23.png"></p>
<p><strong><code>交换机SW2在接收到数据帧后，执行以下操作</code></strong></p>
<ul>
<li>交换机SW2查看MAC地址表</li>
<li>交换机SW2学习源MAC地址和端口号</li>
<li>交换机SW2向除接收端口外所有其他端口广播数据帧</li>
<li><strong>主机22，查看数据帧的目标MAC地址不是自己，丢弃</strong></li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/24.png" alt="24.png"></p>
<p><img src="../../../../jihu/image/NETWORK/25.png" alt="25.png"></p>
<ul>
<li>主机33，接收数据帧，并返回一个数据帧</li>
<li>主机44，丢弃数据帧</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/26.png" alt="26.png"></p>
<p><img src="../../../../jihu/image/NETWORK/27.png" alt="27.png"></p>
<p><strong><code>交换机SW2在接收到数据帧后，执行以下操作</code></strong></p>
<ul>
<li>交换机SW2学习源MAC地址和端口号</li>
<li>交换机SW2查看MAC地址表，根据MAC地址表中的条目，单播转发数据到端口3</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/28.png" alt="28.png"></p>
<p><strong><code>交换机SW1在接收到数据帧后，执行以下操作</code></strong></p>
<ul>
<li>交换机SW1学习源MAC地址和端口号</li>
<li>交换机SW1查看MAC地址表，根据MAC地址表中的条目，单播转发数据到端口1</li>
<li>主机11，收到数据帧</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/29.png" alt="29.png"></p>
<p><img src="../../../../jihu/image/NETWORK/30.png" alt="30.png"></p>
<h1 id="VLAN技术与应用"><a href="#VLAN技术与应用" class="headerlink" title="VLAN技术与应用"></a>VLAN技术与应用</h1><h2 id="广播域"><a href="#广播域" class="headerlink" title="广播域"></a>广播域</h2><ul>
<li>广播域指接收同样广播信息的节点的集合，如：在该集合中的任何一个节点传输一个广播帧，则所有其他能接收到这个帧的节点都被认为是该广播帧的一部分</li>
<li>交换机的所有接口默认属于同一个广播帧</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/31.png" alt="31.png"></p>
<h2 id="VLAN概述"><a href="#VLAN概述" class="headerlink" title="VLAN概述"></a>VLAN概述</h2><h3 id="什么是VLAN"><a href="#什么是VLAN" class="headerlink" title="什么是VLAN"></a>什么是VLAN</h3><ul>
<li>Virtual LAN（虚拟局域网）是物理设备上连接的不受物理位置限制的用户的一个逻辑组</li>
</ul>
<h3 id="为什么引入VLAN"><a href="#为什么引入VLAN" class="headerlink" title="为什么引入VLAN"></a>为什么引入VLAN</h3><ul>
<li><p>交换机的所有接口默认属于同一个广播域</p>
</li>
<li><p>随着接入设备的增多，网络中广播的增多，降低了网络的效率</p>
</li>
<li><p>为了分割广播域，引入了VLAN</p>
</li>
<li><p>VLAN分割广播域</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/32.png" alt="32.png"></p>
<h2 id="VLAN的作用"><a href="#VLAN的作用" class="headerlink" title="VLAN的作用"></a>VLAN的作用</h2><ul>
<li><p>广播控制</p>
</li>
<li><p>增强安全性</p>
</li>
<li><p>提高带宽利用</p>
</li>
<li><p>降低延迟</p>
</li>
<li><p>基于接口划分的静态VLAN</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/33.png" alt="33.png"></p>
<h2 id="VLAN配置"><a href="#VLAN配置" class="headerlink" title="VLAN配置"></a>VLAN配置</h2><h3 id="配置静态VLAN的步骤"><a href="#配置静态VLAN的步骤" class="headerlink" title="配置静态VLAN的步骤"></a>配置静态VLAN的步骤</h3><ul>
<li>创建VLAN</li>
<li>将接口加入到相应的VLAN中</li>
<li>验证</li>
</ul>
<h3 id="创建VLAN"><a href="#创建VLAN" class="headerlink" title="创建VLAN"></a>创建VLAN</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line"></span><br><span class="line">[Huawei]vlan 10</span><br></pre></td></tr></table></figure>

<ul>
<li>批量创建VLAN</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]vlan batch 10 15 20	# 创建VLAN10、VLAN15、VLAN20</span><br><span class="line"></span><br><span class="line"># 创建VLAN30、VLAN31、VLAN32、VLAN33、VLAN34、VLAN35</span><br><span class="line">[Huawei]vlan batch 30 to 35	</span><br></pre></td></tr></table></figure>

<h3 id="配置接口"><a href="#配置接口" class="headerlink" title="配置接口"></a>配置接口</h3><ul>
<li>将接口划分到创建的VLAN中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]interface Ethernet 0/0/3</span><br><span class="line"></span><br><span class="line">[Huawei-Ethernet0/0/3]port link-type access </span><br><span class="line"></span><br><span class="line">[Huawei-Ethernet0/0/3]port default vlan 10</span><br></pre></td></tr></table></figure>

<h3 id="查看VLAN信息"><a href="#查看VLAN信息" class="headerlink" title="查看VLAN信息"></a>查看VLAN信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]display vlan</span><br></pre></td></tr></table></figure>

<h3 id="创建接口组"><a href="#创建接口组" class="headerlink" title="创建接口组"></a>创建接口组</h3><ul>
<li>可用于批量操作接口，如加入VLAN</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]port-group 3</span><br><span class="line"></span><br><span class="line">[Huawei-port-group-3]group-member Ethernet 0/0/5 Ethernet 0/0/6 Ethernet 0/0/7</span><br><span class="line"></span><br><span class="line">[Huawei-port-group-3]port link-type access </span><br><span class="line"></span><br><span class="line">[Huawei-port-group-3]port default vlan 10</span><br></pre></td></tr></table></figure>

<h2 id="案例：多交换机VLAN的划分"><a href="#案例：多交换机VLAN的划分" class="headerlink" title="案例：多交换机VLAN的划分"></a>案例：多交换机VLAN的划分</h2><ul>
<li>通过配置多交换机实现同VLAN主机互通</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/34.png" alt="34.png"></p>
<ul>
<li>交换机s1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line"></span><br><span class="line">[Huawei]vlan batch 2 3	# 所有端口默认都在VLAN1，不用创建</span><br><span class="line">[Huawei]port-group 2</span><br><span class="line">[Huawei-port-group-2]group-member Ethernet 0/0/3 Ethernet 0/0/4</span><br><span class="line">[Huawei-port-group-2]port link-type access </span><br><span class="line">[Huawei-port-group-2]port default vlan 2</span><br><span class="line"></span><br><span class="line">[Huawei]port-group 3</span><br><span class="line">[Huawei-port-group-3]group-member Ethernet 0/0/5 Ethernet 0/0/6 Ethernet 0/0/7</span><br><span class="line">[Huawei-port-group-3]port link-type access</span><br><span class="line">[Huawei-port-group-3]port default vlan 3</span><br><span class="line"></span><br><span class="line">&lt;Huawei&gt;save</span><br></pre></td></tr></table></figure>

<ul>
<li>交换机s2</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]vlan batch 3</span><br><span class="line">[Huawei]port-group 3</span><br><span class="line">[Huawei-port-group-3]group-member Ethernet 0/0/5 Ethernet 0/0/6 Ethernet 0/0/7 </span><br><span class="line">[Huawei-port-group-3]port link-type access </span><br><span class="line">[Huawei-port-group-3]port default vlan 3</span><br><span class="line"></span><br><span class="line">&lt;Huawei&gt;save</span><br></pre></td></tr></table></figure>

<ul>
<li>通过交换机s1 VLAN3中的PC ping 交换机s2 vlan3中的PC</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;ping 192.168.3.3</span><br><span class="line"></span><br><span class="line">Ping 192.168.3.3: 32 data bytes, Press Ctrl_C to break</span><br><span class="line">From 192.168.3.3: bytes=32 seq=1 ttl=128 time=78 ms</span><br><span class="line">From 192.168.3.3: bytes=32 seq=2 ttl=128 time=63 ms</span><br><span class="line">From 192.168.3.3: bytes=32 seq=3 ttl=128 time=62 ms</span><br></pre></td></tr></table></figure>

<h1 id="TRUNK（中继链路）"><a href="#TRUNK（中继链路）" class="headerlink" title="TRUNK（中继链路）"></a>TRUNK（中继链路）</h1><h2 id="Trunk原理"><a href="#Trunk原理" class="headerlink" title="Trunk原理"></a>Trunk原理</h2><ul>
<li>交换机之间vlan通信</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/35.png" alt="35.png"></p>
<ul>
<li><p>如何实现交换机之间的vlan通信</p>
<p>每个vlan一条线路？</p>
<p><img src="../../../../jihu/image/NETWORK/36.png" alt="36.png"></p>
<p>只用一条链路，那么来自多个vlan的数据如何标识</p>
<p><img src="../../../../jihu/image/NETWORK/37.png" alt="37.png"></p>
</li>
</ul>
<h2 id="VLAN标识"><a href="#VLAN标识" class="headerlink" title="VLAN标识"></a>VLAN标识</h2><ul>
<li>交换机给每个去往其他交换机的数据帧打上VLAN标识</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/38.png" alt="38.png"></p>
<p><img src="../../../../jihu/image/NETWORK/39.png" alt="39.png"></p>
<h2 id="Trunk配置"><a href="#Trunk配置" class="headerlink" title="Trunk配置"></a>Trunk配置</h2><ul>
<li><p>进入端口修改端口链路类型</p>
<p>[Huawei]int E0/0/1<br>[Huawei-Ethernet0/0/1]port link-type trunk</p>
</li>
<li><p>为已经修改为Trunk模式的端口添加允许的VLAN</p>
<p>[Huawei-Ethernet0/0/1]port trunk allow-pass vlan all</p>
</li>
<li><p>首先将接口还原为默认状态</p>
<p>[Huawei]clear configuration interface e0/0/1</p>
<p>[Huawei]interface Eth 0/0/1<br>[Huawei-Ethernet0/0/1]undo shutdown</p>
</li>
</ul>
<h1 id="链路聚合"><a href="#链路聚合" class="headerlink" title="链路聚合"></a>链路聚合</h1><h2 id="创建聚合链路"><a href="#创建聚合链路" class="headerlink" title="创建聚合链路"></a>创建聚合链路</h2><ul>
<li><p>进入接口，加入聚合链路</p>
<p>[Huawei]interface Ethernet 0/0/1<br>[Huawei-Ethernet0/0/1]eth-trunk 1</p>
</li>
<li><p>详细步骤</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line"></span><br><span class="line">[Huawei]interface Eth-Trunk 1	# 创建聚合链路1</span><br><span class="line">[Huawei-Eth-Trunk1]int e0/0/1	# 进入接口1</span><br><span class="line">[Huawei-Ethernet0/0/1]eth-trunk 1	# 加入聚合链路</span><br><span class="line"></span><br><span class="line">[Huawei-Ethernet0/0/1]int e0/0/2</span><br><span class="line">[Huawei-Ethernet0/0/2]eth-trunk 1</span><br><span class="line">[Huawei-Ethernet0/0/2]display this	# 查看接口信息</span><br><span class="line">#</span><br><span class="line">interface Ethernet0/0/2</span><br><span class="line"> eth-trunk 1</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line"></span><br><span class="line">[Huawei]display current-configuration # 查看所有信息</span><br><span class="line"></span><br><span class="line">[Huawei-Ethernet0/0/2]int Eth 1		# 进入聚合链路1</span><br><span class="line">[Huawei-Eth-Trunk1]port link-type trunk 	# 允许所有vlan通过</span><br><span class="line">[Huawei-Eth-Trunk1]port trunk allow-pass vlan all</span><br></pre></td></tr></table></figure>

<h1 id="路由原理及配置"><a href="#路由原理及配置" class="headerlink" title="路由原理及配置"></a>路由原理及配置</h1><h2 id="什么是路由"><a href="#什么是路由" class="headerlink" title="什么是路由"></a>什么是路由</h2><ul>
<li><p>将数据包从一个网络发送到另一个网络</p>
<p>需要依靠路由器来完成</p>
<p>路由器只关心网络的状态，决定最佳路径</p>
<p><img src="../../../../jihu/image/NETWORK/40.png" alt="40.png"></p>
</li>
<li><p>路由器可以根据路由表选择最佳路径</p>
<p>每个路由器都维护着一张表，这是路由器转发数据包的关键</p>
<p>每条路由表记录指明了：到达某个子网或主机应从路由器的哪个物理接口发送，通过此接口可到达该路径的下一个路由器的地址（或直接相连网络中的目标主机地址）</p>
</li>
</ul>
<h2 id="如何获取路由表"><a href="#如何获取路由表" class="headerlink" title="如何获取路由表"></a>如何获取路由表</h2><ul>
<li><p><strong>直连路由</strong></p>
<p>路由设备配置IP地址后自动生效</p>
</li>
<li><p><strong>静态路由</strong></p>
<p>由管理员在路由器上手工指定</p>
<p>适合分支机构、家具办公等小型公司</p>
</li>
<li><p><strong>动态路由</strong></p>
<p>根据网络拓扑或流量变化，由路由器通过路由器协议自动设置</p>
<p>适合ISP服务商、广域网、园区网等大型网络</p>
</li>
</ul>
<h2 id="直连路由"><a href="#直连路由" class="headerlink" title="直连路由"></a>直连路由</h2><ul>
<li>给路由器连接PC的接口配置IP，PC网关指定该IP</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line"></span><br><span class="line">[Huawei]int G0/0/0	# 路由器接口从0开始，E为百兆接口，G为千兆接口</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip address 192.168.1.254 24</span><br><span class="line">或</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip address 192.168.1.254 255.255.255.0</span><br><span class="line"></span><br><span class="line"># 配错了可以先删除，再次配置</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]undo ip address</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Huawei]display ip routing-table # 查看路由表</span><br><span class="line">[Huawei]display ip routing-table | include /24	# 过滤</span><br></pre></td></tr></table></figure>

<h2 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由"></a>静态路由</h2><ul>
<li><p>主要特点</p>
<p>由管理员手工配置</p>
<p>通信双方的边缘路由器都需要指定，否则会导致数据包有去无回</p>
</li>
<li><p>使用ip route-static 命令</p>
<p>指定到达IP目的网络</p>
<p>基本格式</p>
<p>[Huawei]ip route-static 目标网络 子网掩码 下一跳</p>
</li>
</ul>
<h2 id="案例：配置静态路由"><a href="#案例：配置静态路由" class="headerlink" title="案例：配置静态路由"></a>案例：配置静态路由</h2><ul>
<li>按拓扑配置接口IP地址并通过配置静态路由实现全网互通</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/41.png" alt="41.png"></p>
<p><img src="../../../../jihu/image/NETWORK/42.png" alt="42.png"></p>
<ul>
<li>AR1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip address 192.168.1.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip addr 192.168.2.254 24</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Huawei]ip route-static 192.168.4.0 255.255.255.0 192.168.2.1</span><br><span class="line"># 目标网络可以随便写，只要网段对就行</span><br><span class="line">[Huawei]ip route-static 192.168.3.1 255.255.255.0 192.168.2.1</span><br></pre></td></tr></table></figure>

<ul>
<li>AR2</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 192.168.2.1 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 192.168.3.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip add 192.168.4.254 24</span><br><span class="line"></span><br><span class="line">[Huawei]ip route-static 192.168.1.1 255.255.255.0 192.168.2.254</span><br></pre></td></tr></table></figure>

<ul>
<li>使用PC3 ping PC1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;ping 192.168.1.1</span><br><span class="line"></span><br><span class="line">Ping 192.168.1.1: 32 data bytes, Press Ctrl_C to break</span><br><span class="line">From 192.168.1.1: bytes=32 seq=1 ttl=126 time=32 ms</span><br><span class="line">From 192.168.1.1: bytes=32 seq=2 ttl=126 time=31 ms</span><br><span class="line">From 192.168.1.1: bytes=32 seq=3 ttl=126 time=31 ms</span><br><span class="line">From 192.168.1.1: bytes=32 seq=4 ttl=126 time=16 ms</span><br><span class="line">From 192.168.1.1: bytes=32 seq=5 ttl=126 time=16 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.1.1 ping statistics ---</span><br><span class="line">  5 packet(s) transmitted</span><br><span class="line">  5 packet(s) received</span><br><span class="line">  0.00% packet loss</span><br><span class="line">  round-trip min/avg/max = 16/25/32 ms</span><br></pre></td></tr></table></figure>

<h2 id="默认路由"><a href="#默认路由" class="headerlink" title="默认路由"></a>默认路由</h2><ul>
<li>默认路由是一种特殊的静态路由</li>
<li>默认路由的目标网络为0.0.0.0 0.0.0.0 ，可以匹配任何目标地址</li>
<li>只有当从路由表中找不到任何明确匹配的路由条目，才会使用默认路由，一般在企业网关出口使用</li>
<li>不建议使用，容易造成内部的路由环路</li>
</ul>
<h2 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li><p>动态路由</p>
<p>基于某种路由协议实现</p>
</li>
<li><p>动态路由特点</p>
<p>减少了管理任务</p>
<p>占用了网络带宽</p>
</li>
<li><p>图示：</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/43.png" alt="43.png"></p>
<p><img src="../../../../jihu/image/NETWORK/44.png" alt="44.png"></p>
<p><img src="../../../../jihu/image/NETWORK/45.png" alt="45.png"></p>
<p><img src="../../../../jihu/image/NETWORK/46.png" alt="46.png"></p>
<h3 id="动态路由协议OSPF"><a href="#动态路由协议OSPF" class="headerlink" title="动态路由协议OSPF"></a>动态路由协议OSPF</h3><ul>
<li><p>全程Open Shortest Path First（开放最短路径优先）</p>
</li>
<li><p>适用大中型网络适用</p>
</li>
<li><p>OSPF区域</p>
<p>为了适应大型的网络，OSPF在网络内部划分多个区域</p>
<p>每个OSPF路由器只维护所在区域的完整链路状态</p>
</li>
<li><p>区域ID</p>
<p>区域ID可以表示成一个十进制的数字</p>
<p>也可以表示一个IP</p>
</li>
<li><p>骨干区域Area 0</p>
<p>负责区域间路由信息传播</p>
</li>
</ul>
<h3 id="OSPF配置"><a href="#OSPF配置" class="headerlink" title="OSPF配置"></a>OSPF配置</h3><p><strong>使用动态路由</strong></p>
<ul>
<li><p>启动OSPF路由进程并进入首个区域</p>
<p>[Huawei]ospf 1<br>[Huawei-ospf-1]area 0<br>[Huawei-ospf-1-area-0.0.0.0]network 192.168.0.0 0.0.0.255</p>
<p>此处使用的是反掩码</p>
</li>
</ul>
<h1 id="三层交换机"><a href="#三层交换机" class="headerlink" title="三层交换机"></a>三层交换机</h1><h2 id="什么是三次交换机"><a href="#什么是三次交换机" class="headerlink" title="什么是三次交换机"></a>什么是三次交换机</h2><ul>
<li>使用三次交换技术实现VLAN间通信</li>
<li>三层交换=二层交换+三层转发</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/47.png" alt="47.png"></p>
<h2 id="虚拟接口概述"><a href="#虚拟接口概述" class="headerlink" title="虚拟接口概述"></a>虚拟接口概述</h2><ul>
<li>三层交换机VLAN间通信的转发过程</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/48.png" alt="48.png"></p>
<ul>
<li><p>在三层交换机上配置VLAN接口为虚拟接口</p>
</li>
<li><p>使用Vlanif（VLAN接口）实现VLAN间路由</p>
<p>VLAN接口的引入使得应用更加灵活</p>
<p>[Huawei]interface Vlanif VLAN interface number<br>[Huawei]display ip interface brief</p>
</li>
</ul>
<h2 id="三层交换机配置思路"><a href="#三层交换机配置思路" class="headerlink" title="三层交换机配置思路"></a>三层交换机配置思路</h2><ul>
<li><strong>确定哪些VLAN需要配置网关</strong></li>
<li><strong>如果三层交换机上没有VLAN则创建它</strong></li>
<li><strong>为每个VLAN创建相关的虚拟接口</strong></li>
<li><strong>给每个VLAN虚拟接口配置IP地址</strong></li>
<li><strong>如果需要，配置三层交换机的动态或静态路由</strong></li>
</ul>
<h2 id="案例：三层交换机VLAN通信"><a href="#案例：三层交换机VLAN通信" class="headerlink" title="案例：三层交换机VLAN通信"></a>案例：三层交换机VLAN通信</h2><p><img src="../../../../jihu/image/NETWORK/49.png" alt="49.png"></p>
<ul>
<li>三层交换机配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]vlan batch 2 3</span><br><span class="line">[Huawei]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port link-type access </span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port default vlan 2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]in g0/0/3</span><br><span class="line">[Huawei-GigabitEthernet0/0/3]port link-type access</span><br><span class="line">[Huawei-GigabitEthernet0/0/3]port default vlan 3</span><br><span class="line"></span><br><span class="line">[Huawei]interface Vlanif 1</span><br><span class="line">[Huawei-Vlanif1]ip add 192.168.1.254 24</span><br><span class="line">[Huawei-Vlanif1]in vlan2</span><br><span class="line">[Huawei-Vlanif2]ip add 192.168.2.254 24</span><br><span class="line">[Huawei-Vlanif2]in vlan3</span><br><span class="line">[Huawei-Vlanif3]ip add 192.168.3.254 24</span><br><span class="line">[Huawei-Vlanif3]display ip interface brief</span><br><span class="line"></span><br><span class="line">Vlanif1                 192.168.1.254/24     up         up   </span><br><span class="line">Vlanif2                 192.168.2.254/24     up         up   </span><br><span class="line">Vlanif3                 192.168.3.254/24     up         up   </span><br></pre></td></tr></table></figure>

<h2 id="综合组网"><a href="#综合组网" class="headerlink" title="综合组网"></a>综合组网</h2><p><strong>三层交换机配置</strong></p>
<ul>
<li>更合理的使用三层交换机</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/50.png" alt="50.png"></p>
<h1 id="传输层概述"><a href="#传输层概述" class="headerlink" title="传输层概述"></a>传输层概述</h1><h2 id="传输层作用"><a href="#传输层作用" class="headerlink" title="传输层作用"></a>传输层作用</h2><ul>
<li>网络层提供点到点的连接</li>
<li>传输层提供端到端的连接</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/51.png" alt="51.png"></p>
<h2 id="传输层协议"><a href="#传输层协议" class="headerlink" title="传输层协议"></a>传输层协议</h2><ul>
<li><p>TCP（Transmission Control Protocol）</p>
<p>传输控制协议</p>
<p>可靠的、面向连接的</p>
<p>传输效率低</p>
</li>
<li><p>UDP（User Datagram Protocol）</p>
<p>用户数据报协议</p>
<p>不可靠的、无连接的</p>
<p>传输效率高</p>
</li>
</ul>
<h2 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h2><h3 id="TCP的封装格式（报文）"><a href="#TCP的封装格式（报文）" class="headerlink" title="TCP的封装格式（报文）"></a>TCP的封装格式（报文）</h3><p><img src="../../../../jihu/image/NETWORK/52.png" alt="52.png"></p>
<h3 id="TCP的连接与断开"><a href="#TCP的连接与断开" class="headerlink" title="TCP的连接与断开"></a>TCP的连接与断开</h3><p>TCP的连接-三次握手</p>
<p><img src="../../../../jihu/image/NETWORK/53.png" alt="53.png"></p>
<p>TCP的四次断开</p>
<p><img src="../../../../jihu/image/NETWORK/54.png" alt="54.png"></p>
<h3 id="TCP应用"><a href="#TCP应用" class="headerlink" title="TCP应用"></a>TCP应用</h3><table>
<thead>
<tr>
<th>端口</th>
<th>协议</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>21</td>
<td>FTP</td>
<td>文件传输协议，用于上传下载</td>
</tr>
<tr>
<td>22</td>
<td>SSH</td>
<td>用于远程登陆，管理网络设备</td>
</tr>
<tr>
<td>25</td>
<td>SMTP</td>
<td>简单邮件传输协议，用于发送邮件</td>
</tr>
<tr>
<td>53</td>
<td>DNS</td>
<td>域名服务</td>
</tr>
<tr>
<td>80</td>
<td>HTTP</td>
<td>超文本传输协议</td>
</tr>
<tr>
<td>443</td>
<td>HTTPS</td>
<td>超文本传输协议，附带安全加密功能</td>
</tr>
</tbody></table>
<h2 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h2><h3 id="UDP封装格式（报文）"><a href="#UDP封装格式（报文）" class="headerlink" title="UDP封装格式（报文）"></a>UDP封装格式（报文）</h3><p><img src="../../../../jihu/image/NETWORK/55.png" alt="55.png"></p>
<h3 id="UDP应用"><a href="#UDP应用" class="headerlink" title="UDP应用"></a>UDP应用</h3><table>
<thead>
<tr>
<th>端口</th>
<th>协议</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>69</td>
<td>TFTP</td>
<td>简单文件传输协议</td>
</tr>
<tr>
<td>53</td>
<td>DNS</td>
<td>域名服务</td>
</tr>
<tr>
<td>123</td>
<td>NTP</td>
<td>网络时间协议</td>
</tr>
</tbody></table>
<h1 id="ACL简介与配置"><a href="#ACL简介与配置" class="headerlink" title="ACL简介与配置"></a>ACL简介与配置</h1><h2 id="ACL作用"><a href="#ACL作用" class="headerlink" title="ACL作用"></a>ACL作用</h2><ul>
<li>访问控制列表（Access Control List, ACL）是应用在路由器接口的指令（即规则）</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/56.png" alt="56.png"></p>
<ul>
<li>读取第三、第四层报文头信息</li>
<li>根据预先定义好的规则对报文进行过滤</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/57.png" alt="57.png"></p>
<h2 id="ACL的主要类型"><a href="#ACL的主要类型" class="headerlink" title="ACL的主要类型"></a>ACL的主要类型</h2><table>
<thead>
<tr>
<th>分类</th>
<th>编号范围</th>
<th>参数</th>
</tr>
</thead>
<tbody><tr>
<td>基本ACL</td>
<td>2000-2999</td>
<td>源IP地址</td>
</tr>
<tr>
<td>高级ACL</td>
<td>3000-3999</td>
<td>源IP地址、目的IP地址、端口、协议</td>
</tr>
</tbody></table>
<h2 id="ACL规则"><a href="#ACL规则" class="headerlink" title="ACL规则"></a>ACL规则</h2><ul>
<li>每个ACL可以包含多个规则，路由器根据规则对数据流量进行过滤，匹配即停止</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/58.png" alt="58.png"></p>
<h2 id="基本ACL概述"><a href="#基本ACL概述" class="headerlink" title="基本ACL概述"></a>基本ACL概述</h2><ul>
<li>基于源IP地址过滤数据包</li>
<li>列表号是2000-2999</li>
</ul>
<h3 id="基本ACL配置案例"><a href="#基本ACL配置案例" class="headerlink" title="基本ACL配置案例"></a>基本ACL配置案例</h3><ul>
<li>需求描述</li>
<li>禁止PC1访问服务器Server1</li>
<li>允许其他所有的访问流量</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/59.png" alt="59.png"></p>
<ul>
<li>AR1配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]vlan batch 100 2 3</span><br><span class="line">[Huawei]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 192.168.100.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 192.168.1.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip add 192.168.2.254 24</span><br><span class="line"></span><br><span class="line"># 创建ACL规则</span><br><span class="line">[Huawei]acl 2000</span><br><span class="line"># 创建规则5，拒绝源为192.168.1.1的IP地址，掩码为0表示指定IP，也可以为255.255.255.0</span><br><span class="line">[Huawei-acl-basic-2000]rule 5 deny source 192.168.1.1 0</span><br><span class="line">[Huawei-acl-basic-2000]in g0/0/0</span><br><span class="line"># 把0/0/0接口加入ACL规则</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]traffic-filter outbound acl 2000</span><br><span class="line"># outbound为出口配置  inbound为入口配置</span><br></pre></td></tr></table></figure>

<ul>
<li><p>测试</p>
<p>PC1不能ping通Server1</p>
<p>PC2可以ping通Server1</p>
</li>
<li><p>查看ACL</p>
<p>display acl 2000  或者  display acl all</p>
</li>
</ul>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><ul>
<li>禁止PC2与PC1通信，而允许所有其他的流量</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/60.png" alt="60.png"></p>
<ul>
<li>R1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]acl 2000</span><br><span class="line">[Huawei-acl-basic-2000]rule 5 deny source 192.168.2.1 255.255.255.0</span><br><span class="line">[Huawei-acl-basic-2000]rule 10 permit source any   # 允许所有</span><br><span class="line">[Huawei-acl-basic-2000]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]traffic-filter outbound acl 2000</span><br></pre></td></tr></table></figure>

<h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><ul>
<li>允许主机PC2与PC1互通，而禁止其他设备访问PC1</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/61.png" alt="61.png"></p>
<ul>
<li>R1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]acl 2000</span><br><span class="line">[Huawei-acl-basic-2000]rule 5 permit source 192.168.2.1 0</span><br><span class="line">[Huawei-acl-basic-2000]rule 10 deny source any </span><br><span class="line">[Huawei-acl-basic-2000]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]traffic-filter inbound acl 2000</span><br></pre></td></tr></table></figure>

<h2 id="ACL高级配置"><a href="#ACL高级配置" class="headerlink" title="ACL高级配置"></a>ACL高级配置</h2><h3 id="高级ACL"><a href="#高级ACL" class="headerlink" title="高级ACL"></a>高级ACL</h3><ul>
<li>基于源IP地址、目的IP地址、源端口、目的端口、协议过滤数据包</li>
<li>列表号是3000-3999</li>
</ul>
<h3 id="高级ACL配置案例"><a href="#高级ACL配置案例" class="headerlink" title="高级ACL配置案例"></a>高级ACL配置案例</h3><ul>
<li>需求描述</li>
<li>允许Client1访问Server1的Web服务</li>
<li>允许Client1访问网络192.168.2.0/24</li>
<li>禁止Client1访问其他网络</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/62.png" alt="62.png"></p>
<ul>
<li>AR1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip add 192.168.1.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 192.168.4.254 24</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.4.0 0.0.0.255</span><br><span class="line"></span><br><span class="line">[Huawei]acl 3000</span><br><span class="line">[Huawei-acl-adv-3000]rule 5 permit tcp source 192.168.1.1 0 destination 192.168.3.1 0 destination-port eq 80	</span><br><span class="line">[Huawei-acl-adv-3000]rule 10 permit ip source 192.168.1.1 0 destination 192.168.2.0 0.0.0.255</span><br><span class="line">[Huawei-acl-adv-3000]rule 15 deny ip source any</span><br><span class="line">[Huawei-acl-adv-3000]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]traffic-filter inbound acl 3000</span><br></pre></td></tr></table></figure>

<ul>
<li>AR2</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 192.168.4.1 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip add 192.168.2.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 192.168.5.254 24</span><br><span class="line"></span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0	</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.2.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.4.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.5.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<ul>
<li>AR3</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 192.168.5.1 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip add 192.168.3.254 24</span><br><span class="line"></span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.5.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.3.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<ul>
<li><p>查看ACL</p>
<p>display acl 3000 或 display acl all</p>
</li>
<li><p>测试</p>
<p>Client1可以访问Server1的Web服务</p>
<p>Client1可以ping通网络192.168.2.0/24</p>
<p>Client1不能ping通网络192.168.3.0/24</p>
</li>
</ul>
<h1 id="NAT概述"><a href="#NAT概述" class="headerlink" title="NAT概述"></a>NAT概述</h1><h2 id="NAT的作用"><a href="#NAT的作用" class="headerlink" title="NAT的作用"></a>NAT的作用</h2><ul>
<li><p>NAT</p>
<p>Network Address Translation，网络地址转换</p>
</li>
<li><p>作用</p>
<p>通过将内部网络的私有IP转换为全球唯一的公网IP，使内部网络可以连接到外部网络</p>
</li>
</ul>
<h2 id="私有IP分类"><a href="#私有IP分类" class="headerlink" title="私有IP分类"></a>私有IP分类</h2><ul>
<li>A类：10.0.0.0~10.255.255.255</li>
<li>B类：172.16.0.0~172.31.255.255</li>
<li>C类：192.168.0.0~192.168.255.255</li>
</ul>
<h2 id="NAT的特性"><a href="#NAT的特性" class="headerlink" title="NAT的特性"></a>NAT的特性</h2><ul>
<li><p>NAT的优点</p>
<p>节省公有合法IP地址</p>
<p>处理地址叠加</p>
<p>安全性</p>
</li>
<li><p>NAT的缺点</p>
<p>延迟增大</p>
<p>配置和维护的复杂性</p>
</li>
</ul>
<h2 id="NAT实现方式"><a href="#NAT实现方式" class="headerlink" title="NAT实现方式"></a>NAT实现方式</h2><ul>
<li>静态转换</li>
<li>Easy IP</li>
</ul>
<h2 id="NAT工作过程"><a href="#NAT工作过程" class="headerlink" title="NAT工作过程"></a>NAT工作过程</h2><ul>
<li>静态</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/63.png" alt="63.png"></p>
<ul>
<li>Easy IP</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/64.png" alt="64.png"></p>
<h2 id="静态NAT"><a href="#静态NAT" class="headerlink" title="静态NAT"></a>静态NAT</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><ul>
<li>讲台转换是指将内部网络的私有地址转换为共有地址时，IP地址的对应关系是确定的</li>
<li>静态转换是一对一的转换</li>
<li>静态转换时双向的</li>
</ul>
<h3 id="静态NAT配置"><a href="#静态NAT配置" class="headerlink" title="静态NAT配置"></a>静态NAT配置</h3><ul>
<li>将内部地址10.1.1.11、10.1.1.12静态转换为公网地址200.1.1.11、200.1.1.12，以便访问外网主机或被外网访问</li>
<li>in g0/0/2  # 连接外网的接口<br>nat static global 200.1.1.11 inside 10.1.1.11<br>nat static global 200.1.1.12 inside 10.1.1.12</li>
</ul>
<h3 id="案例：静态配置NAT"><a href="#案例：静态配置NAT" class="headerlink" title="案例：静态配置NAT"></a>案例：静态配置NAT</h3><ul>
<li>在R1上配置静态NAT使192.168.2.1转换为100.0.0.2，192.168.2.2转换为100.0.0.3，实现外部访问</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/65.png" alt="65.png"></p>
<ul>
<li>R1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 192.168.2.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 100.0.0.1 8</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]nat static global 100.0.0.2 inside 192.168.2.1</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]nat static global 100.0.0.3 inside 192.168.2.2</span><br></pre></td></tr></table></figure>

<h2 id="Easy-IP"><a href="#Easy-IP" class="headerlink" title="Easy IP"></a>Easy IP</h2><h3 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h3><ul>
<li>Easy IP允许将多个内部地址映射到网关出接口</li>
<li>Easy IP是多对一的转换</li>
<li>Easy IP是单向的</li>
</ul>
<h3 id="Easy-IP配置"><a href="#Easy-IP配置" class="headerlink" title="Easy IP配置"></a>Easy IP配置</h3><ul>
<li>公司路由器外部接口G0/0/2是公网IP，如何使内部网络10.1.1.0利用NAT上网</li>
<li>acl 2000<br>rule 5 permit source 10.1.1.0 0.0.0.255<br>in g0/0/2<br>nat outbound 2000</li>
</ul>
<h3 id="案例：Easy-IP配置"><a href="#案例：Easy-IP配置" class="headerlink" title="案例：Easy IP配置"></a>案例：Easy IP配置</h3><ul>
<li>在R1配置路由器使企业内网192.168.2.0/24复用G0/0/1接口的IP，实现外部网络的访问</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/66.png" alt="66.png"></p>
<ul>
<li>R1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 192.168.2.254 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 100.0.0.1 8</span><br><span class="line"></span><br><span class="line">[Huawei]acl 2000	</span><br><span class="line">[Huawei-acl-basic-2000]rule 5 permit source 192.168.2.0 0.0.0.255</span><br><span class="line">[Huawei-acl-basic-2000]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]nat outbound 2000</span><br></pre></td></tr></table></figure>

<h1 id="VRRP概述"><a href="#VRRP概述" class="headerlink" title="VRRP概述"></a>VRRP概述</h1><h2 id="单网关的缺陷"><a href="#单网关的缺陷" class="headerlink" title="单网关的缺陷"></a>单网关的缺陷</h2><ul>
<li>单网关场景分析</li>
<li>当网关路由器出现故障时，本网段内以该设备为网关的主机都不能与Internet进行通信</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/67.png" alt="67.png"></p>
<h2 id="多网关存在的问题"><a href="#多网关存在的问题" class="headerlink" title="多网关存在的问题"></a>多网关存在的问题</h2><ul>
<li><p>通过部署多网关的方式实现网关的备份</p>
</li>
<li><p>存在的问题</p>
<p>网关直接IP地址冲突</p>
<p>主机会频繁切换网络出口</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/68.png" alt="68.png"></p>
<h2 id="什么是VRRP"><a href="#什么是VRRP" class="headerlink" title="什么是VRRP"></a>什么是VRRP</h2><ul>
<li>VRRP是虚拟路由冗余协议</li>
<li>VRRP能够在不改变组网的情况下，从多台网关设备里产生一个虚拟路由器，通过配置虚拟路由器的IP地址为网关，实现网关的备份</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/69.png" alt="69.png"></p>
<h2 id="VRRP应用"><a href="#VRRP应用" class="headerlink" title="VRRP应用"></a>VRRP应用</h2><ul>
<li><p>VRRP组成员角色</p>
<p>主（Master）路由器</p>
<p>备份（Backup）路由器</p>
<p>虚拟（Virtual）路由器</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/70.png" alt="70.png"></p>
<ul>
<li>VRRP原理</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/71.png" alt="71.png"></p>
<h2 id="VRRP配置"><a href="#VRRP配置" class="headerlink" title="VRRP配置"></a>VRRP配置</h2><ul>
<li><p>三层交换机配置</p>
</li>
<li><p>SW1</p>
<p>int vlan 1<br>ip add 192.168.1.1 24<br>vrrp vrid 1 virtual-ip 192.168.1.254  # 1为标识符</p>
<p>vrrp vrid 1 priority 105</p>
</li>
<li><p>SW2</p>
<p>int vlan 1<br>ip add 192.168.1.2 24<br>vrrp vrid 1 virtual-ip 192.168.1.254</p>
<p>vrrp vrid 1 priority 100</p>
</li>
<li><p>查看VRRP信息</p>
<p>dis vrrp bri</p>
</li>
</ul>
<h2 id="案例：三层交换机配置VRRP"><a href="#案例：三层交换机配置VRRP" class="headerlink" title="案例：三层交换机配置VRRP"></a>案例：三层交换机配置VRRP</h2><ul>
<li>在三层交换机配置VRRP后使其产生一个虚拟IP地址192.168.1.254为内部主机的网关</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/72.png" alt="72.png"></p>
<ul>
<li>AR1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]in g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip add 192.168.2.1 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip add 192.168.3.1 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip add 192.168.4.254 24</span><br><span class="line"></span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.4.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.3.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.2.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<ul>
<li>MS1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]vlan batch 2</span><br><span class="line">[Huawei]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port link-type access </span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port default vlan 2</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in vlan 2</span><br><span class="line">[Huawei-Vlanif2]ip add 192.168.2.2 24</span><br><span class="line">[Huawei-Vlanif2]in vlan 1 </span><br><span class="line">[Huawei-Vlanif1]ip add 192.168.1.252 24	</span><br><span class="line">[Huawei-Vlanif1]vrrp vrid 1 virtual-ip 192.168.1.254</span><br><span class="line">[Huawei-Vlanif1]vrrp vrid 1 priority 100</span><br><span class="line"></span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.2.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<ul>
<li>MS2</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]vlan batch 3</span><br><span class="line">[Huawei]in g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port link-type access </span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port default vlan 3</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]in vlan 3</span><br><span class="line">[Huawei-Vlanif3]ip add 192.168.3.2 24</span><br><span class="line">[Huawei-Vlanif3]in vlan 1</span><br><span class="line">[Huawei-Vlanif1]ip add 192.168.1.253 24</span><br><span class="line">[Huawei-Vlanif1]vrrp vrid 1 virtual-ip 192.168.1.254</span><br><span class="line">[Huawei-Vlanif1]vrrp vrid 1 priority 95</span><br><span class="line"></span><br><span class="line">[Huawei]ospf 1</span><br><span class="line">[Huawei-ospf-1]area 0</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255</span><br><span class="line">[Huawei-ospf-1-area-0.0.0.0]network 192.168.3.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<h1 id="企业级网络部署"><a href="#企业级网络部署" class="headerlink" title="企业级网络部署"></a>企业级网络部署</h1><h2 id="分析与升级"><a href="#分析与升级" class="headerlink" title="分析与升级"></a>分析与升级</h2><h3 id="目前网络环境"><a href="#目前网络环境" class="headerlink" title="目前网络环境"></a>目前网络环境</h3><ul>
<li><p>公司介绍</p>
<p>一家网络服务的IT公司</p>
<p>公司位于北京有若干服务器</p>
<p>通过NAT技术将业务服务器与Internet互联</p>
</li>
</ul>
<h3 id="目前网络拓扑结构"><a href="#目前网络拓扑结构" class="headerlink" title="目前网络拓扑结构"></a>目前网络拓扑结构</h3><ul>
<li>现有网络</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/73.png" alt="73.png"></p>
<h3 id="目前网络技术"><a href="#目前网络技术" class="headerlink" title="目前网络技术"></a>目前网络技术</h3><ul>
<li><p>目前网络环境已拥有技术</p>
</li>
<li><p>默认路由：实现到互联网数以万计网络访问的简化配置</p>
</li>
<li><p>静态路由：路由器与三层交换机间配置静态路由</p>
</li>
<li><p>NAT：将业务服务器与Internet互联</p>
</li>
</ul>
<h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><ul>
<li><p>现有网络环境问题分析</p>
</li>
<li><p>接入层交换机只与同一个三层交换机相连，存在单点故障而影响网络通信</p>
</li>
<li><p>互联网连接单一服务商</p>
</li>
<li><p>网络规模不断增加，静态路由缺乏灵活</p>
</li>
</ul>
<h3 id="项目需求"><a href="#项目需求" class="headerlink" title="项目需求"></a>项目需求</h3><ul>
<li><p>现有网络需求：</p>
</li>
<li><p>为了提高主机对公司网络服务访问的可靠性，需要很多冗余技术</p>
</li>
<li><p>为了保证局域网络高可靠使用了网络拓扑</p>
</li>
<li><p>为了保证服务器不会因为使用单一网关而出现单点失败影响网络通信选哟网关冗余</p>
</li>
<li><p>为了保证到互联网的高可用接入需使用了冗余互联网连接</p>
</li>
</ul>
<h3 id="项目技术"><a href="#项目技术" class="headerlink" title="项目技术"></a>项目技术</h3><ul>
<li><p>基于项目的需求，解决方案中需要增加如下技术：</p>
</li>
<li><p>OSFP路由协议：实现网络路径的自主学习</p>
</li>
<li><p>VRRP：实现冗余网关</p>
</li>
<li><p>链路聚合：实现增加链路可靠</p>
</li>
</ul>
<h3 id="项目拓扑"><a href="#项目拓扑" class="headerlink" title="项目拓扑"></a>项目拓扑</h3><ul>
<li>重新规划后的网络拓扑</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/74.png" alt="74.png"></p>
<h2 id="接入层配置"><a href="#接入层配置" class="headerlink" title="接入层配置"></a>接入层配置</h2><ul>
<li><p>设备命名</p>
<p>sysname TEDU_TEDU_BJ_NSD_FLOOR03_DEV12</p>
</li>
<li><p>规划VLAN</p>
</li>
<li><p>规划IP地址</p>
<p>VLAN 10  192.168.10.0/24</p>
<p>VLAN 20  192.168.20.0/24</p>
<p>······</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/75.png" alt="75.png"></p>
<ul>
<li><p>接入层</p>
<p>每台交换机分别创建4个VLAN</p>
<p>终端设备加入各自VLAN</p>
<p>所有交换机直接的链路配置为TRUNK</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vlan batch 10 20 30 40</span><br><span class="line"></span><br><span class="line">in e0/0/1</span><br><span class="line">port link-type access</span><br><span class="line">port default vlan 10  # 每个交换机视情况加入vlan</span><br><span class="line"></span><br><span class="line">port-group 1</span><br><span class="line">group-member g0/0/1 g0/0/2</span><br><span class="line">port link-type trunk </span><br><span class="line">port trunk allow-pass vlan all</span><br></pre></td></tr></table></figure>

<h2 id="汇聚层配置"><a href="#汇聚层配置" class="headerlink" title="汇聚层配置"></a>汇聚层配置</h2><ul>
<li><p>虚拟接口IP地址</p>
<p>VLAN10 192.168.10.0/24</p>
<p>VLAN20 192.168.20.0/24</p>
<p>VLAN30 192.168.30.0/24</p>
<p>VLAN40 192.168.40.0/24</p>
</li>
<li><p>至核心层接口IP地址</p>
<p>192.168.50.0/24</p>
<p>192.168.60.0/24</p>
<p>192.168.70.0/24</p>
<p>192.168.80.0/24</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/76.png" alt="76.png"></p>
<p><img src="../../../../jihu/image/NETWORK/77.png" alt="77.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vlan batch 10 20 30 40</span><br><span class="line"></span><br><span class="line"># 配置trunk</span><br><span class="line">port-group 1</span><br><span class="line">group-member g0/0/1 to g0/0/5</span><br><span class="line">port link-type trunk</span><br><span class="line">port trunk allow-pass vlan all</span><br><span class="line"></span><br><span class="line"># 给vlan配置IP</span><br><span class="line">in vlan 10 </span><br><span class="line">ip add 192.168.10.252 24</span><br></pre></td></tr></table></figure>

<h2 id="核心层配置"><a href="#核心层配置" class="headerlink" title="核心层配置"></a>核心层配置</h2><h3 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h3><ul>
<li><p>宣告内网直连网段</p>
</li>
<li><p>通告默认路由</p>
<p>ip route-static 0.0.0.0 0 100.0.0.1</p>
<p>ospf</p>
<p>default-route-advertise</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/78.png" alt="78.png"></p>
<h3 id="开启NAT功能"><a href="#开启NAT功能" class="headerlink" title="开启NAT功能"></a>开启NAT功能</h3><ul>
<li><p>开启NAT</p>
<p>acl 2000</p>
<p>rule 5 permit source any</p>
<p>in g0/0/2</p>
<p>nat outbound 2000</p>
</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/79.png" alt="79.png"></p>
<p><img src="../../../../jihu/image/NETWORK/80.png" alt="80.png"></p>
<ul>
<li>AR1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 给端口配置IP</span><br><span class="line">in g0/0/0</span><br><span class="line">ip add 192.168.50.1 24</span><br><span class="line">in g0/0/1</span><br><span class="line">ip add 192.168.70.1 24</span><br><span class="line">in g0/0/2</span><br><span class="line">ip add 100.0.0.1 24 8</span><br><span class="line"></span><br><span class="line"># 配置动态路由</span><br><span class="line">ospf</span><br><span class="line">area 0</span><br><span class="line">network 192.168.50.0 0.0.0.255</span><br><span class="line">network 192.168.70.0 0.0.0.255</span><br><span class="line"></span><br><span class="line"># 配置默认路由</span><br><span class="line">ip route-static 0.0.0.0 0 100.0.0.10</span><br><span class="line"></span><br><span class="line">ospf</span><br><span class="line">default-route-advertise</span><br><span class="line"></span><br><span class="line"># 配置NAT Easy IP</span><br><span class="line">acl 2000</span><br><span class="line">rule permit source any </span><br><span class="line">in g0/0/2</span><br><span class="line">nat outbound 2000</span><br></pre></td></tr></table></figure>

<ul>
<li>LSW5</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vlan batch 50 60 </span><br><span class="line">in vlan 50</span><br><span class="line">ip add 192.168.50.2 24</span><br><span class="line">in vlan 60</span><br><span class="line">ip add 192.168.60.2 24</span><br><span class="line"></span><br><span class="line">in g0/0/6</span><br><span class="line">port link-type access </span><br><span class="line">port default vlan 50</span><br><span class="line">in g0/0/7</span><br><span class="line">port link-type access </span><br><span class="line">port default vlan 60</span><br><span class="line"></span><br><span class="line">ospf</span><br><span class="line">area 0</span><br><span class="line">network 192.168.50.0 0.0.0.255</span><br><span class="line">network 192.168.60.0 0.0.0.255</span><br><span class="line">network 192.168.10.0 0.0.0.255</span><br><span class="line">network 192.168.20.0 0.0.0.255</span><br><span class="line">network 192.168.30.0 0.0.0.255</span><br><span class="line">network 192.168.40.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<ul>
<li>模拟外网的交换机配置IP</li>
</ul>
<h3 id="SSH远程登录"><a href="#SSH远程登录" class="headerlink" title="SSH远程登录"></a>SSH远程登录</h3><ul>
<li>在路由器开启远程服务</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">aaa</span><br><span class="line">local-user test password cipher 123		# 创建用户</span><br><span class="line">local-user test privilege level 3		# 开启所有权限</span><br><span class="line">local-user test service-type ssh		# 开启ssh服务</span><br><span class="line">quit</span><br><span class="line">user-interface vty 0 4	# 允许多少个人登录到用户系统0-4共5个，vty虚拟终端</span><br><span class="line">authentication-mode aaa	# 认证模式</span><br><span class="line">protocol inbound ssh	# 定义进来的数据协议</span><br><span class="line">quit</span><br><span class="line">stelnet server enable	# 开启ssh服务，名字不一样</span><br></pre></td></tr></table></figure>

<ul>
<li>从其他设备登录</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh client first-time enable	# 初次连接以此命令做准备</span><br><span class="line">stelnet 192.168.50.1</span><br></pre></td></tr></table></figure>

<ul>
<li><p>交换机开启ssh服务</p>
<p>需要多输入以下命令，其他一致</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh user test authentication-type password</span><br><span class="line">ssh user test service-type stelnet </span><br></pre></td></tr></table></figure>

<h3 id="VRRP负载均衡"><a href="#VRRP负载均衡" class="headerlink" title="VRRP负载均衡"></a>VRRP负载均衡</h3><ul>
<li>主备设置</li>
<li>vlan 10 20 MS1为主</li>
<li>vlan 30 40 MS2为主</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/81.png" alt="81.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">in vlan 10</span><br><span class="line">vrrp vrid 1 virtual-ip 192.168.10.254</span><br><span class="line">vrrp vrid 1 priority 105</span><br></pre></td></tr></table></figure>

<h3 id="VRRP接口跟踪"><a href="#VRRP接口跟踪" class="headerlink" title="VRRP接口跟踪"></a>VRRP接口跟踪</h3><ul>
<li>接口跟踪</li>
<li>当三层交换机与路由器之间的线断了，vrrp并不会放弃master身份</li>
<li>使用接口跟踪可以自动的技术调整优先级</li>
</ul>
<p><img src="../../../../jihu/image/NETWORK/82.png" alt="82.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">in vlan 10</span><br><span class="line">vrrp vrid 1 track interface g0/0/6 reduced 3 # 断线降低3优先级</span><br><span class="line">vrrp vrid 1 track interface g0/0/7 reduced 3</span><br><span class="line"></span><br><span class="line"># 当两条线都断了优先级就降到99，就会让出master身份</span><br></pre></td></tr></table></figure>

<h3 id="加强同层交换机之间的链路"><a href="#加强同层交换机之间的链路" class="headerlink" title="加强同层交换机之间的链路"></a>加强同层交换机之间的链路</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">clear configuration interface g0/0/5</span><br><span class="line">in g0/0/5</span><br><span class="line">undo shutdown</span><br><span class="line"></span><br><span class="line">port-group 5</span><br><span class="line">group-member g0/0/5 g0/0/8</span><br><span class="line">port link-type trunk </span><br><span class="line">port trunk allow-pass vlan all</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">W</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/05/16/tedu-NETWORK/">http://example.com/2023/05/16/tedu-NETWORK/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">CLOUD</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/NetWork/">NetWork</a></div><div class="post_share"><div class="social-share" data-image="/../jihu/wallpaper/used/network.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/12/tedu-Python/" title="Python"><img class="cover" src="/../jihu/wallpaper/used/python.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Python</div></div></a></div><div class="next-post pull-right"><a href="/2023/06/07/%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/" title="网络架构部署案例"><img class="cover" src="/../jihu/wallpaper/used/1+Xnetwork.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">网络架构部署案例</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/06/07/%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/" title="网络架构部署案例"><img class="cover" src="/../jihu/wallpaper/used/1+Xnetwork.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-07</div><div class="title">网络架构部署案例</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/../jihu/wallpaper/used/user.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">W</div><div class="author-info__description">Cloud Computing</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">网络概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C"><span class="toc-number">1.1.</span> <span class="toc-text">什么是计算机网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8F%91%E5%B1%95%E9%98%B6%E6%AE%B5"><span class="toc-number">1.2.</span> <span class="toc-text">计算机网络发展阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%A0%87%E5%87%86"><span class="toc-number">1.3.</span> <span class="toc-text">网络标准</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WAN%E4%B8%8ELAN"><span class="toc-number">1.4.</span> <span class="toc-text">WAN与LAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E5%9F%9F%E7%BD%91%EF%BC%88Wide-Area-Network%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">广域网（Wide-Area Network）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%88Local-Area-Network%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">局域网（Local-Area Network）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.</span> <span class="toc-text">网络拓扑结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%BC%86%E8%BF%9E%E6%8E%A5%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%92%8C%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%83%E5%B1%80"><span class="toc-number">1.5.1.</span> <span class="toc-text">线缆连接计算机和网络设备的布局</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E5%8F%82%E8%80%83"><span class="toc-number">2.</span> <span class="toc-text">网络模型参考</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">OSI参考模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#OSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.1.1.</span> <span class="toc-text">OSI七层模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-IP%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.1.2.</span> <span class="toc-text">TCP&#x2F;IP模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-IP%E5%8D%8F%E8%AE%AE%E6%97%8F%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">2.1.3.</span> <span class="toc-text">TCP&#x2F;IP协议族的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.1.4.</span> <span class="toc-text">什么是协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E8%A7%A3%E5%B0%81%E8%A3%85"><span class="toc-number">2.2.</span> <span class="toc-text">数据的封装与解封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">数据封装过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%B0%81%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="toc-number">2.2.2.</span> <span class="toc-text">数据解封装过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83%EF%BC%88PDU%EF%BC%89"><span class="toc-number">2.2.3.</span> <span class="toc-text">协议数据单元（PDU）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E4%B8%8E%E5%B1%82%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"><span class="toc-number">2.2.4.</span> <span class="toc-text">设备与层对应关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">IP地址分类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">3.1.</span> <span class="toc-text">IP地址的组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">3.2.</span> <span class="toc-text">子网掩码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">4.</span> <span class="toc-text">交换机命令行</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%A7%86%E5%9B%BE"><span class="toc-number">4.1.</span> <span class="toc-text">交换机命令行视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B1%82%E6%AC%A1%E5%85%B3%E7%B3%BB"><span class="toc-number">4.2.</span> <span class="toc-text">命令行层次关系</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">交换机配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="toc-number">5.1.</span> <span class="toc-text">配置主机名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E7%A4%BAVRP%E7%89%88%E6%9C%AC"><span class="toc-number">5.2.</span> <span class="toc-text">显示VRP版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.</span> <span class="toc-text">查看交换机配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%E7%BB%88%E7%AB%AF"><span class="toc-number">5.4.</span> <span class="toc-text">使用密码登录终端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">5.5.</span> <span class="toc-text">保存交换机配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%87%BA%E5%8E%82%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">5.6.</span> <span class="toc-text">恢复交换机出厂默认值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%90%AF"><span class="toc-number">5.7.</span> <span class="toc-text">重启</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E8%87%AA%E5%8A%A8%E9%80%80%E5%87%BA%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2"><span class="toc-number">5.8.</span> <span class="toc-text">避免自动退出配置页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E4%BF%A1%E6%81%AF%E6%8F%90%E7%A4%BA"><span class="toc-number">5.9.</span> <span class="toc-text">关闭信息提示</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91MAC%E5%9C%B0%E5%9D%80"><span class="toc-number">6.1.</span> <span class="toc-text">以太网MAC地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.2.</span> <span class="toc-text">以太网帧格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">交换机工作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E6%A1%88%E4%BE%8B"><span class="toc-number">6.4.</span> <span class="toc-text">交换机工作原理案例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VLAN%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">VLAN技术与应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">7.1.</span> <span class="toc-text">广播域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN%E6%A6%82%E8%BF%B0"><span class="toc-number">7.2.</span> <span class="toc-text">VLAN概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFVLAN"><span class="toc-number">7.2.1.</span> <span class="toc-text">什么是VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%95%E5%85%A5VLAN"><span class="toc-number">7.2.2.</span> <span class="toc-text">为什么引入VLAN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">7.3.</span> <span class="toc-text">VLAN的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN%E9%85%8D%E7%BD%AE"><span class="toc-number">7.4.</span> <span class="toc-text">VLAN配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81VLAN%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">7.4.1.</span> <span class="toc-text">配置静态VLAN的步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAVLAN"><span class="toc-number">7.4.2.</span> <span class="toc-text">创建VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.4.3.</span> <span class="toc-text">配置接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8BVLAN%E4%BF%A1%E6%81%AF"><span class="toc-number">7.4.4.</span> <span class="toc-text">查看VLAN信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%8E%A5%E5%8F%A3%E7%BB%84"><span class="toc-number">7.4.5.</span> <span class="toc-text">创建接口组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A4%9A%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E7%9A%84%E5%88%92%E5%88%86"><span class="toc-number">7.5.</span> <span class="toc-text">案例：多交换机VLAN的划分</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TRUNK%EF%BC%88%E4%B8%AD%E7%BB%A7%E9%93%BE%E8%B7%AF%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">TRUNK（中继链路）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Trunk%E5%8E%9F%E7%90%86"><span class="toc-number">8.1.</span> <span class="toc-text">Trunk原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN%E6%A0%87%E8%AF%86"><span class="toc-number">8.2.</span> <span class="toc-text">VLAN标识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Trunk%E9%85%8D%E7%BD%AE"><span class="toc-number">8.3.</span> <span class="toc-text">Trunk配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88"><span class="toc-number">9.</span> <span class="toc-text">链路聚合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E9%93%BE%E8%B7%AF"><span class="toc-number">9.1.</span> <span class="toc-text">创建聚合链路</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-number">10.</span> <span class="toc-text">路由原理及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%AF%E7%94%B1"><span class="toc-number">10.1.</span> <span class="toc-text">什么是路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E8%B7%AF%E7%94%B1%E8%A1%A8"><span class="toc-number">10.2.</span> <span class="toc-text">如何获取路由表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B4%E8%BF%9E%E8%B7%AF%E7%94%B1"><span class="toc-number">10.3.</span> <span class="toc-text">直连路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">10.4.</span> <span class="toc-text">静态路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">10.5.</span> <span class="toc-text">案例：配置静态路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1"><span class="toc-number">10.6.</span> <span class="toc-text">默认路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">10.7.</span> <span class="toc-text">动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">10.7.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEOSPF"><span class="toc-number">10.7.2.</span> <span class="toc-text">动态路由协议OSPF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSPF%E9%85%8D%E7%BD%AE"><span class="toc-number">10.7.3.</span> <span class="toc-text">OSPF配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">11.</span> <span class="toc-text">三层交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%89%E6%AC%A1%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">11.1.</span> <span class="toc-text">什么是三次交换机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%8E%A5%E5%8F%A3%E6%A6%82%E8%BF%B0"><span class="toc-number">11.2.</span> <span class="toc-text">虚拟接口概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E6%80%9D%E8%B7%AF"><span class="toc-number">11.3.</span> <span class="toc-text">三层交换机配置思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%80%9A%E4%BF%A1"><span class="toc-number">11.4.</span> <span class="toc-text">案例：三层交换机VLAN通信</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E7%BB%84%E7%BD%91"><span class="toc-number">11.5.</span> <span class="toc-text">综合组网</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">12.</span> <span class="toc-text">传输层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E4%BD%9C%E7%94%A8"><span class="toc-number">12.1.</span> <span class="toc-text">传输层作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.2.</span> <span class="toc-text">传输层协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.3.</span> <span class="toc-text">TCP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E7%9A%84%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F%EF%BC%88%E6%8A%A5%E6%96%87%EF%BC%89"><span class="toc-number">12.3.1.</span> <span class="toc-text">TCP的封装格式（报文）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E7%9A%84%E8%BF%9E%E6%8E%A5%E4%B8%8E%E6%96%AD%E5%BC%80"><span class="toc-number">12.3.2.</span> <span class="toc-text">TCP的连接与断开</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E5%BA%94%E7%94%A8"><span class="toc-number">12.3.3.</span> <span class="toc-text">TCP应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UDP%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.4.</span> <span class="toc-text">UDP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F%EF%BC%88%E6%8A%A5%E6%96%87%EF%BC%89"><span class="toc-number">12.4.1.</span> <span class="toc-text">UDP封装格式（报文）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E5%BA%94%E7%94%A8"><span class="toc-number">12.4.2.</span> <span class="toc-text">UDP应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ACL%E7%AE%80%E4%BB%8B%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">13.</span> <span class="toc-text">ACL简介与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ACL%E4%BD%9C%E7%94%A8"><span class="toc-number">13.1.</span> <span class="toc-text">ACL作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACL%E7%9A%84%E4%B8%BB%E8%A6%81%E7%B1%BB%E5%9E%8B"><span class="toc-number">13.2.</span> <span class="toc-text">ACL的主要类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACL%E8%A7%84%E5%88%99"><span class="toc-number">13.3.</span> <span class="toc-text">ACL规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%ACACL%E6%A6%82%E8%BF%B0"><span class="toc-number">13.4.</span> <span class="toc-text">基本ACL概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%ACACL%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B"><span class="toc-number">13.4.1.</span> <span class="toc-text">基本ACL配置案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">13.4.2.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">13.4.3.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACL%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE"><span class="toc-number">13.5.</span> <span class="toc-text">ACL高级配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7ACL"><span class="toc-number">13.5.1.</span> <span class="toc-text">高级ACL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7ACL%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B"><span class="toc-number">13.5.2.</span> <span class="toc-text">高级ACL配置案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NAT%E6%A6%82%E8%BF%B0"><span class="toc-number">14.</span> <span class="toc-text">NAT概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#NAT%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">14.1.</span> <span class="toc-text">NAT的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%81%E6%9C%89IP%E5%88%86%E7%B1%BB"><span class="toc-number">14.2.</span> <span class="toc-text">私有IP分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NAT%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">14.3.</span> <span class="toc-text">NAT的特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NAT%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">14.4.</span> <span class="toc-text">NAT实现方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NAT%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">14.5.</span> <span class="toc-text">NAT工作过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81NAT"><span class="toc-number">14.6.</span> <span class="toc-text">静态NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">14.6.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81NAT%E9%85%8D%E7%BD%AE"><span class="toc-number">14.6.2.</span> <span class="toc-text">静态NAT配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%9D%99%E6%80%81%E9%85%8D%E7%BD%AENAT"><span class="toc-number">14.6.3.</span> <span class="toc-text">案例：静态配置NAT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Easy-IP"><span class="toc-number">14.7.</span> <span class="toc-text">Easy IP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">14.7.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Easy-IP%E9%85%8D%E7%BD%AE"><span class="toc-number">14.7.2.</span> <span class="toc-text">Easy IP配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9AEasy-IP%E9%85%8D%E7%BD%AE"><span class="toc-number">14.7.3.</span> <span class="toc-text">案例：Easy IP配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VRRP%E6%A6%82%E8%BF%B0"><span class="toc-number">15.</span> <span class="toc-text">VRRP概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E7%BD%91%E5%85%B3%E7%9A%84%E7%BC%BA%E9%99%B7"><span class="toc-number">15.1.</span> <span class="toc-text">单网关的缺陷</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BD%91%E5%85%B3%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">15.2.</span> <span class="toc-text">多网关存在的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFVRRP"><span class="toc-number">15.3.</span> <span class="toc-text">什么是VRRP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VRRP%E5%BA%94%E7%94%A8"><span class="toc-number">15.4.</span> <span class="toc-text">VRRP应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VRRP%E9%85%8D%E7%BD%AE"><span class="toc-number">15.5.</span> <span class="toc-text">VRRP配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AEVRRP"><span class="toc-number">15.6.</span> <span class="toc-text">案例：三层交换机配置VRRP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%83%A8%E7%BD%B2"><span class="toc-number">16.</span> <span class="toc-text">企业级网络部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E4%B8%8E%E5%8D%87%E7%BA%A7"><span class="toc-number">16.1.</span> <span class="toc-text">分析与升级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%89%8D%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83"><span class="toc-number">16.1.1.</span> <span class="toc-text">目前网络环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%89%8D%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84"><span class="toc-number">16.1.2.</span> <span class="toc-text">目前网络拓扑结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%89%8D%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF"><span class="toc-number">16.1.3.</span> <span class="toc-text">目前网络技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">16.1.4.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82"><span class="toc-number">16.1.5.</span> <span class="toc-text">项目需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF"><span class="toc-number">16.1.6.</span> <span class="toc-text">项目技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%8B%93%E6%89%91"><span class="toc-number">16.1.7.</span> <span class="toc-text">项目拓扑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E5%B1%82%E9%85%8D%E7%BD%AE"><span class="toc-number">16.2.</span> <span class="toc-text">接入层配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%87%E8%81%9A%E5%B1%82%E9%85%8D%E7%BD%AE"><span class="toc-number">16.3.</span> <span class="toc-text">汇聚层配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%B1%82%E9%85%8D%E7%BD%AE"><span class="toc-number">16.4.</span> <span class="toc-text">核心层配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#OSPF"><span class="toc-number">16.4.1.</span> <span class="toc-text">OSPF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AFNAT%E5%8A%9F%E8%83%BD"><span class="toc-number">16.4.2.</span> <span class="toc-text">开启NAT功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-number">16.4.3.</span> <span class="toc-text">SSH远程登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VRRP%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">16.4.4.</span> <span class="toc-text">VRRP负载均衡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VRRP%E6%8E%A5%E5%8F%A3%E8%B7%9F%E8%B8%AA"><span class="toc-number">16.4.5.</span> <span class="toc-text">VRRP接口跟踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%BC%BA%E5%90%8C%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B9%8B%E9%97%B4%E7%9A%84%E9%93%BE%E8%B7%AF"><span class="toc-number">16.4.6.</span> <span class="toc-text">加强同层交换机之间的链路</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/12/6-%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/" title="公有云：(6)边缘计算平台部署应用"><img src="/../jihu/wallpaper/used/gy6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="公有云：(6)边缘计算平台部署应用"/></a><div class="content"><a class="title" href="/2023/08/12/6-%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/" title="公有云：(6)边缘计算平台部署应用">公有云：(6)边缘计算平台部署应用</a><time datetime="2023-08-11T22:00:00.000Z" title="发表于 2023-08-12 06:00:00">2023-08-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/12/5-%E5%85%AC%E6%9C%89%E4%BA%91Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%E6%A1%88%E4%BE%8B/" title="公有云：(5)公有云Python运维开发案例"><img src="/../jihu/wallpaper/used/gy5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="公有云：(5)公有云Python运维开发案例"/></a><div class="content"><a class="title" href="/2023/08/12/5-%E5%85%AC%E6%9C%89%E4%BA%91Python%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%E6%A1%88%E4%BE%8B/" title="公有云：(5)公有云Python运维开发案例">公有云：(5)公有云Python运维开发案例</a><time datetime="2023-08-11T21:00:00.000Z" title="发表于 2023-08-12 05:00:00">2023-08-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/12/4-%E5%85%AC%E6%9C%89%E4%BA%91Helm%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/" title="公有云：(4)公有云Helm模板使用案例"><img src="/../jihu/wallpaper/used/gy4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="公有云：(4)公有云Helm模板使用案例"/></a><div class="content"><a class="title" href="/2023/08/12/4-%E5%85%AC%E6%9C%89%E4%BA%91Helm%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/" title="公有云：(4)公有云Helm模板使用案例">公有云：(4)公有云Helm模板使用案例</a><time datetime="2023-08-11T20:00:00.000Z" title="发表于 2023-08-12 04:00:00">2023-08-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/12/3-%E5%85%AC%E6%9C%89%E4%BA%91CCE%E9%9B%86%E7%BE%A4%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B/" title="公有云：(3)公有云CCE集群操作案例"><img src="/../jihu/wallpaper/used/gy3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="公有云：(3)公有云CCE集群操作案例"/></a><div class="content"><a class="title" href="/2023/08/12/3-%E5%85%AC%E6%9C%89%E4%BA%91CCE%E9%9B%86%E7%BE%A4%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B/" title="公有云：(3)公有云CCE集群操作案例">公有云：(3)公有云CCE集群操作案例</a><time datetime="2023-08-11T19:00:00.000Z" title="发表于 2023-08-12 03:00:00">2023-08-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By W</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index"><img src="https://jihulab.com/wsq1203/images/-/raw/main/gonganbeian/icp.png" width="15" height="15">豫ICP备2023009931号</a></br><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162702000178" target="_blank"><img src="https://jihulab.com/wsq1203/images/-/raw/main/gonganbeian/beian.png" width="15" height="15">豫公网安备 41162702000178号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas id="universe"></canvas><script src="/js/universe.js"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>