<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python | ૮(˶ᵔ ᵕ ᵔ˶)ა</title><meta name="author" content="૮(˶ᵔ ᵕ ᵔ˶)ა"><meta name="copyright" content="૮(˶ᵔ ᵕ ᵔ˶)ა"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Python 是一门优雅而健壮的编程语言，它继承了传统编译语言的强大性和通用性，同时也借鉴了脚本语言和解释语言的易用性。">
<meta property="og:type" content="article">
<meta property="og:title" content="Python">
<meta property="og:url" content="http://example.com/2023/05/12/DN-Python/index.html">
<meta property="og:site_name" content="૮(˶ᵔ ᵕ ᵔ˶)ა">
<meta property="og:description" content="Python 是一门优雅而健壮的编程语言，它继承了传统编译语言的强大性和通用性，同时也借鉴了脚本语言和解释语言的易用性。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/TITLE/python1.jpg">
<meta property="article:published_time" content="2023-05-12T07:52:00.000Z">
<meta property="article:modified_time" content="2025-04-01T11:32:29.299Z">
<meta property="article:author" content="૮(˶ᵔ ᵕ ᵔ˶)ა">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/TITLE/python1.jpg"><link rel="shortcut icon" href="/../images/TITLE/user.webp"><link rel="canonical" href="http://example.com/2023/05/12/DN-Python/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2025-04-01 19:32:29'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/../images/TITLE/user.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">98</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../images/TITLE/python1.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="૮(˶ᵔ ᵕ ᵔ˶)ა"><span class="site-name">૮(˶ᵔ ᵕ ᵔ˶)ა</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Python</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-12T07:52:00.000Z" title="发表于 2023-05-12 15:52:00">2023-05-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-04-01T11:32:29.299Z" title="更新于 2025-04-01 19:32:29">2025-04-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">42.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>189分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Python"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Python概述及安装"><a href="#Python概述及安装" class="headerlink" title="Python概述及安装"></a>Python概述及安装</h1><h2 id="Python简介"><a href="#Python简介" class="headerlink" title="Python简介"></a>Python简介</h2><h3 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h3><ul>
<li>贵铎·范·罗萨姆（Guido van Rossum）于1989年底始创了python</li>
<li>1991年初，python发布了第一个公开发行版</li>
<li>为了更好的完成荷兰的CWI（国家数学和计算机科学研究院）的一个研究项目而创建</li>
</ul>
<h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><ul>
<li><p>Python2.x</p>
<p>目前所有系统默认安装的版本</p>
</li>
<li><p>Python3.x</p>
<p>2009年2月13日发布</p>
<p>在语法和功能上有较大调整</p>
<p>Python的发展趋势</p>
</li>
</ul>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>高级：有高级的数据结构，缩短开发时间与代码量</li>
<li>面向对象：为数据和逻辑相分离的结构化和过程化添加了新的活力</li>
<li>可升级：提供了基本的开发模块，可以在它上面开发软件，实现代码的重用</li>
<li>可扩展：通过将其分离为多个文件或模块加以组织管理</li>
<li>可移植性：python是用C写的，又由于C的可移植性，使得python可以运行在任何带有ANSI  C编译器的平台上</li>
<li>易学：python关键字少、结构简单、语法清晰</li>
<li>易读：没有其他语言通常用来访问变量、定义代码块和进行模式匹配的命令式符号</li>
<li>内存管理器：内存管理是由python解释器负责的</li>
</ul>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><h3 id="获取python3源码"><a href="#获取python3源码" class="headerlink" title="获取python3源码"></a>获取python3源码</h3><ul>
<li><p>官方站点</p>
<p><a target="_blank" rel="noopener" href="http://www.python.org/">http://www.python.org</a></p>
</li>
<li><p>选择正确的系统</p>
</li>
<li><p>选择正确的版本</p>
</li>
</ul>
<h3 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># yum install -y gcc gcc-c++ zlib-devel openssl-devel readline-devel libffi-devel sqlite-devel tcl-devel tk-devel</span></span><br></pre></td></tr></table></figure>

<h3 id="安装python3"><a href="#安装python3" class="headerlink" title="安装python3"></a>安装python3</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># tar xf Python-3.9.16.tar.xz</span></span><br><span class="line">[root@python ~]<span class="comment"># cd Python-3.9.16/</span></span><br><span class="line">[root@python Python-3.9.16]<span class="comment"># ./configure --prefix=/usr/local</span></span><br><span class="line">[root@python Python-3.9.16]<span class="comment"># make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>

<h3 id="配置Python支持tab键补全"><a href="#配置Python支持tab键补全" class="headerlink" title="配置Python支持tab键补全"></a>配置Python支持tab键补全</h3><ul>
<li>默认情况下，Python不支持按Tab键补全</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># vim /usr/local/bin/tab.py</span></span><br><span class="line">from rlcompleter import readline</span><br><span class="line">readline.parse_and_bind(<span class="string">&#x27;tab: complete&#x27;</span>)</span><br><span class="line"></span><br><span class="line">[root@python ~]<span class="comment"># vim .bashrc</span></span><br><span class="line"><span class="built_in">export</span> PYTHONSTARTUP=<span class="string">&#x27;/usr/local/bin/tab.py&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@python ~]<span class="comment"># source .bashrc</span></span><br></pre></td></tr></table></figure>

<h3 id="vim实现python提示"><a href="#vim实现python提示" class="headerlink" title="vim实现python提示"></a>vim实现python提示</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/29e7847f7298">120-打造vim为python IDE - 简书 (jianshu.com)</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]$ <span class="built_in">mkdir</span> -p ~/.vim/bundle/</span><br><span class="line">(mypy) [root@python ~]$ <span class="built_in">cd</span> ~/.vim/bundle/</span><br><span class="line">(mypy) [root@python bundle]$ git <span class="built_in">clone</span> https://gitee.com/DataTraveler_0817/pydiction.git</span><br><span class="line">(mypy) [root@python bundle]$ <span class="built_in">ls</span></span><br><span class="line">pydiction</span><br><span class="line">(mypy) [root@python bundle]$ <span class="built_in">cp</span> -r pydiction/after/ ~/.vim/</span><br><span class="line">(mypy) [root@python bundle]$ vim ~/.vimrc</span><br><span class="line">filetype plugin on</span><br><span class="line"><span class="built_in">let</span> g:pydiction_location = <span class="string">&#x27;~/.vim/bundle/pydiction/complete-dict&#x27;</span></span><br><span class="line"><span class="built_in">set</span> ai</span><br><span class="line"><span class="built_in">set</span> et</span><br><span class="line"><span class="built_in">set</span> ts=4</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试，注意文件名必须是以.py结尾，否则没有代码补全</span></span><br></pre></td></tr></table></figure>

<h1 id="配置Python-IDE"><a href="#配置Python-IDE" class="headerlink" title="配置Python IDE"></a>配置Python IDE</h1><h2 id="Python虚拟环境"><a href="#Python虚拟环境" class="headerlink" title="Python虚拟环境"></a>Python虚拟环境</h2><p><code>什么是虚拟环境</code></p>
<ul>
<li>每个项目都需要安装很多库，当项目结束后这些库不需要了，该如何清理</li>
<li>在同一个系统中，需要同时安装两个模块的不同版本该如何实现</li>
</ul>
<p><code>创建虚拟环境</code></p>
<ul>
<li>Python3中已经自带虚拟环境模块<code>venv</code></li>
<li>将模块作为脚本文件执行，直接创建虚拟环境</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># python3 -m venv ~/mypy </span></span><br><span class="line">[root@python ~]<span class="comment"># source ~/mypy/bin/activate</span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># python --version</span></span><br><span class="line">Python 3.9.16</span><br></pre></td></tr></table></figure>

<h2 id="Python-IDE"><a href="#Python-IDE" class="headerlink" title="Python IDE"></a>Python IDE</h2><h3 id="什么是IDE"><a href="#什么是IDE" class="headerlink" title="什么是IDE"></a>什么是IDE</h3><ul>
<li><p>实际开发中，除编辑器是必须的，还需要很多其他辅助软件：</p>
<p>编辑器：用来编写代码，并且给代码着色，以方便阅读</p>
<p>代码提示器：输入部分代码，即可提示全部代码，加速代码的编写过程</p>
<p>调试器：观察程序的每一个运行步骤，发现程序的逻辑错误</p>
<p>项目管理工具：对程序涉及到的所有资源进行管理，如源文件、图片等</p>
<p>漂亮的界面：各种按钮、菜单、窗口等控件整齐排布，操作更方便</p>
</li>
<li><p>这些工具通常被打包在一起，同一发布和安装，统称为IDE（集成开发工具）</p>
</li>
</ul>
<h3 id="PyCharm简介"><a href="#PyCharm简介" class="headerlink" title="PyCharm简介"></a>PyCharm简介</h3><ul>
<li><p>Pycharm是由JetBrains打造的一款Python IDE</p>
</li>
<li><p>支持的功能：</p>
<p>调试、语法高亮</p>
<p>Project管理、代码跳转</p>
<p>智能提示、自动完成</p>
<p>单元测试、版本控制</p>
</li>
<li><p>下载地址</p>
<p><a target="_blank" rel="noopener" href="https://www.jetbrains.com/pycharm/download">https://www.jetbrains.com/pycharm/download</a></p>
</li>
<li><p><code>需要图形化界面</code></p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]$ yum install java-1.8.0-openjdk -y</span><br><span class="line">(mypy) [root@python ~]$ tar xf pycharm-community-2023.1.tar.gz </span><br><span class="line">(mypy) [root@python ~]$ <span class="built_in">mv</span> pycharm-community-2023.1 /usr/local/bin/pycharm</span><br><span class="line">(mypy) [root@python ~]$ /usr/local/bin/pycharm/bin/pycharm.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="PyCharm配置"><a href="#PyCharm配置" class="headerlink" title="PyCharm配置"></a>PyCharm配置</h3><ul>
<li><p>配置界面风格</p>
</li>
<li><p>新建项目</p>
</li>
<li><p>添加项目解释器</p>
</li>
<li><p>添加Pycharm到菜单</p>
<p>应用程序–&gt;杂项–&gt;主菜单</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]$ yum install -y alacarte</span><br></pre></td></tr></table></figure>



<h1 id="Python语法基础"><a href="#Python语法基础" class="headerlink" title="Python语法基础"></a>Python语法基础</h1><h2 id="Python运行方式"><a href="#Python运行方式" class="headerlink" title="Python运行方式"></a>Python运行方式</h2><h3 id="交互解释器"><a href="#交互解释器" class="headerlink" title="交互解释器"></a>交互解释器</h3><ul>
<li>进入交互解释器</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># source mypy/bin/activate</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># python</span></span><br><span class="line">Python 3.9.16 (main, Apr 24 2023, 11:33:35) </span><br><span class="line">[GCC 4.8.5 20150623 (Red Hat 4.8.5-28)] on linux</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>退出交互解释器</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>exit</span><br><span class="line">Use exit() <span class="keyword">or</span> Ctrl-D (i.e. EOF) to exit</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exit()</span><br></pre></td></tr></table></figure>

<h3 id="文件形式"><a href="#文件形式" class="headerlink" title="文件形式"></a>文件形式</h3><ul>
<li>明确指定解释器</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># which python</span></span><br><span class="line">/root/mypy/bin/python</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># vim hi.py</span></span><br><span class="line"><span class="comment">#!/root/mypy/bin/python</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># python hi.py</span></span><br><span class="line">hello world!</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>赋予python文件可执行权限</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># chmod +x hi.py </span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># ./hi.py </span></span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>

<h2 id="Python语法结构"><a href="#Python语法结构" class="headerlink" title="Python语法结构"></a>Python语法结构</h2><h3 id="语句块缩进"><a href="#语句块缩进" class="headerlink" title="语句块缩进"></a>语句块缩进</h3><ul>
<li><p>python代码块通过缩进对齐表达代码逻辑而不是使用大括号</p>
</li>
<li><p>缩进表达一个语句属于哪个代码块</p>
</li>
<li><p>缩进风格</p>
<p>1或2：可能不够，很难确定代码语句属于哪个块</p>
<p>8或10：可能太多，如果内嵌从层次太多，就会使得代码很难阅读</p>
<p>4个空格：非常流行，范·罗萨姆支持的风格</p>
</li>
<li><p>批量缩进，选中需要缩进的行按<code>Tab</code>即可，向左缩进<code>Shift + Tab</code></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">3</span>&gt;<span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;yes&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;no&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>缩进相同的一组语句构成一个代码块，称之为代码组</li>
<li>首行以关键字开始，以冒号<code>:</code>结束，该行之后的一行或多行代码构成代码组</li>
<li>如果代码组只有一行，可以将其直接写在冒号后面，但是这样的写法可读性差，不推荐</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">10</span> &gt; <span class="number">8</span>: <span class="built_in">print</span>(<span class="string">&quot;true&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="注释及续航"><a href="#注释及续航" class="headerlink" title="注释及续航"></a>注释及续航</h3><ul>
<li><p>尽管Python是可读性最好的语言之一，这并不意味着程序员在代码中就可以不写注释</p>
</li>
<li><p>和很多UNIX脚本类似，python注释语句从<code>#</code>字符开始</p>
</li>
<li><p>注释可以在一行的任何地方开始，解释器会忽略掉该行<code>#</code>之后的所有内容</p>
</li>
<li><p>一行过长的语句可以使用反斜杠<code>\</code>分解成几行</p>
</li>
<li><p>批量注释<code>Ctrl + /</code>，亦可批量取消注释</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;hello world&#x27;</span> + \</span><br><span class="line">    <span class="string">&#x27;hello tedu&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<h3 id="同行多个语句"><a href="#同行多个语句" class="headerlink" title="同行多个语句"></a>同行多个语句</h3><ul>
<li>分号<code>;</code>允许你将多个语句写在同一行上</li>
<li>但是这些语句不能在这行开始一个新的代码块</li>
<li>因为可读性会变差，所以不推荐使用</li>
</ul>
<h3 id="输出语句"><a href="#输出语句" class="headerlink" title="输出语句"></a>输出语句</h3><ul>
<li>获取帮助</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">help</span>(<span class="built_in">print</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>使用方式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;hello world!&#x27;</span>)</span><br><span class="line">hello world!</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span> + <span class="string">&#x27;world&#x27;</span>)  <span class="comment"># 字符拼接</span></span><br><span class="line">helloworld</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>)    <span class="comment"># 逗号自动添加默认的分隔符，空格</span></span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>,sep=<span class="string">&#x27;***&#x27;</span>)  <span class="comment"># 单词间用***分割</span></span><br><span class="line">hello***world</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;#&#x27;</span> * <span class="number">50</span>)  <span class="comment"># *号重复50遍</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;how are you?&#x27;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">how are you?&gt;&gt;&gt;    <span class="comment"># 默认print会打印回车，end=&#x27;&#x27;表示不要回车</span></span><br></pre></td></tr></table></figure>

<h3 id="输入语句"><a href="#输入语句" class="headerlink" title="输入语句"></a>输入语句</h3><ul>
<li>获得帮助</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">help</span>(<span class="built_in">input</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>使用方式（注意，返回值一定是字符类型）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>num = <span class="built_in">input</span>(<span class="string">&quot;Number: &quot;</span>) <span class="comment"># input用于获取键盘输入</span></span><br><span class="line">Number: <span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(num)</span><br><span class="line"><span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(num)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num + <span class="number">10</span>   <span class="comment"># 为字符串类型不能用于数值运算</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: can only concatenate <span class="built_in">str</span> (<span class="keyword">not</span> <span class="string">&quot;int&quot;</span>) to <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(num) + <span class="number">5</span>  <span class="comment"># 使用int()函数将num转换为数值类型</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num + <span class="built_in">str</span>(<span class="number">5</span>)  <span class="comment"># 使用str()函数将5转换为字符串类型</span></span><br><span class="line"><span class="string">&#x27;205&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="案例练习"><a href="#案例练习" class="headerlink" title="案例练习"></a>案例练习</h2><p><code>模拟用户登录</code></p>
<ul>
<li>创建名为login.py的程序文件</li>
<li>程序提示用户输入用户名</li>
<li>用户输入用户名后，打印欢迎用户的信息</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;name: &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;welcome&quot;</span>, name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;welcome &quot;</span> + name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;welcome %s&quot;</span> % name)  <span class="comment"># %s为占位符</span></span><br></pre></td></tr></table></figure>

<h1 id="Python变量及运算符"><a href="#Python变量及运算符" class="headerlink" title="Python变量及运算符"></a>Python变量及运算符</h1><h2 id="python变量"><a href="#python变量" class="headerlink" title="python变量"></a>python变量</h2><h3 id="变量定义"><a href="#变量定义" class="headerlink" title="变量定义"></a>变量定义</h3><ul>
<li><p>变量名称约定</p>
<p>第一个字符只能是大小写字母或下划线</p>
<p>后续字符只能是大小写字母或数字或下划线</p>
<p>区分大小写</p>
</li>
<li><p>python是动态类型语言，即不需要预先声明变量的类型</p>
</li>
<li><p>推荐采用的全名方法</p>
<p>变量名全部采用小写字母</p>
<p>简短、有意义</p>
<p>多个单词用下划线分隔</p>
<p>变量名用名词，函数名用谓词（动词+名词）</p>
<p>类名采用驼峰形式</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pystr = <span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str = <span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>update_phone = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>MyClass</span><br></pre></td></tr></table></figure>

<h3 id="变量复制"><a href="#变量复制" class="headerlink" title="变量复制"></a>变量复制</h3><ul>
<li>变量的类型和值在赋值那一刻被初始化</li>
<li>变量赋值通过等号来执行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>counter = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = <span class="string">&#x27;bob&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>python也支持增量赋值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>n = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n += <span class="number">1</span>   <span class="comment"># 等价于 n = n + 1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n *= <span class="number">1</span>   <span class="comment"># 等价于 n = n * 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i++      <span class="comment"># 不支持该形式</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    i++</span><br><span class="line">       ^</span><br><span class="line">SyntaxError: invalid syntax </span><br></pre></td></tr></table></figure>

<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><ul>
<li><p>标准算数运算符</p>
<p>+  -  *  /  //  %  **</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> / <span class="number">3</span>  <span class="comment"># 除</span></span><br><span class="line"><span class="number">1.6666666666666667</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> // <span class="number">3</span>  <span class="comment"># 丢弃余数，只保留商</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> % <span class="number">3</span>   <span class="comment"># 求余数</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">divmod</span>(<span class="number">5</span>,<span class="number">3</span>)  <span class="comment"># 取商和余数</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a , b = <span class="built_in">divmod</span>(<span class="number">5</span>,<span class="number">3</span>)  <span class="comment"># 可按顺序赋值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> ** <span class="number">3</span>     <span class="comment"># 5的3次方</span></span><br><span class="line"><span class="number">125</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>比较运算符</p>
<p>&lt;  &lt;=  &gt;  &gt;=  ==  !=</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> &lt; <span class="number">3</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> &lt; <span class="number">3</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line">&gt; <span class="number">5</span> == <span class="number">3</span>     <span class="comment"># 比较</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> = <span class="number">3</span>    <span class="comment"># 赋值</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="number">5</span> = <span class="number">3</span></span><br><span class="line">    ^</span><br><span class="line">SyntaxError: cannot assign to literal</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>逻辑运算符</p>
<p>and  not   or</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> &gt; <span class="number">3</span> <span class="keyword">and</span> <span class="number">10</span> &gt; <span class="number">5</span>     <span class="comment">#两者都为True，返回True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> &gt; <span class="number">3</span> <span class="keyword">or</span> <span class="number">5</span> &lt; <span class="number">2</span>       <span class="comment">#只要由一方为True，即为True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> <span class="number">5</span> &gt; <span class="number">3</span>            <span class="comment">#取反</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h1 id="数字和字符串"><a href="#数字和字符串" class="headerlink" title="数字和字符串"></a>数字和字符串</h1><h2 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h2><h3 id="基本数字类型"><a href="#基本数字类型" class="headerlink" title="基本数字类型"></a>基本数字类型</h3><ul>
<li><p>int：有符号整数</p>
</li>
<li><p>bool：布尔值</p>
<p>True：1</p>
<p>False：0</p>
</li>
<li><p>float：浮点数</p>
</li>
<li><p>complex：复数</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(<span class="number">5</span>)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(<span class="number">5.0</span>)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;float&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">True</span> + <span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">False</span> * <span class="number">3</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="整数数字表示方式"><a href="#整数数字表示方式" class="headerlink" title="整数数字表示方式"></a>整数数字表示方式</h3><ul>
<li>python默认以十进制数显示</li>
<li>数字以0o或0O开头表示8进制数</li>
<li>数字以0x或0X开头表示16进制数</li>
<li>数字以0b或0B开头表示2进制数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">11</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0o11</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0x11</span></span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0b11</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="number">100</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">oct</span>(<span class="number">100</span>)  <span class="comment">#转换为8进制</span></span><br><span class="line"><span class="string">&#x27;0o144&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hex</span>(<span class="number">100</span>)  <span class="comment">#转换为16进制</span></span><br><span class="line"><span class="string">&#x27;0x64&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(<span class="number">100</span>)  <span class="comment">#转换为2进制</span></span><br><span class="line"><span class="string">&#x27;0b1100100&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="定义字符串"><a href="#定义字符串" class="headerlink" title="定义字符串"></a>定义字符串</h3><ul>
<li>python中字符串被定义为引号之间的字符集合</li>
<li>python支持使用成对的单引号或双引号</li>
<li>无论单引号，还是双引号，表示意义相同</li>
<li>python还支持三引号（三个连续的单引号或者双引号），可以用来包含特殊字符</li>
<li>python不区分字符和字符串</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单引号中间还有单引号，可以转义</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sentence = <span class="string">&#x27;tom\&#x27;s pet is a cat&#x27;</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sentence</span><br><span class="line"><span class="string">&quot;tom&#x27;s pet is a cat&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以用双引号包含单引号</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sentence = <span class="string">&quot;tom&#x27;s pet is a cat&quot;</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sentence</span><br><span class="line"><span class="string">&quot;tom&#x27;s pet is a cat&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 三个连续的单引号或双引号，可以保存输入格式，允许输入多行字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user = <span class="string">&quot;&quot;&quot;tom</span></span><br><span class="line"><span class="string"><span class="meta">... </span>jerry</span></span><br><span class="line"><span class="string"><span class="meta">... </span>bob</span></span><br><span class="line"><span class="string"><span class="meta">... </span>alice</span></span><br><span class="line"><span class="string"><span class="meta">... </span>&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(user)</span><br><span class="line">tom</span><br><span class="line">jerry</span><br><span class="line">bob</span><br><span class="line">alice</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user</span><br><span class="line"><span class="string">&#x27;tom\njerry\nbob\nalice\n&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串切片"><a href="#字符串切片" class="headerlink" title="字符串切片"></a>字符串切片</h3><ul>
<li>使用索引运算符<code>[]</code>和切片运算符<code>[:]</code>可得到子字符串</li>
<li>第一个字符的索引是<code>0</code>，最后一个字符的索引是<code>-1</code></li>
<li>字符串包含切片中的起始下标，但不包含下标</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str = <span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(py_str)   <span class="comment">#显示长度</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;p&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[-<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;o&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line"><span class="string">&#x27;th&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[<span class="number">2</span>:]</span><br><span class="line"><span class="string">&#x27;thon&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[:<span class="number">4</span>]</span><br><span class="line"><span class="string">&#x27;pyth&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[:]</span><br><span class="line"><span class="string">&#x27;python&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[::<span class="number">2</span>]   <span class="comment">#每隔两个字符取出</span></span><br><span class="line"><span class="string">&#x27;pto&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[<span class="number">1</span>::<span class="number">2</span>]  <span class="comment">#从下标为1的字符开始取，每个两个取出</span></span><br><span class="line"><span class="string">&#x27;yhn&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[::-<span class="number">1</span>]  <span class="comment">#翻过来取</span></span><br><span class="line"><span class="string">&#x27;nohtyp&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串连接操作"><a href="#字符串连接操作" class="headerlink" title="字符串连接操作"></a>字符串连接操作</h3><ul>
<li>使用<code>+</code>号可以将多个字符串拼接在一起</li>
<li>使用<code>*</code>号可以将一个字符串重复多次</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str = <span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>is_cool = <span class="string">&#x27;is Cool&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>( py_str + <span class="string">&#x27;&#x27;</span> + is_cool )</span><br><span class="line">pythonis Cool</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str * <span class="number">2</span></span><br><span class="line"><span class="string">&#x27;pythonpython&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>判断字符是否在字符串中包含</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str</span><br><span class="line"><span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;t&#x27;</span> <span class="keyword">in</span> py_str</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;th&#x27;</span> <span class="keyword">in</span> py_str</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;to&#x27;</span> <span class="keyword">in</span> py_str</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;to&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> py_str</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h1 id="列表、元组和字典"><a href="#列表、元组和字典" class="headerlink" title="列表、元组和字典"></a>列表、元组和字典</h1><h2 id="列表和元组"><a href="#列表和元组" class="headerlink" title="列表和元组"></a>列表和元组</h2><h3 id="定义列表"><a href="#定义列表" class="headerlink" title="定义列表"></a>定义列表</h3><ul>
<li>可以将列表当初普通的“数组”，它能保存任意数量任意类型的python对象</li>
<li>像字符串一样，列表也支持下标和切片操作</li>
<li>列表中的项目可以改变</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = [<span class="number">10</span>,<span class="number">20</span>,<span class="string">&quot;tom&quot;</span>,<span class="string">&quot;jerry&quot;</span>,[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(alist)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">0</span>]</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[-<span class="number">1</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[-<span class="number">1</span>][-<span class="number">1</span>] <span class="comment"># 因为最后一项是列表，列表还可以继续取下标</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">[<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist + [<span class="number">100</span>]   <span class="comment"># 此拼接操作不会写入列表</span></span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">100</span>]  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[-<span class="number">1</span>] = <span class="number">100</span>  <span class="comment"># 修改值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="列表操作"><a href="#列表操作" class="headerlink" title="列表操作"></a>列表操作</h3><ul>
<li>使用in或not in判断成员关系</li>
<li>使用append方法向列表中追加元素</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="number">100</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;tom&#x27;</span> <span class="keyword">in</span> alist</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;1&#x27;</span> <span class="keyword">in</span> alist</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">2</span>] <span class="keyword">in</span> alist</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.append(<span class="number">200</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="number">100</span>, <span class="number">200</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.remove(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">20</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="number">100</span>, <span class="number">200</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#清空</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.clear()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<h3 id="元组的定义及操作"><a href="#元组的定义及操作" class="headerlink" title="元组的定义及操作"></a>元组的定义及操作</h3><ul>
<li>可以认为元组是‘静态’的列表</li>
<li>元组一旦定义，不能改变</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuple =  (<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;jerry&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(atuple)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuple[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuple[<span class="number">2</span>:]</span><br><span class="line">(<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuple + (<span class="number">100</span>,<span class="number">200</span>) <span class="comment"># 不会写入元组</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="number">100</span>, <span class="number">200</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuple</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;tom&#x27;</span> <span class="keyword">in</span> atuple</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuple[<span class="number">0</span>] = <span class="number">3</span> <span class="comment"># 不能修改</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;tuple&#x27;</span> <span class="built_in">object</span> does <span class="keyword">not</span> support item assignment</span><br></pre></td></tr></table></figure>

<h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><h3 id="字典的定义及操作"><a href="#字典的定义及操作" class="headerlink" title="字典的定义及操作"></a>字典的定义及操作</h3><ul>
<li>字典是由键-值（key-value）对构成的映射数据类型</li>
<li>通过键取值，不支持下标操作</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(adict)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;bob&#x27;</span> <span class="keyword">in</span> adict</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> adict</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict[<span class="string">&#x27;age&#x27;</span>] = <span class="number">22</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">22</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#字典中没有的key， 则添加key和value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict[<span class="string">&#x27;email&#x27;</span>] = <span class="string">&#x27;bob@tedu.cn&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">22</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;bob@tedu.cn&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数据类型比较"><a href="#数据类型比较" class="headerlink" title="数据类型比较"></a>数据类型比较</h2><ul>
<li><p>按存储模型分类</p>
<p>标量类型：数值、字符串</p>
<p>容器类型：列表、元组、字典</p>
</li>
<li><p>按更新模型分类</p>
<p>可变类型：列表、字典</p>
<p>不可变类型：数值、字符串、元组</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str = <span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">100</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;p&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>py_str[<span class="number">0</span>] = <span class="string">&#x27;P&#x27;</span> <span class="comment"># 不可更改</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;str&#x27;</span> <span class="built_in">object</span> does <span class="keyword">not</span> support item assignment</span><br></pre></td></tr></table></figure>

<p><code>列表之间赋值</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#把alist直接赋值给blist，alist会跟随blist改变而改变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist = alist</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist.append(<span class="number">40</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#把alist切片赋值给clist，alist不会跟随clist改变而改变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist = alist[:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist.append(<span class="number">50</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>按访问模型分类</p>
<p>直接访问：数值</p>
<p>顺序访问：字符串、列表、元组</p>
<p>映射访问：字典</p>
</li>
</ul>
<h1 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h1><h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><h3 id="if语句语法结构"><a href="#if语句语法结构" class="headerlink" title="if语句语法结构"></a>if语句语法结构</h3><ul>
<li>标准if条件语句的语法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression:</span><br><span class="line">    if_suite</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    else_suite</span><br></pre></td></tr></table></figure>

<ul>
<li>如果表达式的值非0或者为布尔值True，则代码组if_suite被执行，否则就去执行else_suite</li>
<li>代码组是一个python术语，它由一条或多条语句组成，表示一个子代码块</li>
</ul>
<h3 id="if语句实例解析"><a href="#if语句实例解析" class="headerlink" title="if语句实例解析"></a>if语句实例解析</h3><ul>
<li>只要表达式数字为非零值即为<code>True</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="number">10</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;yes&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">yes</span><br></pre></td></tr></table></figure>

<ul>
<li>空字符串、空列表、空元组，空字典的值均为<code>False</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="string">&quot;&quot;</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;yes&#x27;</span>)</span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;no&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">no</span><br></pre></td></tr></table></figure>

<h3 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h3><ul>
<li>python在很长一段时间里没有条件表达式（C？X:Y），或称三元运算符，因为范·罗萨姆一直拒绝加入这样的功能</li>
<li>从python2.5集成的语法确定为：X if  C else  Y</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line"><span class="keyword">if</span> a &gt; b:</span><br><span class="line">    smaller = b</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    smaller = a</span><br><span class="line"><span class="built_in">print</span>(smaller)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等同于</span></span><br><span class="line">s = a <span class="keyword">if</span> a &lt;= b <span class="keyword">else</span> b</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><ul>
<li>提示用户输入用户名和密码</li>
<li>获取相关信息后，将其保存在变量中</li>
<li>如果用户输入的用户名为bob，密码为123456，则输出登录成功，否则输出登录失败</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">user = <span class="built_in">input</span>(<span class="string">&#x27;username: &#x27;</span>)</span><br><span class="line">passwd = <span class="built_in">input</span>(<span class="string">&#x27;password: &#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> user == <span class="string">&#x27;bob&#x27;</span> <span class="keyword">and</span> passwd == <span class="string">&#x27;123456&#x27;</span>:   <span class="comment"># 需要加引号</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Login successful&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Login inorrect&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> getpass     <span class="comment"># 使密码不会明文显示，若pycharm调用失败可能是不兼容，用Linux终端运行即可</span></span><br><span class="line"></span><br><span class="line">user = <span class="built_in">input</span>(<span class="string">&#x27;username: &#x27;</span>)</span><br><span class="line">passwd = getpass.getpass(<span class="string">&#x27;password: &#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> user == <span class="string">&#x27;bob&#x27;</span> <span class="keyword">and</span> passwd == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Login successful&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Login inorrect&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="扩展if语句"><a href="#扩展if语句" class="headerlink" title="扩展if语句"></a>扩展if语句</h2><ul>
<li>扩展if语句结构</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression1:</span><br><span class="line">    if_suite</span><br><span class="line"><span class="keyword">elif</span> expression2:</span><br><span class="line">    elif_suite</span><br><span class="line">······</span><br><span class="line"><span class="keyword">elif</span> ecpressionN:</span><br><span class="line">    elif_suite</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    else_suite</span><br></pre></td></tr></table></figure>

<h1 id="判断语句案例"><a href="#判断语句案例" class="headerlink" title="判断语句案例"></a>判断语句案例</h1><h2 id="编写判断成绩的程序"><a href="#编写判断成绩的程序" class="headerlink" title="编写判断成绩的程序"></a>编写判断成绩的程序</h2><ul>
<li>创建grade.py脚本，根据用户输入的成绩分档，要求如下</li>
<li>如果成绩大于60分，输出‘及格’</li>
<li>如果成绩大于70分，输出‘良’</li>
<li>如果成绩大于80分，输出‘好’</li>
<li>如果成绩大于90分，输出‘优秀’</li>
<li>否则输出‘继续努力’</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">grades = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;yours grades: &#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> grades &gt;= <span class="number">90</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;excellent&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">elif</span> grades &gt;= <span class="number">80</span>:    <span class="comment"># 也可以从下往上写，写成 80 &lt;= grades &lt; 90</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;good&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">elif</span> grades &gt;= <span class="number">70</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;favorable&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">elif</span> grades &gt;= <span class="number">60</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;flunk&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Keep up the good work&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="编写石头剪刀布小游戏"><a href="#编写石头剪刀布小游戏" class="headerlink" title="编写石头剪刀布小游戏"></a>编写石头剪刀布小游戏</h2><ul>
<li>编写game.py，要求如下</li>
<li>计算机随机出拳</li>
<li>玩家自己决定如何出拳</li>
<li>代码尽量简化</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random    <span class="comment"># 随机变量</span></span><br><span class="line">all_choice = [<span class="string">&#x27;stone&#x27;</span>,<span class="string">&#x27;scissors&#x27;</span>,<span class="string">&#x27;cloth&#x27;</span>]</span><br><span class="line">compute = random.choice(all_choice)   <span class="comment"># 从列表中随机选取</span></span><br><span class="line">user = <span class="built_in">input</span>(<span class="string">&quot;Please punch(from stone/scissors/cloth): &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把所有赢的可能写入列表</span></span><br><span class="line">win_list = [[<span class="string">&#x27;stone&#x27;</span>,<span class="string">&#x27;cloth&#x27;</span>],[<span class="string">&#x27;scissors&#x27;</span>,<span class="string">&#x27;stone&#x27;</span>],[<span class="string">&#x27;cloth&#x27;</span>,<span class="string">&#x27;scissors&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出各自出拳内容</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;your choice: %s , compute choice: %s&#x27;</span> % (user,compute))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> compute == user:            <span class="comment"># \033[32;1m  \033[0m加入颜色</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1mdraw\033[0m&#x27;</span>) </span><br><span class="line">    </span><br><span class="line"><span class="keyword">elif</span> [compute,user] <span class="keyword">in</span> win_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1myou win\033[0m&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1myou lose\033[0m&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="while循环基础"><a href="#while循环基础" class="headerlink" title="while循环基础"></a>while循环基础</h1><h2 id="循环语句基础"><a href="#循环语句基础" class="headerlink" title="循环语句基础"></a>循环语句基础</h2><h3 id="循环概述"><a href="#循环概述" class="headerlink" title="循环概述"></a>循环概述</h3><ul>
<li>一组被重复执行的语句称之为循环体，能否继续重复，决定循环的中止条件</li>
<li>python中的循环有<code>while</code>循环和<code>for</code>循环</li>
<li>循环次数未知的情况下，建议采用<code>while</code>循环</li>
<li>循环次数可以预知的情况下，建议采用<code>for</code>循环</li>
</ul>
<h3 id="while循环语法结构"><a href="#while循环语法结构" class="headerlink" title="while循环语法结构"></a>while循环语法结构</h3><ul>
<li>当需要语句不断重复执行时，可以使用while循环</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> expression:</span><br><span class="line">    while_suite</span><br></pre></td></tr></table></figure>

<ul>
<li>语句<code>while_suite</code>会连续不断的循环执行，直到表达式的值变为0或False</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sum100 = <span class="number">0</span></span><br><span class="line">counter = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> counter &lt;= <span class="number">100</span>:</span><br><span class="line">    sum100 += counter</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;result is %d&#x27;</span> % sum100)</span><br></pre></td></tr></table></figure>

<h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><p>完善剪刀石头布小游戏，实现三局两胜</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">all_choice = [<span class="string">&#x27;stone&#x27;</span>, <span class="string">&#x27;scissors&#x27;</span>, <span class="string">&#x27;cloth&#x27;</span>]</span><br><span class="line">win_list = [[<span class="string">&#x27;stone&#x27;</span>, <span class="string">&#x27;cloth&#x27;</span>], [<span class="string">&#x27;scissors&#x27;</span>, <span class="string">&#x27;stone&#x27;</span>], [<span class="string">&#x27;cloth&#x27;</span>, <span class="string">&#x27;scissors&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">prompt = <span class="string">&quot;&quot;&quot;(0) stone</span></span><br><span class="line"><span class="string">(1) scissors</span></span><br><span class="line"><span class="string">(2) cloth</span></span><br><span class="line"><span class="string">please choice(0/1/2): &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">compute_win = <span class="number">0</span></span><br><span class="line">user_win  = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> compute_win &lt; <span class="number">2</span> <span class="keyword">and</span> user_win &lt; <span class="number">2</span>:</span><br><span class="line">    compute = random.choice(all_choice)</span><br><span class="line">    ind = <span class="built_in">int</span>(<span class="built_in">input</span>(prompt)) <span class="comment"># 将用户输入的转换为数值类型</span></span><br><span class="line">    user = all_choice[ind]  <span class="comment"># 通过索引赋值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;your choice: %s , compute choice: %s&#x27;</span> % (user, compute))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> compute == user:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1mdraw\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">elif</span> [compute,user] <span class="keyword">in</span> win_list:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1myou win\033[0m&#x27;</span>)</span><br><span class="line">        user_win += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1myou lose\033[0m&#x27;</span>)</span><br><span class="line">        compute_win += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h1 id="while循环扩展语法"><a href="#while循环扩展语法" class="headerlink" title="while循环扩展语法"></a>while循环扩展语法</h1><h2 id="循环语句进阶"><a href="#循环语句进阶" class="headerlink" title="循环语句进阶"></a>循环语句进阶</h2><h3 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h3><ul>
<li><strong>break语句可以结束当前循环然后跳转到下条语句</strong></li>
<li>写程序的时候，尽量避免重复的代码，在这种情况下可以使用<code>while-break</code>结构</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;username: &#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> name != <span class="string">&#x27;tom&#x27;</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&#x27;username: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 可以替换为</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&#x27;username: &#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&#x27;tom&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<h3 id="continue语句"><a href="#continue语句" class="headerlink" title="continue语句"></a>continue语句</h3><ul>
<li>当遇到<code>continue</code>语句时，<strong>程序会中止当前循环，并忽略剩余语句，然后回到循环的顶端</strong></li>
<li>如果仍然满足循环条件，循环体内语句继续执行，否则退出循环</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">result = <span class="number">0</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> counter &lt; <span class="number">100</span>:</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> counter % <span class="number">2</span> == <span class="number">1</span>:    <span class="comment"># 奇数跳过</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        result += counter</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换为</span></span><br><span class="line">result = <span class="number">0</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> counter &lt; <span class="number">100</span>:</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> counter % <span class="number">2</span>:   <span class="comment"># counter % 2 结果只能是1或0，1为真，0为假</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    result += counter</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<h3 id="else语句"><a href="#else语句" class="headerlink" title="else语句"></a>else语句</h3><ul>
<li>python中<code>while</code>语句也支持<code>else</code>子句</li>
<li><code>else</code>子句只能循环完成后执行</li>
<li><code>break</code>语句也会跳过<code>else</code>块</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sum10 = <span class="number">0</span></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &lt;= <span class="number">10</span>:</span><br><span class="line">    sum10 += i</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(sum10)</span><br></pre></td></tr></table></figure>

<h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h3><p>猜数程序</p>
<ul>
<li>系统随机生成100以内的数字</li>
<li>要求用户猜生成的数字大小</li>
<li>最多猜5次，猜对结束程序</li>
<li>如果5次全错，则输出正确结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">compute = random.randint(<span class="number">1</span>,<span class="number">100</span>) <span class="comment"># 随机生成100以内的数字</span></span><br><span class="line">c = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> c &lt;= <span class="number">5</span>:</span><br><span class="line">    c += <span class="number">1</span></span><br><span class="line">    user = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;please guess(1-100): &#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span> compute &lt; user:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;big&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> compute &gt; user:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;low&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;good&#x27;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(compute)</span><br></pre></td></tr></table></figure>

<h1 id="for循环及range函数"><a href="#for循环及range函数" class="headerlink" title="for循环及range函数"></a>for循环及range函数</h1><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><h3 id="for循环语法结构"><a href="#for循环语法结构" class="headerlink" title="for循环语法结构"></a>for循环语法结构</h3><ul>
<li>python中的<code>for</code>接受可迭代对象（例如序列或迭代器）作为其参数，每次迭代其中一个元素</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> iter_var <span class="keyword">in</span> iterable:</span><br><span class="line">    suite_to_repeat</span><br></pre></td></tr></table></figure>

<ul>
<li>与<code>while</code>语句一样，支持<code>break</code>、<code>continue</code>、<code>else</code>语句</li>
<li>一般情况下，循环次数未知的情况下采用<code>while</code>循环，循环次数已知采用<code>for</code>循环</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">for</span> ch <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">    <span class="built_in">print</span>(ch)</span><br><span class="line">h</span><br><span class="line">e</span><br><span class="line">l</span><br><span class="line">l</span><br><span class="line">o</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">alist = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> alist:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="number">30</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">users = (<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;tom&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> user <span class="keyword">in</span> users:</span><br><span class="line">    <span class="built_in">print</span>(user)</span><br><span class="line">bob</span><br><span class="line">alice</span><br><span class="line">tom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">adict = &#123;<span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;age&#x27;</span>: <span class="number">22</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> adict:</span><br><span class="line">    <span class="built_in">print</span>(key,adict[key])</span><br><span class="line">user tom</span><br><span class="line">age <span class="number">22</span></span><br></pre></td></tr></table></figure>

<h2 id="range函数"><a href="#range函数" class="headerlink" title="range函数"></a>range函数</h2><ul>
<li><p><code>for</code>循环常与<code>range</code>函数一起使用</p>
</li>
<li><p><code>range</code>函数提供循环条件</p>
</li>
<li><p><code>range</code>函数的完整语法为：</p>
<p>range(start,end,step = 1)</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>] <span class="comment"># 起始默认为0，结束为10，不包含10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">6</span>,<span class="number">10</span>))</span><br><span class="line">[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>,<span class="number">2</span>)) <span class="comment"># 从起始值开始，每隔两个值取一个</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10</span>,<span class="number">0</span>,-<span class="number">1</span>))</span><br><span class="line">[<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p><code>示例</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10000001</span>):</span><br><span class="line">    <span class="built_in">sum</span> += i</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure>

<h3 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h3><p>斐波那契数列</p>
<ul>
<li>斐波那契数列就是某一个数，总是前两个数之和，比如：0，1，1，2，3，5，8</li>
<li>使用for循环和range函数编写一个程序，计算有10个数字的斐波那契数列</li>
<li>改进程序，要求用户输入一个数字，可以生成用户需要长度的斐波那契数列</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">alist = [<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">    alist.append(alist[-<span class="number">1</span>]+alist[-<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(alist)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;num: &#x27;</span>)) - <span class="number">2</span></span><br><span class="line">alist = [<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    alist.append(alist[-<span class="number">1</span>]+alist[-<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(alist)</span><br></pre></td></tr></table></figure>

<h1 id="for循环练习与列表解析"><a href="#for循环练习与列表解析" class="headerlink" title="for循环练习与列表解析"></a>for循环练习与列表解析</h1><h2 id="列表解析"><a href="#列表解析" class="headerlink" title="列表解析"></a>列表解析</h2><ul>
<li><p>它是一个非常有用、简单、而且灵活的工具，可以用来动态的创建列表</p>
</li>
<li><p>语法：</p>
<p>[expr  for  iter_var  in  iterable]</p>
</li>
<li><p>这个语句的核心是for循环，它迭代iterable对象的所有条目</p>
</li>
<li><p>expr应用于序列的每个成员，最后的结果值是该表达式产生的列表</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">5</span>]</span><br><span class="line">[<span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">5</span> + <span class="number">5</span>]</span><br><span class="line">[<span class="number">10</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">5</span> + <span class="number">5</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">[<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">5</span> + i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>)]</span><br><span class="line">[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">5</span> + i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>) <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">1</span>]</span><br><span class="line">[<span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&#x27;192.168.1.%s&#x27;</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>)]</span><br><span class="line">[<span class="string">&#x27;192.168.1.1&#x27;</span>, <span class="string">&#x27;192.168.1.2&#x27;</span>, <span class="string">&#x27;192.168.1.3&#x27;</span>, <span class="string">&#x27;192.168.1.4&#x27;</span>, <span class="string">&#x27;192.168.1.5&#x27;</span>, <span class="string">&#x27;192.168.1.6&#x27;</span>, <span class="string">&#x27;192.168.1.7&#x27;</span>, <span class="string">&#x27;192.168.1.8&#x27;</span>, <span class="string">&#x27;192.168.1.9&#x27;</span>, <span class="string">&#x27;192.168.1.10&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>domains = [<span class="string">&#x27;tedu&#x27;</span>,<span class="string">&#x27;qq&#x27;</span>,<span class="string">&#x27;tmall&#x27;</span>,<span class="string">&#x27;jd&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&#x27;%s.com&#x27;</span> % domain <span class="keyword">for</span> domain <span class="keyword">in</span> domains]</span><br><span class="line">[<span class="string">&#x27;tedu.com&#x27;</span>, <span class="string">&#x27;qq.com&#x27;</span>, <span class="string">&#x27;tmall.com&#x27;</span>, <span class="string">&#x27;jd.com&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h2><h3 id="九九乘法表"><a href="#九九乘法表" class="headerlink" title="九九乘法表"></a>九九乘法表</h3><ul>
<li>程序运行后，可以在屏幕上打印出九九乘法表</li>
<li>修改程序，由用户输入数字，可打印任意数字的乘法表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,i + <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s*%s=%s&#x27;</span> % (i,j,i*j),end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

<h1 id="文件打开方法及读取"><a href="#文件打开方法及读取" class="headerlink" title="文件打开方法及读取"></a>文件打开方法及读取</h1><h2 id="文件打开方法"><a href="#文件打开方法" class="headerlink" title="文件打开方法"></a>文件打开方法</h2><h3 id="open内建函数"><a href="#open内建函数" class="headerlink" title="open内建函数"></a>open内建函数</h3><ul>
<li><p>作为打开文件的“钥匙”，内建函数<code>open()</code>提供了初始化输入/输出（I/O）操作通用接口</p>
</li>
<li><p>成功打开文件后会返回一个文件对象，否则引发一个错误</p>
</li>
<li><p>基本语法：</p>
<p>file_object = open(file_name, mode=’r’, buffering=-1)</p>
</li>
</ul>
<h3 id="文件对象访问模式"><a href="#文件对象访问模式" class="headerlink" title="文件对象访问模式"></a>文件对象访问模式</h3><table>
<thead>
<tr>
<th>文件模式</th>
<th align="left">操作</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td align="left">读方式打开（文件不存在则报错）</td>
</tr>
<tr>
<td>w</td>
<td align="left">以写方式打开（文件存在则清空，不存在则创建）</td>
</tr>
<tr>
<td>a</td>
<td align="left">以追加模式打开（必要时创建新文件）</td>
</tr>
<tr>
<td>r+</td>
<td align="left">以读写模式打开（参见r）</td>
</tr>
<tr>
<td>w+</td>
<td align="left">以读写模式打开（参见w）</td>
</tr>
<tr>
<td>a+</td>
<td align="left">以读写模式打开（参见a）</td>
</tr>
<tr>
<td>b</td>
<td align="left">以二进制模式打开</td>
</tr>
</tbody></table>
<h2 id="文件输入"><a href="#文件输入" class="headerlink" title="文件输入"></a>文件输入</h2><h3 id="read方法"><a href="#read方法" class="headerlink" title="read方法"></a>read方法</h3><ul>
<li><code>read()</code>方法用来直接读取字节到字符串中，最多读取的给定数目个字节</li>
<li>如果没有给定<code>size</code>参数（默认值为-1）或者<code>size</code>值为负，文件将读取直至末尾</li>
</ul>
<h3 id="readline方法"><a href="#readline方法" class="headerlink" title="readline方法"></a>readline方法</h3><ul>
<li>读取打开文件的一行（读取下个行结束符之前的所有字节）</li>
<li>然后整行，包括行结束符，作为字符串返回</li>
<li>它也有一个<code>size</code>参数，默认值为-1，代表读至行结束</li>
<li>如果提供了该参数，那么在超过<code>size</code>个字节后会返回不完整的行</li>
</ul>
<h3 id="readlines方法"><a href="#readlines方法" class="headerlink" title="readlines方法"></a>readlines方法</h3><ul>
<li><code>readlines()</code>方法读取所有（剩余的）行然后把它们作为一个字符串列表返回</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python pycharm]<span class="comment"># cp /etc/passwd /tmp/</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f</span><br><span class="line">&lt;_io.TextIOWrapper name=<span class="string">&#x27;/tmp/passwd&#x27;</span> mode=<span class="string">&#x27;r&#x27;</span> encoding=<span class="string">&#x27;UTF-8&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = f.read()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/<span class="built_in">bin</span>/bash\n</span><br><span class="line">······</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(data)</span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/<span class="built_in">bin</span>/bash</span><br><span class="line">······</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = f.read()  <span class="comment"># 存在文件指针，当我们读取后文件指针会向后移，当我们读完后，指针已经指到最后，再读没有数据了</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line"><span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()   <span class="comment"># 若想重新读取，先关闭文件</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd&#x27;</span>)  <span class="comment"># 重新打开文件，读取</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">1</span>)   <span class="comment"># 每读取一次，指针就会向后移动 输出’root‘</span></span><br><span class="line"><span class="string">&#x27;r&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">1</span>)</span><br><span class="line"><span class="string">&#x27;o&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">1</span>)</span><br><span class="line"><span class="string">&#x27;o&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">1</span>)</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.readline()  <span class="comment"># 读取整行，因为开头的root已经读取，就读取剩余内容</span></span><br><span class="line"><span class="string">&#x27;:x:0:0:root:/root:/bin/bash\n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.readline()</span><br><span class="line"><span class="string">&#x27;bin:x:1:1:bin:/bin:/sbin/nologin\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.readlines()   <span class="comment"># readlines把剩余内容作为列表全部读出来，</span></span><br><span class="line">[<span class="string">&#x27;daemon:x:2:2:daemon:/sbin:/sbin/nologin\n&#x27;</span>, ······]</span><br></pre></td></tr></table></figure>

<p><code>其他类型的文件</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2进制</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># cp /usr/bin/ls /tmp/</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/ls&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">10</span>)</span><br><span class="line"><span class="string">b&#x27;\x7fELF\x02\x01\x01\x00\x00\x00&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="文件迭代"><a href="#文件迭代" class="headerlink" title="文件迭代"></a>文件迭代</h2><ul>
<li>如果需要逐行处理文件，可以结合for循环迭代文件</li>
<li>迭代文件的方法于处理其他序列类型的数据类似</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(line,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/<span class="built_in">bin</span>/bash</span><br><span class="line"><span class="built_in">bin</span>:x:<span class="number">1</span>:<span class="number">1</span>:<span class="built_in">bin</span>:/<span class="built_in">bin</span>:/sbin/nologin</span><br></pre></td></tr></table></figure>

<h1 id="写文件及文件指针"><a href="#写文件及文件指针" class="headerlink" title="写文件及文件指针"></a>写文件及文件指针</h1><h2 id="文件输出"><a href="#文件输出" class="headerlink" title="文件输出"></a>文件输出</h2><h3 id="write方法"><a href="#write方法" class="headerlink" title="write方法"></a>write方法</h3><ul>
<li><code>write()</code>内建方法功能与<code>read()</code>和<code>readline()</code>相反。它把含有文本数据或二进制数据块的字符串写入到文件中去</li>
<li>写文件时，不会自动添加结束标准，需要程序员手工输入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">&#x27;hello world\n&#x27;</span>)</span><br><span class="line"><span class="number">12</span>          <span class="comment"># 表示写入的字节 最初存储在内存中，当数据量未达到4k时，或者关闭文件才会写入硬盘</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.flush()   <span class="comment"># 直接同步数据</span></span><br></pre></td></tr></table></figure>

<h3 id="writelines方法"><a href="#writelines方法" class="headerlink" title="writelines方法"></a>writelines方法</h3><ul>
<li>和<code>readlines()</code>一样，<code>writelines()</code>方法是针对列表的操作</li>
<li>它接受一个字符串列表作为参数，将它们写入文件</li>
<li>行结束符不会自动被加入，所以如果有需要的话，必须在调用<code>writelines()</code>前给每行结尾加上行结束符</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.writelines([<span class="string">&#x27;hello world\n&#x27;</span>,<span class="string">&#x27;python\n&#x27;</span>])</span><br></pre></td></tr></table></figure>

<h2 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h2><h3 id="with子句"><a href="#with子句" class="headerlink" title="with子句"></a>with子句</h3><ul>
<li><code>with</code>语句是用来简化代码的</li>
<li>在将打开文件的操作放在<code>with</code>语句中，代码块结束后，文件将自动关闭</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/ls&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f: </span><br><span class="line"><span class="meta">... </span>    data = f.readlines()</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.closed     <span class="comment"># 查看是否关闭</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h2 id="文件内移动"><a href="#文件内移动" class="headerlink" title="文件内移动"></a>文件内移动</h2><ul>
<li><p><code>seek(offset[,whence])</code>：移动文件指针到不同的位置</p>
<p><code>offset</code>是相当于某个位置的偏移量</p>
<p><code>whence</code>的值，0表示文件开头，1表示当前位置，2表示文件结尾</p>
</li>
<li><p><code>tell()</code>：返回当前文件指针的位置</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>)   <span class="comment"># 若只用r打开，移动指针受限</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.tell()</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.seek(<span class="number">6</span>,<span class="number">0</span>)   <span class="comment"># 从开头位置向后偏移6个字节</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.seek(<span class="number">2</span>,<span class="number">1</span>)   <span class="comment"># 从当前位置相后偏移2个字节</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.seek(-<span class="number">7</span>,<span class="number">2</span>)  <span class="comment"># 从结尾位置向前偏移7个字节</span></span><br><span class="line"><span class="number">2213</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：模拟cp操作"><a href="#案例：模拟cp操作" class="headerlink" title="案例：模拟cp操作"></a>案例：模拟cp操作</h2><ul>
<li>将/bin/ls“拷贝”到/tmp/目录下</li>
<li>不要修改原始文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">src_fname = <span class="string">&#x27;/bin/ls&#x27;</span></span><br><span class="line">dst_fname =  <span class="string">&#x27;/tmp/ls&#x27;</span></span><br><span class="line"></span><br><span class="line">src_fobj = <span class="built_in">open</span>(src_fname,<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">dst_fobj = <span class="built_in">open</span>(dst_fname,<span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    data = src_fobj.read(<span class="number">4096</span>)</span><br><span class="line">    <span class="keyword">if</span> data == <span class="string">b&#x27;&#x27;</span>:   <span class="comment"># 当data为空值时，因为使用rb模式打开，每行的内容都是b&#x27;······&#x27;</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    dst_fobj.write(data)</span><br><span class="line">    </span><br><span class="line">src_fobj.close()</span><br><span class="line">dst_fobj.close()</span><br></pre></td></tr></table></figure>

<h1 id="函数基础"><a href="#函数基础" class="headerlink" title="函数基础"></a>函数基础</h1><h2 id="函数基本操作"><a href="#函数基本操作" class="headerlink" title="函数基本操作"></a>函数基本操作</h2><h3 id="函数的基本概念"><a href="#函数的基本概念" class="headerlink" title="函数的基本概念"></a>函数的基本概念</h3><ul>
<li>函数是对程序逻辑进行结构化或过程化的一种编程方法</li>
<li>将整块代码巧妙的隔离成易于管理的小块</li>
<li>把重复代码放到函数中而不是进行大量的拷贝，这样既能节省空间，也有助于保持一致性</li>
<li>通常函数都是用于实现某一种功能</li>
</ul>
<h3 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h3><ul>
<li>函数是用<code>def</code>语句来创建的，语法如下：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">function_name</span>(<span class="params">arguments</span>):</span><br><span class="line">    <span class="string">&quot;function_documentation_string&quot;</span></span><br><span class="line">    function_body_suite</span><br></pre></td></tr></table></figure>

<ul>
<li>标题行由<code>def</code>关键字，函数的名字，以及参数的集合（如果有的话）组成</li>
<li><code>def</code>子句的剩余部分包括了一个虽然可选但是强烈推荐的文档字串，和必需的函数体</li>
</ul>
<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><ul>
<li>同大多数语言相同，python用一对圆括号调用函数</li>
<li>如果没有加圆括号，只是对函数的引用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span> * <span class="number">10</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()</span><br><span class="line">**********</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo   <span class="comment"># 存在内存的0x7fa01a3579d0位置</span></span><br><span class="line">&lt;function foo at <span class="number">0x7fa01a3579d0</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="函数的返回值"><a href="#函数的返回值" class="headerlink" title="函数的返回值"></a>函数的返回值</h3><ul>
<li>多数情况下，函数并不直接输出数据，而是向调用者返回值</li>
<li>函数的返回值使用<code>return</code>关键字</li>
<li>没有<code>return</code>的话，函数默认返回<code>None</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line"><span class="meta">... </span>    res = <span class="number">3</span> + <span class="number">4</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = foo()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(i)</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure>

<h3 id="案例：斐波那契数列函数"><a href="#案例：斐波那契数列函数" class="headerlink" title="案例：斐波那契数列函数"></a>案例：斐波那契数列函数</h3><ul>
<li>将斐波那契数列代码改为函数</li>
<li>数列长度由用户指定</li>
<li>要求返回结果用return返回</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fbnqsl</span>():</span><br><span class="line">    a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;num: &quot;</span>)) - <span class="number">2</span></span><br><span class="line">    <span class="built_in">list</span> = [<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(a):</span><br><span class="line">        <span class="built_in">list</span>.append(<span class="built_in">list</span>[-<span class="number">1</span>]+<span class="built_in">list</span>[-<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span></span><br><span class="line"><span class="built_in">print</span>(fbnqsl())</span><br></pre></td></tr></table></figure>

<h1 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h1><h2 id="定义参数"><a href="#定义参数" class="headerlink" title="定义参数"></a>定义参数</h2><ul>
<li><p>形式参数</p>
<p>函数定义时，紧跟在函数名后（圆括号内）的参数成为形式参数，简称形参。由于它不是实际存在的变量，所以又称为虚拟变量</p>
</li>
<li><p>实际参数</p>
<p>在主调函数中调用一个函数时，函数名后面括弧中的参数（可以是一个表达式）称为“实际参数”，简称实参</p>
</li>
</ul>
<h2 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h2><ul>
<li>调用函数时，实参的个数需要与形参个数一致</li>
<li>实参将依次传递给形参</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">x,y</span>):  <span class="comment"># x y 形参</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;x=%s,y=%s&#x27;</span> % (x,y))</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">3</span>,<span class="number">4</span>)   <span class="comment"># 3 4 实参</span></span><br><span class="line">x=<span class="number">3</span>,y=<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><code>斐波那契数列函数优化</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fbnqsl</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">list</span> = [<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(x-<span class="number">2</span>):</span><br><span class="line">        <span class="built_in">list</span>.append(<span class="built_in">list</span>[-<span class="number">1</span>]+<span class="built_in">list</span>[-<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span></span><br><span class="line"></span><br><span class="line">alist = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> alist:</span><br><span class="line">    <span class="built_in">print</span>(fbnqsl(i))</span><br></pre></td></tr></table></figure>

<h2 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h2><ul>
<li>与<code>shell</code>脚本类似，程序名以及参数都以位置参数的方式传递给python程序</li>
<li>使用<code>sys</code>模块的<code>argv</code>列表接收</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># vim ceshi.py</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.argv)</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># python ceshi.py hao 123</span></span><br><span class="line">[<span class="string">&#x27;ceshi.py&#x27;</span>, <span class="string">&#x27;hao&#x27;</span>, <span class="string">&#x27;123&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h2><ul>
<li>默认参数就是声明了默认值的参数</li>
<li>因为给参数赋予了默认值，所以在函数调用的时候，不向该参数传入值也是允许的</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">pstar</span>(<span class="params">num = <span class="number">30</span></span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span> * num)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pstar()</span><br><span class="line">******************************</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pstar(<span class="number">40</span>)</span><br><span class="line">****************************************</span><br></pre></td></tr></table></figure>

<h2 id="案例：复制文件函数"><a href="#案例：复制文件函数" class="headerlink" title="案例：复制文件函数"></a>案例：复制文件函数</h2><ul>
<li>修改文件练习中的拷贝程序</li>
<li>将程序改为函数形式</li>
<li>源文件和目标文件要求通过参数形式传递</li>
<li>实参要求来自于命令行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">copy</span>(<span class="params">src,dst</span>):</span><br><span class="line">    src_fobj = <span class="built_in">open</span>(src, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">    dst_fobj = <span class="built_in">open</span>(dst, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        data = src_fobj.read(<span class="number">4096</span>)</span><br><span class="line">        <span class="keyword">if</span> data == <span class="string">b&#x27;&#x27;</span>:  </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        dst_fobj.write(data)  </span><br><span class="line">    src_fobj.close()</span><br><span class="line">    dst_fobj.close()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">print</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">copy(sys.argv[<span class="number">1</span>],sys.argv[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python day3.py /bin/ls /tmp/ls3</span></span><br><span class="line">ok</span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># md5sum /bin/ls /tmp/ls3</span></span><br><span class="line">a78c13d806e594dc4014d145d689f23d  /<span class="built_in">bin</span>/ls</span><br><span class="line">a78c13d806e594dc4014d145d689f23d  /tmp/ls3</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="模块基础"><a href="#模块基础" class="headerlink" title="模块基础"></a>模块基础</h1><h2 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h2><h3 id="模块基本概念"><a href="#模块基本概念" class="headerlink" title="模块基本概念"></a>模块基本概念</h3><ul>
<li>模块是从逻辑上组织python代码的形式</li>
<li>当代码量变得相当大的时候，最好把代码分出一些有组织的代码段，前提是保证它们的彼此交互</li>
<li>这些代码片段相互间有一定的联系，可能是一个包含数据成员和方法的类，也可能是一组相关但彼此独立的操作函数</li>
</ul>
<h2 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h2><ul>
<li>模块物理层面上组织的方法是文件，每一个以<code>.py</code>结尾的python文件都是一个模块</li>
<li>模块名称切记不要与系统中已存在的模块重名</li>
<li>模块文件名字去掉后面的扩展名（.py）即为模块名</li>
</ul>
<h2 id="导入模块（import）"><a href="#导入模块（import）" class="headerlink" title="导入模块（import）"></a>导入模块（import）</h2><ul>
<li>使用<code>import</code>导入模块</li>
<li>模块属性通过“模块名.属性”的方法调用</li>
<li>如果仅需要模块中的某些属性，也可以单独引用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os,string  <span class="comment"># 导入多个模块，不建议</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>string.digits</span><br><span class="line"><span class="string">&#x27;0123456789&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> random <span class="keyword">import</span> randint  <span class="comment"># 从random模块中导入randint</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>randint(<span class="number">1</span>,<span class="number">10</span>)<span class="comment"># 因为只导入randint，所以不需要random.randint()</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> getpass <span class="keyword">as</span> gp  <span class="comment"># 给导入的模块起一个别名</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>gp.getpass()</span><br><span class="line">Password: </span><br><span class="line"><span class="string">&#x27;123456&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="模块加载（load）"><a href="#模块加载（load）" class="headerlink" title="模块加载（load）"></a>模块加载（load）</h2><ul>
<li>一个模块只能被加载一次，无论它被导入多少次</li>
<li>只加载一次可以阻止多重导入时代码被多次执行</li>
<li>如果两个文件相互导入，防止了无限的相互加载</li>
<li>模块加载时，顶层代码会自动执行，所以只将函数放入模块的顶层是良好的编程习惯</li>
</ul>
<h2 id="案例：创建模块"><a href="#案例：创建模块" class="headerlink" title="案例：创建模块"></a>案例：创建模块</h2><ul>
<li>创建star模块</li>
<li>模块中包含一个变量hi值为Hello World!</li>
<li>模块中包含一个函数pstar，默认打印30个星号</li>
<li>模块中包含文档字符串</li>
<li>调用模块，测试功能</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;演示模块</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">这是一个演示模块，它包括了一个变量和一个函数</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">hi = <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pstar</span>(<span class="params">n=<span class="number">30</span></span>):</span><br><span class="line">    <span class="string">&quot;该函数用于打印星号，如果没有传参，默认打印30个星号&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span> * n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> star</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>star.pstar()</span><br><span class="line">******************************</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>star.hi</span><br><span class="line"><span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">help</span>(star)       <span class="comment"># 查看模块帮助，模块中引号中写的是模块的描述</span></span><br><span class="line">Help on module star:</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">    star - 演示模块</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">    这是一个演示模块，它包括了一个变量和一个函数</span><br><span class="line"></span><br><span class="line">FUNCTIONS</span><br><span class="line">    pstar(n=<span class="number">30</span>)</span><br><span class="line">        该函数用于打印星号，如果没有传参，默认打印<span class="number">30</span>个星号</span><br><span class="line">DATA</span><br><span class="line">    hi = <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"></span><br><span class="line">FILE</span><br><span class="line">    /root/pycharm/star.py</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">help</span>(star.pstar)  <span class="comment"># 查看单个函数的描述</span></span><br><span class="line">Help on function pstar <span class="keyword">in</span> module star:</span><br><span class="line"></span><br><span class="line">pstar(n=<span class="number">30</span>)</span><br><span class="line">    该函数用于打印星号，如果没有传参，默认打印<span class="number">30</span>个星号</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="模块特性及案例"><a href="#模块特性及案例" class="headerlink" title="模块特性及案例"></a>模块特性及案例</h1><h2 id="模块特性"><a href="#模块特性" class="headerlink" title="模块特性"></a>模块特性</h2><h3 id="模块导入的特性"><a href="#模块导入的特性" class="headerlink" title="模块导入的特性"></a>模块导入的特性</h3><ul>
<li>模块具有一个<code>__name__</code>特殊属性（<strong>双下划线</strong>）</li>
<li>当模块文件直接执行时，<code>__name__</code>的值为<code>__main__</code></li>
<li>当模块被另一个文件导入时，<code>__name__</code>的值就是该模块的名字</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python pycharm]<span class="comment"># vim foo.py</span></span><br><span class="line"><span class="built_in">print</span>(__name__)</span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python foo.py</span></span><br><span class="line">__main__</span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> foo</span><br><span class="line">foo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="案例-5"><a href="#案例-5" class="headerlink" title="案例"></a>案例</h2><h3 id="生成随机密码"><a href="#生成随机密码" class="headerlink" title="生成随机密码"></a>生成随机密码</h3><ul>
<li>创建randpass.py脚本，要求如下：</li>
<li>编写一个能生成8位随机密码的程序</li>
<li>使用random的choice函数随机取出字符</li>
<li>改进程序，用户可以自己决定生成多少位的密码</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> ascii_letters, digits <span class="comment"># 随机参数字符串和数字</span></span><br><span class="line">all_chs = ascii_letters + digits</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">randpass</span>(<span class="params">n = <span class="number">8</span></span>):</span><br><span class="line">    result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        ch = random.choice(all_chs)</span><br><span class="line">        result += ch</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  <span class="comment"># 当作为脚本执行的时候</span></span><br><span class="line">    <span class="built_in">print</span>(randpass())</span><br></pre></td></tr></table></figure>

<h1 id="shutil模块"><a href="#shutil模块" class="headerlink" title="shutil模块"></a>shutil模块</h1><h2 id="复制和移动"><a href="#复制和移动" class="headerlink" title="复制和移动"></a>复制和移动</h2><ul>
<li><p>shutil.copy(src,dst,*,follow_symlinks=True)</p>
<p>将文件<code>src</code>复制到文件或目录<code>dst</code>。<code>src</code>和<code>dst</code>应为字符串。如果<code>dst</code>指定目录，则文件将使用<code>src</code>的基本文件名复制到<code>dst</code>中。返回新创建的文件的路径</p>
</li>
<li><p>shutil.copy2(src,dst,*,follow_symlinks=True)</p>
<p>与<code>copy()</code>相同，但<code>copy2()</code>也尝试保留所有文件元数据</p>
</li>
<li><p>shutil.move(src,dst,copy_function=copy2)</p>
<p>递归的将文件或目录<code>src</code>移动到另一个位置<code>dst</code>，并返回目标</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> shutil</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1 = <span class="built_in">open</span>(<span class="string">&#x27;/etc/passwd&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2 = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd&#x27;</span>,<span class="string">&#x27;wb&#x27;</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.copyfileobj(f1,f2)  <span class="comment"># 拷贝文件对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2.close()</span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># md5sum /etc/passwd /tmp/passwd </span></span><br><span class="line">708b712979d8de2fd00a3335043e482b  /etc/passwd</span><br><span class="line">708b712979d8de2fd00a3335043e482b  /tmp/passwd</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 不用打开文件 其底层代码就是shutil.copyfileobj和shutil.copymode</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.copy(<span class="string">&#x27;/etc/hosts&#x27;</span>,<span class="string">&#x27;/tmp/zj.txt&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/tmp/zj.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># md5sum /etc/hosts /tmp/zj.txt </span></span><br><span class="line">54fb6627dbaa37721048e4549db3224d  /etc/hosts</span><br><span class="line">54fb6627dbaa37721048e4549db3224d  /tmp/zj.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是两个文件元数据不一致 使用copy2就会尽量一致</span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># stat /etc/hosts</span></span><br><span class="line">  文件：<span class="string">&quot;/etc/hosts&quot;</span></span><br><span class="line">  大小：<span class="number">158</span>       	块：<span class="number">8</span>          IO 块：<span class="number">4096</span>   普通文件</span><br><span class="line">设备：fd00h/64768d	Inode：<span class="number">1074772527</span>  硬链接：<span class="number">1</span></span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    <span class="number">0</span>/    root)   Gid：(    <span class="number">0</span>/    root)</span><br><span class="line">环境：system_u:object_r:net_conf_t:s0</span><br><span class="line">最近访问：<span class="number">2023</span>-04-<span class="number">26</span> <span class="number">11</span>:05:<span class="number">50.891465475</span> +0800</span><br><span class="line">最近更改：<span class="number">2013</span>-06-07 <span class="number">22</span>:<span class="number">31</span>:<span class="number">32.000000000</span> +0800</span><br><span class="line">最近改动：<span class="number">2023</span>-04-<span class="number">24</span> <span class="number">10</span>:<span class="number">47</span>:<span class="number">41.887735760</span> +0800</span><br><span class="line">创建时间：-</span><br><span class="line">(mypy) [root@python ~]<span class="comment"># stat /tmp/zj.txt </span></span><br><span class="line">  文件：<span class="string">&quot;/tmp/zj.txt&quot;</span></span><br><span class="line">  大小：<span class="number">158</span>       	块：<span class="number">8</span>          IO 块：<span class="number">4096</span>   普通文件</span><br><span class="line">设备：fd00h/64768d	Inode：<span class="number">1075654904</span>  硬链接：<span class="number">1</span></span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    <span class="number">0</span>/    root)   Gid：(    <span class="number">0</span>/    root)</span><br><span class="line">环境：unconfined_u:object_r:user_tmp_t:s0</span><br><span class="line">最近访问：<span class="number">2023</span>-04-<span class="number">27</span> <span class="number">10</span>:<span class="number">56</span>:<span class="number">04.602515496</span> +0800</span><br><span class="line">最近更改：<span class="number">2023</span>-04-<span class="number">27</span> <span class="number">10</span>:<span class="number">54</span>:<span class="number">51.006825541</span> +0800</span><br><span class="line">最近改动：<span class="number">2023</span>-04-<span class="number">27</span> <span class="number">10</span>:<span class="number">54</span>:<span class="number">51.006825541</span> +0800</span><br><span class="line">创建时间：-</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.move(<span class="string">&#x27;/tmp/zj.txt&#x27;</span>,<span class="string">&#x27;/var/tmp/zj.txt&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/var/tmp/zj.txt&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h2><ul>
<li><p>shutil.copytree(src,dst,symlinks=False,ignore=None,copy_function=copy2,ignore_dangling_symlinks=False)</p>
<p>递归的复制以<code>src</code>为根的整个目录树，返回目标目录。由<code>dst</code>命名的目标目录不能已经存在</p>
</li>
<li><p>shutil.retree(path,ignore_errors=False,onerror=None)</p>
<p>删除整个目录树，路径必须指向目录（而不能是指向目录的符号链接）</p>
</li>
<li><p>shutil模块没有提供删除文件的函数</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.copytree(<span class="string">&#x27;/etc/security&#x27;</span>,<span class="string">&#x27;/tmp/security&#x27;</span>) </span><br><span class="line"><span class="string">&#x27;/tmp/security&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.rmtree(<span class="string">&#x27;/tmp/security&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br></pre></td></tr></table></figure>

<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><ul>
<li><p>shutil.copymode(src,dst,*,follow_symlinks=True)</p>
<p>将权限从<code>src</code>复制到<code>dst</code>。文件内容，所有者和组不受影响。<code>src</code>和<code>dst</code>是以字符串类似给出的路径</p>
</li>
<li><p>shutil.copystat(src,dst,*,follow_symlinks=True)</p>
<p>将权限位，最后访问时间，上次修改的时间和标志从<code>src</code>复制到<code>dst</code></p>
</li>
<li><p>shutil.chown(path,user=None,group=None)</p>
<p>更改给定路径的所有者<code>用户</code>和/或<code>组</code></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># ll /tmp/zj.txt</span></span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">158</span> <span class="number">4</span>月  <span class="number">27</span> <span class="number">10</span>:<span class="number">54</span> /tmp/zj.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.chown(<span class="string">&#x27;/tmp/zj.txt&#x27;</span>,user=<span class="string">&#x27;wsq&#x27;</span>,group=<span class="string">&#x27;wsq&#x27;</span>)</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># ll /tmp/zj.txt</span></span><br><span class="line">-rw-r--r--. <span class="number">1</span> wsq wsq <span class="number">158</span> <span class="number">4</span>月  <span class="number">27</span> <span class="number">10</span>:<span class="number">54</span> /tmp/zj.txt</span><br></pre></td></tr></table></figure>

<h1 id="subprocess模块"><a href="#subprocess模块" class="headerlink" title="subprocess模块"></a>subprocess模块</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li><code>subprocess</code>模块主要用于执行系统命令</li>
<li><code>subprocess</code>模块允许你产生新的进程，连接到它们的输入/输出/错误管道，并获得它们的返回代码</li>
<li>本模块旨在替换几个较早的模块和功能，如<code>os.system</code>、<code>os.spawn*</code></li>
</ul>
<h2 id="run方法"><a href="#run方法" class="headerlink" title="run方法"></a>run方法</h2><ul>
<li><code>subprocess.run</code>方法在<code>python3.5</code>引入。早期版本可以使用<code>subprocess.call</code>方法</li>
<li>直接执行命令</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>subprocess.run(<span class="string">&#x27;ls&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>subprocess.run([<span class="string">&#x27;ls&#x27;</span>,<span class="string">&#x27;/home&#x27;</span>])  <span class="comment"># 不支持环境变量</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>subprocess.run(<span class="string">&#x27;ls /home&#x27;</span>)</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">&#x27;ls /home&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>subprocess.run([<span class="string">&#x27;ls&#x27;</span>,<span class="string">&#x27;~&#x27;</span>])</span><br><span class="line">ls: 无法访问~: 没有那个文件或目录</span><br><span class="line">CompletedProcess(args=[<span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;~&#x27;</span>], returncode=<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>通过shell执行命令</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>subprocess.run(<span class="string">&#x27;ls /home&#x27;</span>，shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>subprocess.run([<span class="string">&#x27;ls&#x27;</span>,<span class="string">&#x27;~&#x27;</span>]，shell=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>run方法返回值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>result = subprocess.run(<span class="string">&#x27;ls /home&#x27;</span>,shell=<span class="literal">True</span>)</span><br><span class="line">wsq</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.args   <span class="comment"># 显示参数</span></span><br><span class="line"><span class="string">&#x27;ls /home&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.returncode  <span class="comment"># 命令执行结果，同 $?</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<h2 id="输出和错误"><a href="#输出和错误" class="headerlink" title="输出和错误"></a>输出和错误</h2><ul>
<li>run方法执行的结果默认打印在屏幕上，也可以通过管道将其存储在标准输出和标准错误中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>result = subprocess.run(<span class="string">&#x27;id root; id zhangsan&#x27;</span>,s</span><br><span class="line">hell=<span class="literal">True</span>,stdout=subprocess.PIPE,stderr=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result</span><br><span class="line">CompletedProcess(args=<span class="string">&#x27;id root; id zhangsan&#x27;</span>, returncode=<span class="number">1</span>, stdout=<span class="string">b&#x27;uid=0(root) gid=0(root) \xe7\xbb\x84=0(root)\n&#x27;</span>, stderr=<span class="string">b&#x27;id: zhangsan: no such user\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.args</span><br><span class="line"><span class="string">&#x27;id root; id zhangsan&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.returncode</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.stdout   <span class="comment"># 输出</span></span><br><span class="line"><span class="string">b&#x27;uid=0(root) gid=0(root) \xe7\xbb\x84=0(root)\n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.stdout.decode()</span><br><span class="line"><span class="string">&#x27;uid=0(root) gid=0(root) 组=0(root)\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result.stderr  <span class="comment"># 错误</span></span><br><span class="line"><span class="string">b&#x27;id: zhangsan: no such user\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(result.stdout.decode())</span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="案例：调用ping命令"><a href="#案例：调用ping命令" class="headerlink" title="案例：调用ping命令"></a>案例：调用ping命令</h2><ul>
<li>编写ping函数</li>
<li>用于测试远程主机联通性</li>
<li>ping通显示：x.x.x.x:up</li>
<li>ping不通显示：x.x.x.x:down</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ping</span>(<span class="params">host</span>):</span><br><span class="line">    result = subprocess.run(<span class="string">&#x27;ping -c2 %s &gt;&amp; /dev/null&#x27;</span> % host,shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%s:up&#x27;</span> % host</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%s:down&#x27;</span> % host</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    host = sys.argv[<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(ping(host))</span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python ping.py baidu.com</span></span><br><span class="line">baidu.com:up</span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python ping.py 192.168.1.5</span></span><br><span class="line"><span class="number">192.168</span><span class="number">.1</span><span class="number">.5</span>:down</span><br></pre></td></tr></table></figure>

<h1 id="python语法风格和模块结构布局"><a href="#python语法风格和模块结构布局" class="headerlink" title="python语法风格和模块结构布局"></a>python语法风格和模块结构布局</h1><h2 id="语法风格"><a href="#语法风格" class="headerlink" title="语法风格"></a>语法风格</h2><h3 id="变量赋值"><a href="#变量赋值" class="headerlink" title="变量赋值"></a>变量赋值</h3><ul>
<li><p>python支持链式多重赋值</p>
<p>x = y = 10</p>
</li>
<li><p>另一种将多个变量同时赋值的方法称为多元赋值，采用这种方式赋值时，等号两边对象都是元组</p>
<p>a,b = 10,20</p>
</li>
</ul>
<h3 id="合法标识符"><a href="#合法标识符" class="headerlink" title="合法标识符"></a>合法标识符</h3><ul>
<li>python标识符字符串规则和其他大部分用c语言编写的高级语言相似</li>
<li>第一个字符必须是字母或下划线<code>_</code></li>
<li>剩下的字符可以是字母和数字和下划线</li>
<li>大小写敏感</li>
</ul>
<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><ul>
<li>和其他的高级语言一样，python也有一些被称作关键字的保留字符</li>
<li>任何语言的关键字应该保持相对的稳定，但是因为python是一门不断成长和进化的语言，其关键字偶尔会更新</li>
<li>关键字列表和<code>iskeyword()</code>函数都放入了<code>keyword</code>模块以便查阅</li>
</ul>
<h3 id="内键"><a href="#内键" class="headerlink" title="内键"></a>内键</h3><ul>
<li>除了关键字之外。python还有可以在任何一级代码使用的“内建”的名字集合，这些名字可以由解释器设置或使用</li>
<li>虽然<code>built-in</code>不是关键字，但是应该把它当作“系统保留字”</li>
</ul>
<h2 id="模块结构及布局"><a href="#模块结构及布局" class="headerlink" title="模块结构及布局"></a>模块结构及布局</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/local/bin/python3		# 起始行</span></span><br><span class="line"><span class="string">&quot;this is a test module&quot;</span>			<span class="comment"># 模块文档字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys						<span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">debug = <span class="literal">True</span>					<span class="comment"># 全局变量声明</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FooClass</span>(<span class="title class_ inherited__">object</span>):			<span class="comment"># 类定义</span></span><br><span class="line">    <span class="string">&#x27;Foo class&#x27;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>():						<span class="comment"># 定义函数</span></span><br><span class="line">    <span class="string">&quot;test function&quot;</span></span><br><span class="line">    foo = FooClass()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:		<span class="comment"># 程序主体</span></span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>

<h1 id="模块布局案例"><a href="#模块布局案例" class="headerlink" title="模块布局案例"></a>模块布局案例</h1><h2 id="案例：测试字符串是否为合法标识符"><a href="#案例：测试字符串是否为合法标识符" class="headerlink" title="案例：测试字符串是否为合法标识符"></a>案例：测试字符串是否为合法标识符</h2><ul>
<li>编写用于测试字符串的函数</li>
<li>函数用于确定字符串是否为合法标识符</li>
<li>字符串不能为关键字</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> ascii_letters,digits</span><br><span class="line"></span><br><span class="line">frist_str = ascii_letters + <span class="string">&#x27;_&#x27;</span></span><br><span class="line">other_str = frist_str + digits</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">string</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> keyword.iskeyword(<span class="built_in">str</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%s是关键字&#x27;</span> % <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">str</span>[<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> frist_str:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;第一个字符不合法&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">str</span>)):</span><br><span class="line">        <span class="keyword">if</span>  i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">str</span>[i] <span class="keyword">not</span> <span class="keyword">in</span> other_str:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;%s的第%s字符(%s)不合法&#x27;</span> % (<span class="built_in">str</span>,i+<span class="number">1</span>,<span class="built_in">str</span>[i])</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;%s是合法标识符&#x27;</span> % <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">str</span> = sys.argv[<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(string(<span class="built_in">str</span>))</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python test.py tg.ds</span></span><br><span class="line">tg.ds的第<span class="number">2</span>字符(.)不合法</span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python test.py abc</span></span><br><span class="line">abc是合法标识符</span><br></pre></td></tr></table></figure>

<h2 id="案例：创建文件"><a href="#案例：创建文件" class="headerlink" title="案例：创建文件"></a>案例：创建文件</h2><ul>
<li>编写一个程序，要求用户输入文件名</li>
<li>如果文件已经存在，要求用重新输入</li>
<li>提示用户输入数据，每行数据先写到列表中</li>
<li>将列表中数据写入用户输入的文件名中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_name</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        fname = <span class="built_in">input</span>(<span class="string">&quot;file name: &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(fname):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;file is exist,please retry&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> fname</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_content</span>():</span><br><span class="line">    content = []</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Start writing,Enter &#x27;end&#x27; to quit&quot;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        line = <span class="built_in">input</span>(<span class="string">&quot;(end to quit)&gt; &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> line == <span class="string">&#x27;end&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        content.append(line)</span><br><span class="line">    <span class="keyword">return</span> content</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wfile</span>(<span class="params">fname,content</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fobjs:</span><br><span class="line">        fobjs.writelines(content)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    fname = get_name()</span><br><span class="line">    content = get_content()</span><br><span class="line">    content = [<span class="string">&#x27;%s\n&#x27;</span> % line <span class="keyword">for</span> line <span class="keyword">in</span> content]</span><br><span class="line">    wfile(fname,content)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python mkfile.py </span></span><br><span class="line">file name: /tmp/a.txt</span><br><span class="line">Start writing,Enter <span class="string">&#x27;end&#x27;</span> to quit</span><br><span class="line">(end to quit)&gt; Hello World!</span><br><span class="line">(end to quit)&gt; 2nd line</span><br><span class="line">(end to quit)&gt; end</span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># cat /tmp/a.txt </span></span><br><span class="line">Hello World!</span><br><span class="line">2nd line</span><br></pre></td></tr></table></figure>

<h1 id="序列对象及字符串格式化"><a href="#序列对象及字符串格式化" class="headerlink" title="序列对象及字符串格式化"></a>序列对象及字符串格式化</h1><h2 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h2><h3 id="序列类型操作符"><a href="#序列类型操作符" class="headerlink" title="序列类型操作符"></a>序列类型操作符</h3><table>
<thead>
<tr>
<th>序列操作符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>seq[ind]</td>
<td>获得下标为ind的元素</td>
</tr>
<tr>
<td>seq[ind1:ind2]</td>
<td>获得下标从ind1到ind2间的元素集合</td>
</tr>
<tr>
<td>seq * expr</td>
<td>序列重复expr次</td>
</tr>
<tr>
<td>seq1 + seq2</td>
<td>连接序列seq1和seq2</td>
</tr>
<tr>
<td>obj in seq</td>
<td>判断obj元素是否包含在seq中</td>
</tr>
<tr>
<td>obj not in seq</td>
<td>判断obj元素是否不包含在seq中</td>
</tr>
</tbody></table>
<h3 id="内建函数"><a href="#内建函数" class="headerlink" title="内建函数"></a>内建函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>list(iter)</td>
<td>把可迭代对象转换为列表</td>
</tr>
<tr>
<td>str(obj)</td>
<td>把obj对象转换为字符串</td>
</tr>
<tr>
<td>tuple(iter)</td>
<td>把一个可迭代对象转换为一个元组</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>((<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>))</span><br><span class="line">[<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span>([<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>])</span><br><span class="line"><span class="string">&quot;[&#x27;hello&#x27;, &#x27;world&#x27;]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>([<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>])</span><br><span class="line">(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="内建函数-1"><a href="#内建函数-1" class="headerlink" title="内建函数"></a>内建函数</h3><ul>
<li>len(seq)：返回seq的长度</li>
<li>enumerate：接受可迭代对象作为参数，返回一个enumerate对象</li>
<li>reversed(seq)：接受序列作为参数，返回一个以逆序访问的迭代器</li>
<li>sorted(iter)：接受可迭代对象作为参数，返回一个有序的列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>user = [<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">enumerate</span>(user)</span><br><span class="line">&lt;<span class="built_in">enumerate</span> <span class="built_in">object</span> at <span class="number">0x7f0b2dd05e00</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">enumerate</span>(user))</span><br><span class="line">[(<span class="number">0</span>, <span class="string">&#x27;tom&#x27;</span>), (<span class="number">1</span>, <span class="string">&#x27;jerry&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;bob&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;alice&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">reversed</span>(user)</span><br><span class="line">&lt;list_reverseiterator <span class="built_in">object</span> at <span class="number">0x7f0b2dda7ca0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">reversed</span>(user))</span><br><span class="line">[<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;tom&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(user)</span><br><span class="line">[<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;tom&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="字符串-1"><a href="#字符串-1" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串操作符"><a href="#字符串操作符" class="headerlink" title="字符串操作符"></a>字符串操作符</h3><ul>
<li>比较操作符：字符串大小按ASCII码值大小进行比较</li>
<li>切片操作符：[]、[:]、[::]</li>
<li>成员关系操作符：in、not in</li>
</ul>
<h3 id="格式化操作符"><a href="#格式化操作符" class="headerlink" title="格式化操作符"></a>格式化操作符</h3><ul>
<li>字符串可以使用格式化符号来表示特定含义</li>
</ul>
<table>
<thead>
<tr>
<th>格式化字符</th>
<th>转换方式</th>
</tr>
</thead>
<tbody><tr>
<td>%c</td>
<td>数字转换成字符</td>
</tr>
<tr>
<td>%s</td>
<td>优先用str()函数进行字符串转换</td>
</tr>
<tr>
<td>%d  /  %i</td>
<td>转换成有符号十进制数</td>
</tr>
<tr>
<td>%o</td>
<td>转换成无符号八进制数</td>
</tr>
<tr>
<td>%e  /  %E</td>
<td>转换成科学计数法</td>
</tr>
<tr>
<td>%f  /  %F</td>
<td>转换成浮点数</td>
</tr>
</tbody></table>
<ul>
<li>字符串可以使用格式化符号来表示特定含义</li>
</ul>
<table>
<thead>
<tr>
<th>辅助指令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>定义宽度或小数点精度</td>
</tr>
<tr>
<td>-</td>
<td>左对齐</td>
</tr>
<tr>
<td>+</td>
<td>在正数前面显示加号</td>
</tr>
<tr>
<td><sp></td>
<td>在正数前面显示空格</td>
</tr>
<tr>
<td>#</td>
<td>在八进制数前面显示零0，在十六进制前面显示‘0x’或者‘0X’</td>
</tr>
<tr>
<td>0</td>
<td>显示的数字前面填充0而不是默认的空格</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%s is %s years old&#x27;</span> % (<span class="string">&#x27;tom&#x27;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="string">&#x27;tom is 20 years old&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%s is %d years old&#x27;</span> % (<span class="string">&#x27;tom&#x27;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="string">&#x27;tom is 20 years old&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%s is %d years old&#x27;</span> % (<span class="string">&#x27;tom&#x27;</span>,<span class="number">20.5</span>) <span class="comment"># %d 不能转换小数</span></span><br><span class="line"><span class="string">&#x27;tom is 20 years old&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%s is %f years old&#x27;</span> % (<span class="string">&#x27;tom&#x27;</span>,<span class="number">20.5</span>)  </span><br><span class="line"><span class="string">&#x27;tom is 20.500000 years old&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%s is %.1f years old&#x27;</span> % (<span class="string">&#x27;tom&#x27;</span>,<span class="number">20.5</span>) <span class="comment"># 保留一位小数</span></span><br><span class="line"><span class="string">&#x27;tom is 20.5 years old&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%f&#x27;</span> % (<span class="number">5</span> / <span class="number">3</span>)</span><br><span class="line"><span class="string">&#x27;1.666667&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%.2f&#x27;</span> % (<span class="number">5</span> / <span class="number">3</span>)</span><br><span class="line"><span class="string">&#x27;1.67&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%6.2f&#x27;</span> % (<span class="number">5</span> / <span class="number">3</span>)  <span class="comment"># 总长度为6位，小数位两位</span></span><br><span class="line"><span class="string">&#x27;  1.67&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%s%s&#x27;</span> % (<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;nameage&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%10s%8s&#x27;</span> % (<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>) <span class="comment"># 默认右对齐</span></span><br><span class="line"><span class="string">&#x27;      name     age&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%-10s%-8s&#x27;</span> % (<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>)  <span class="comment"># 改为左对齐</span></span><br><span class="line"><span class="string">&#x27;name      age     &#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;%c&quot;</span> % <span class="number">97</span></span><br><span class="line"><span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;%o&quot;</span> % <span class="number">100</span></span><br><span class="line"><span class="string">&#x27;144&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;%#o&quot;</span> % <span class="number">100</span></span><br><span class="line"><span class="string">&#x27;0o144&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;%#x&quot;</span> % <span class="number">100</span></span><br><span class="line"><span class="string">&#x27;0x64&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;%e&quot;</span> % <span class="number">1000000</span></span><br><span class="line"><span class="string">&#x27;000000e+06&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;%E&quot;</span> % <span class="number">1000000</span></span><br><span class="line"><span class="string">&#x27;1.000000E+06&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="原始字符串操作"><a href="#原始字符串操作" class="headerlink" title="原始字符串操作"></a>原始字符串操作</h2><ul>
<li>原始字符串操作符是为了对付那些在字符串中出现的特殊字符</li>
<li>在原始字符串里，所有的字符都是直接按照字面意思来使用，没有转义特殊或不能打印的字符</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>win_path = <span class="string">&#x27;c:\tmp&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(win_path)</span><br><span class="line">c:      mp</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wpath = <span class="string">r&#x27;c:\tmp&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(wpath)</span><br><span class="line">c:\tmp</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wpath</span><br><span class="line"><span class="string">&#x27;c:\\tmp&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：创建用户"><a href="#案例：创建用户" class="headerlink" title="案例：创建用户"></a>案例：创建用户</h2><ul>
<li>编写一个程序，实现创建用户的功能</li>
<li>提示用户输入用户名</li>
<li>随机生成8位密码</li>
<li>创建用户并设置密码</li>
<li>将用户相关信息写入指定文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 之前写的随机密码 randpass.py</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> ascii_letters, digits</span><br><span class="line">all_chs = ascii_letters + digits</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">randpass</span>(<span class="params">n = <span class="number">8</span></span>):</span><br><span class="line">    result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        ch = random.choice(all_chs)</span><br><span class="line">        result += ch</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(randpass())</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> randpass <span class="comment"># 调用随机密码模块（上面自己写的）</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">adduser</span>(<span class="params">user,passwd,fname</span>):</span><br><span class="line">    result = subprocess.run(<span class="string">&#x27;id %s &amp;&gt; /dev/null&#x27;</span> % user,shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s is exist&quot;</span> % user)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    subprocess.run(<span class="string">&#x27;useradd -p %s %s&#x27;</span> % (passwd,user),shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    info = <span class="string">&quot;&quot;&quot;用户信息</span></span><br><span class="line"><span class="string">用户名: %s</span></span><br><span class="line"><span class="string">密码: %s</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>% (user,passwd)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        fobj.write(info)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    passwd = randpass.randpass()</span><br><span class="line">    adduser(sys.argv[<span class="number">1</span>],passwd,<span class="string">&#x27;/tmp/users.txt&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python createuser.py alice</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python createuser.py jerry</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># cat /tmp/users.txt</span></span><br><span class="line">用户信息</span><br><span class="line">用户名: alice</span><br><span class="line">密码: gi3K36bE</span><br><span class="line">用户信息</span><br><span class="line">用户名: jerry</span><br><span class="line">密码: Hpj8AV9d</span><br></pre></td></tr></table></figure>

<h1 id="字符串-2"><a href="#字符串-2" class="headerlink" title="字符串"></a>字符串</h1><h2 id="字符串常用方法"><a href="#字符串常用方法" class="headerlink" title="字符串常用方法"></a>字符串常用方法</h2><ul>
<li><code>string.capitalize()</code>：把字符串的第一个字符大写</li>
<li><code>string.center(width)</code>：返回一个元字符居中，并且使用空格填充至长度<code>width</code>的新字符串</li>
<li><code>string.count(str,beg=0,end=len(strint))</code>：返回<code>str</code>在<code>string</code>里面出现的次数，如果<code>beg</code>或者<code>end</code>指定则返回指定范围内<code>str</code>出现的次数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.capitalize()		<span class="comment"># 首个字符大写</span></span><br><span class="line"><span class="string">&#x27;Hello world!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.title()			<span class="comment"># 所有字符的首个字符大写</span></span><br><span class="line"><span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.upper()			<span class="comment"># 字符转换为大写</span></span><br><span class="line"><span class="string">&#x27;HELLO WORLD!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = s.upper()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2</span><br><span class="line"><span class="string">&#x27;HELLO WORLD!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2.lower()</span><br><span class="line"><span class="string">&#x27;hello world!&#x27;</span>			<span class="comment"># 字符转换为小写</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.center(<span class="number">50</span>)		<span class="comment"># 居中对齐，用空格填充</span></span><br><span class="line"><span class="string">&#x27;                   hello world!                   &#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.center(<span class="number">50</span>,<span class="string">&#x27;*&#x27;</span>)	<span class="comment"># 居中对齐，用*填充</span></span><br><span class="line"><span class="string">&#x27;*******************hello world!*******************&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.ljust(<span class="number">50</span>,<span class="string">&#x27;#&#x27;</span>)		<span class="comment"># 左对齐，用#填充</span></span><br><span class="line"><span class="string">&#x27;hello world!######################################&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.rjust(<span class="number">50</span>,<span class="string">&#x27;#&#x27;</span>)		<span class="comment"># 右对齐，用#填充</span></span><br><span class="line"><span class="string">&#x27;######################################hello world!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.count(<span class="string">&#x27;l&#x27;</span>)		<span class="comment"># 统计字符l在字符串中出现的次数</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.count(<span class="string">&#x27;ll&#x27;</span>)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="内建函数-2"><a href="#内建函数-2" class="headerlink" title="内建函数"></a>内建函数</h2><ul>
<li><code>string.endswith(obj,beg=0,end=len(string))</code>：检查字符串是否以<code>obj</code>结束，如果<code>beg</code>或者<code>end</code>指定则检查指定的范围内是否以<code>obj</code>结束，如果是，返回<code>True</code>，否则返回<code>False</code></li>
<li><code>string.islower()</code>：如果<code>string</code>中包含至少一个区分大小写的字符，并且所有这些字符都是小写，则返回<code>True</code>，否则返回<code>False</code></li>
<li><code>string.strip()</code>：删除<code>string</code>字符两端的空白</li>
<li><code>string.upper()</code>：转换string中的小写字母为大写</li>
<li><code>string.split(str=&quot;&quot;,num=string.count(str))</code>：以<code>str</code>为分隔符切片<code>string</code>，如果<code>num</code>有指定值，则仅分割<code>num</code>个字符串</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.startswith(<span class="string">&#x27;h&#x27;</span>)		<span class="comment"># 是否以h开头</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.startswith(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.endswith(<span class="string">&#x27;world!&#x27;</span>)	<span class="comment"># 是否以world!结尾</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.islower()				<span class="comment"># 字符串是否都是小写</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.isupper()				<span class="comment"># 字符串是否都是大写</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.isalpha()				<span class="comment"># 是否都是由字母构成（s中包含空格）</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;Hello&#x27;</span>.isalpha()</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;abc_123&#x27;</span>.isidentifier()	<span class="comment"># 检测是否为标识符</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s3 = <span class="string">&#x27;\thello world           &#x27;</span> <span class="comment"># \t为Tab键</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s3</span><br><span class="line"><span class="string">&#x27;\thello world           &#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(s3)</span><br><span class="line">        hello world           </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s3.strip()						<span class="comment"># 去除两端空白字符</span></span><br><span class="line"><span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s3.lstrip()						<span class="comment"># 去除左边空白字符</span></span><br><span class="line"><span class="string">&#x27;hello world           &#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s3.rstrip()						<span class="comment"># 去除右边空白字符</span></span><br><span class="line"><span class="string">&#x27;\thello world&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.split()						<span class="comment"># 切割</span></span><br><span class="line">[<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world!&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hello.tar.gz&#x27;</span>.split()			<span class="comment"># 默认以空格切割</span></span><br><span class="line">[<span class="string">&#x27;hello.tar.gz&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hello.tar.gz&#x27;</span>.split(<span class="string">&#x27;.&#x27;</span>)		<span class="comment"># 指定以.切割</span></span><br><span class="line">[<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;tar&#x27;</span>, <span class="string">&#x27;gz&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = [<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;_&#x27;</span>.join(alist)					<span class="comment"># 以_为分隔符拼接</span></span><br><span class="line"><span class="string">&#x27;tom_jerry_bob_alice&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27; &#x27;</span>.join(alist)					<span class="comment"># 以空格拼接</span></span><br><span class="line"><span class="string">&#x27;tom jerry bob alice&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="列表和元组-1"><a href="#列表和元组-1" class="headerlink" title="列表和元组"></a>列表和元组</h1><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h3 id="创建及访问列表"><a href="#创建及访问列表" class="headerlink" title="创建及访问列表"></a>创建及访问列表</h3><ul>
<li>列表是有序、可变的数据类型</li>
<li>列表中可以包含不同类型的对象</li>
<li>列表可以由<code>[]</code>或工厂函数创建</li>
<li>支持下标及切片操作</li>
</ul>
<h3 id="更新列表"><a href="#更新列表" class="headerlink" title="更新列表"></a>更新列表</h3><ul>
<li>通过下标只能更新值，不能使用下标添加新值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = [<span class="number">10</span>,<span class="number">35</span>,<span class="number">20</span>,<span class="number">80</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[-<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">35</span>, <span class="number">20</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">1</span>:<span class="number">3</span>] = [<span class="number">30</span>,<span class="number">50</span>,<span class="number">80</span>]		<span class="comment"># 取出一个片段赋值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure>

<h3 id="列表常用方法"><a href="#列表常用方法" class="headerlink" title="列表常用方法"></a>列表常用方法</h3><table>
<thead>
<tr>
<th>列表方法</th>
<th>操作</th>
</tr>
</thead>
<tbody><tr>
<td>list.append(obj)</td>
<td>向列表中添加一个对象obj</td>
</tr>
<tr>
<td>list.count(obj)</td>
<td>返回一个对象obj在列表中出现的次数</td>
</tr>
<tr>
<td>list.extend(seq)</td>
<td>把序列seq的内容添加到列表中</td>
</tr>
<tr>
<td>list.insert(index,obj)</td>
<td>向索引量为index的位置插入对象obj</td>
</tr>
<tr>
<td>list.reverse()</td>
<td>原地翻转列表</td>
</tr>
<tr>
<td>list.sort()</td>
<td>排序</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.append(<span class="number">22</span>)		<span class="comment"># 末尾追加对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">22</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.insert(<span class="number">2</span>,<span class="number">8</span>)		<span class="comment"># 在指定下标处插入对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">8</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">22</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.count(<span class="number">8</span>)			<span class="comment"># 显示指定对象在列表中出现的次数</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist = [<span class="number">5</span>,<span class="number">19</span>,<span class="number">23</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.extend(blist)		<span class="comment"># 插入其他列表的内容</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">8</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">22</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.append(blist)		<span class="comment"># 默认把列表当成一个元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">8</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">22</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>, [<span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>]]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.pop()				<span class="comment"># 弹出/删除，默认弹出最后一位</span></span><br><span class="line">[<span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">8</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">22</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.pop(<span class="number">5</span>)			<span class="comment"># 删除指定下标的元素</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">8</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">22</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.index(<span class="number">23</span>)			<span class="comment"># 返回元素在列表中的下标</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.remove(<span class="number">8</span>)	<span class="comment"># 删除指定元素，当列表中有多个时，默认删除第一个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">10</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">22</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.reverse()			<span class="comment"># 列表翻转</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">23</span>, <span class="number">19</span>, <span class="number">5</span>, <span class="number">22</span>, <span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.sort()			<span class="comment"># 排序，默认升序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">5</span>, <span class="number">10</span>, <span class="number">19</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">80</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.sort(reverse=<span class="literal">True</span>)	<span class="comment"># 降序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist = alist.copy()	<span class="comment"># 把a列表拷贝给c列表，a不会跟随c变化</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist</span><br><span class="line">[<span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist.append(<span class="number">100</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clist</span><br><span class="line">[<span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">100</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist = alist			<span class="comment"># 直接赋值，a会跟随b变化</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist.append(<span class="number">25</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>blist</span><br><span class="line">[<span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">25</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">80</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">25</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.clear()			<span class="comment"># 清除所有内容</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><h3 id="创建元组"><a href="#创建元组" class="headerlink" title="创建元组"></a>创建元组</h3><ul>
<li>通过<code>()</code>或工厂函数<code>tuple()</code>创建元组</li>
<li>元组是有序的、不可变类型</li>
<li>与列表类似，作用于列表的操作，绝大多数可以作用于元组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuble = (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">7</span>)</span><br><span class="line">  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuble.count(<span class="number">7</span>)			<span class="comment"># 显示指定对象在元组中出现的次数</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuble.index(<span class="number">10</span>)		<span class="comment"># 返回元素在元组中的下标</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="单元素元组"><a href="#单元素元组" class="headerlink" title="单元素元组"></a>单元素元组</h3><ul>
<li>如果一个元组中只有一个元素，那么创建该元组的时候，需要加一个逗号</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>btuple = (<span class="string">&#x27;hello&#x27;</span>)		<span class="comment"># 不加逗号，就是一个字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(btuple)</span><br><span class="line">hello</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(btuple)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atuble = (<span class="string">&#x27;hello&#x27;</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(atuble)</span><br><span class="line">(<span class="string">&#x27;hello&#x27;</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(atuble)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(atuble)				<span class="comment"># 长度为1</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h1 id="列表案例"><a href="#列表案例" class="headerlink" title="列表案例"></a>列表案例</h1><h2 id="用列表构建栈结构"><a href="#用列表构建栈结构" class="headerlink" title="用列表构建栈结构"></a>用列表构建栈结构</h2><ul>
<li>栈是一个后进先出的结构</li>
<li>编写一个程序，用列表实现栈结构</li>
<li>需要支持压栈、出栈、查询功能</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">stack = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">push_it</span>():				<span class="comment"># 压栈</span></span><br><span class="line">    data = <span class="built_in">input</span>(<span class="string">&#x27;\033[32;1mdata: \033[0m&#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> data:</span><br><span class="line">        stack.append(data)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1mGot nothing\033[0m&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pop_it</span>():				<span class="comment"># 出栈</span></span><br><span class="line">    <span class="keyword">if</span> stack:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1mFrom stack, popped: %s\033[0m&#x27;</span> % stack.pop())</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1mEmpty stack\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">view_it</span>():				<span class="comment"># 查询</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1m%s\033[0m&#x27;</span> % stack)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_menu</span>():			<span class="comment"># 菜单</span></span><br><span class="line">    cmds = &#123;<span class="string">&#x27;0&#x27;</span>: push_it, <span class="string">&#x27;1&#x27;</span>: pop_it, <span class="string">&#x27;2&#x27;</span>:view_it&#125;</span><br><span class="line">    menu = <span class="string">&#x27;&#x27;&#x27;(0) push it</span></span><br><span class="line"><span class="string">(1) pop it</span></span><br><span class="line"><span class="string">(2) view it</span></span><br><span class="line"><span class="string">(3) exit</span></span><br><span class="line"><span class="string">plesae input your choice(0/1/2/3): &#x27;&#x27;&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        choice = <span class="built_in">input</span>(menu)</span><br><span class="line">        <span class="keyword">if</span> choice <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Invalid input, try again&#x27;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Bye-bye&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        cmds[choice]()		<span class="comment"># 通过字典的key-value特性调用函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    show_menu()</span><br></pre></td></tr></table></figure>

<h1 id="字典及常用方法"><a href="#字典及常用方法" class="headerlink" title="字典及常用方法"></a>字典及常用方法</h1><h2 id="字典基础操作"><a href="#字典基础操作" class="headerlink" title="字典基础操作"></a>字典基础操作</h2><h3 id="创建字典"><a href="#创建字典" class="headerlink" title="创建字典"></a>创建字典</h3><ul>
<li>通过<code>&#123;&#125;</code>操作符创建字典</li>
<li>通过<code>dict()</code>工厂方法创建字典</li>
<li>通过<code>fromkeys()</code>创建具有相同值的默认字典</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bdict = <span class="built_in">dict</span>(([<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;bob&#x27;</span>],[<span class="string">&#x27;age&#x27;</span>,<span class="number">23</span>])) <span class="comment"># 可以为字符串、列表、元组，但必须是两个元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bdict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cdict = &#123;&#125;.fromkeys((<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>),<span class="number">23</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cdict</span><br><span class="line">&#123;<span class="string">&#x27;bob&#x27;</span>: <span class="number">23</span>, <span class="string">&#x27;alice&#x27;</span>: <span class="number">23</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="访问字典"><a href="#访问字典" class="headerlink" title="访问字典"></a>访问字典</h3><ul>
<li>字典是映射类型，意味着它没有下标，访问字典中的值需要使用相应的键</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> adict:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;key=%s,value=%s&#x27;</span> % (key,adict[key]))</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">key=name,value=bob</span><br><span class="line">key=age,value=<span class="number">23</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;%(name)s&#x27;</span> % adict)		<span class="comment"># 输出键为name的值</span></span><br><span class="line">bob</span><br></pre></td></tr></table></figure>

<h3 id="更新字典"><a href="#更新字典" class="headerlink" title="更新字典"></a>更新字典</h3><ul>
<li>通过键更新字典</li>
<li>如果字典中有该键，则更新相关值；没有该键，则向字典中添加新值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict[<span class="string">&#x27;age&#x27;</span>] = <span class="number">18</span>			<span class="comment"># 更新</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict[<span class="string">&#x27;email&#x27;</span>] = <span class="string">&#x27;bob@tarena.com.cn&#x27;</span>	<span class="comment"># 添加</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;bob@tarena.com.cn&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除字典"><a href="#删除字典" class="headerlink" title="删除字典"></a>删除字典</h3><ul>
<li>通过<code>del</code>可以删除字典中的元素或整个字典</li>
<li>使用内部方法<code>clear()</code>可以清空字典；<code>pop()</code>方法“弹出”字典中的元素</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;bob@tarena.com.cn&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> adict[<span class="string">&#x27;email&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.pop(<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.clear()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字典操作符"><a href="#字典操作符" class="headerlink" title="字典操作符"></a>字典操作符</h3><ul>
<li>使用字典键查找操作符<code>[]</code>，查找键所对应的值</li>
<li>使用<code>in</code>或<code>not in</code>判断键是否存在于字典中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"><span class="string">&#x27;bob&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;bob&#x27;</span> <span class="keyword">in</span> adict			</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> adict</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h2 id="字典相关函数"><a href="#字典相关函数" class="headerlink" title="字典相关函数"></a>字典相关函数</h2><h3 id="作用于字典的函数"><a href="#作用于字典的函数" class="headerlink" title="作用于字典的函数"></a>作用于字典的函数</h3><ul>
<li><code>len()</code>：返回字典中元素的数目</li>
<li><code>hash()</code>：不是为字典设计，可以判断对象是否可以作为字典的键</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(adict)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>(<span class="number">3</span>)				<span class="comment"># 不报错就是可以作为键</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="number">3465381350475709982</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>([])</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;list&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="字典方法"><a href="#字典方法" class="headerlink" title="字典方法"></a>字典方法</h3><ul>
<li><code>dict.copy()</code>：返回字典的副本</li>
<li><code>dist.get(key,default=None)</code>：对字典<code>dict</code>中的键<code>key</code>，返回它对应的值<code>value</code>，如果字典中不存在此键，则返回<code>default</code>的值</li>
<li><code>dict.setdefault(key,default=None)</code>：如果字典不存在<code>key</code>键，由<code>dict[key]=default</code>为它赋值</li>
<li><code>dict.items()</code>：返回一个包含字典中的（键，值）对元组的列表</li>
<li><code>dict.keys()</code>：返回一个包含字典中键的列表</li>
<li><code>dict.values()</code>：返回一个包含字典所有值的列表</li>
<li><code>dict.update(dict2)</code>：将字典<code>dict2</code>的键-值对添加到字典<code>dict</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;bob&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.get(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(adict.get(<span class="string">&#x27;email&#x27;</span>))</span><br><span class="line"><span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.get(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;not found&#x27;</span>)	<span class="comment"># 查找name如果没找到返回not found，字典中有name键就返回name对应的值</span></span><br><span class="line"><span class="string">&#x27;bob&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.get(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;not found&#x27;</span>)	<span class="comment"># 查找email键，没有返回not found</span></span><br><span class="line"><span class="string">&#x27;not found&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.keys()		<span class="comment"># 列出所有键</span></span><br><span class="line">dict_keys([<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.values()		<span class="comment"># 列出所有值</span></span><br><span class="line">dict_values([<span class="string">&#x27;bob&#x27;</span>, <span class="number">23</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.items()		<span class="comment"># 同时得到key和value</span></span><br><span class="line">dict_items([(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="number">23</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(adict.items())</span><br><span class="line">[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="number">23</span>)]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.popitem()		<span class="comment"># 删除随机键值对</span></span><br><span class="line">(<span class="string">&#x27;age&#x27;</span>, <span class="number">23</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.pop(<span class="string">&#x27;name&#x27;</span>)	<span class="comment"># 删除指定键值对</span></span><br><span class="line"><span class="string">&#x27;bob&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bdict = &#123;<span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;tom@tedu.cn&#x27;</span>,<span class="string">&#x27;qq&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.update(bdict)		<span class="comment"># 把b字典跟新到a字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;tom@tedu.cn&#x27;</span>, <span class="string">&#x27;qq&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cdict = adict.copy()	<span class="comment"># 复制</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cdict</span><br><span class="line">&#123;<span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;tom@tedu.cn&#x27;</span>, <span class="string">&#x27;qq&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cdict.clear()			<span class="comment"># 清空</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cdict</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;tom@tedu.cn&#x27;</span>, <span class="string">&#x27;qq&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.setdefault(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;tom@123.com&#x27;</span>)	<span class="comment"># 如果不存在email键，就添加值为tom@123.com</span></span><br><span class="line"><span class="string">&#x27;tom@tedu.cn&#x27;</span>		<span class="comment"># 存在返回值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.setdefault(<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;22&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;22&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict</span><br><span class="line">&#123;<span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;tom@tedu.cn&#x27;</span>, <span class="string">&#x27;qq&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;22&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h1 id="字典案例"><a href="#字典案例" class="headerlink" title="字典案例"></a>字典案例</h1><h2 id="案例：模拟用户登录信息系统"><a href="#案例：模拟用户登录信息系统" class="headerlink" title="案例：模拟用户登录信息系统"></a>案例：模拟用户登录信息系统</h2><ul>
<li>支持新用户登录，新用户名和密码注册到字典中</li>
<li>支持老用户登录，用户名和密码正确提示登录成功</li>
<li>主程序通过循环询问进行何种操作，根据用户的选择，执行注册或是登录操作</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"></span><br><span class="line">users = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Sign_in</span>():</span><br><span class="line">    user_name = <span class="built_in">input</span>(<span class="string">&#x27;user name: &#x27;</span>).strip()</span><br><span class="line">    passwd = getpass.getpass(<span class="string">&#x27;password: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># if (user_name not in users) or (passwd != users[user_name]):</span></span><br><span class="line">    <span class="keyword">if</span> users.get(user_name) != passwd:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1mLogin failed\033[0m&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1mLogin successful\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Sign_up</span>():</span><br><span class="line">    user_name = <span class="built_in">input</span>(<span class="string">&#x27;user name: &#x27;</span>).strip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> user_name <span class="keyword">and</span> user_name <span class="keyword">not</span> <span class="keyword">in</span> users:</span><br><span class="line">        passwd = <span class="built_in">input</span>(<span class="string">&#x27;password: &#x27;</span>)</span><br><span class="line">        users[user_name] = passwd</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1mAn invalid user name or user already exists\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    cmds = &#123;<span class="string">&#x27;1&#x27;</span>: Sign_in, <span class="string">&#x27;2&#x27;</span>: Sign_up&#125;</span><br><span class="line"></span><br><span class="line">    menu = <span class="string">&#x27;&#x27;&#x27;(1)Sign in</span></span><br><span class="line"><span class="string">(2)Sign up</span></span><br><span class="line"><span class="string">(3)exit</span></span><br><span class="line"><span class="string">plesae input your choice(1/2/3): &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        choice = <span class="built_in">input</span>(menu).strip()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\033[31;1mInvalid input, try again\033[0m&#x27;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\033[32;1mBye-bye\033[0m&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        cmds[choice]()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    login()</span><br></pre></td></tr></table></figure>

<h1 id="集合及常用方法"><a href="#集合及常用方法" class="headerlink" title="集合及常用方法"></a>集合及常用方法</h1><h2 id="集合基础"><a href="#集合基础" class="headerlink" title="集合基础"></a>集合基础</h2><h3 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h3><ul>
<li><p>数学上，把<code>set</code>称作由不同元素组成的集合，集合<code>(set)</code>的成员通常被称作集合元素</p>
</li>
<li><p>集合对象是一组无序列的可哈希的值</p>
</li>
<li><p>集合有两种类型</p>
<p>可变集合<code>set</code></p>
<p>不可变集合<code>frozenset</code></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = <span class="built_in">set</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = <span class="built_in">frozenset</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">&#123;<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;l&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2</span><br><span class="line"><span class="built_in">frozenset</span>(&#123;<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;l&#x27;</span>&#125;)		<span class="comment"># 不能重复</span></span><br></pre></td></tr></table></figure>

<h3 id="集合操作符"><a href="#集合操作符" class="headerlink" title="集合操作符"></a>集合操作符</h3><ul>
<li>集合支持用<code>in</code>和<code>not in</code>操作符检查成员</li>
<li>能够通过<code>len()</code>检查集合大小</li>
<li>能够使用<code>for</code>迭代集合成员</li>
<li>不能取切片</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;h&#x27;</span> <span class="keyword">in</span> s1</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(s1)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> s1:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">h</span><br><span class="line">e</span><br><span class="line">o</span><br><span class="line">l</span><br></pre></td></tr></table></figure>

<ul>
<li><code>|</code>：联合，取并集</li>
<li><code>&amp;</code>：交集</li>
<li><code>-</code>：差补</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = <span class="built_in">set</span>(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = <span class="built_in">set</span>(<span class="string">&#x27;cde&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 | s2		<span class="comment"># 两个集合中所有的元素，不能重复</span></span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;b&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 &amp; s2		<span class="comment"># 两个集合中都有的元素</span></span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 - s2		<span class="comment"># s1去除与s2相同的元素，剩余的输出</span></span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 - s1		<span class="comment"># s2去除与s1相同的元素，剩余的输出</span></span><br><span class="line">&#123;<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="集合方法"><a href="#集合方法" class="headerlink" title="集合方法"></a>集合方法</h2><h3 id="集合常用方法"><a href="#集合常用方法" class="headerlink" title="集合常用方法"></a>集合常用方法</h3><ul>
<li><code>set.add()</code>：添加成员</li>
<li><code>set.update()</code>：批量添加成员</li>
<li><code>set.remove()</code>：移除成员</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.add(<span class="string">&#x27;new&#x27;</span>)		<span class="comment"># 把字符串当作一个元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;new&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.add((<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>))	<span class="comment"># 把元组当作一个元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, (<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>), <span class="string">&#x27;w&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.update(<span class="string">&#x27;new&#x27;</span>)	<span class="comment"># 把字符串拆开</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;new&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;w&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.update((<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>))	<span class="comment"># 把元组拆开</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;new&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, (<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>), <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;world&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.remove(<span class="string">&#x27;new&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, (<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>), <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;world&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>s.issubset(t)</code>：如果<code>s</code>是<code>t</code>的子集，则返回<code>True</code>，否则返回<code>False</code></li>
<li><code>s.issuperset(t)</code>：如果<code>t</code>是<code>s</code>的超集，则返回<code>True</code>，否则返回<code>False</code></li>
<li><code>s.union(t)</code>：返回一个新集合，该集合是<code>s</code>和<code>t</code>的并集</li>
<li><code>s.intersection(t)</code>：返回一个新集合，该集合是<code>s</code>和<code>t</code>的交集</li>
<li><code>s.difference(t)</code>：返回一个新集合，该集合是<code>s</code>的成员，但不能是<code>t</code>的成员</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset = <span class="built_in">set</span>(<span class="string">&#x27;abcde&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bset = <span class="built_in">set</span>(<span class="string">&#x27;bcd&#x27;</span>)	<span class="comment"># a子集包含b子集，a集合是b集合的超集，b集合是a集合的子集</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset.issubset(bset)		<span class="comment"># 判断a集合是否为b集合的子集</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset.issuperset(bset)	<span class="comment"># 判断a集合是否为b集合的超集</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bset.issubset(aset)		<span class="comment"># 判断b集合是否为a集合的子集</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset.union(bset)		<span class="comment"># 返回a集合和b集合的并集</span></span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;b&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset.intersection(bset)	<span class="comment"># 返回a集合和b集合的交集</span></span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset.difference(bset)	<span class="comment"># 返回一个集合，是a集合的元素，但不是b集合的元素</span></span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;e&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h1 id="集合案例"><a href="#集合案例" class="headerlink" title="集合案例"></a>集合案例</h1><h2 id="案例：去重"><a href="#案例：去重" class="headerlink" title="案例：去重"></a>案例：去重</h2><ul>
<li>创建一个具有20个随机数字的列表</li>
<li>去除列表中重复的数字</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums = [randint(<span class="number">1</span>,<span class="number">50</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>)]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums</span><br><span class="line">[<span class="number">14</span>, <span class="number">15</span>, <span class="number">28</span>, <span class="number">26</span>, <span class="number">8</span>, <span class="number">28</span>, <span class="number">36</span>, <span class="number">18</span>, <span class="number">46</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">28</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">45</span>, <span class="number">16</span>, <span class="number">5</span>, <span class="number">43</span>, <span class="number">15</span>, <span class="number">15</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(nums)</span><br><span class="line"><span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset = <span class="built_in">set</span>(nums)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aset</span><br><span class="line">&#123;<span class="number">36</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">43</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">46</span>, <span class="number">45</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">16</span>, <span class="number">21</span>, <span class="number">26</span>, <span class="number">28</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(aset)</span><br><span class="line"><span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = <span class="built_in">list</span>(aset)		<span class="comment"># 转换为列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[<span class="number">36</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">43</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">46</span>, <span class="number">45</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">16</span>, <span class="number">21</span>, <span class="number">26</span>, <span class="number">28</span>]</span><br></pre></td></tr></table></figure>

<h2 id="案例：-比较文件内容"><a href="#案例：-比较文件内容" class="headerlink" title="案例： 比较文件内容"></a>案例： 比较文件内容</h2><ul>
<li>有两个文件：a.log和b.log</li>
<li>两个文件中有大量重复内容</li>
<li>取出只有在b.log中存在的行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python pycharm]<span class="comment"># cp /etc/passwd /tmp/a.log</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># cp /etc/passwd /tmp/b.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在a.log中随机删除几行</span></span><br><span class="line"><span class="comment"># 在b.log中多复制几行，使其存在重复行，再添加几行新行</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># wc -l /tmp/a.log /tmp/b.log</span></span><br><span class="line">  <span class="number">33</span> /tmp/a.log</span><br><span class="line">  <span class="number">85</span> /tmp/b.log</span><br><span class="line"> <span class="number">118</span> 总用量</span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">fname1 = <span class="string">&#x27;/tmp/a.log&#x27;</span></span><br><span class="line">fname2 = <span class="string">&#x27;/tmp/b.log&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(fname1) <span class="keyword">as</span> fobj1:</span><br><span class="line">    aset = <span class="built_in">set</span>(fobj1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(fname2) <span class="keyword">as</span> fobj2:		<span class="comment"># 集合自动去重</span></span><br><span class="line">    bset = <span class="built_in">set</span>(fobj2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/c.log&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fobj3:	</span><br><span class="line">    fobj3.writelines(bset - aset)	<span class="comment"># 取差补</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># wc -l /tmp/c.log </span></span><br><span class="line"><span class="number">12</span> /tmp/c.log</span><br></pre></td></tr></table></figure>

<h1 id="time模块"><a href="#time模块" class="headerlink" title="time模块"></a>time模块</h1><h2 id="时间表示方式"><a href="#时间表示方式" class="headerlink" title="时间表示方式"></a>时间表示方式</h2><ul>
<li>时间戳<code>timestamp</code>：表示的是从1970年1月1日00:00:00开始按秒计算的偏移量</li>
<li><code>UTC（Coordinated Universal Time，世界协调时）</code>亦即格林威治天文时间，世界标准时间。在中国为<code>UTC+8</code>。<code>DST（Daylight Saving Time）</code>即夏令时</li>
<li>元组（struct_time）：由9个元素组成</li>
</ul>
<h3 id="struct-time元组"><a href="#struct-time元组" class="headerlink" title="struct_time元组"></a>struct_time元组</h3><table>
<thead>
<tr>
<th>索引</th>
<th>属性</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>tm_year</td>
<td>2000</td>
</tr>
<tr>
<td>1</td>
<td>tm_mon</td>
<td>1-12</td>
</tr>
<tr>
<td>2</td>
<td>tm_mday</td>
<td>1-31</td>
</tr>
<tr>
<td>3</td>
<td>tm_hour</td>
<td>0-23</td>
</tr>
<tr>
<td>4</td>
<td>tm_min</td>
<td>0-59</td>
</tr>
<tr>
<td>5</td>
<td>tm_sec</td>
<td>0-61</td>
</tr>
<tr>
<td>6</td>
<td>tm_wday</td>
<td>0-6(0表示周一)</td>
</tr>
<tr>
<td>7</td>
<td>tm_yday(一年中的第几天)</td>
<td>1-366</td>
</tr>
<tr>
<td>8</td>
<td>tm_isdst(是否为dst时间)</td>
<td>默认为-1</td>
</tr>
</tbody></table>
<h2 id="time模块方法"><a href="#time模块方法" class="headerlink" title="time模块方法"></a>time模块方法</h2><ul>
<li><code>time.localtime([secs])</code>：将一个时间戳转换为当前时区的<code>struct_time</code>。<code>secs</code>未提供，则以当前时间为准</li>
<li><code>time.gmtime([secs])</code>：和<code>localtime()</code>方法类似，<code>gmtime()</code>方法是将一个时间戳转换为<code>UTC</code>时区（0时区）的<code>struct_time</code></li>
<li><code>time.time()</code>：返回当前时间的时间戳</li>
<li><code>time.mktime(t)</code>：将一个<code>struct_time</code>转化为时间戳</li>
<li><code>time.sleep(secs)</code>：线程推迟指定的时间运行。单位为秒</li>
<li><code>time.asctime([t])</code>：把一个时间的元组或者<code>struct_time</code>表示为这种形式：‘Sun Jun 20 23:23:05 1993’ 。如果没有参数，将会将<code>time.localtime()</code>作为参数传入</li>
<li><code>time.ctime([secs])</code>：把一个时间戳（按秒计算的浮点数）转换为<code>time.asctime()</code>形式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.time()			<span class="comment"># 时间戳</span></span><br><span class="line"><span class="number">1683279106.127239</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.ctime()		<span class="comment"># 本机时间</span></span><br><span class="line"><span class="string">&#x27;Fri May  5 17:32:11 2023&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.localtime()	<span class="comment"># 当前时间元组</span></span><br><span class="line">time.struct_time(tm_year=<span class="number">2023</span>, tm_mon=<span class="number">5</span>, tm_mday=<span class="number">5</span>, tm_hour=<span class="number">17</span>, tm_min=<span class="number">32</span>, tm_sec=<span class="number">19</span>, tm_wday=<span class="number">4</span>, tm_yday=<span class="number">125</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.gmtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2023</span>, tm_mon=<span class="number">5</span>, tm_mday=<span class="number">5</span>, tm_hour=<span class="number">10</span>, tm_min=<span class="number">3</span>, tm_sec=<span class="number">27</span>, tm_wday=<span class="number">4</span>, tm_yday=<span class="number">125</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>atime = time.localtime()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.mktime(atime)	<span class="comment"># 把元组转换为时间戳</span></span><br><span class="line"><span class="number">1683281060.0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.sleep(<span class="number">3</span>)		<span class="comment"># 休眠3秒</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)	<span class="comment"># 把当前时间转换为字符串</span></span><br><span class="line"><span class="string">&#x27;2023-05-05 18:06:22&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把字符串转换为元组，需要指定格式</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.strptime(<span class="string">&#x27;2050-1-1 8:00:00&#x27;</span>, <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2050</span>, tm_mon=<span class="number">1</span>, tm_mday=<span class="number">1</span>, tm_hour=<span class="number">8</span>, tm_min=<span class="number">0</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">5</span>, tm_yday=<span class="number">1</span>, tm_isdst=-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>time.strftime(format[,t])</code>：把一个代表时间的元组或者<code>struct_time</code>（如由<code>time.localtime()</code>和<code>time.gmtime()</code>返回）转化为格式化的时间字符串。如果<code>t</code>未指定，将传入<code>time.localtime()</code></li>
<li><code>time.strptime(string[,format])</code>：把一个格式化时间字符串转化为<code>struct_time</code>。实际上它与<code>strftime()</code>是逆操作</li>
</ul>
<h3 id="时间样式"><a href="#时间样式" class="headerlink" title="时间样式"></a>时间样式</h3><table>
<thead>
<tr>
<th>格式</th>
<th>含义</th>
<th>格式</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>%a</td>
<td>本地简化星期名称</td>
<td>%m</td>
<td>月份(01-12)</td>
</tr>
<tr>
<td>%A</td>
<td>本地完整星期名称</td>
<td>%M</td>
<td>分钟数(00-59)</td>
</tr>
<tr>
<td>%b</td>
<td>本地简化月份名称</td>
<td>%p</td>
<td>本地am或者pm的相应符</td>
</tr>
<tr>
<td>%B</td>
<td>本地完整月份名称</td>
<td>%S</td>
<td>秒(01-61)</td>
</tr>
<tr>
<td>%c</td>
<td>本地相应的日期和时间</td>
<td>%U</td>
<td>一年中的星期数(00-53,星期日是一个星期的开始)</td>
</tr>
<tr>
<td>%d</td>
<td>一个月中的第几天(01-31)</td>
<td>%w</td>
<td>一个星期中的第几天(0-6,0是星期天)</td>
</tr>
<tr>
<td>%H</td>
<td>一天中的第几个小时(24小时制，00-23)</td>
<td>%x</td>
<td>本地相应日期</td>
</tr>
<tr>
<td>%I</td>
<td>第几个小时(12小时制，01-12)</td>
<td>%X</td>
<td>本地相应时间</td>
</tr>
<tr>
<td>%j</td>
<td>一年中的第几天(001-336)</td>
<td>%y</td>
<td>去掉世纪的年份(00-59)</td>
</tr>
<tr>
<td>%Z</td>
<td>时区的名字</td>
<td>%Y</td>
<td>完整的年份</td>
</tr>
</tbody></table>
<h2 id="案例：编写进度条"><a href="#案例：编写进度条" class="headerlink" title="案例：编写进度条"></a>案例：编写进度条</h2><ul>
<li>模拟一个进度条程序</li>
<li>首先在屏幕上打印一行#</li>
<li>@符号在这行#号中穿过去</li>
<li>当@符号到达尾部，再返回开头</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;#&#x27;</span> * <span class="number">20</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    time.sleep(<span class="number">0.3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\r%s@%s&#x27;</span> % (<span class="string">&#x27;#&#x27;</span> * counter,<span class="string">&#x27;#&#x27;</span> * (<span class="number">19</span> - counter)),end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> counter == <span class="number">20</span>:</span><br><span class="line">        counter = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h1 id="datetime模块"><a href="#datetime模块" class="headerlink" title="datetime模块"></a>datetime模块</h1><h2 id="datetime模块方法"><a href="#datetime模块方法" class="headerlink" title="datetime模块方法"></a>datetime模块方法</h2><ul>
<li><code>datetime.today()</code>：返回一个表示当前本地时间的<code>datetime</code>对象</li>
<li><code>datetime.now([tz])</code>：返回一个表示当前本地时间的<code>datetime</code>对象，如果提供了参数<code>tz</code>，则获取<code>tz</code>参数所指时区的本地时间</li>
<li><code>datetime.strptime(date_string, format)</code>：将格式字符串转换为<code>datetime</code>对象</li>
<li><code>datetime.ctime(datetime对象)</code>：返回时间格式字符串</li>
<li><code>datetime.strftime(format)</code>：返回指定格式字符串</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.now()</span><br><span class="line">datetime.datetime(<span class="number">2023</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">716231</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = datetime.now()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 年、月、日、时、分、秒、毫秒</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.year, t.month, t.day, t.hour, t.minute, t.second, t.microsecond</span><br><span class="line">(<span class="number">2023</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">38</span>, <span class="number">642509</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.time()</span><br><span class="line">datetime.time(<span class="number">20</span>, <span class="number">19</span>, <span class="number">38</span>, <span class="number">642509</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.today()</span><br><span class="line">datetime.datetime(<span class="number">2023</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">35</span>, <span class="number">599556</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.strftime(<span class="string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;2023/05/05 20:19:38&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.strptime(<span class="string">&#x27;2050-1-1 8:00:00&#x27;</span>, <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>) </span><br><span class="line">datetime.datetime(<span class="number">2050</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h2 id="时间计算"><a href="#时间计算" class="headerlink" title="时间计算"></a>时间计算</h2><ul>
<li>使用<code>timedelta</code>可以方便的在日期上做天<code>days</code>，小时<code>hours</code>，分钟，秒，毫秒，微秒的时间计算</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = datetime.datetime.now()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t</span><br><span class="line">datetime.datetime(<span class="number">2023</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">31</span>, <span class="number">47</span>, <span class="number">230203</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>days = datetime.timedelta(days=<span class="number">100</span>,hours=<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>days</span><br><span class="line">datetime.timedelta(days=<span class="number">100</span>, seconds=<span class="number">10800</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t + days</span><br><span class="line">datetime.datetime(<span class="number">2023</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">23</span>, <span class="number">31</span>, <span class="number">47</span>, <span class="number">230203</span>)</span><br></pre></td></tr></table></figure>

<h2 id="案例：取出指定时间段的文本"><a href="#案例：取出指定时间段的文本" class="headerlink" title="案例：取出指定时间段的文本"></a>案例：取出指定时间段的文本</h2><ul>
<li>有一个日志文件，按时间先后顺序记录日志</li>
<li>给定时间范围，取出该范围内的日志（9点–12点）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python pycharm]<span class="comment"># vim /tmp/myweb.log</span></span><br><span class="line"><span class="number">2030</span>-01-02 08:01:<span class="number">43</span> aaaaaaaaaaaaaaaaaaaaaaaa</span><br><span class="line"><span class="number">2030</span>-01-02 08:<span class="number">34</span>:<span class="number">23</span> bbbbbbbbbbbbbbbbbbbbbbbb</span><br><span class="line"><span class="number">2030</span>-01-02 09:<span class="number">23</span>:<span class="number">12</span> cccccccccccccccccccccccc</span><br><span class="line"><span class="number">2030</span>-01-02 <span class="number">10</span>:<span class="number">56</span>:<span class="number">13</span> dddddddddddddddddddddddd</span><br><span class="line"><span class="number">2030</span>-01-02 <span class="number">11</span>:<span class="number">38</span>:<span class="number">19</span> eeeeeeeeeeeeeeeeeeeeeeee</span><br><span class="line"><span class="number">2030</span>-01-02 <span class="number">12</span>:02:<span class="number">28</span> ffffffffffffffffffffffff</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">t9 = datetime.strptime(<span class="string">&#x27;2030-01-02 09:00:00&#x27;</span>,<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">t12 = datetime.strptime(<span class="string">&#x27;2030-01-02 12:00:00&#x27;</span>,<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/myweb.log&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">        t = datetime.strptime(line[:<span class="number">19</span>], <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># if t9 &lt;= t &lt;= t12:		# 若是有几万行就会很慢</span></span><br><span class="line">        <span class="comment">#     print(line,end=&#x27;&#x27;)</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> t &gt; t12:</span><br><span class="line">            <span class="keyword">break</span> </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> t &gt;= t9:</span><br><span class="line">            <span class="built_in">print</span>(line, end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><ul>
<li><p>当python检测到一个错误时，解释器就会指出当前流已经无法继续执行下去，这时候就出现了异常</p>
</li>
<li><p>异常是因为程序出现了错误而在正常控制流以外采取的行动</p>
</li>
<li><p>这个行为又分为两个阶段：</p>
<p>首先是引起异常发生的错误</p>
<p>然后是检测（和采取可能的措施）阶段</p>
</li>
</ul>
<h2 id="python中的异常"><a href="#python中的异常" class="headerlink" title="python中的异常"></a>python中的异常</h2><ul>
<li>当程序运行时，因为遇到未解的错误而导致中止运行，便会出现<code>traceback</code>消息，打印异常</li>
</ul>
<table>
<thead>
<tr>
<th>异常</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>NameError</td>
<td>未声明/初始化对象</td>
</tr>
<tr>
<td>IndexError</td>
<td>序列中没有此索引</td>
</tr>
<tr>
<td>SyntaxError</td>
<td>语法错误</td>
</tr>
<tr>
<td>KeyboardInterrupt</td>
<td>用户中断执行</td>
</tr>
<tr>
<td>EOFError</td>
<td>没有内建输入，到达EOF标记</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a + <span class="number">5</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">&#x27;a&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hello&#x27;</span>[<span class="number">5</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: string index out of <span class="built_in">range</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a = <span class="number">10</span>:</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> a = <span class="number">10</span>:</span><br><span class="line">         ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span> 			<span class="comment"># Ctrl + c</span></span><br><span class="line">KeyboardInterrupt</span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n = <span class="built_in">input</span>(<span class="string">&#x27;number: &#x27;</span>)</span><br><span class="line">number: Traceback (most recent call last): <span class="comment"># Ctrl + d 退出输入</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">EOFError</span><br></pre></td></tr></table></figure>

<h2 id="try-except语句"><a href="#try-except语句" class="headerlink" title="try-except语句"></a>try-except语句</h2><ul>
<li>定义了进行异常监控的一段代码，并且提供了处理异常的机制</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    try_suite		<span class="comment"># 监控这里的异常</span></span><br><span class="line"><span class="keyword">except</span> Exception[<span class="keyword">as</span> reason]:</span><br><span class="line">    except_suite	<span class="comment"># 异常处理代码</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line"><span class="meta">... </span>    f = <span class="built_in">open</span>(<span class="string">&#x27;foo.txt&#x27;</span>)</span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;No such file&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">No such file</span><br></pre></td></tr></table></figure>

<ul>
<li>可以把多个<code>except</code>语句连接在一起，处理一个<code>try</code>块中可能发生的多种异常</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line"><span class="meta">... </span>    data = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;input a number: &#x27;</span>))</span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;user cancelled&#x27;</span>)</span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> ValueError:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;you must input a number&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="built_in">input</span> a number: hello</span><br><span class="line">you must <span class="built_in">input</span> a number</span><br></pre></td></tr></table></figure>

<h2 id="异常参数"><a href="#异常参数" class="headerlink" title="异常参数"></a>异常参数</h2><ul>
<li>异常也可以有参数，异常引发后它会传递给异常处理器</li>
<li>当异常被引发后参数是作为附加帮助信息传递给异常处理器的</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="number">10</span>/<span class="number">0</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;error&#x27;</span>,e)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">error division by zero</span><br></pre></td></tr></table></figure>

<h2 id="else语句-1"><a href="#else语句-1" class="headerlink" title="else语句"></a>else语句</h2><ul>
<li>在<code>try</code>范围中没有异常被检测到时，执行<code>else</code>子句</li>
<li>在<code>else</code>范围中的任何代码运行前，<code>try</code>中的所有代码必须完全成功</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line"><span class="meta">... </span>    result = <span class="number">100</span> / <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;number: &#x27;</span>))</span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Error: &#x27;</span>,e)</span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(result)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">number: <span class="number">10</span></span><br><span class="line"><span class="number">10.0</span></span><br></pre></td></tr></table></figure>

<h2 id="finally子句"><a href="#finally子句" class="headerlink" title="finally子句"></a>finally子句</h2><ul>
<li><code>finally</code>子句是无论异常是否发生，是否捕捉都会执行的一段代码</li>
<li>如果打开文件后，因为发生异常导致文件没有关闭，可能会发生数据损坏。使用<code>finally</code>可以保证文件总是能正常的关闭</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line"><span class="meta">... </span>    n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;num: &#x27;</span>))</span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Error: &#x27;</span>,e)</span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> (KeyboardInterrupt, EOFError):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;\nBye-bye&#x27;</span>)</span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(n)</span><br><span class="line"><span class="meta">... </span><span class="keyword">finally</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Done&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">num: <span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">Done</span><br></pre></td></tr></table></figure>

<h2 id="案例：简化除法判断"><a href="#案例：简化除法判断" class="headerlink" title="案例：简化除法判断"></a>案例：简化除法判断</h2><ul>
<li>提示用户输入一个数字作为除数</li>
<li>如果用户按下Ctrl+C或Ctrl+D则退出程序</li>
<li>如果用户输入非数字字符，提示用户应该输入数字</li>
<li>如果用户输入0，提示用户0不能作为除数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    n = <span class="number">100</span> / <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;输入一个除数: &#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> (ValueError, ZeroDivisionError) <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;输入错误: &#x27;</span>,e)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> (KeyboardInterrupt,EOFError):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;退出&#x27;</span>)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>

<h1 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h1><h2 id="触发异常"><a href="#触发异常" class="headerlink" title="触发异常"></a>触发异常</h2><h3 id="raise语句"><a href="#raise语句" class="headerlink" title="raise语句"></a>raise语句</h3><ul>
<li>想要引发异常，最简单的形式就是输入关键字<code>raise</code>，后面跟要引发的异常的名称</li>
<li>只从<code>raise</code>语句时，Python会创建指定的异常类的一个对象</li>
<li><code>raise</code>语句还可以指定对异常对象进行初始化的参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">raise</span> ValueError()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">raise</span> ValueError(<span class="string">&#x27;num is error&#x27;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: num <span class="keyword">is</span> error</span><br></pre></td></tr></table></figure>

<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><ul>
<li>断言是一句必须等价于布尔值为真的判定</li>
<li>此外，发生异常也意味着表达式为假</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">10</span> &gt; <span class="number">100</span>, <span class="string">&quot;Wrong&quot;</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AssertionError: Wrong</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">10</span> &lt; <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br></pre></td></tr></table></figure>

<h2 id="案例：自定义异常"><a href="#案例：自定义异常" class="headerlink" title="案例：自定义异常"></a>案例：自定义异常</h2><ul>
<li>编写第一个函数，函数接收姓名和年龄，如果年龄不在1-120之间，产生ValueError异常</li>
<li>编写第二个函数，函数接受姓名和年龄，如果年龄不在1-120之间，产生断言异常</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_info1</span>(<span class="params">name,age</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="number">0</span> &lt; age &lt; <span class="number">120</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;name=%s, age=%s&#x27;</span> % (name,age))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_info2</span>(<span class="params">name,age</span>):</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">0</span> &lt; age &lt; <span class="number">120</span>, <span class="string">&#x27;Error&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;name=%s, age=%s&#x27;</span> % (name, age))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_info2(<span class="string">&#x27;bob&#x27;</span>,<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<h1 id="os模块"><a href="#os模块" class="headerlink" title="os模块"></a>os模块</h1><h2 id="os模块简介"><a href="#os模块简介" class="headerlink" title="os模块简介"></a>os模块简介</h2><ul>
<li>对文件系统的访问大多数通过python的<code>os</code>模块实现</li>
<li>该模块是python访问操作系统功能的主要接口</li>
<li>有些方法，如<code>copy</code>等，并没有提供，可以使用<code>shutil</code>模块作为补充</li>
</ul>
<h2 id="os模块方法"><a href="#os模块方法" class="headerlink" title="os模块方法"></a>os模块方法</h2><table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>symlink()</td>
<td>创建符号链接</td>
</tr>
<tr>
<td>listdir()</td>
<td>列出指定目录的文件</td>
</tr>
<tr>
<td>getcwd()</td>
<td>返回当前工作目录</td>
</tr>
<tr>
<td>mkdir()</td>
<td>创建目录</td>
</tr>
<tr>
<td>chmod()</td>
<td>改变权限模式</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()		<span class="comment"># 返回当前目录</span></span><br><span class="line"><span class="string">&#x27;/root/pycharm&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.listdir(<span class="string">&#x27;/opt&#x27;</span>)		<span class="comment"># 默认为当前路径</span></span><br><span class="line">[<span class="string">&#x27;rh&#x27;</span>, <span class="string">&#x27;centos&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.mkdir(<span class="string">&#x27;/tmp/mytest&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.makedirs(<span class="string">&#x27;/tmp/a/b/c/d&#x27;</span>)	<span class="comment"># 创建层级目录</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.chdir(<span class="string">&#x27;/tmp/a/b/c/d&#x27;</span>)	<span class="comment"># 切换目录</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()</span><br><span class="line"><span class="string">&#x27;/tmp/a/b/c/d&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> shutil	<span class="comment"># os模块没有copy</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.copy(<span class="string">&#x27;/etc/hosts&#x27;</span>, <span class="string">&#x27;.&#x27;</span>) <span class="comment"># 拷贝</span></span><br><span class="line"><span class="string">&#x27;./hosts&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.listdir()</span><br><span class="line">[<span class="string">&#x27;hosts&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.symlink(<span class="string">&#x27;/etc/passwd&#x27;</span>,<span class="string">&#x27;mima&#x27;</span>)	<span class="comment"># 创建链接 等同于ln -s</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.listdir()</span><br><span class="line">[<span class="string">&#x27;hosts&#x27;</span>, <span class="string">&#x27;mima&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.chmod(<span class="string">&#x27;hosts&#x27;</span>,<span class="number">0o600</span>)		<span class="comment"># 改权限，修改为8进制数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0o600</span></span><br><span class="line"><span class="number">384</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.chmod(<span class="string">&#x27;hosts&#x27;</span>,<span class="number">384</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.remove(<span class="string">&#x27;mima&#x27;</span>)		<span class="comment"># 删除文件</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.rmdir(<span class="string">&#x27;/tmp/mytest&#x27;</span>)	<span class="comment"># 删除空目录</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.unlink(<span class="string">&#x27;mima&#x27;</span>)		<span class="comment"># 删除链接文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.mkdir(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.abspath(<span class="string">&#x27;abc&#x27;</span>)	<span class="comment"># 列出指定文件的绝对路径</span></span><br><span class="line"><span class="string">&#x27;/tmp/a/b/c/d/abc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.basename(<span class="string">&#x27;/tmp/a/b/c/d/abc&#x27;</span>)	<span class="comment"># 列出文件名</span></span><br><span class="line"><span class="string">&#x27;abc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.basename(<span class="string">&#x27;/tmp/a/b/c/d/abc/&#x27;</span>)	<span class="comment"># 只返回/最左端</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.dirname(<span class="string">&#x27;/tmp/a/b/c/d/abc&#x27;</span>)	<span class="comment"># 列出所在目录名</span></span><br><span class="line"><span class="string">&#x27;/tmp/a/b/c/d&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.split(<span class="string">&#x27;/tmp/a/b/c/d/abc&#x27;</span>)	<span class="comment"># 列出所在目录和文件名</span></span><br><span class="line">(<span class="string">&#x27;/tmp/a/b/c/d&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.splitext(<span class="string">&#x27;tedu.txt&#x27;</span>)	<span class="comment"># 拓展名切割</span></span><br><span class="line">(<span class="string">&#x27;tedu&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.join(<span class="string">&#x27;/tmp/a/b/c/d&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>)	<span class="comment"># 路径拼接</span></span><br><span class="line"><span class="string">&#x27;/tmp/a/b/c/d/abc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.isabs(<span class="string">&#x27;/tmp/abc/xyz&#x27;</span>)	<span class="comment"># 判断是否为绝对路径，文件可以不存在</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.isdir(<span class="string">&#x27;/tmp/abc/xyz&#x27;</span>)	<span class="comment"># 判断是否为目录</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.isdir(<span class="string">&#x27;/tmp/a/b/c&#x27;</span>)		<span class="comment"># 文件必须存在</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.isfile(<span class="string">&#x27;/etc/hosts&#x27;</span>)	<span class="comment"># 判断是否为文件</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.islink(<span class="string">&#x27;/etc/grub2.cfg&#x27;</span>)	<span class="comment"># 判断是否为链接</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.ismount(<span class="string">&#x27;/&#x27;</span>)	<span class="comment"># 判断是否为一个挂载点</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.exists(<span class="string">&#x27;/etc/hostname&#x27;</span>)	判断是否存在</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：操作文件系统"><a href="#案例：操作文件系统" class="headerlink" title="案例：操作文件系统"></a>案例：操作文件系统</h2><ul>
<li>编写脚本</li>
<li>切换到/tmp目录下</li>
<li>创建example目录</li>
<li>切换到/tmp/example目录</li>
<li>创建test文件，并写入字符串foo bar</li>
<li>列出/tmp/example目录内容</li>
<li>打印test文件内容</li>
<li>反向操作，把test文件以及example目录删除</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">os.chdir(<span class="string">&#x27;/tmp&#x27;</span>)</span><br><span class="line">os.mkdir(<span class="string">&#x27;example&#x27;</span>)</span><br><span class="line">os.chdir(<span class="string">&#x27;/tmp/example&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/example/test&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">    fobj.write(<span class="string">&#x27;foo bar&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">os.listdir(<span class="string">&#x27;/tmp/example&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/example/test&#x27;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">    a = fobj.read()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">os.chdir(<span class="string">&#x27;/root&#x27;</span>)</span><br><span class="line">shutil.rmtree(<span class="string">&#x27;/tmp/example&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="pickle模块及案例"><a href="#pickle模块及案例" class="headerlink" title="pickle模块及案例"></a>pickle模块及案例</h1><h2 id="pickle模块"><a href="#pickle模块" class="headerlink" title="pickle模块"></a>pickle模块</h2><ul>
<li>把数据写入文件时，常规的文件方法只能把字符串对象写入。其他数据需要先转换成字符串再写入文件</li>
<li>python提供了一个标准的模块，称为<code>pickle</code>。使用它可以在一个文件中存储任何python对象，之后又可以把它完整无缺的取出来</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/a.data&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="number">100</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: write() argument must be <span class="built_in">str</span>, <span class="keyword">not</span> <span class="built_in">int</span></span><br></pre></td></tr></table></figure>

<h2 id="pickle模块方法"><a href="#pickle模块方法" class="headerlink" title="pickle模块方法"></a>pickle模块方法</h2><ul>
<li>分别调用<code>dump()</code>和<code>load()</code>可以存储、写入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shopping_file = <span class="string">&#x27;shoplist.data&#x27;</span>		<span class="comment"># 文件名</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shopping_list = [<span class="string">&#x27;apple&#x27;</span>,<span class="string">&#x27;mango&#x27;</span>,<span class="string">&#x27;carrot&#x27;</span>]	<span class="comment">#数据</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(shopping_file,<span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pickle.dump(shopping_list,f)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(shopping_file,<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stored_list = pickle.load(f)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stored_list</span><br><span class="line">[<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;carrot&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="案例：记账程序"><a href="#案例：记账程序" class="headerlink" title="案例：记账程序"></a>案例：记账程序</h2><ul>
<li>假设在记账时，有一万块钱</li>
<li>无论时开销还是收入都要进行记账</li>
<li>记账内容包括时间、金额和说明</li>
<li>记账数据要求永久存储</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> strftime</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">fname</span>):</span><br><span class="line">    date = strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line">    amount = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;金额: &#x27;</span>))</span><br><span class="line">    comment = <span class="built_in">input</span>(<span class="string">&#x27;备注: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        content = pickle.load(fobj)</span><br><span class="line"></span><br><span class="line">    balance = content[-<span class="number">1</span>][-<span class="number">2</span>] + amount</span><br><span class="line">    line = [date,amount,<span class="number">0</span>,balance,comment]</span><br><span class="line">    content.append(line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        pickle.dump(content,fobj)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cost</span>(<span class="params">fname</span>):</span><br><span class="line">    date = strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line">    amount = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;金额: &#x27;</span>))</span><br><span class="line">    comment = <span class="built_in">input</span>(<span class="string">&#x27;备注: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        content = pickle.load(fobj)</span><br><span class="line"></span><br><span class="line">    balance = content[-<span class="number">1</span>][-<span class="number">2</span>] - amount</span><br><span class="line">    line = [date, <span class="number">0</span>, amount, balance, comment]</span><br><span class="line">    content.append(line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        pickle.dump(content, fobj)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">fname</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%-12s%-8s%-8s%-12s%-20s&#x27;</span> % (<span class="string">&#x27;date&#x27;</span>,<span class="string">&#x27;save&#x27;</span>,<span class="string">&#x27;cost&#x27;</span>,<span class="string">&#x27;balance&#x27;</span>,<span class="string">&#x27;comment&#x27;</span>))</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        content = pickle.load(fobj)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> content:	<span class="comment"># 每一个%s对应元组中的每一个元素</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%-12s%-8s%-8s%-12s%-20s&#x27;</span> % <span class="built_in">tuple</span>(line))</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_menu</span>():</span><br><span class="line">    cmds = &#123;<span class="string">&#x27;1&#x27;</span>: save,<span class="string">&#x27;2&#x27;</span>: cost,<span class="string">&#x27;3&#x27;</span>:query&#125;</span><br><span class="line">    fname = <span class="string">&#x27;account.data&#x27;</span></span><br><span class="line">    init_data = [[<span class="string">&#x27;2000-1-1&#x27;</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">10000</span>,<span class="string">&#x27;init data&#x27;</span>]]</span><br><span class="line">    prompt = <span class="string">&quot;&quot;&quot;(1)收入</span></span><br><span class="line"><span class="string">(2)支出</span></span><br><span class="line"><span class="string">(3)查询</span></span><br><span class="line"><span class="string">(4)退出</span></span><br><span class="line"><span class="string">请输入你的选择(1/2/3/4): &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(fname):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">            pickle.dump(init_data,fobj)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        choice = <span class="built_in">input</span>(prompt)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;无效的选择，请重试&#x27;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\nBye-bye&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        cmds[choice](fname)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    show_menu()</span><br></pre></td></tr></table></figure>

<h1 id="函数进阶"><a href="#函数进阶" class="headerlink" title="函数进阶"></a>函数进阶</h1><h2 id="创建函数-1"><a href="#创建函数-1" class="headerlink" title="创建函数"></a>创建函数</h2><h3 id="def语句"><a href="#def语句" class="headerlink" title="def语句"></a>def语句</h3><ul>
<li>创建函数用def语句创建，语法如下：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">function_name</span>(<span class="params">arguments</span>):</span><br><span class="line">    <span class="string">&quot;function_documentation_string&quot;</span></span><br><span class="line">    function_body_suite</span><br></pre></td></tr></table></figure>

<ul>
<li>标题行由<code>def</code>关键字、函数的名字，以及参数的集合（如果有的话）组成</li>
<li><code>def</code>子句的剩余部分包括了一个虽然可选但是强烈推荐的文档字串，和必须的函数体</li>
</ul>
<h3 id="前向引用"><a href="#前向引用" class="headerlink" title="前向引用"></a>前向引用</h3><ul>
<li>函数不允许在函数为声明之前对其进行引用或者调用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in foo&#x27;</span>)</span><br><span class="line">    bar()</span><br><span class="line">    </span><br><span class="line">foo()		<span class="comment"># 报错，因为bar没有定义</span></span><br><span class="line"><span class="comment">#----------------------------------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in foo&#x27;</span>)</span><br><span class="line">    bar() </span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in bar&#x27;</span>)</span><br><span class="line"></span><br><span class="line">foo()		<span class="comment"># 正常执行，虽然bar的定义在foo定义后面</span></span><br></pre></td></tr></table></figure>

<h2 id="调用函数-1"><a href="#调用函数-1" class="headerlink" title="调用函数"></a>调用函数</h2><h3 id="函数操作符"><a href="#函数操作符" class="headerlink" title="函数操作符"></a>函数操作符</h3><ul>
<li>使用一对圆括号()调用函数，如果没有圆括号，只是对函数的引用</li>
<li>任何输入的参数都必须放置在括号中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()</span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo</span><br><span class="line">&lt;function foo at <span class="number">0x7f0c528c29d0</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h3><ul>
<li>关键字参数的概念仅仅针对函数的调用</li>
<li>这种理念是让调用者通过函数调用中的参数名字来区分参数</li>
<li>这样规范允许参数缺失或者不按顺序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">name,age</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&quot;%s is %s years old&quot;</span> % (name,age))</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>get_info(<span class="number">23</span>,<span class="string">&#x27;bob&#x27;</span>)</span><br><span class="line"><span class="number">23</span> <span class="keyword">is</span> bob years old</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>get_info(age = <span class="number">23</span>,name = <span class="string">&#x27;bob&#x27;</span>)</span><br><span class="line">bob <span class="keyword">is</span> <span class="number">23</span> years old</span><br></pre></td></tr></table></figure>

<h3 id="参数组"><a href="#参数组" class="headerlink" title="参数组"></a>参数组</h3><ul>
<li>python允许程序员执行一个没有显示定义参数的函数</li>
<li>相应的方法是通过一个把元组（非关键字参数）或字典（关键字参数）作为参数组传递给函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">func(*tuple_grp_nonkw_args,**dict_grp_kw_args)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">*args</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(args)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func1()</span><br><span class="line">()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func1(<span class="string">&#x27;tom&#x27;</span>,<span class="number">123</span>,<span class="string">&#x27;bob&#x27;</span>,<span class="number">123</span>)</span><br><span class="line">(<span class="string">&#x27;tom&#x27;</span>, <span class="number">123</span>, <span class="string">&#x27;bob&#x27;</span>, <span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">func2</span>(<span class="params">**kw_args</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(kw_args)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func2()</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func2(name=<span class="string">&#x27;tom&#x27;</span>,age=<span class="number">20</span>)</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">func3</span>(<span class="params">a, b</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> a + b</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums = (<span class="number">10</span>,<span class="number">20</span>)     </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func3(*nums)		<span class="comment"># 通过元组或列表传参数</span></span><br><span class="line"><span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">func4</span>(<span class="params">name, age</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(name,age)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict = &#123;<span class="string">&#x27;age&#x27;</span>:<span class="number">20</span>,<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;tom&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func4(**adict)		<span class="comment"># 通过字典传参数</span></span><br><span class="line">tom <span class="number">20</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：简单的加减法数学游戏"><a href="#案例：简单的加减法数学游戏" class="headerlink" title="案例：简单的加减法数学游戏"></a>案例：简单的加减法数学游戏</h2><ul>
<li>随机生成两个100以内的数字</li>
<li>随机选择加法或是减法</li>
<li>总是使用最大的数字减去最小的数字</li>
<li>如果用户答错三次，程序给出正确答案</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exam</span>():</span><br><span class="line">    num = [random.randint(<span class="number">1</span>,<span class="number">100</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line">    num.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    op = random.choice(<span class="string">&#x27;+-&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> op == <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        result = num[<span class="number">0</span>] + num[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        result = num[<span class="number">0</span>] - num[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    prompt = <span class="string">&#x27;%s %s %s = &#x27;</span> % (num[<span class="number">0</span>],op,num[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> counter &lt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            aswer = <span class="built_in">int</span>(<span class="built_in">input</span>(prompt))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>()</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> aswer == result:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Very Good!!!&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Wrong Answer!!!&#x27;</span>)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s%s&#x27;</span> % (prompt,result))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">game</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        exam()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            yn = <span class="built_in">input</span>(<span class="string">&#x27;Continue(y/n)?  &#x27;</span>).strip()[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">except</span> IndexError:</span><br><span class="line">            yn = <span class="string">&#x27;y&#x27;</span></span><br><span class="line">        <span class="keyword">except</span> (KeyboardInterrupt,EOFError):</span><br><span class="line">            yn = <span class="string">&#x27;n&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> yn <span class="keyword">in</span> <span class="string">&#x27;nN&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\nBye-bye&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    game()</span><br></pre></td></tr></table></figure>

<h1 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h1><h2 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h2><ul>
<li>python允许用<code>lambda</code>关键字创造匿名函数</li>
<li>匿名函数是因为不需要以标准的<code>def</code>方式来声明</li>
<li>一个完整的<code>lambda</code>“语句”代表了一个表达式，这个表达式的定义体必须和声明放在同一行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> [arg1[,arg2,...argN]]: expression</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="keyword">lambda</span> x,y: x + y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure>

<h2 id="filter-函数"><a href="#filter-函数" class="headerlink" title="filter()函数"></a>filter()函数</h2><ul>
<li><code>filter(func,seq)</code>：调用一个布尔函数<code>func</code>来迭代遍历每个序列中的元素；返回一个使<code>func</code>返回值为<code>true</code>的元素序列</li>
<li>如果布尔函数比较简单，直接使用<code>lambda</code>匿名函数就显得非常方便了</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">filter</span>(函数, 列表)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x % <span class="number">2</span>,[num <span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line">&lt;<span class="built_in">filter</span> <span class="built_in">object</span> at <span class="number">0x7f4b1da50dc0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(data)		<span class="comment"># 过滤出10以内的奇数</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure>

<h2 id="map-函数"><a href="#map-函数" class="headerlink" title="map()函数"></a>map()函数</h2><ul>
<li><code>map(func,seq)</code>：调用一个函数<code>func</code>来迭代遍历每个序列中的元素；返回一个经过<code>func</code>处理过的元素序列</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = <span class="built_in">map</span>(<span class="keyword">lambda</span> x: x * <span class="number">2</span> + <span class="number">1</span>, [num <span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(data)</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">19</span>]</span><br></pre></td></tr></table></figure>

<h2 id="reduce-函数"><a href="#reduce-函数" class="headerlink" title="reduce()函数"></a>reduce()函数</h2><ul>
<li><code>reduce(func,seq)</code>：调用一个函数<code>func</code>来迭代遍历每个序列中的元素；返回一个经过<code>func</code>处理后得到的结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> a,b:a+b,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])	<span class="comment"># 先遍历前两个参数，把计算结果和第三个参数传入</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：修改数学游戏程序"><a href="#案例：修改数学游戏程序" class="headerlink" title="案例：修改数学游戏程序"></a>案例：修改数学游戏程序</h2><ul>
<li>将数学运算改为匿名函数形式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exam</span>():</span><br><span class="line">    cmds = &#123;<span class="string">&#x27;+&#x27;</span>: <span class="keyword">lambda</span> x,y: x + y,<span class="string">&#x27;-&#x27;</span>: <span class="keyword">lambda</span> x,y: x - y&#125;</span><br><span class="line">    num = [random.randint(<span class="number">1</span>,<span class="number">100</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line">    num.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    op = random.choice(<span class="string">&#x27;+-&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    result = cmds[op](*num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># if op == &#x27;+&#x27;:</span></span><br><span class="line">    <span class="comment">#     result = num[0] + num[1]</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment">#     result = num[0] - num[1]</span></span><br><span class="line"></span><br><span class="line">    prompt = <span class="string">&#x27;%s %s %s = &#x27;</span> % (num[<span class="number">0</span>],op,num[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> counter &lt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            aswer = <span class="built_in">int</span>(<span class="built_in">input</span>(prompt))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>()</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> aswer == result:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Very Good!!!&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Wrong Answer!!!&#x27;</span>)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s%s&#x27;</span> % (prompt,result))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">game</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        exam()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            yn = <span class="built_in">input</span>(<span class="string">&#x27;Continue(y/n)?  &#x27;</span>).strip()[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">except</span> IndexError:</span><br><span class="line">            yn = <span class="string">&#x27;y&#x27;</span></span><br><span class="line">        <span class="keyword">except</span> (KeyboardInterrupt,EOFError):</span><br><span class="line">            yn = <span class="string">&#x27;n&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> yn <span class="keyword">in</span> <span class="string">&#x27;nN&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\nBye-bye&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    game()</span><br></pre></td></tr></table></figure>

<h1 id="变量作用域及偏函数"><a href="#变量作用域及偏函数" class="headerlink" title="变量作用域及偏函数"></a>变量作用域及偏函数</h1><h2 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h2><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><ul>
<li>标识符的作用域是定义为其声明在程序里的可引用范围，也就是变量的可见性</li>
<li>在一个模块中最高级别的变量有全局作用域</li>
<li>全局变量的一个特征是除非被删除掉，否则它们能存活到脚本运行结束，且对于所有的函数，它们的值都是可以被访问的</li>
</ul>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><ul>
<li><p>局部变量只是暂时的存在，仅仅只依赖于定义它们的函数现阶段是否处于活动</p>
</li>
<li><p>当一个函数调用出现时，其局部变量就进入它们的作用域。在那一刻，一个新的局部变量名就为那个对象创建了</p>
</li>
<li><p>一旦函数完成，框架被释放，变量就会离开作用域</p>
</li>
<li><p>如果局部与全局有相同名称的变量，那么函数运行时，局部变量的名称将会把全局变量名称遮盖住</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line"><span class="meta">... </span>    x = <span class="number">10</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;in foo, x=&#x27;</span>,x)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()</span><br><span class="line"><span class="keyword">in</span> foo, x= <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;in main,x=&#x27;</span>,x)</span><br><span class="line"><span class="keyword">in</span> main,x= <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h3 id="global语句"><a href="#global语句" class="headerlink" title="global语句"></a>global语句</h3><ul>
<li>因为全局变量的名字能被局部变量给遮盖掉，所以为了明确的引用一个已命名的全局变量，必须使用<code>global</code>语句</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">global</span> x</span><br><span class="line"><span class="meta">... </span>    x = <span class="number">10</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;in foo, x=&#x27;</span>,x)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()</span><br><span class="line"><span class="keyword">in</span> foo, x= <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;in main,x=&#x27;</span>,x)</span><br><span class="line"><span class="keyword">in</span> main,x= <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2><h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><ul>
<li>偏函数的概念是将函数式编程的概念和默认参数以及可变参数结合在一起</li>
<li>一个带有多个参数的函数，如果其中某些参数基本上固定的，那么就可以通过偏函数为这些参数赋值</li>
<li>通过<code>partial</code>来改造另外一个函数，把某一些参数固定，生成新函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b,c,d,e</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> a+b+c+d+e</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">1</span>)</span><br><span class="line"><span class="number">101</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newadd = partial(add,<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>)	<span class="comment"># 固定前4个参数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newadd(<span class="number">1</span>)</span><br><span class="line"><span class="number">101</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：创建进制转换函数"><a href="#案例：创建进制转换函数" class="headerlink" title="案例：创建进制转换函数"></a>案例：创建进制转换函数</h2><ul>
<li>修改int函数，生成的新函数int2可以转换成2进制数据</li>
<li>修改int函数，生成的新函数int8可以转换成8进制数据</li>
<li>修改int函数，生成的新函数int16可以转换成16进制数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2 = partial(<span class="built_in">int</span>,base=<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">&#x27;101011&#x27;</span>)</span><br><span class="line"><span class="number">43</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int8 = partial(<span class="built_in">int</span>,base=<span class="number">8</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int8(<span class="string">&#x27;10&#x27;</span>)</span><br><span class="line"><span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int16 = partial(<span class="built_in">int</span>,base=<span class="number">16</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int16(<span class="string">&#x27;10&#x27;</span>)</span><br><span class="line"><span class="number">16</span></span><br></pre></td></tr></table></figure>

<h1 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h1><h2 id="递归函数-1"><a href="#递归函数-1" class="headerlink" title="递归函数"></a>递归函数</h2><ul>
<li>如果函数包含了对其自身的调用，该函数就是递归的</li>
<li>在操作系统中，查看某一目录内所有文件等操作都是递归的应用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">num</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> num == <span class="number">1</span>:</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> num * func(num - <span class="number">1</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(func(<span class="number">5</span>))</span><br><span class="line"><span class="number">120</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(func(<span class="number">10</span>))</span><br><span class="line"><span class="number">3628800</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：快速排序"><a href="#案例：快速排序" class="headerlink" title="案例：快速排序"></a>案例：快速排序</h2><ul>
<li>随机生成10个数字</li>
<li>利用递归，实现快速排序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">qsort</span>(<span class="params">seq</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(seq) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> seq</span><br><span class="line"></span><br><span class="line">    middle = seq[<span class="number">0</span>]</span><br><span class="line">    smaller = []</span><br><span class="line">    larger = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> seq[<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">if</span> item &lt;= middle:</span><br><span class="line">            smaller.append(item)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            larger.append(item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> qsort(smaller) + [middle] + qsort(larger)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    nums = [randint(<span class="number">1</span>,<span class="number">100</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">    <span class="built_in">print</span>(nums)</span><br><span class="line">    <span class="built_in">print</span>(qsort(nums))</span><br></pre></td></tr></table></figure>

<h1 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h1><h2 id="生成器-1"><a href="#生成器-1" class="headerlink" title="生成器"></a>生成器</h2><ul>
<li>从句法上讲，生成器是一个带<code>yield</code>语句的函数</li>
<li>一个函数或者子程序只返回一次，但一个生成器能暂停执行并返回一个中间的结果</li>
<li><code>yield</code>语句返回一个值给调用者并暂停执行</li>
<li>当生成器的<code>next()</code>方法被调用的时候，它会准确的从离开地方继续</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">mygen</span>():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">100</span>			<span class="comment"># 相当于return，可以有多个</span></span><br><span class="line"><span class="meta">... </span>    a = <span class="number">10</span> + <span class="number">5</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> a</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mg = mygen()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mg</span><br><span class="line">&lt;generator <span class="built_in">object</span> mygen at <span class="number">0x7f279c76f190</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(mg)</span><br><span class="line">[<span class="number">100</span>, <span class="number">15</span>, <span class="string">&#x27;hello world&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(mg)			<span class="comment"># 通过yield返回的值只能取一次值</span></span><br><span class="line">[]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mg1 = mygen()		<span class="comment"># 需要重新赋值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> data <span class="keyword">in</span> mg1:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(data)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="number">15</span></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>

<h2 id="生成器表达式"><a href="#生成器表达式" class="headerlink" title="生成器表达式"></a>生成器表达式</h2><ul>
<li>生成器的另一种形式是生成器表达式</li>
<li>生成器表达式的语法与列表解析一样</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums = (randint(<span class="number">1</span>,<span class="number">100</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))	<span class="comment"># 比列表节省空间</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x7f279c76feb0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">53</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">37</span></span><br><span class="line"><span class="number">38</span></span><br><span class="line"><span class="number">53</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="案例：文件生成器"><a href="#案例：文件生成器" class="headerlink" title="案例：文件生成器"></a>案例：文件生成器</h2><ul>
<li>通过生成器完成以下功能：</li>
<li>使用函数实现生成器</li>
<li>函数接受一个文件对象作为参数</li>
<li>生成器函数每次返回文件的10行数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">file</span>(<span class="params">fobj</span>):</span><br><span class="line">    lines = []</span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">        lines.append(line)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> counter == <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">yield</span> lines</span><br><span class="line">            lines = []</span><br><span class="line">            counter = <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">    <span class="keyword">if</span> lines:</span><br><span class="line">        <span class="keyword">yield</span> lines</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    fname = <span class="string">&#x27;/etc/passwd&#x27;</span></span><br><span class="line">    fobj = <span class="built_in">open</span>(fname)</span><br><span class="line">    <span class="keyword">for</span> block <span class="keyword">in</span> file(fobj):</span><br><span class="line">        <span class="built_in">print</span>(block)</span><br><span class="line"></span><br><span class="line">    fobj.close()</span><br></pre></td></tr></table></figure>

<h1 id="模块详解"><a href="#模块详解" class="headerlink" title="模块详解"></a>模块详解</h1><h2 id="模块和文件"><a href="#模块和文件" class="headerlink" title="模块和文件"></a>模块和文件</h2><h3 id="什么是模块"><a href="#什么是模块" class="headerlink" title="什么是模块"></a>什么是模块</h3><ul>
<li>模块支持从逻辑上组织python代码</li>
<li>当代码量变得相当大的时候，最好把代码分出一些有组织的代码段</li>
<li>代码片段相互间有一定的联系，可能是一个包含数据成员和方法的类，也可能是一组相关但彼此独立的操作函数</li>
<li>这些代码是共享的，所以python允许“调用”一个模块，允许使用其他模块的属性来利用之前的工作成果，实现代码重用</li>
</ul>
<h3 id="模块文件"><a href="#模块文件" class="headerlink" title="模块文件"></a>模块文件</h3><ul>
<li>说模块是安装逻辑来组织python代码的方法，文件是物理层上组织模块的方法</li>
<li>一个文件被看作是一个独立模块，一个模块也可以被看作是一个文件</li>
<li>模块的文件名就是模块的名字加上扩展名<code>.py</code></li>
</ul>
<h3 id="搜索路径"><a href="#搜索路径" class="headerlink" title="搜索路径"></a>搜索路径</h3><ul>
<li>模块的导入需要一个叫做“搜索路径”的过程</li>
<li>python在文件系统“预定义区域”中查找要调用的模块</li>
<li>搜索路径在<code>sys.path</code>中定义</li>
<li>也可以通过<code>PYTHONPATH</code>环境变量引入自定义目录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.path</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;/usr/local/lib/python39.zip&#x27;</span>, <span class="string">&#x27;/usr/local/lib/python3.9&#x27;</span>, <span class="string">&#x27;/usr/local/lib/python3.9/lib-dynload&#x27;</span>, <span class="string">&#x27;/root/mypy/lib/python3.9/site-packages&#x27;</span>]</span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># mkdir /tmp/mylib</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># mv ping.py /tmp/mylib/</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> ping</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ModuleNotFoundError: No module named <span class="string">&#x27;ping&#x27;</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># export PYTHONPATH=/tmp/mylib</span></span><br><span class="line">(mypy) [root@python pycharm]<span class="comment"># python</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> ping</span><br></pre></td></tr></table></figure>

<h2 id="内置模块"><a href="#内置模块" class="headerlink" title="内置模块"></a>内置模块</h2><h3 id="tarfile模块"><a href="#tarfile模块" class="headerlink" title="tarfile模块"></a>tarfile模块</h3><ul>
<li><code>tarfile</code>模块允许创建、访问<code>tar</code>文件</li>
<li>同时支持<code>gzip、bzip2</code>格式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> tarfile</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tar = tarfile.<span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd.tar.gz&#x27;</span>,<span class="string">&#x27;w:gz&#x27;</span>)	<span class="comment"># 以写模式打开，为gz类型</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tar.add(<span class="string">&#x27;/tmp/passwd&#x27;</span>)	<span class="comment"># 压缩文件</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tar.close()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tar = tarfile.<span class="built_in">open</span>(<span class="string">&#x27;/tmp/passwd.tar.gz&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tar.extractall(path=<span class="string">&#x27;/var/tmp&#x27;</span>)	<span class="comment"># 解压文件，默认当前路径</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tar.close()</span><br></pre></td></tr></table></figure>

<h3 id="hashlib模块"><a href="#hashlib模块" class="headerlink" title="hashlib模块"></a>hashlib模块</h3><ul>
<li><code>hashlib</code>用来替换<code>md5</code>和<code>sha</code>模块，并使它们的API一致，专门提供<code>hash</code>算法</li>
<li>包括<code>md5、sha1、sha224、sha256、sha384、sha512</code>，使用非常简单方便</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = hashlib.md5(<span class="string">b&#x27;123456&#x27;</span>)	<span class="comment"># 把123456传入</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.hexdigest()</span><br><span class="line"><span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m1 = hashlib.md5()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m1.update(<span class="string">b&#x27;12&#x27;</span>)			<span class="comment"># 更新/添加数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m1.update(<span class="string">b&#x27;34&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m1.update(<span class="string">b&#x27;56&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m1.hexdigest()</span><br><span class="line"><span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m2 = hashlib.md5()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m2.update(<span class="string">b&#x27;hello world!&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m2.hexdigest()</span><br><span class="line"><span class="string">&#x27;fc3ff98e8c6a0d3087d515c0473f8677&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：计算文件md5值"><a href="#案例：计算文件md5值" class="headerlink" title="案例：计算文件md5值"></a>案例：计算文件md5值</h2><ul>
<li>编写用于计算文件md5值的脚本</li>
<li>文件名通过位置参数获得</li>
<li>打印出文件md5值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_md5</span>(<span class="params">fname</span>):</span><br><span class="line">    m = hashlib.md5()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            data = fobj.read(<span class="number">4096</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            m.update(data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> m.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># print(check_md5(sys.argv[1]))</span></span><br><span class="line">    <span class="built_in">print</span>(check_md5(<span class="string">&#x27;/etc/hosts&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h1 id="模块作业讲解"><a href="#模块作业讲解" class="headerlink" title="模块作业讲解"></a>模块作业讲解</h1><h2 id="案例：备份程序"><a href="#案例：备份程序" class="headerlink" title="案例：备份程序"></a>案例：备份程序</h2><ul>
<li>需要支持完全备份和增量备份</li>
<li>周一执行完全备份</li>
<li>其他时间执行增量备份</li>
<li>备份文件需要打包为tar文件并使用gzip格式压缩</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要拼接出文件名</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> time <span class="keyword">import</span> strftime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>src = <span class="string">&#x27;/tmp/demo/security&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dst = <span class="string">&#x27;/tmp/demo/backup&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fname = os.path.basename(src)	<span class="comment"># 取出单个文件名</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fname</span><br><span class="line"><span class="string">&#x27;security&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fname = <span class="string">&#x27;%s_full_%s.tar.gz&#x27;</span> % (fname, strftime(<span class="string">&#x27;%Y%m%d&#x27;</span>))				<span class="comment"># 取出最后文件名</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fname</span><br><span class="line"><span class="string">&#x27;security_full_20230508.tar.gz&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.join(dst,fname)			<span class="comment"># 拼接</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/backup/security_full_20230508.tar.gz&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过md5值来判断是否新增数据，而md5值的计算需要知道目录下有多少文件</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.walk(<span class="string">&#x27;/tmp/demo/security&#x27;</span>)</span><br><span class="line">&lt;generator <span class="built_in">object</span> _walk at <span class="number">0x7f92b2e65b30</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(os.walk(<span class="string">&#x27;/tmp/demo/security&#x27;</span>))</span><br><span class="line">[(<span class="string">&#x27;/tmp/demo/security&#x27;</span>, [<span class="string">&#x27;console.apps&#x27;</span>, <span class="string">&#x27;console.perms.d&#x27;</span>, <span class="string">&#x27;limits.d&#x27;</span>, <span class="string">&#x27;namespace.d&#x27;</span>], [<span class="string">&#x27;pwquality.conf&#x27;</span>, <span class="string">&#x27;access.conf&#x27;</span>, <span class="string">&#x27;chroot.conf&#x27;</span>, <span class="string">&#x27;console.handlers&#x27;</span>, <span class="string">&#x27;console.perms&#x27;</span>, <span class="string">&#x27;group.conf&#x27;</span>, <span class="string">&#x27;limits.conf&#x27;</span>, <span class="string">&#x27;namespace.conf&#x27;</span>, <span class="string">&#x27;namespace.init&#x27;</span>, <span class="string">&#x27;opasswd&#x27;</span>, <span class="string">&#x27;pam_env.conf&#x27;</span>, <span class="string">&#x27;sepermit.conf&#x27;</span>, <span class="string">&#x27;time.conf&#x27;</span>]), (<span class="string">&#x27;/tmp/demo/security/console.apps&#x27;</span>, [], [<span class="string">&#x27;xserver&#x27;</span>, <span class="string">&#x27;config-util&#x27;</span>, <span class="string">&#x27;liveinst&#x27;</span>, <span class="string">&#x27;setup&#x27;</span>]), (<span class="string">&#x27;/tmp/demo/security/console.perms.d&#x27;</span>, [], []), (<span class="string">&#x27;/tmp/demo/security/limits.d&#x27;</span>, [], [<span class="string">&#x27;20-nproc.conf&#x27;</span>]), (<span class="string">&#x27;/tmp/demo/security/namespace.d&#x27;</span>, [], [])]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = <span class="built_in">list</span>(os.walk(<span class="string">&#x27;/tmp/demo/security&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">0</span>]	<span class="comment"># (目录),[子目录],[目录下文件]</span></span><br><span class="line">(<span class="string">&#x27;/tmp/demo/security&#x27;</span>, [<span class="string">&#x27;console.apps&#x27;</span>, <span class="string">&#x27;console.perms.d&#x27;</span>, <span class="string">&#x27;limits.d&#x27;</span>, <span class="string">&#x27;namespace.d&#x27;</span>], [<span class="string">&#x27;pwquality.conf&#x27;</span>, <span class="string">&#x27;access.conf&#x27;</span>, <span class="string">&#x27;chroot.conf&#x27;</span>, <span class="string">&#x27;console.handlers&#x27;</span>, <span class="string">&#x27;console.perms&#x27;</span>, <span class="string">&#x27;group.conf&#x27;</span>, <span class="string">&#x27;limits.conf&#x27;</span>, <span class="string">&#x27;namespace.conf&#x27;</span>, <span class="string">&#x27;namespace.init&#x27;</span>, <span class="string">&#x27;opasswd&#x27;</span>, <span class="string">&#x27;pam_env.conf&#x27;</span>, <span class="string">&#x27;sepermit.conf&#x27;</span>, <span class="string">&#x27;time.conf&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">1</span>]	<span class="comment"># 接着遍历子目录</span></span><br><span class="line">(<span class="string">&#x27;/tmp/demo/security/console.apps&#x27;</span>, [], [<span class="string">&#x27;xserver&#x27;</span>, <span class="string">&#x27;config-util&#x27;</span>, <span class="string">&#x27;liveinst&#x27;</span>, <span class="string">&#x27;setup&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">2</span>]</span><br><span class="line">(<span class="string">&#x27;/tmp/demo/security/console.perms.d&#x27;</span>, [], [])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">3</span>]</span><br><span class="line">(<span class="string">&#x27;/tmp/demo/security/limits.d&#x27;</span>, [], [<span class="string">&#x27;20-nproc.conf&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist[<span class="number">4</span>]</span><br><span class="line">(<span class="string">&#x27;/tmp/demo/security/namespace.d&#x27;</span>, [], [])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拼接出绝对路径</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> path,folders,files <span class="keyword">in</span> os.walk(<span class="string">&#x27;/tmp/demo/security&#x27;</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line"><span class="meta">... </span>            os.path.join(path,file)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/pwquality.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/access.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/chroot.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/console.handlers&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/console.perms&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/group.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/limits.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/namespace.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/namespace.init&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/opasswd&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/pam_env.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/sepermit.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/time.conf&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/console.apps/xserver&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/console.apps/config-util&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/console.apps/liveinst&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/console.apps/setup&#x27;</span></span><br><span class="line"><span class="string">&#x27;/tmp/demo/security/limits.d/20-nproc.conf&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>函数文件</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> strftime</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_md5</span>(<span class="params">fname</span>):</span><br><span class="line">    m = hashlib.md5()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            data = fobj.read(<span class="number">4096</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            m.update(data)</span><br><span class="line">    <span class="keyword">return</span> m.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">full_backup</span>(<span class="params">src,dst,md5file</span>):</span><br><span class="line">    <span class="comment"># 拼接出文件名</span></span><br><span class="line">    fname = os.path.basename(src)</span><br><span class="line">    fname = <span class="string">&#x27;%s_full_%s.tar.gz&#x27;</span> % (fname, strftime(<span class="string">&#x27;%Y%m%d&#x27;</span>))</span><br><span class="line">    fname = os.path.join(dst,fname)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 备份，打tar包</span></span><br><span class="line">    tar = tarfile.<span class="built_in">open</span>(fname,<span class="string">&#x27;w:gz&#x27;</span>)</span><br><span class="line">    tar.add(src)</span><br><span class="line">    tar.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算md5值</span></span><br><span class="line">    md5dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> path, folders, files <span class="keyword">in</span> os.walk(src):</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            key = os.path.join(path,file)</span><br><span class="line">            md5dict[key] = check_md5(key)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将md5字典保存到文件中</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md5file,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        pickle.dump(md5dict,fobj)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">incr_backup</span>(<span class="params">src,dst,md5file</span>):</span><br><span class="line">    <span class="comment"># 拼接出文件名</span></span><br><span class="line">    fname = os.path.basename(src)</span><br><span class="line">    fname = <span class="string">&#x27;%s_incr_%s.tar.gz&#x27;</span> % (fname, strftime(<span class="string">&#x27;%Y%m%d&#x27;</span>))</span><br><span class="line">    fname = os.path.join(dst, fname)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算md5值</span></span><br><span class="line">    md5dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> path, folders, files <span class="keyword">in</span> os.walk(src):</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            key = os.path.join(path, file)</span><br><span class="line">            md5dict[key] = check_md5(key)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 读取前一天的md5值</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md5file,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        old_md5 = pickle.load(fobj)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将新增的文件和改动的文件进行打包备份</span></span><br><span class="line">    tar = tarfile.<span class="built_in">open</span>(fname,<span class="string">&#x27;w:gz&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> md5dict:</span><br><span class="line">        <span class="comment"># if key not in old_md5 or md5dict[key] != old_md5[key]:</span></span><br><span class="line">        <span class="keyword">if</span> old_md5.get(key) != md5dict[key]:</span><br><span class="line">            tar.add(key)</span><br><span class="line">    tar.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 更新md5字典文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md5file,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">        pickle.dump(md5dict,fobj)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    src = <span class="string">&#x27;/tmp/demo/security&#x27;</span></span><br><span class="line">    dst = <span class="string">&#x27;/tmp/demo/backup&#x27;</span></span><br><span class="line">    md5file = <span class="string">&#x27;/tmp/demo/md5.data&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> strftime(<span class="string">&#x27;%a&#x27;</span>) == <span class="string">&#x27;Mon&#x27;</span>:</span><br><span class="line">        full_backup(src,dst,md5file)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        incr_backup(src,dst,md5file)</span><br></pre></td></tr></table></figure>

<h1 id="OOP基础"><a href="#OOP基础" class="headerlink" title="OOP基础"></a>OOP基础</h1><h2 id="OOP基础-1"><a href="#OOP基础-1" class="headerlink" title="OOP基础"></a>OOP基础</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>类（Class）：用来描述具有相同的属性和方法的对象的集合。它定义了该集合中每个对象所共有的属性和方法。对象是类的实例</li>
<li>实例化：创建一个类的实例，类的具体对象</li>
<li>方法：类中定义函数</li>
<li>对象：通过类定义的数据结构实例。对象包括两个数据成员（类变量和实例变量）和方法</li>
</ul>
<h3 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h3><ul>
<li>使用class语句来创建一个新类，class之后为类的名称并以冒号结尾</li>
<li>类名建议使用驼峰形式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h3><ul>
<li>类是蓝图，实例时根据蓝图创建出来的具体对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy = BearToy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.size = <span class="string">&#x27;Middle&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.color = <span class="string">&#x27;Yellow&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.size</span><br><span class="line"><span class="string">&#x27;Middle&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.color</span><br><span class="line"><span class="string">&#x27;Yellow&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="绑定方法"><a href="#绑定方法" class="headerlink" title="绑定方法"></a>绑定方法</h2><h3 id="构造器方法"><a href="#构造器方法" class="headerlink" title="构造器方法"></a>构造器方法</h3><ul>
<li>当实例化类的对象时，构建器方法默认自动调用</li>
<li>实例本身作为第一个参数，传递给<code>self</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):		<span class="comment"># __init__名字固定</span></span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line"><span class="comment">#   self            size     color</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line"><span class="meta">... </span>        self.size = size</span><br><span class="line"><span class="meta">... </span>        self.color = color</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.size</span><br><span class="line"><span class="string">&#x27;small&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.color</span><br><span class="line"><span class="string">&#x27;orange&#x27;</span>z</span><br></pre></td></tr></table></figure>

<h3 id="其他绑定方法"><a href="#其他绑定方法" class="headerlink" title="其他绑定方法"></a>其他绑定方法</h3><ul>
<li>类中定义的方法需要绑定在具体的实例，由实例调用</li>
<li>实例方法需要明确调用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self,words</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;i am a %s color bear, %s&#x27;</span> % (self.color,words))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">    tidy.speak(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="案例：编写游戏人物"><a href="#案例：编写游戏人物" class="headerlink" title="案例：编写游戏人物"></a>案例：编写游戏人物</h2><ul>
<li>创建游戏角色类</li>
<li>游戏人物角色拥有名字、武器等属性</li>
<li>游戏任务具有攻击和行走的方法</li>
<li>武器通过武器类实现</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Role</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,weapon</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.weapon = weapon</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attack</span>(<span class="params">self,target</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;我是%s,正在攻击%s&#x27;</span> % (self.name,target))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lb = Role(<span class="string">&#x27;吕布&#x27;</span>,<span class="string">&#x27;方天画戟&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(lb.name,lb.weapon)</span><br><span class="line">    lb.attack(<span class="string">&#x27;张飞&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="组合和派生"><a href="#组合和派生" class="headerlink" title="组合和派生"></a>组合和派生</h1><h2 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h2><h3 id="什么是组合"><a href="#什么是组合" class="headerlink" title="什么是组合"></a>什么是组合</h3><ul>
<li>类被定义后，目标就是要把它当成一个模块来使用，并把这些对象嵌入到你的代码中去</li>
<li>组合就是让不同的类混合并加入到其他来中来增加功能和代码重用性</li>
<li>可以在一个大点的类中创建其他类的实例，实现一些其他属性和方法来增强对原来的类对象</li>
</ul>
<h3 id="组合应用"><a href="#组合应用" class="headerlink" title="组合应用"></a>组合应用</h3><ul>
<li>两个类明显不同</li>
<li>一个类是另一个类的组件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">Manufacture</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,phone,email</span>):</span><br><span class="line"><span class="meta">... </span>            self.phone = phone</span><br><span class="line"><span class="meta">... </span>            self.email = email</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color,phone,email</span>):</span><br><span class="line"><span class="meta">... </span>            self.size = size</span><br><span class="line"><span class="meta">... </span>            self.color = color</span><br><span class="line"><span class="meta">... </span>            self.vendor = Manufacture(phone,email)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;123@tidy.com&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.size</span><br><span class="line"><span class="string">&#x27;small&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.color</span><br><span class="line"><span class="string">&#x27;red&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.vendor.phone</span><br><span class="line"><span class="string">&#x27;123456&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.vendor.email</span><br><span class="line"><span class="string">&#x27;123@tidy.com&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="子类"><a href="#子类" class="headerlink" title="子类"></a>子类</h2><h3 id="创建子类"><a href="#创建子类" class="headerlink" title="创建子类"></a>创建子类</h3><ul>
<li><p>当类之间有显著的不同，并且较小的类是较大的类所需要的组件时组合表现很好，但当设计“相同的类但是有一些不同的功能”时，<code>派生</code>就是一个更加合理的选择了</p>
</li>
<li><p>OOP的更强大方面之一是能够使用一个已经定义好的类，扩展它或者对其进行修改，而不会影响系统中使用现存类的其他代码片段</p>
</li>
<li><p>OOP（面向对象设计）允许类特征在子孙类或子类中进行传承</p>
</li>
<li><p>创建子类只需要在圆括号中写明从哪个父类继承即可</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line"><span class="meta">... </span>            self.size = size</span><br><span class="line"><span class="meta">... </span>            self.color = color</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">NewBearToy</span>(<span class="title class_ inherited__">BearToy</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy = NewBearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.size</span><br><span class="line"><span class="string">&#x27;small&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tidy.color</span><br><span class="line"><span class="string">&#x27;red&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ul>
<li>继承描述了基类的属性如何“遗传”给派生类</li>
<li>子类可以继承它的基类的任何属性，不管是数据属性还是方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;i am %s bear&#x27;</span> % self.color)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewBearToy</span>(<span class="title class_ inherited__">BearToy</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = NewBearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">    tidy.speak()</span><br></pre></td></tr></table></figure>

<h3 id="通过继承覆盖方法"><a href="#通过继承覆盖方法" class="headerlink" title="通过继承覆盖方法"></a>通过继承覆盖方法</h3><ul>
<li>如果子类中有和父类同名的方法，父类方法将被覆盖</li>
<li>如果需要访问父类方法，则要调用一个未绑定的父类方法，明确给出子类的实例</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewBearToy</span>(<span class="title class_ inherited__">BearToy</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color,data</span>):</span><br><span class="line">        BearToy.__init__(self,size,color)	<span class="comment"># 把父类方法导入</span></span><br><span class="line">        <span class="comment"># super(BearToy,self).__init__(size,color) # 不同写法</span></span><br><span class="line">        self.data = data</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = NewBearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>,<span class="string">&#x27;50$&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A %s %s toy is %s&#x27;</span> % (tidy.size,tidy.color,tidy.data))</span><br></pre></td></tr></table></figure>

<h3 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h3><ul>
<li>python允许多重继承，即一个类可以是多个父类的子类，子类可以拥有所有父类的属性</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">self</span>):</span><br><span class="line"><span class="meta">... </span>            <span class="built_in">print</span>(<span class="string">&#x27;foo method&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">B</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">self</span>):</span><br><span class="line"><span class="meta">... </span>            <span class="built_in">print</span>(<span class="string">&#x27;bar method&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">C</span>(A,B):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = C()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.foo()</span><br><span class="line">foo method</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.bar()</span><br><span class="line">bar method</span><br></pre></td></tr></table></figure>

<h2 id="案例：修改游戏人物"><a href="#案例：修改游戏人物" class="headerlink" title="案例：修改游戏人物"></a>案例：修改游戏人物</h2><ul>
<li>增加武器类，使武器是人物的一个属性</li>
<li>创建法师和战士类，他们派生于相同的一个基类</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Role</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,weapon</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.weapon = weapon</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_me</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;我是%s,我使用的武器是%s&#x27;</span> % (self.name, self.weapon))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Warrior</span>(<span class="title class_ inherited__">Role</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,weapon,ride,</span>):</span><br><span class="line">        Role.__init__(self,name,weapon)</span><br><span class="line">        self.ride = ride</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_me</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;我是%s,我使用的武器是%s,坐骑是%s&#x27;</span> % (self.name, self.weapon,self.ride))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attack</span>(<span class="params">self,target</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s与%s贴身肉搏&#x27;</span> % (self.name,target))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mage</span>(<span class="title class_ inherited__">Role</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attack</span>(<span class="params">self,target</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s远程攻击%s&#x27;</span> % (self.name,target))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lb = Warrior(<span class="string">&#x27;吕布&#x27;</span>,<span class="string">&#x27;方天画戟&#x27;</span>,<span class="string">&#x27;赤兔马&#x27;</span>)</span><br><span class="line">    km = Mage(<span class="string">&#x27;孔明&#x27;</span>,<span class="string">&#x27;羽扇&#x27;</span>)</span><br><span class="line">    lb.show_me()</span><br><span class="line">    km.show_me()</span><br><span class="line">    lb.attack(<span class="string">&#x27;张飞&#x27;</span>)</span><br><span class="line">    km.attack(<span class="string">&#x27;曹操&#x27;</span>)</span><br><span class="line"></span><br><span class="line">我是吕布,我使用的武器是方天画戟,坐骑是赤兔马</span><br><span class="line">我是孔明,我使用的武器是羽扇</span><br><span class="line">吕布与张飞贴身肉搏</span><br><span class="line">孔明远程攻击曹操</span><br></pre></td></tr></table></figure>

<h1 id="类的特殊方法"><a href="#类的特殊方法" class="headerlink" title="类的特殊方法"></a>类的特殊方法</h1><h2 id="魔法方法"><a href="#魔法方法" class="headerlink" title="魔法方法"></a>魔法方法</h2><h3 id="magic基础"><a href="#magic基础" class="headerlink" title="magic基础"></a>magic基础</h3><ul>
<li>在python中，所有以“<code>__</code>”双下划线包起来的方法，都统称为“Magic Method”</li>
<li>如果对象实现（重载）了这些魔法方法中的某一个，那么这个方法就会在特殊的情况下被python所调用</li>
<li>通过<code>dir()</code>可以查看对象的全部属性</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>(<span class="number">10</span>)</span><br><span class="line">[<span class="string">&#x27;__abs__&#x27;</span>, <span class="string">&#x27;__add__&#x27;</span>, <span class="string">&#x27;__and__&#x27;</span>, <span class="string">&#x27;__bool__&#x27;</span>, <span class="string">&#x27;__ceil__&#x27;</span>, <span class="string">&#x27;__class__&#x27;</span>, <span class="string">&#x27;__delattr__&#x27;</span>, <span class="string">&#x27;__dir__&#x27;</span>, <span class="string">&#x27;__divmod__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__eq__&#x27;</span>, <span class="string">&#x27;__float__&#x27;</span>, <span class="string">&#x27;__floor__&#x27;</span>, ......]</span><br></pre></td></tr></table></figure>

<h3 id="init-方法"><a href="#init-方法" class="headerlink" title="__init__方法"></a>__init__方法</h3><ul>
<li>实例化类实例时默认会调用的方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)	<span class="comment"># 调用init方法</span></span><br><span class="line">    <span class="built_in">print</span>(tidy.size,tidy.color)</span><br></pre></td></tr></table></figure>

<h3 id="str-方法"><a href="#str-方法" class="headerlink" title="__str__方法"></a>__str__方法</h3><ul>
<li>打印/显示实例时调用的方法</li>
<li>返回字符串</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;Bear: %s %s&gt;&#x27;</span> % (self.size,self.color)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(tidy)		<span class="comment"># 调用str方法，返回字符串</span></span><br></pre></td></tr></table></figure>

<h3 id="call-方法"><a href="#call-方法" class="headerlink" title="__call__方法"></a>__call__方法</h3><ul>
<li>用于创建可调用的实例</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BearToy</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size,color</span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.color = color</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Bear: %s %s&#x27;</span> % (self.size,self.color)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;i am a %s bear&#x27;</span> % self.size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    tidy = BearToy(<span class="string">&#x27;small&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(tidy)</span><br><span class="line">    tidy()		<span class="comment"># 调用call方法</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：出版商程序"><a href="#案例：出版商程序" class="headerlink" title="案例：出版商程序"></a>案例：出版商程序</h2><ul>
<li>为出版商编写一个Book类</li>
<li>Book类有书名，作者，页数等属性</li>
<li>打印实例时，输出书名</li>
<li>调用实例时，显示该书由哪个作者编写</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,title,author,pages</span>):</span><br><span class="line">        self.title = title</span><br><span class="line">        self.author = author</span><br><span class="line">        self.pages = pages</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.title</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is %s wrote&#x27;</span> % (self.title,self.author))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    pybook = Book(<span class="string">&#x27;python核心编程&#x27;</span>,<span class="string">&#x27;韦斯利&#x27;</span>,<span class="string">&#x27;660&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(pybook)</span><br><span class="line">    pybook()</span><br></pre></td></tr></table></figure>

<h1 id="正则表达式及re模块"><a href="#正则表达式及re模块" class="headerlink" title="正则表达式及re模块"></a>正则表达式及re模块</h1><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="匹配单个字符"><a href="#匹配单个字符" class="headerlink" title="匹配单个字符"></a>匹配单个字符</h3><table>
<thead>
<tr>
<th>记号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配任意字符（换行符除外）</td>
</tr>
<tr>
<td>[…x-y…]</td>
<td>匹配字符组里的任意字符</td>
</tr>
<tr>
<td>[^…x-y…]</td>
<td>匹配不在字符组里的任意字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配任意数字，与[0-9]同义，\D取非数字</td>
</tr>
<tr>
<td>\w</td>
<td>匹配任意数字字母字符，与[0-9a-zA-z_]同义，\W取反</td>
</tr>
<tr>
<td>\s</td>
<td>匹配空白字符，与[\r\v\f\t\n]同义，\S取反</td>
</tr>
</tbody></table>
<h3 id="匹配一组字符"><a href="#匹配一组字符" class="headerlink" title="匹配一组字符"></a>匹配一组字符</h3><table>
<thead>
<tr>
<th>记号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>literal</td>
<td>匹配字符串的值</td>
</tr>
<tr>
<td>re1|re2</td>
<td>匹配正则表达式re1或re2</td>
</tr>
<tr>
<td>*</td>
<td>匹配前面出现的正则表达式零次或多次</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面出现的正则表达式一次或多次</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面出现的正则表达式零次或一次</td>
</tr>
<tr>
<td>{M,N}</td>
<td>匹配前面出现的正则表达式至少M次或最多N次</td>
</tr>
</tbody></table>
<h3 id="其他元字符"><a href="#其他元字符" class="headerlink" title="其他元字符"></a>其他元字符</h3><table>
<thead>
<tr>
<th>记号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结尾</td>
</tr>
<tr>
<td>\b</td>
<td>匹配字符串的边界</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>匹配字符串的边界</td>
</tr>
<tr>
<td>()</td>
<td>对正则表达式分组</td>
</tr>
<tr>
<td>\nn</td>
<td>匹配以保存的子组，(nn为数字)</td>
</tr>
</tbody></table>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把MAC地址转换为xx:xx:xx:xx:xx:xx格式</span></span><br><span class="line">192.168.1.1    000C29123456</span><br><span class="line">192.168.1.2    525400A3B92E</span><br><span class="line"></span><br><span class="line">:%s/\(..\)\(..\)\(..\)\(..\)\(..\)\(..\)$/\1:\2:\3:\4:\5:\6/</span><br></pre></td></tr></table></figure>

<h2 id="核心方法"><a href="#核心方法" class="headerlink" title="核心方法"></a>核心方法</h2><h3 id="match函数"><a href="#match函数" class="headerlink" title="match函数"></a>match函数</h3><ul>
<li>尝试用正则表达式模式从字符串的开头匹配，如果匹配成功，则返回一个匹配对象；否则返回<code>None</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.<span class="keyword">match</span>(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;food&#x27;</span>)	<span class="comment"># 从food开头找foo</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(m)</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">3</span>), <span class="keyword">match</span>=<span class="string">&#x27;foo&#x27;</span>&gt;	<span class="comment"># 0,3 为下标</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.<span class="keyword">match</span>(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;seafood&#x27;</span>)	<span class="comment"># 从seafood开头找foo</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(m)</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure>

<h3 id="search函数"><a href="#search函数" class="headerlink" title="search函数"></a>search函数</h3><ul>
<li>在字符串中查找正则表达式模式的第一次出现，如果匹配成功，则返回一个匹配对象；否则返回<code>None</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(m)</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">3</span>), <span class="keyword">match</span>=<span class="string">&#x27;foo&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;seafood&#x27;</span>)	<span class="comment"># 可以匹配字符串中间</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(m)</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">3</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;foo&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="group方法"><a href="#group方法" class="headerlink" title="group方法"></a>group方法</h3><ul>
<li>使用<code>match</code>或<code>search</code>匹配成功后，返回的匹配对象可以通过<code>group</code>方法获得匹配内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.<span class="keyword">match</span>(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group()</span><br><span class="line"><span class="string">&#x27;foo&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group()</span><br><span class="line"><span class="string">&#x27;foo&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="findall函数"><a href="#findall函数" class="headerlink" title="findall函数"></a>findall函数</h3><ul>
<li>在字符串中查找正则表达式模式的所有（非重复）出现；返回一个匹配对象的列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;seafood is food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group()	<span class="comment"># search只匹配模式的第一次出现</span></span><br><span class="line"><span class="string">&#x27;foo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.findall(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;seafood is food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m			<span class="comment"># 获取全部的匹配项</span></span><br><span class="line">[<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="finditer函数"><a href="#finditer函数" class="headerlink" title="finditer函数"></a>finditer函数</h3><ul>
<li>和findall()函数有相同的功能，但返回的不是列表而是迭代器；对于每个匹配，该迭代器返回一个匹配对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(re.findall(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;seafood is food&#x27;</span>))</span><br><span class="line">[<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.finditer(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;seafood is food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> m:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(item.group())</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">foo</span><br><span class="line">foo</span><br></pre></td></tr></table></figure>

<h3 id="split方法"><a href="#split方法" class="headerlink" title="split方法"></a>split方法</h3><ul>
<li>根据正则表达式中的分隔符把字符分割为一个列表，并返回成功匹配的列表</li>
<li>字符串也有类型的方法，但是正则表达式更加灵活</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re	<span class="comment"># 使用.和-作为字符串的分隔符</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mylist = re.split(<span class="string">&#x27;\.|-&#x27;</span>,<span class="string">&#x27;hello-world.data&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(mylist)</span><br><span class="line">[<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>, <span class="string">&#x27;data&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="sub方法"><a href="#sub方法" class="headerlink" title="sub方法"></a>sub方法</h3><ul>
<li>把字符串中所有匹配正则表达式的地方替换成新的字符串</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.sub(<span class="string">&#x27;X&#x27;</span>,<span class="string">&#x27;Mr.Smith&#x27;</span>,<span class="string">&#x27;attn:X\nDear X&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m		<span class="comment"># 在attn:X\nDear X中把X替换成Mr.Smith</span></span><br><span class="line"><span class="string">&#x27;attn:Mr.Smith\nDear Mr.Smith&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(m)</span><br><span class="line">attn:Mr.Smith</span><br><span class="line">Dear Mr.Smith</span><br></pre></td></tr></table></figure>

<h3 id="compile函数"><a href="#compile函数" class="headerlink" title="compile函数"></a>compile函数</h3><ul>
<li>对正则表达式模式进行编译，返回一个正则表达式对象</li>
<li>不是必须要用这种方式，但是在大量匹配的情况下，可以提升效率</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>patt = re.<span class="built_in">compile</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = patt.<span class="keyword">match</span>(<span class="string">&#x27;food&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group()</span><br><span class="line"><span class="string">&#x27;foo&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：分析apache访问日志"><a href="#案例：分析apache访问日志" class="headerlink" title="案例：分析apache访问日志"></a>案例：分析apache访问日志</h2><ul>
<li>编写一个apache日志分析脚本</li>
<li>统计每个客户端访问apache服务器的次数</li>
<li>统计信息通过字典的方式显示出来</li>
<li>分别统计客户端是Firefox和MSIE的访问次数</li>
<li>分别使用函数式编程和面向对象编程的方式出现</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 日志格式</span></span><br><span class="line">[root@python ~]<span class="comment"># head -2 access_log </span></span><br><span class="line"><span class="number">192.168</span><span class="number">.216</span><span class="number">.252</span> - - [07/May/<span class="number">2023</span>:03:<span class="number">23</span>:<span class="number">37</span> +0800] <span class="string">&quot;GET /resource_providers/aggregates HTTP/1.1&quot;</span> <span class="number">200</span> <span class="number">18</span> <span class="string">&quot;-&quot;</span> <span class="string">&quot;keystoneauth1/3.4.0 python-requests/2.14.2 CPython/2.7.5&quot;</span></span><br><span class="line"><span class="number">192.168</span><span class="number">.216</span><span class="number">.252</span> - - [07/May/<span class="number">2023</span>:03:<span class="number">23</span>:<span class="number">43</span> +0800] <span class="string">&quot;GET /resource_providers/traits HTTP/1.1&quot;</span> <span class="number">200</span> <span class="number">49</span> <span class="string">&quot;-&quot;</span> <span class="string">&quot;keystoneauth1/3.4.0 python-requests/2.14.2 CPython/2.7.5&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>函数形式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_patt</span>(<span class="params">fname,patt</span>):</span><br><span class="line">    patt_dict = &#123;&#125;</span><br><span class="line">    cpatt = re.<span class="built_in">compile</span>(patt)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname) <span class="keyword">as</span> fobj:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">            m = cpatt.search(line)</span><br><span class="line">            <span class="keyword">if</span> m:</span><br><span class="line">                key = m.group()</span><br><span class="line">                patt_dict[key]  = patt_dict.get(key,<span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">                <span class="comment"># if key not in patt_dict:</span></span><br><span class="line">                <span class="comment">#     patt_dict[key] = 1</span></span><br><span class="line">                <span class="comment"># else:</span></span><br><span class="line">                <span class="comment">#     patt_dict[key] += 1</span></span><br><span class="line">    <span class="keyword">return</span> patt_dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    fname = <span class="string">&#x27;/root/access_log&#x27;</span></span><br><span class="line">    ip = <span class="string">&quot;^(\d+\.)&#123;3&#125;\d+&quot;</span>	<span class="comment"># \d表示数字+表示出现一次或多次&#123;3&#125;前面出现3次</span></span><br><span class="line">    br = <span class="string">&#x27;python-requests|Chrome&#x27;</span>	<span class="comment"># 通过什么访问</span></span><br><span class="line">    result1 = count_patt(fname,ip)</span><br><span class="line">    result2 = count_patt(fname,br)</span><br><span class="line">    <span class="built_in">print</span>(result1)</span><br><span class="line">    <span class="built_in">print</span>(result2)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#123;<span class="string">&#x27;192.168.216.252&#x27;</span>: <span class="number">16846</span>, <span class="string">&#x27;192.168.216.251&#x27;</span>: <span class="number">16855</span>, <span class="string">&#x27;192.168.216.110&#x27;</span>: <span class="number">517</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;python-requests&#x27;</span>: <span class="number">33701</span>, <span class="string">&#x27;Chrome&#x27;</span>: <span class="number">524</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>OOP形式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountPatt</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">count_patt</span>(<span class="params">self,fname,patt</span>):</span><br><span class="line">        patt_dict = &#123;&#125;</span><br><span class="line">        cpatt = re.<span class="built_in">compile</span>(patt)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(fname) <span class="keyword">as</span> fobj:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">                m = cpatt.search(line)</span><br><span class="line">                <span class="keyword">if</span> m:</span><br><span class="line">                    key = m.group()</span><br><span class="line">                    patt_dict[key]  = patt_dict.get(key,<span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> patt_dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    fname = <span class="string">&#x27;/root/access_log&#x27;</span></span><br><span class="line">    ip = <span class="string">&quot;^(\d+\.)&#123;3&#125;\d+&quot;</span></span><br><span class="line">    br = <span class="string">&#x27;python-requests|Chrome&#x27;</span></span><br><span class="line">    cp = CountPatt()</span><br><span class="line">    result1 = cp.count_patt(fname,ip)</span><br><span class="line">    result2 = cp.count_patt(fname,br)</span><br><span class="line">    <span class="built_in">print</span>(result1)</span><br><span class="line">    <span class="built_in">print</span>(result2)</span><br></pre></td></tr></table></figure>

<p><strong>或把文件名作为默认参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountPatt</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,fname</span>):</span><br><span class="line">        self.fname = fname</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">count_patt</span>(<span class="params">self,patt</span>):</span><br><span class="line">        patt_dict = &#123;&#125;</span><br><span class="line">        cpatt = re.<span class="built_in">compile</span>(patt)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(self.fname) <span class="keyword">as</span> fobj:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">                m = cpatt.search(line)</span><br><span class="line">                <span class="keyword">if</span> m:</span><br><span class="line">                    key = m.group()</span><br><span class="line">                    patt_dict[key]  = patt_dict.get(key,<span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> patt_dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    fname = <span class="string">&#x27;/root/access_log&#x27;</span></span><br><span class="line">    ip = <span class="string">&quot;^(\d+\.)&#123;3&#125;\d+&quot;</span></span><br><span class="line">    br = <span class="string">&#x27;python-requests|Chrome&#x27;</span></span><br><span class="line">    cp = CountPatt(fname)</span><br><span class="line">    result1 = cp.count_patt(ip)</span><br><span class="line">    result2 = cp.count_patt(br)</span><br><span class="line">    <span class="built_in">print</span>(result1)</span><br><span class="line">    <span class="built_in">print</span>(result2)</span><br></pre></td></tr></table></figure>

<p><strong>把返回字典排序</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict = &#123;<span class="string">&#x27;192.168.216.252&#x27;</span>: <span class="number">16846</span>, <span class="string">&#x27;192.168.216.251&#x27;</span>: <span class="number">16855</span>, <span class="string">&#x27;192.168.216.110&#x27;</span>: <span class="number">517</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict.items()</span><br><span class="line">dict_items([(<span class="string">&#x27;192.168.216.252&#x27;</span>, <span class="number">16846</span>), (<span class="string">&#x27;192.168.216.251&#x27;</span>, <span class="number">16855</span>), (<span class="string">&#x27;192.168.216.110&#x27;</span>, <span class="number">517</span>)])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(adict.items())</span><br><span class="line">[(<span class="string">&#x27;192.168.216.252&#x27;</span>, <span class="number">16846</span>), (<span class="string">&#x27;192.168.216.251&#x27;</span>, <span class="number">16855</span>), (<span class="string">&#x27;192.168.216.110&#x27;</span>, <span class="number">517</span>)]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist = <span class="built_in">list</span>(adict.items())</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[(<span class="string">&#x27;192.168.216.252&#x27;</span>, <span class="number">16846</span>), (<span class="string">&#x27;192.168.216.251&#x27;</span>, <span class="number">16855</span>), (<span class="string">&#x27;192.168.216.110&#x27;</span>, <span class="number">517</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">seq</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> seq[-<span class="number">1</span>]</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.sort(key=func1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[(<span class="string">&#x27;192.168.216.110&#x27;</span>, <span class="number">517</span>), (<span class="string">&#x27;192.168.216.252&#x27;</span>, <span class="number">16846</span>), (<span class="string">&#x27;192.168.216.251&#x27;</span>, <span class="number">16855</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过匿名函数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist.sort(key=<span class="keyword">lambda</span> seq: seq[-<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alist</span><br><span class="line">[(<span class="string">&#x27;192.168.216.251&#x27;</span>, <span class="number">16855</span>), (<span class="string">&#x27;192.168.216.252&#x27;</span>, <span class="number">16846</span>), (<span class="string">&#x27;192.168.216.110&#x27;</span>, <span class="number">517</span>)]</span><br></pre></td></tr></table></figure>

<h1 id="Python模块安装"><a href="#Python模块安装" class="headerlink" title="Python模块安装"></a>Python模块安装</h1><h2 id="PYPI介绍"><a href="#PYPI介绍" class="headerlink" title="PYPI介绍"></a>PYPI介绍</h2><ul>
<li>PYPI即PYthon Package Index</li>
<li>是Python官方的第三方库，所有人都可以下载或上传Python库到PYPI</li>
<li>官方站点为<a target="_blank" rel="noopener" href="https://pypi.org/">https://pypi.org</a></li>
</ul>
<h2 id="本地安装模块"><a href="#本地安装模块" class="headerlink" title="本地安装模块"></a>本地安装模块</h2><h3 id="本地安装pip"><a href="#本地安装pip" class="headerlink" title="本地安装pip"></a>本地安装pip</h3><ul>
<li>pip是python包管理工具</li>
<li>提供了对python包的查找、下载、安装、卸载的功能</li>
<li>默认python3已经安装，没有pip再安装</li>
<li>下载pip后解压缩并安装</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># tar xzf pip-23.1.2.tar.gz </span></span><br><span class="line">[root@python ~]<span class="comment"># cd pip-23.1.2/ </span></span><br><span class="line">[root@python pip-23.1.2]<span class="comment"># python3 setup.py install</span></span><br></pre></td></tr></table></figure>

<h3 id="安装wget"><a href="#安装wget" class="headerlink" title="安装wget"></a>安装wget</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># source mypy/bin/activate</span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># unzip wget-3.2.zip </span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># cd wget-3.2/	# 虚拟环境是python3</span></span><br><span class="line">(mypy) [root@python wget-3.2]<span class="comment"># python setup.py install</span></span><br></pre></td></tr></table></figure>

<h2 id="在线安装模块"><a href="#在线安装模块" class="headerlink" title="在线安装模块"></a>在线安装模块</h2><h3 id="使用国内镜像站点"><a href="#使用国内镜像站点" class="headerlink" title="使用国内镜像站点"></a>使用国内镜像站点</h3><ul>
<li>为了实现安装加速，可以配置<code>pip</code>安装时采用国内镜像站点</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># mkdir ./.pip</span></span><br><span class="line">[root@python ~]<span class="comment"># vim .pip/pip.conf</span></span><br><span class="line">[global]</span><br><span class="line">index-url=http://pypi.douban.com/simple/	<span class="comment"># 安装源豆瓣</span></span><br><span class="line">[install]</span><br><span class="line">trusted-host=pypi.douban.com	<span class="comment"># 信任</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># pip install requests</span></span><br></pre></td></tr></table></figure>

<h3 id="配置pip支持tab键补全"><a href="#配置pip支持tab键补全" class="headerlink" title="配置pip支持tab键补全"></a>配置pip支持tab键补全</h3><ul>
<li><code>pip</code>命令默认不支持按<code>tab键</code>提示</li>
<li>配置<code>pip</code>支持<code>tab键</code>补全的方法如下</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]# pip completion --bash &gt; /etc/bash_completion.d/pip        </span><br><span class="line">(mypy) [root@python ~]# source /etc/bash_completion.d/pip</span><br><span class="line">或</span><br><span class="line">(mypy) [root@python ~]# pip completion --bash &gt;&gt; ~/.bash_profile</span><br><span class="line">(mypy) [root@python ~]# source ~/.bash_profile</span><br></pre></td></tr></table></figure>

<h3 id="查看软件包版本"><a href="#查看软件包版本" class="headerlink" title="查看软件包版本"></a>查看软件包版本</h3><ul>
<li><code>pip</code>在线安装软件包时，默认安装最新版本</li>
<li>查看软件包版本、安装指定版本方式如下：</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># pip install wget==</span></span><br><span class="line">wget== (from versions: 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 2.0, 2.1, 2.2, 3.0, 3.1, 3.2)</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># pip install wget==3.2</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># pip uninstall wget	# 卸载</span></span><br></pre></td></tr></table></figure>

<h2 id="安装pymysql最新版本"><a href="#安装pymysql最新版本" class="headerlink" title="安装pymysql最新版本"></a>安装pymysql最新版本</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># pip install pymysql==</span></span><br><span class="line">pymysql== (from versions: 0.3, 0.4, 0.5, 0.6, 0.6.1, 0.6.2, 0.6.3, 0.6.4.dev1, 0.6.4, 0.6.6, 0.6.7, 0.7.0, 0.7.1, 0.7.2, 0.7.3, 0.7.4, 0.7.5, 0.7.6, 0.7.7, 0.7.8, 0.7.9, 0.7.10, 0.7.11, 0.8.0, 0.8.1, 0.9.0, 0.9.1, 0.9.2, 0.9.3, 0.10.0, 0.10.1, 1.0.0, 1.0.1, 1.0.2, 1.0.3rc1, 1.0.3)</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># pip install pymysql	# 默认最新版本</span></span><br><span class="line">Successfully installed pymysql-1.0.3</span><br></pre></td></tr></table></figure>

<h1 id="准备数据库"><a href="#准备数据库" class="headerlink" title="准备数据库"></a>准备数据库</h1><h2 id="数据库案例"><a href="#数据库案例" class="headerlink" title="数据库案例"></a>数据库案例</h2><h3 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h3><ul>
<li>你正在为一家小公司编写数据</li>
<li>需要记录员工的基本信息，并且记录工资发放情况</li>
<li>需要记录的数据有：姓名、性别、出生日期、联系方式、部门、发工资日、基本工资、奖金、实发工资等</li>
</ul>
<h3 id="确定所需的表"><a href="#确定所需的表" class="headerlink" title="确定所需的表"></a>确定所需的表</h3><ul>
<li><p>如果把所有数据都放在同一张表里会有很多问题，比如数据冗余、数据不一致</p>
</li>
<li><p>分为三张表</p>
<p>员工表</p>
<p>部门表</p>
<p>工资表</p>
</li>
</ul>
<h3 id="数据库范式"><a href="#数据库范式" class="headerlink" title="数据库范式"></a>数据库范式</h3><ul>
<li><p>设计关系数据库时，遵从不同的规范要求，设计出合理的<strong>关系型数据库</strong>，这些不同的<strong>规范要求</strong>被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。</p>
</li>
<li><p>数据库范式有第一范式、第二范式、第三范式、巴斯-科德范式、第四范式、第五范式六种</p>
</li>
<li><p>第一范式（1NF）要求所有字段都具有原子性</p>
</li>
<li><p>第二范式（2NF）要求数据库表中的每个实列或记录必须可以被唯一的区分</p>
</li>
<li><p>第三范式（3NF）要求任何非主属性不得传递依赖于主属性</p>
</li>
<li><p>根据1NF，联系方式不具有原子性，需要进一步拆分为家庭住址、email、电话号码等</p>
</li>
<li><p>根据2NF，每张表都需要有一个主键</p>
</li>
<li><p>根据3NF，工资表中的实发工资项不应该出现</p>
</li>
</ul>
<h2 id="案例：准备数据库"><a href="#案例：准备数据库" class="headerlink" title="案例：准备数据库"></a>案例：准备数据库</h2><ul>
<li>安装mariadb-server</li>
<li>启动服务</li>
<li>为root用户修改密码为tedu.cn</li>
<li>创建名为tedu1的数据库</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># yum install mariadb-server -y &amp;&amp; systemctl enable --now mariadb</span></span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># mysqladmin password tedu.cn</span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># mysql -uroot -ptedu.cn</span></span><br><span class="line">MariaDB [(none)]&gt; create database tedu1 default charset utf8;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| tedu1              |</span><br><span class="line">| <span class="built_in">test</span>               |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h1 id="PyMySQL模块应用"><a href="#PyMySQL模块应用" class="headerlink" title="PyMySQL模块应用"></a>PyMySQL模块应用</h1><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><ul>
<li>创建连接是访问数据库的第一步</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建连接</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    passwd=<span class="string">&#x27;tedu.cn&#x27;</span>,</span><br><span class="line">    db=<span class="string">&#x27;tedu1&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h2><ul>
<li>游标（cursor）就是游动的标识</li>
<li>通俗的说，一条<code>sql</code>取出对应n条结构资源的接口/句柄，就是游标，沿着游标可以一次取一行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建游标，通过游标可以实现对数据的增删改查</span></span><br><span class="line">cur = conn.cursor()</span><br></pre></td></tr></table></figure>

<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建连接</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    passwd=<span class="string">&#x27;tedu.cn&#x27;</span>,</span><br><span class="line">    db=<span class="string">&#x27;tedu1&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建游标，通过游标可以实现对数据的增删改查</span></span><br><span class="line">cur = conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编写创建表的sql语句</span></span><br><span class="line">create_dep = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE departments(</span></span><br><span class="line"><span class="string">dep_id INT, dep_name VARCHAR(50),</span></span><br><span class="line"><span class="string">PRIMARY KEY(dep_id)</span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line">create_emp = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE employees(</span></span><br><span class="line"><span class="string">emp_id INT, emp_name VARCHAR(50), email VARCHAR(50), dep_id INT,</span></span><br><span class="line"><span class="string">PRIMARY KEY(emp_id), FOREIGN KEY(dep_id) REFERENCES departments(dep_id)</span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line">create_sal = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE salary(</span></span><br><span class="line"><span class="string">id INT, data DATE, emp_id INT, basic INT, awards INT, </span></span><br><span class="line"><span class="string">PRIMARY KEY(id), FOREIGN KEY(emp_id) REFERENCES employees(emp_id)</span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行sql语句</span></span><br><span class="line">cur.execute(create_dep)</span><br><span class="line">cur.execute(create_emp)</span><br><span class="line">cur.execute(create_sal)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认</span></span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cur.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tedu1]&gt; show tables;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_tedu1 |</span><br><span class="line">+-----------------+</span><br><span class="line">| departments     |</span><br><span class="line">| employees       |</span><br><span class="line">| salary          |</span><br><span class="line">+-----------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><ul>
<li>对数据库做修改操作，必须要<code>commit</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert_dep = <span class="string">&#x27;INSERT INTO departments VALUES(%s, %s)&#x27;</span></span><br><span class="line">cur.execute(insert_dep, (<span class="number">1</span>, <span class="string">&#x27;人事部&#x27;</span>))	<span class="comment"># 只能插入一行</span></span><br><span class="line">cur.executemany(insert_dep, [(<span class="number">2</span>, <span class="string">&#x27;运维部&#x27;</span>),(<span class="number">3</span>, <span class="string">&#x27;开发部&#x27;</span>),(<span class="number">4</span>, <span class="string">&#x27;测试部&#x27;</span>),(<span class="number">5</span>, <span class="string">&#x27;财务部&#x27;</span>),(<span class="number">6</span>, <span class="string">&#x27;市场部&#x27;</span>)])	<span class="comment"># 可插入多行</span></span><br></pre></td></tr></table></figure>

<ul>
<li>修改为</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建连接</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    passwd=<span class="string">&#x27;tedu.cn&#x27;</span>,</span><br><span class="line">    db=<span class="string">&#x27;tedu1&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建游标，通过游标可以实现对数据的增删改查</span></span><br><span class="line">cur = conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编写创建表的sql语句</span></span><br><span class="line">create_dep = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE departments(</span></span><br><span class="line"><span class="string">dep_id INT, dep_name VARCHAR(50),</span></span><br><span class="line"><span class="string">PRIMARY KEY(dep_id)</span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line">create_emp = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE employees(</span></span><br><span class="line"><span class="string">emp_id INT, emp_name VARCHAR(50), email VARCHAR(50), dep_id INT,</span></span><br><span class="line"><span class="string">PRIMARY KEY(emp_id), FOREIGN KEY(dep_id) REFERENCES departments(dep_id)</span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line">create_sal = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE salary(</span></span><br><span class="line"><span class="string">id INT, data DATE, emp_id INT, basic INT, awards INT, </span></span><br><span class="line"><span class="string">PRIMARY KEY(id), FOREIGN KEY(emp_id) REFERENCES employees(emp_id) </span></span><br><span class="line"><span class="string">)&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行sql语句</span></span><br><span class="line"><span class="comment"># cur.execute(create_dep)</span></span><br><span class="line"><span class="comment"># cur.execute(create_emp)</span></span><br><span class="line"><span class="comment"># cur.execute(create_sal)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入部门</span></span><br><span class="line">insert_dep = <span class="string">&#x27;INSERT INTO departments VALUES(%s, %s)&#x27;</span></span><br><span class="line">cur.execute(insert_dep, (<span class="number">1</span>, <span class="string">&#x27;人事部&#x27;</span>))</span><br><span class="line">cur.executemany(insert_dep, [(<span class="number">2</span>, <span class="string">&#x27;运维部&#x27;</span>),(<span class="number">3</span>, <span class="string">&#x27;开发部&#x27;</span>),(<span class="number">4</span>, <span class="string">&#x27;测试部&#x27;</span>),(<span class="number">5</span>, <span class="string">&#x27;财务部&#x27;</span>),(<span class="number">6</span>, <span class="string">&#x27;市场部&#x27;</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认</span></span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cur.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<ul>
<li>数据库查询</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tedu1]&gt; select * from departments;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| dep_id | dep_name  |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|      1 | 人事部     |</span><br><span class="line">|      2 | 运维部     |</span><br><span class="line">|      3 | 开发部     |</span><br><span class="line">|      4 | 测试部     |</span><br><span class="line">|      5 | 财务部     |</span><br><span class="line">|      6 | 市场部     |</span><br><span class="line">+--------+-----------+</span><br><span class="line">6 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><ul>
<li>可以取出表中一条、多条或全部记录</li>
<li>把插入记录注释</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">select_dep = <span class="string">&#x27;SELECT * FROM departments&#x27;</span></span><br><span class="line">cur.execute(select_dep)</span><br><span class="line"></span><br><span class="line">result1 = cur.fetchone()		<span class="comment"># 取出第一行</span></span><br><span class="line"><span class="built_in">print</span>(result1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">result2 = cur.fetchmany(<span class="number">2</span>)		<span class="comment"># 继续向下取两行</span></span><br><span class="line"><span class="built_in">print</span>(result2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">result3 = cur.fetchall()		<span class="comment"># 继续向下取出全部数据</span></span><br><span class="line"><span class="built_in">print</span>(result3)</span><br></pre></td></tr></table></figure>

<h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><ul>
<li>通过update来修改某一字段的值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改</span></span><br><span class="line">update_dep = <span class="string">&#x27;UPDATE departments SET dep_name=%s WHERE dep_name=%s&#x27;</span></span><br><span class="line">cur.execute(update_dep, (<span class="string">&#x27;人力资源部&#x27;</span>,<span class="string">&#x27;人事部&#x27;</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tedu1]&gt; select * from departments;</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| dep_id | dep_name        |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">|      1 | 人力资源部       |</span><br><span class="line">|      2 | 运维部          |</span><br><span class="line">|      3 | 开发部          |</span><br><span class="line">|      4 | 测试部          |</span><br><span class="line">|      5 | 财务部          |</span><br><span class="line">|      6 | 市场部          |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="删除记录"><a href="#删除记录" class="headerlink" title="删除记录"></a>删除记录</h2><ul>
<li>通过delete删除记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">del_dep = <span class="string">&#x27;DELETE FROM departments WHERE dep_id=%s&#x27;</span></span><br><span class="line">cur.execute(del_dep, (<span class="number">6</span>,))	<span class="comment"># 单元素元组必须有逗号</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tedu1]&gt; select * <span class="keyword">from</span> departments;</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| dep_id | dep_name        |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">|      <span class="number">1</span> | 人力资源部      |</span><br><span class="line">|      <span class="number">2</span> | 运维部          |</span><br><span class="line">|      <span class="number">3</span> | 开发部          |</span><br><span class="line">|      <span class="number">4</span> | 测试部          |</span><br><span class="line">|      <span class="number">5</span> | 财务部          |</span><br><span class="line">+--------+-----------------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="SQLAlchemy概述"><a href="#SQLAlchemy概述" class="headerlink" title="SQLAlchemy概述"></a>SQLAlchemy概述</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>SQLAlchemy是Python编程语言下的一款开源软件。提供对象关系映射（ORM）工具，使用MIT许可证</li>
<li>SQLAlchemy“采用简单的Python语言，为高效和高性能的数据库访问设计，实现了完整的企业级持久模型”</li>
<li>SQLAlchemy理念是，SQL数据库的量级和性能重要于对象集合；而对象集合的抽象有重要于表和行</li>
<li>目标是提供能够兼容众多数据库（如SQLite、MySQL、Postaresql、Oracle、MS-SQL、SQLServer）的企业持久性模型</li>
</ul>
<h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><p><img src="../../../../images/DN/PYTHON/1.png" alt="1.png"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li>SQLAlchemy由官方收录，可以直接安装</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(venv) [root@python mypy]<span class="comment"># pip install sqlalchemy</span></span><br></pre></td></tr></table></figure>

<h2 id="连接mysql"><a href="#连接mysql" class="headerlink" title="连接mysql"></a>连接mysql</h2><ul>
<li>通过create_engine实现数据库的连接</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; create database tarena default charset utf8;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">from sqlalchemy import create_engine</span><br><span class="line"></span><br><span class="line"># 创建连接数据库的引擎</span><br><span class="line">engine = create_engine(</span><br><span class="line">    # mysql+pymysql://用户名:密码@服务器/数据库?参数</span><br><span class="line">    &#x27;mysql+pymysql://root:tedu.cn@127.0.0.1/tarena?charset=utf8&#x27;,</span><br><span class="line">    encoding=&#x27;utf8&#x27;,	# 这一步有可能报错，注释即可</span><br><span class="line">    echo=True	# 表示将日志输出到终端屏幕，默认为False</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="创建会话类"><a href="#创建会话类" class="headerlink" title="创建会话类"></a>创建会话类</h2><ul>
<li>ORM访问数据库的句柄被称为Session</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Session = sessionmaker(bing=engine)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果创建session前还未创建engine，操作如下</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Session = sessionmaker()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Session.configure(bind=engine)	<span class="comment"># 创建engine后执行</span></span><br></pre></td></tr></table></figure>

<h2 id="ORM基础"><a href="#ORM基础" class="headerlink" title="ORM基础"></a>ORM基础</h2><h3 id="ORM模型"><a href="#ORM模型" class="headerlink" title="ORM模型"></a>ORM模型</h3><ul>
<li><code>ORM</code>即对象关系映射</li>
<li>数据库是一个二维表，包含多行多列。把一个表的内容用Python的数据结构表示出来的话，可以用一个<code>list</code>表示多行，<code>list</code>的每一个元素是<code>tuple</code>，表示一行记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    (<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;Michael&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;Bob&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;Adam&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>用tuple表示一行很难看出表的结构。如果把一个tuple用class实例表示，就可以更容易的看出表结构来</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,name</span>):</span><br><span class="line">        self.<span class="built_in">id</span> = <span class="built_in">id</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    User(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;Michael&#x27;</span>),</span><br><span class="line">    User(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;Bob&#x27;</span>),</span><br><span class="line">    User(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;Adam&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="声明映射"><a href="#声明映射" class="headerlink" title="声明映射"></a>声明映射</h3><ul>
<li>当使用ORM的时候，配置过程从描述数据库开始</li>
<li>通过自定义类映射相应的表</li>
<li>通过声明系统类型实现类映射</li>
<li>首先通过声明系统，定义基类</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成实体类的基类（父类）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Base = declarative_base()</span><br></pre></td></tr></table></figure>

<h3 id="映射说明"><a href="#映射说明" class="headerlink" title="映射说明"></a>映射说明</h3><ul>
<li>数据库中的表映射为<code>sqlalchemy</code>中的类</li>
<li>数据库的字段映射为类变量，对应<code>Column</code>的实例</li>
<li>数据库中的数据类型映射为<code>sqlalchemy</code>相应的类</li>
<li>数据库表中的记录映射为类的实例</li>
</ul>
<h1 id="数据库对象管理"><a href="#数据库对象管理" class="headerlink" title="数据库对象管理"></a>数据库对象管理</h1><h2 id="创建实体类"><a href="#创建实体类" class="headerlink" title="创建实体类"></a>创建实体类</h2><h3 id="创建部门类"><a href="#创建部门类" class="headerlink" title="创建部门类"></a>创建部门类</h3><ul>
<li>一旦创建了基类，既可以创建自定义的实体类了</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column,Integer,String</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">Departments</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line"><span class="meta">... </span>    __tablename__=<span class="string">&#x27;departments&#x27;</span></span><br><span class="line"><span class="meta">... </span>    dep_id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">... </span>    dep_name = Column(String(<span class="number">20</span>),unique=<span class="literal">True</span>) <span class="comment"># 不重名</span></span><br></pre></td></tr></table></figure>

<h3 id="创建部门表"><a href="#创建部门表" class="headerlink" title="创建部门表"></a>创建部门表</h3><ul>
<li>通过实体类，可以在数据库中创建相应的表</li>
<li>如果数据库中已有相关的表，不会重新创建</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Base.metadata.create_all(engine)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行查看数据库</span></span><br><span class="line">MariaDB [tarena]&gt; desc departments;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | <span class="type">Type</span>        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| dep_id   | <span class="built_in">int</span>(<span class="number">11</span>)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| dep_name | varchar(<span class="number">20</span>) | YES  | UNI | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h2><ul>
<li>ORM映射关系也可用于表间创建外键约束</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> ForeignKey</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employees</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;employees&#x27;</span></span><br><span class="line">    emp_id = Column(Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    emp_name = Column(String(<span class="number">20</span>))</span><br><span class="line">    email = Column(String(<span class="number">50</span>))</span><br><span class="line">    dep_id = Column(Integer,ForeignKey(<span class="string">&#x27;departments.dep_id&#x27;</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tarena]&gt; show tables;</span><br><span class="line">+------------------+</span><br><span class="line">| Tables_in_tarena |</span><br><span class="line">+------------------+</span><br><span class="line">| departments      |</span><br><span class="line">| employees        |</span><br><span class="line">+------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tarena]&gt; desc employees;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| emp_id   | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| emp_name | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| email    | varchar(50) | YES  |     | NULL    |                |</span><br><span class="line">| dep_id   | int(11)     | YES  | MUL | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="创建工资表salary"><a href="#创建工资表salary" class="headerlink" title="创建工资表salary"></a>创建工资表salary</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Date</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Salary</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;salary&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    data = Column(Date)</span><br><span class="line">    emp_id = Column(Integer,ForeignKey(<span class="string">&#x27;employees.emp_id&#x27;</span>))</span><br><span class="line">    basic = Column(Integer)</span><br><span class="line">    awards = Column(Integer)</span><br></pre></td></tr></table></figure>

<ul>
<li>数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tarena]&gt; show tables;</span><br><span class="line">+------------------+</span><br><span class="line">| Tables_in_tarena |</span><br><span class="line">+------------------+</span><br><span class="line">| departments      |</span><br><span class="line">| employees        |</span><br><span class="line">| salary           |</span><br><span class="line">+------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tarena]&gt; desc salary;</span><br><span class="line">+--------+---------+------+-----+---------+----------------+</span><br><span class="line">| Field  | Type    | Null | Key | Default | Extra          |</span><br><span class="line">+--------+---------+------+-----+---------+----------------+</span><br><span class="line">| id     | int(11) | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| data   | date    | YES  |     | NULL    |                |</span><br><span class="line">| emp_id | int(11) | YES  | MUL | NULL    |                |</span><br><span class="line">| basic  | int(11) | YES  |     | NULL    |                |</span><br><span class="line">| awards | int(11) | YES  |     | NULL    |                |</span><br><span class="line">+--------+---------+------+-----+---------+----------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="完整代码文件"><a href="#完整代码文件" class="headerlink" title="完整代码文件"></a>完整代码文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine, Column, Integer, String, ForeignKey, Date</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建连接数据库的引擎</span></span><br><span class="line">engine = create_engine(</span><br><span class="line">    <span class="comment"># mysql+pymysql://用户名:密码@服务器/数据库?参数</span></span><br><span class="line">    <span class="string">&#x27;mysql+pymysql://root:tedu.cn@localhost/tarena?charset=utf8&#x27;</span>,</span><br><span class="line">    <span class="comment"># encoding=&#x27;utf8&#x27;,</span></span><br><span class="line">    <span class="comment"># echo=True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建会话类</span></span><br><span class="line">Session = sessionmaker(bind=engine)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成实体类的基类（父类）</span></span><br><span class="line">Base = declarative_base()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Departments</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;departments&#x27;</span></span><br><span class="line">    dep_id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    dep_name = Column(String(<span class="number">20</span>), unique=<span class="literal">True</span>) <span class="comment"># 不重名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employees</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;employees&#x27;</span></span><br><span class="line">    emp_id = Column(Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    emp_name = Column(String(<span class="number">20</span>))</span><br><span class="line">    email = Column(String(<span class="number">50</span>))</span><br><span class="line">    dep_id = Column(Integer,ForeignKey(<span class="string">&#x27;departments.dep_id&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Salary</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;salary&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    data = Column(Date)</span><br><span class="line">    emp_id = Column(Integer,ForeignKey(<span class="string">&#x27;employees.emp_id&#x27;</span>))</span><br><span class="line">    basic = Column(Integer)</span><br><span class="line">    awards = Column(Integer)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    Base.metadata.create_all(engine)</span><br></pre></td></tr></table></figure>

<h1 id="SQLAIchemy应用"><a href="#SQLAIchemy应用" class="headerlink" title="SQLAIchemy应用"></a>SQLAIchemy应用</h1><h2 id="添加新对象"><a href="#添加新对象" class="headerlink" title="添加新对象"></a>添加新对象</h2><ul>
<li>会话类的实例对象用于绑定到数据库</li>
<li>实例化的对象，并不打开任何连接</li>
<li>当实例初次使用，它将从Engine维护的连接池中获得一个连接</li>
<li>当所有的事务均被commit或会话对象被关闭时，连接结束</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入上面写的文件模块</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy_lizi <span class="keyword">import</span> Session,Departments,Employees</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建到数据库的会话连接</span></span><br><span class="line">session = Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建部门实例</span></span><br><span class="line">hr = Departments(dep_id=<span class="number">1</span>,dep_name=<span class="string">&#x27;人事部&#x27;</span>)</span><br><span class="line">session.add(hr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认</span></span><br><span class="line">session.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">session.close()</span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tarena]&gt; select * from departments;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| dep_id | dep_name  |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|      1 | 人事部    |</span><br><span class="line">+--------+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="批量添加新对象"><a href="#批量添加新对象" class="headerlink" title="批量添加新对象"></a>批量添加新对象</h3><ul>
<li>可以创建多个实例，批量添加记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 批量添加部门</span></span><br><span class="line">finance = Departments(dep_id=<span class="number">2</span>,dep_name=<span class="string">&#x27;财务部&#x27;</span>)</span><br><span class="line">ops = Departments(dep_id=<span class="number">3</span>,dep_name=<span class="string">&#x27;运维部&#x27;</span>)</span><br><span class="line">dev= Departments(dep_id=<span class="number">4</span>,dep_name=<span class="string">&#x27;开发部&#x27;</span>)</span><br><span class="line">qa = Departments(dep_id=<span class="number">5</span>,dep_name=<span class="string">&#x27;测试部&#x27;</span>)</span><br><span class="line">market = Departments(dep_id=<span class="number">6</span>,dep_name=<span class="string">&#x27;市场部&#x27;</span>)</span><br><span class="line">session.add_all([finance,ops,dev,qa,market])</span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tarena]&gt; select * from departments;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| dep_id | dep_name  |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|      1 | 人事部    |</span><br><span class="line">|      6 | 市场部    |</span><br><span class="line">|      4 | 开发部    |</span><br><span class="line">|      5 | 测试部    |</span><br><span class="line">|      2 | 财务部    |</span><br><span class="line">|      3 | 运维部    |</span><br><span class="line">+--------+-----------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tarena]&gt; select * from departments order by dep_id;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| dep_id | dep_name  |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|      1 | 人事部    |</span><br><span class="line">|      2 | 财务部    |</span><br><span class="line">|      3 | 运维部    |</span><br><span class="line">|      4 | 开发部    |</span><br><span class="line">|      5 | 测试部    |</span><br><span class="line">|      6 | 市场部    |</span><br><span class="line">+--------+-----------+</span><br><span class="line">6 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h3 id="批量添加员工数据"><a href="#批量添加员工数据" class="headerlink" title="批量添加员工数据"></a>批量添加员工数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 批量添加员工数据</span></span><br><span class="line">alice = Employees(</span><br><span class="line">    emp_id=<span class="number">1</span>,emp_name=<span class="string">&#x27;alice&#x27;</span>,</span><br><span class="line">    email=<span class="string">&#x27;3311@123.com&#x27;</span>,dep_id=<span class="number">1</span></span><br><span class="line">)</span><br><span class="line">bob = Employees(</span><br><span class="line">    emp_id=<span class="number">2</span>,emp_name=<span class="string">&#x27;bob&#x27;</span>,</span><br><span class="line">    email=<span class="string">&#x27;31@123.com&#x27;</span>,dep_id=<span class="number">2</span></span><br><span class="line">)</span><br><span class="line">tom = Employees(</span><br><span class="line">    emp_id=<span class="number">3</span>,emp_name=<span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    email=<span class="string">&#x27;3123.com&#x27;</span>,dep_id=<span class="number">3</span></span><br><span class="line">)</span><br><span class="line">jerry = Employees(</span><br><span class="line">    emp_id=<span class="number">4</span>,emp_name=<span class="string">&#x27;jerry&#x27;</span>,</span><br><span class="line">    email=<span class="string">&#x27;331123.com&#x27;</span>,dep_id=<span class="number">4</span></span><br><span class="line">)</span><br><span class="line">wsq = Employees(</span><br><span class="line">    emp_id=<span class="number">5</span>,emp_name=<span class="string">&#x27;wsq&#x27;</span>,</span><br><span class="line">    email=<span class="string">&#x27;3311.com&#x27;</span>,dep_id=<span class="number">5</span></span><br><span class="line">)</span><br><span class="line">llj = Employees(</span><br><span class="line">    emp_id=<span class="number">6</span>,emp_name=<span class="string">&#x27;llj&#x27;</span>,</span><br><span class="line">    email=<span class="string">&#x27;3311com&#x27;</span>,dep_id=<span class="number">6</span></span><br><span class="line">)</span><br><span class="line">session.add_all([alice,bob,tom,jerry,wsq,llj])</span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tarena]&gt; select * from employees;</span><br><span class="line">+--------+----------+--------------+--------+</span><br><span class="line">| emp_id | emp_name | email        | dep_id |</span><br><span class="line">+--------+----------+--------------+--------+</span><br><span class="line">|      1 | alice    | 3311@123.com |      1 |</span><br><span class="line">|      2 | bob      | 31@123.com   |      2 |</span><br><span class="line">|      3 | tom      | 3123.com     |      3 |</span><br><span class="line">|      4 | jerry    | 331123.com   |      4 |</span><br><span class="line">|      5 | wsq      | 3311.com     |      5 |</span><br><span class="line">|      6 | llj      | 3311com      |      6 |</span><br><span class="line">+--------+----------+--------------+--------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><h3 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h3><ul>
<li>查询时，<code>query</code>参数是类名，返回的是实例列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询所有的部门</span></span><br><span class="line">qset1 = session.query(Departments)</span><br><span class="line"><span class="comment"># print(qset1)   qset1是sql语句，此时不查询数据库，取值时才查询</span></span><br><span class="line"><span class="keyword">for</span> dep <span class="keyword">in</span> qset1:</span><br><span class="line">    <span class="built_in">print</span>(dep.dep_id,dep.dep_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> 人事部</span><br><span class="line"><span class="number">6</span> 市场部</span><br><span class="line"><span class="number">4</span> 开发部</span><br><span class="line"><span class="number">5</span> 测试部</span><br><span class="line"><span class="number">2</span> 财务部</span><br><span class="line"><span class="number">3</span> 运维部</span><br></pre></td></tr></table></figure>

<ul>
<li>查询时，<code>query</code>参数是属性，返回的是实例属性构成的元组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">qset2 = session.query(Employees.emp_name,Employees.email)</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> qset2:</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">(<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;3311@123.com&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;31@123.com&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;3123.com&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;331123.com&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;wsq&#x27;</span>, <span class="string">&#x27;3311.com&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;llj&#x27;</span>, <span class="string">&#x27;3311com&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">qset2 = session.query(Employees.emp_name,Employees.email)</span><br><span class="line"><span class="keyword">for</span> name,email <span class="keyword">in</span> qset2:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s:%s&#x27;</span> % (name,email))</span><br><span class="line"></span><br><span class="line">alice:<span class="number">3311</span>@<span class="number">123.</span>com</span><br><span class="line">bob:<span class="number">31</span>@<span class="number">123.</span>com</span><br><span class="line">tom:<span class="number">3123.</span>com</span><br><span class="line">jerry:<span class="number">331123.</span>com</span><br><span class="line">wsq:<span class="number">3311.</span>com</span><br><span class="line">llj:3311com</span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><ul>
<li>通过<code>order_by()</code>函数可以实现按指定字段排序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询部门，按id排序</span></span><br><span class="line">qset3 = session.query(Departments).order_by(Departments.dep_id)</span><br><span class="line"><span class="keyword">for</span> dep <span class="keyword">in</span> qset3:</span><br><span class="line">    <span class="built_in">print</span>(dep.dep_id,dep.dep_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> 人事部</span><br><span class="line"><span class="number">2</span> 财务部</span><br><span class="line"><span class="number">3</span> 运维部</span><br><span class="line"><span class="number">4</span> 开发部</span><br><span class="line"><span class="number">5</span> 测试部</span><br><span class="line"><span class="number">6</span> 市场部</span><br></pre></td></tr></table></figure>

<h3 id="结果过滤"><a href="#结果过滤" class="headerlink" title="结果过滤"></a>结果过滤</h3><ul>
<li>通过<code>filter()</code>函数实现结果过滤</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">qset4 = session.query(Departments).<span class="built_in">filter</span>(Departments.dep_id==<span class="number">2</span>)</span><br><span class="line"><span class="keyword">for</span> dep <span class="keyword">in</span> qset4:</span><br><span class="line">    <span class="built_in">print</span>(dep.dep_id,dep.dep_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可叠加使用，查询部门，根据id进行过滤，取出234号</span></span><br><span class="line">qset5 = session.query(Departments).<span class="built_in">filter</span>(Departments.dep_id&gt;<span class="number">1</span>)\</span><br><span class="line">    .<span class="built_in">filter</span>(Departments.dep_id&lt;<span class="number">5</span>).order_by(Departments.dep_id)</span><br><span class="line"><span class="keyword">for</span> dep <span class="keyword">in</span> qset5:</span><br><span class="line">    <span class="built_in">print</span>(dep.dep_id,dep.dep_name)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 财务部</span><br><span class="line"><span class="number">3</span> 运维部</span><br><span class="line"><span class="number">4</span> 开发部</span><br></pre></td></tr></table></figure>

<h3 id="常用过滤符"><a href="#常用过滤符" class="headerlink" title="常用过滤符"></a>常用过滤符</h3><ul>
<li>相等：’==’</li>
<li>不相等：’!=’</li>
<li>模糊查询：’.like’</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qset5 = session.query(Employees).<span class="built_in">filter</span>(Employees.email.like(<span class="string">&#x27;%.com&#x27;</span>))</span><br><span class="line"><span class="keyword">for</span> emp <span class="keyword">in</span> qset5:</span><br><span class="line">    <span class="built_in">print</span>(emp.emp_name,emp.email)</span><br></pre></td></tr></table></figure>

<ul>
<li>in：’.in_([])’</li>
<li>not in：’~Employees.email.in_([])’</li>
<li>字段为空：’.is_(None)’</li>
<li>字段不为空：’.isnot(None)’</li>
</ul>
<h3 id="查询对象返回值"><a href="#查询对象返回值" class="headerlink" title="查询对象返回值"></a>查询对象返回值</h3><ul>
<li>all()返回列表</li>
<li>first()返回结果中的第一条记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">qset8 = session.query(Employees.emp_name,Employees.email)</span><br><span class="line"><span class="built_in">print</span>(qset8.<span class="built_in">all</span>())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span> * <span class="number">30</span>)</span><br><span class="line"><span class="built_in">print</span>(qset8.first())</span><br><span class="line"></span><br><span class="line">[(<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;3311@123.com&#x27;</span>), (<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;31@123.com&#x27;</span>), (<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;3123.com&#x27;</span>), (<span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;331123.com&#x27;</span>), (<span class="string">&#x27;wsq&#x27;</span>, <span class="string">&#x27;3311.com&#x27;</span>), (<span class="string">&#x27;llj&#x27;</span>, <span class="string">&#x27;3311com&#x27;</span>)]</span><br><span class="line">******************************</span><br><span class="line">(<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;3311@123.com&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><ul>
<li>多表查询，<code>query</code>中先写<code>Employees.emp_name</code>, <code>join</code>时写<code>Departments</code></li>
<li><code>query</code>中先写<code>Deparments.dep_name</code>, <code>join</code>时写<code>Employees</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">qset9 = session.query(Employees.emp_name,Departments.dep_name)\</span><br><span class="line">    .join(Departments)</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> qset9:</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">(<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;人事部&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;财务部&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;运维部&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;开发部&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;wsq&#x27;</span>, <span class="string">&#x27;测试部&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;llj&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><ul>
<li>更新数据时，只要找到相应的记录，将其对应的实例属性重新赋值即可</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">qset10 = session.query(Departments).<span class="built_in">filter</span>(Departments.dep_name==<span class="string">&#x27;人事部&#x27;</span>)</span><br><span class="line">hr2 = qset10.first()</span><br><span class="line"><span class="built_in">print</span>(hr2)</span><br><span class="line">hr2.dep_name = <span class="string">&#x27;人力资源部&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [tarena]&gt; select * <span class="keyword">from</span> departments;</span><br><span class="line">+--------+-----------------+</span><br><span class="line">| dep_id | dep_name        |</span><br><span class="line">+--------+-----------------+</span><br><span class="line">|      <span class="number">1</span> | 人力资源部      |</span><br><span class="line">|      <span class="number">6</span> | 市场部          |</span><br><span class="line">|      <span class="number">4</span> | 开发部          |</span><br><span class="line">|      <span class="number">5</span> | 测试部          |</span><br><span class="line">|      <span class="number">2</span> | 财务部          |</span><br><span class="line">|      <span class="number">3</span> | 运维部          |</span><br><span class="line">+--------+-----------------+</span><br><span class="line"><span class="number">6</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><ul>
<li>删除时，只要找到对应的记录，将其实例进行删除</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">qset11 = session.query(Employees)\</span><br><span class="line">    .<span class="built_in">filter</span>(Employees.emp_id==<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">sales = qset11.first()</span><br><span class="line"><span class="built_in">print</span>(sales)</span><br><span class="line">session.delete(sales)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [tarena]&gt; select * <span class="keyword">from</span> employees;</span><br><span class="line">+--------+----------+--------------+--------+</span><br><span class="line">| emp_id | emp_name | email        | dep_id |</span><br><span class="line">+--------+----------+--------------+--------+</span><br><span class="line">|      <span class="number">1</span> | alice    | <span class="number">3311</span>@<span class="number">123.</span>com |      <span class="number">1</span> |</span><br><span class="line">|      <span class="number">2</span> | bob      | <span class="number">31</span>@<span class="number">123.</span>com   |      <span class="number">2</span> |</span><br><span class="line">|      <span class="number">3</span> | tom      | <span class="number">3123.</span>com     |      <span class="number">3</span> |</span><br><span class="line">|      <span class="number">4</span> | jerry    | <span class="number">331123.</span>com   |      <span class="number">4</span> |</span><br><span class="line">|      <span class="number">5</span> | wsq      | <span class="number">3311.</span>com     |      <span class="number">5</span> |</span><br><span class="line">+--------+----------+--------------+--------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h1 id="多进程概述"><a href="#多进程概述" class="headerlink" title="多进程概述"></a>多进程概述</h1><h2 id="forking工作原理"><a href="#forking工作原理" class="headerlink" title="forking工作原理"></a>forking工作原理</h2><p><strong>什么是forking</strong></p>
<ul>
<li><code>fork</code>（分岔）在Linux系统中使用非常广泛</li>
<li>当某一命令执行时，父进程（当前进程）<code>fork</code>出一个子进程</li>
<li>父进程将自身资源拷贝一份，命令在子进程中运行时，就具有和父进程完全一样的运维环境</li>
<li>（一个脚本通过<code>bash</code>就是生成子进程执行，<code>source</code>就是在当前进程执行）</li>
</ul>
<h2 id="进程的生命周期"><a href="#进程的生命周期" class="headerlink" title="进程的生命周期"></a>进程的生命周期</h2><ul>
<li>父进程<code>fork</code>出子进程并挂起</li>
<li>子进程运行完毕后，释放大部分资源并通知父进程，这个时候，子进程被称为僵尸进程</li>
<li>父进程获知子进程结束，子进程所有资源释放</li>
</ul>
<p><img src="../../../../images/DN/PYTHON/2.png" alt="2.png"></p>
<h2 id="案例：单进程、单线程ping"><a href="#案例：单进程、单线程ping" class="headerlink" title="案例：单进程、单线程ping"></a>案例：单进程、单线程ping</h2><ul>
<li>通过ping测试主机是否可达</li>
<li>如果ping不通，不管什么原因都认为主机不可用</li>
<li>需要通过ping的方式，扫描你主机所在网段的所有IP地址</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ping</span>(<span class="params">host</span>):</span><br><span class="line">    result = subprocess.run(</span><br><span class="line">        <span class="string">&#x27;ping -c2 %s &amp;&gt; /dev/null&#x27;</span> % host, shell=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s:up&#x27;</span> % host)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s:down&#x27;</span> % host)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ips = [<span class="string">&#x27;192.168.1.%s&#x27;</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">255</span>)]</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> ips:</span><br><span class="line">        ping(ip)</span><br></pre></td></tr></table></figure>

<ul>
<li>通过一个一个ip测试，会发现很慢，通过forking生成255个子进程，一次性测试255个IP会很快</li>
</ul>
<h2 id="forking编程基本思路"><a href="#forking编程基本思路" class="headerlink" title="forking编程基本思路"></a>forking编程基本思路</h2><ul>
<li>需要使用<code>os模块</code></li>
<li><code>os.fork()</code>函数实现forking功能</li>
<li>python中，绝大多数的函数只返回一次，<code>os.fork</code>将返回两次</li>
<li>对<code>fork()</code>的调用，针对父进程返回子进程的<code>PID</code>；对于子进程，返回<code>PID0</code></li>
</ul>
<h2 id="案例：forking基础应用"><a href="#案例：forking基础应用" class="headerlink" title="案例：forking基础应用"></a>案例：forking基础应用</h2><p><strong>编写一个forking脚本</strong></p>
<ul>
<li>在父进程中打印“in parent”然后睡眠10秒</li>
<li>在子进程中编写循环，循环5次，输出当前系统时间，每次循环结束后睡眠1秒</li>
<li>父子进程结束后，分别打印“parent exit”和“child exit”</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting...&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"></span><br><span class="line">(venv) [root@python new]<span class="comment"># python myfork.py </span></span><br><span class="line">starting...</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting...&#x27;</span>)</span><br><span class="line">ret_val = os.fork()	<span class="comment"># 产生一个子进程，下面命令会先在父进程执行一遍，再进入子进程执行一遍</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"></span><br><span class="line">(venv) [root@python new]<span class="comment"># python myfork.py </span></span><br><span class="line">starting...</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting...&#x27;</span>)</span><br><span class="line">ret_val = os.fork()</span><br><span class="line"><span class="keyword">if</span> ret_val:	<span class="comment"># 值非0为真</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in parent&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in child&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"></span><br><span class="line">(venv) [root@python new]<span class="comment"># python myfork.py </span></span><br><span class="line">starting...</span><br><span class="line"><span class="keyword">in</span> parent</span><br><span class="line">hello world</span><br><span class="line"><span class="keyword">in</span> child</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ret_val = os.fork()</span><br><span class="line"><span class="keyword">if</span> ret_val:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in parent&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">10</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;parent exit&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in chile&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;child exit&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="多进程应用"><a href="#多进程应用" class="headerlink" title="多进程应用"></a>多进程应用</h1><h2 id="多进程编程思路"><a href="#多进程编程思路" class="headerlink" title="多进程编程思路"></a>多进程编程思路</h2><ul>
<li>父进程负责生成子进程</li>
<li>子进程做具体的工作</li>
<li>子进程结束后彻底退出</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    ret_val = os.fork()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ret_val:	<span class="comment"># 子进程ret_val为0，取反为真</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">        exit()	<span class="comment"># 防止子进程再生成子进程</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：扫描存活主机"><a href="#案例：扫描存活主机" class="headerlink" title="案例：扫描存活主机"></a>案例：扫描存活主机</h2><ul>
<li>通过ping测试主机是否可达</li>
<li>如果ping不通，不管什么原因都认为主机不可用</li>
<li>需要通过ping的方式，扫描你主机所在网段的所有IP地址</li>
<li>通过fork方式实现并发扫描</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ping</span>(<span class="params">host</span>):</span><br><span class="line">    result = subprocess.run(</span><br><span class="line">        <span class="string">&#x27;ping -c2 %s &amp;&gt; /dev/null&#x27;</span> % host, shell=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s:up&#x27;</span> % host)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s:down&#x27;</span> % host)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ips = [<span class="string">&#x27;192.168.1.%s&#x27;</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">255</span>)]</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> ips:</span><br><span class="line">        ret_vel = os.fork()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ret_vel:</span><br><span class="line">            ping(ip) </span><br><span class="line">            exit()</span><br></pre></td></tr></table></figure>

<h2 id="僵尸进程问题"><a href="#僵尸进程问题" class="headerlink" title="僵尸进程问题"></a>僵尸进程问题</h2><p><strong>僵尸进程</strong></p>
<ul>
<li>僵尸进程没有任何可执行代码，也不可被调度</li>
<li>如果系统中存在过多的僵尸进程，将因为没有可用的进程号而导致系统不能产生新的进程</li>
<li>对于系统管理员来说，可以试图杀死父进程或重启系统来消除僵尸进程</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting&#x27;</span>)</span><br><span class="line">ret_val = os.fork()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ret_val:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in parent&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">60</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;parent done&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in child&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">15</span>)	<span class="comment"># 15秒后子进程任务完成，单父进程仍在睡眠，子进程没有任务，也在睡眠，就变成了僵尸进程</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;child done&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">************************************************************</span><br><span class="line">(venv) [root@python new]<span class="comment"># python3 zb.py </span></span><br><span class="line"></span><br><span class="line">[root@python ~]<span class="comment">#  watch -n1 ps a # 每一秒执行一次ps -a</span></span><br><span class="line">very <span class="number">1.0</span>s: ps a                                               Tue May <span class="number">30</span> <span class="number">17</span>:<span class="number">11</span>:<span class="number">59</span> <span class="number">2023</span></span><br><span class="line"></span><br><span class="line">   PID TTY	STAT   TIME COMMAND</span><br><span class="line">  <span class="number">1819</span> tty1     Ssl+   <span class="number">1</span>:09 /usr/<span class="built_in">bin</span>/X :<span class="number">0</span> -background none -noreset -audit <span class="number">4</span> -verbose -</span><br><span class="line">  <span class="number">4686</span> pts/<span class="number">0</span>    Ss     <span class="number">0</span>:<span class="number">00</span> /<span class="built_in">bin</span>/bash --rcfile /usr/local/<span class="built_in">bin</span>/pycharm/plugins/terminal/</span><br><span class="line">  <span class="number">6838</span> pts/<span class="number">1</span>    Ss     <span class="number">0</span>:<span class="number">00</span> bash</span><br><span class="line">  <span class="number">6939</span> pts/<span class="number">1</span>    Sl     <span class="number">0</span>:<span class="number">00</span> gedit</span><br><span class="line">  <span class="number">7001</span> pts/<span class="number">0</span>    S+     <span class="number">0</span>:<span class="number">00</span> python3 zb.py	<span class="comment"># 父进程</span></span><br><span class="line">  <span class="number">7002</span> pts/<span class="number">0</span>    Z+     <span class="number">0</span>:<span class="number">00</span> [python3] &lt;defunct&gt; <span class="comment"># Z僵尸进程</span></span><br><span class="line">  <span class="number">7069</span> pts/<span class="number">1</span>    S+     <span class="number">0</span>:<span class="number">00</span> watch -n1 ps a</span><br><span class="line">  <span class="number">7080</span> pts/<span class="number">1</span>    S+     <span class="number">0</span>:<span class="number">00</span> watch -n1 ps a</span><br><span class="line">  <span class="number">7081</span> pts/<span class="number">1</span>    R+     <span class="number">0</span>:<span class="number">00</span> ps a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过杀死父进程来杀死子进程“kill -9 7001”</span></span><br></pre></td></tr></table></figure>

<h2 id="解决zombie问题"><a href="#解决zombie问题" class="headerlink" title="解决zombie问题"></a>解决zombie问题</h2><ul>
<li>父进程通过<code>os.wait()</code>来得到子进程是否中止的信息</li>
<li>在子进程中止和父进程调用<code>wait()</code>之间的这段时间，子进程被称为<code>zombie</code>（僵尸）进程</li>
<li>如果子进程还没终止，父进程先退出了，那么子进程会持续工作。系统自动将子进程的父进程设置为<code>init</code>进程，<code>init</code>将来负责清理僵尸进程</li>
<li>python可以使用<code>waitpid()</code>来处理子进程</li>
<li><code>waitpid()</code>接收两个参数，第一个参数设置为<code>-1</code>，表示与<code>wait()</code>函数相同；第二参数如果设置为<code>0</code>表示挂起父进程，直到子进程退出，设置<code>1</code>表示不挂起父进程</li>
<li><code>waitpid()</code>的返回值：如果子进程尚未结束返回<code>0</code>，否则返回子进程的PID</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting&#x27;</span>)</span><br><span class="line">ret_val = os.fork()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ret_val:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in parent&#x27;</span>)</span><br><span class="line">    result = os.waitpid(-<span class="number">1</span>,<span class="number">0</span>)	<span class="comment"># 挂起父进程</span></span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;parent done&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in child&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;child done&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line">starting</span><br><span class="line"><span class="keyword">in</span> parent</span><br><span class="line"><span class="keyword">in</span> child</span><br><span class="line">child done</span><br><span class="line">(<span class="number">7358</span>, <span class="number">0</span>)		<span class="comment"># 子进程pid，若不挂起父进程返回（0,0）</span></span><br><span class="line">parent done</span><br></pre></td></tr></table></figure>

<h1 id="多线程应用"><a href="#多线程应用" class="headerlink" title="多线程应用"></a>多线程应用</h1><h2 id="多线程工作原理"><a href="#多线程工作原理" class="headerlink" title="多线程工作原理"></a>多线程工作原理</h2><h3 id="多线程的动机"><a href="#多线程的动机" class="headerlink" title="多线程的动机"></a>多线程的动机</h3><ul>
<li>在多线程（MT）编程出现之前，电脑程序的运行由一个执行程序列组成，执行序列按顺序在主机的中央处理器（CPU）中运行</li>
<li>无论是任务本身要求顺序执行还是整个程序是由多个子任务组成，程序都是按这种方式执行的</li>
<li>即使子任务相互独立，互相无关（即，一个子任务的结果不影响其他子任务的结果）时也是这样</li>
<li>如果并行运行这些相互独立的子任务可以大幅度对提升整个任务的效率</li>
</ul>
<h3 id="多线程任务的工作特点"><a href="#多线程任务的工作特点" class="headerlink" title="多线程任务的工作特点"></a>多线程任务的工作特点</h3><ul>
<li>它们本质上就是异步的，需要有多个并发事务</li>
<li>各个事务的运行顺序可以是不确定的，随机的，不可预测的</li>
<li>这样的编程任务可以被分成多个执行流，每个流都有一个要完成的目标</li>
<li>根据应用的不同，这些子任务可能都要计算出一个中间结果，用于合并得到的最后的结果</li>
</ul>
<h3 id="什么是进程"><a href="#什么是进程" class="headerlink" title="什么是进程"></a>什么是进程</h3><ul>
<li>计算机程序只不过是磁盘中可以执行的、二进制（或其他类型）的数据</li>
<li>进程（有时被称作为重量级进程）是程序的一次执行</li>
<li>每个进程都有自己的地址空间、内存以及其他记录其运行轨迹的辅助数据</li>
<li>操作系统管理在其上运行的所有进程，并为这些进程公平的分配时间</li>
</ul>
<h3 id="什么是线程"><a href="#什么是线程" class="headerlink" title="什么是线程"></a>什么是线程</h3><ul>
<li>线程（有时被称作为轻量级进程）跟进程有些相似。不同的是，所有线程运行在同一个进程中，共享相同的运行环境</li>
<li>一个进程中的各个线程之间共享同一片数据空间，所以线程之间可以比进程之间更方便的共享数据以及相互通讯</li>
</ul>
<h2 id="多线程编程"><a href="#多线程编程" class="headerlink" title="多线程编程"></a>多线程编程</h2><h3 id="多线程相关模块"><a href="#多线程相关模块" class="headerlink" title="多线程相关模块"></a>多线程相关模块</h3><ul>
<li><code>thread</code>和<code>threading</code>模块允许程序员创建和管理线程</li>
<li><code>thread</code>模块提供了基本的线程和锁的支持，而<code>threading</code>提供了更高级别、功能更强的线程管理功能</li>
<li>推荐使用更高级别的<code>threading</code>模块</li>
</ul>
<h3 id="传递函数给Thread类"><a href="#传递函数给Thread类" class="headerlink" title="传递函数给Thread类"></a>传递函数给Thread类</h3><ul>
<li><p>多线程编程有很多方法，传递函数给threading模块的Thread类是介绍的第一种方法</p>
</li>
<li><p>Threaddui对象使用start()方法开始线程的执行，使用join()方法挂起程序，直到线程结束</p>
</li>
<li><p>传递可调用类给Thread类是介绍的第二种方法</p>
</li>
<li><p>相对于一个或几个函数来说，由于类对象里可以使用类的强大的功能，可以保存更多的信息，这种方法更为灵活</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主线程只负责生成工作进程</span></span><br><span class="line"><span class="comment"># 工作线程做具体的工作</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hi</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        t = threading.Thread(target=say_hi) <span class="comment"># 创建工作线程</span></span><br><span class="line">        t.start()   <span class="comment">#  启动工作线程 target()</span></span><br><span class="line">        </span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hi</span>(<span class="params">word</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello %s&#x27;</span> % word)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        t = threading.Thread(target=say_hi, args=(<span class="string">&#x27;tedu&#x27;</span>,)) <span class="comment"># 创建工作线程</span></span><br><span class="line">        t.start()   <span class="comment">#  启动工作线程 target(*args)</span></span><br></pre></td></tr></table></figure>

<h2 id="案例：扫描存活主机-1"><a href="#案例：扫描存活主机-1" class="headerlink" title="案例：扫描存活主机"></a>案例：扫描存活主机</h2><ul>
<li>通过ping测试主机是否可达</li>
<li>如果ping不通，不管什么原因都认为主机不可用</li>
<li>通过多线程方式实现并发扫描</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ping</span>(<span class="params">host</span>):</span><br><span class="line">    result = subprocess.run(</span><br><span class="line">        <span class="string">&#x27;ping -c2 %s &amp;&gt; /dev/null&#x27;</span> % host, shell=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s:up&#x27;</span> % host)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s:down&#x27;</span> % host)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ips = [<span class="string">&#x27;192.168.1.%s&#x27;</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">255</span>)]</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> ips:</span><br><span class="line">        t = threading.Thread(target=ping, args=(ip,))</span><br><span class="line">        t.start()</span><br><span class="line"></span><br><span class="line">       ************************************************************</span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ping</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, host</span>):</span><br><span class="line">        result = subprocess.run(</span><br><span class="line">            <span class="string">&#x27;ping -c2 %s &amp;&gt; /dev/null&#x27;</span> % host, shell=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s:up&#x27;</span> % host)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s:down&#x27;</span> % host)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ips = [<span class="string">&#x27;192.168.1.%s&#x27;</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">255</span>)]</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> ips:</span><br><span class="line">        t = threading.Thread(target=Ping(), args=(ip,))</span><br><span class="line">        t.start()</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ping</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, host</span>):</span><br><span class="line">        self.host = host</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self</span>):</span><br><span class="line">        result = subprocess.run(</span><br><span class="line">            <span class="string">&#x27;ping -c2 %s &amp;&gt; /dev/null&#x27;</span> % self.host, shell=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> result.returncode == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s:up&#x27;</span> % self.host)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s:down&#x27;</span> % self.host)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ips = [<span class="string">&#x27;192.168.1.%s&#x27;</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">255</span>)]</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> ips:</span><br><span class="line">        t = threading.Thread(target=Ping(ip))</span><br><span class="line">        t.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="urllib模块概述"><a href="#urllib模块概述" class="headerlink" title="urllib模块概述"></a>urllib模块概述</h1><h2 id="urllib基础"><a href="#urllib基础" class="headerlink" title="urllib基础"></a>urllib基础</h2><ul>
<li><p>在<code>Python2</code>版本中，有<code>urllib</code>和<code>urlib2</code>两个库可以用来实现<code>request</code>的</p>
<p>发送。而在<code>Python3</code>中，已经不存在<code>urllib2</code>这个库了，统一为<code>urllib</code></p>
</li>
<li><p>urllib中包括了四个模块</p>
<p><code>urllib.request</code>可以用来发送<code>request</code>和获取<code>request</code>的结果</p>
<p><code>urllib.error</code>包含了<code>urllib.request</code>产生的异常</p>
<p><code>urllib.parse</code>用来解析和处理URL</p>
<p><code>urllib.robotparse</code>用来解析页面的<code>robots.txt</code>文件</p>
</li>
</ul>
<h3 id="爬取网页"><a href="#爬取网页" class="headerlink" title="爬取网页"></a>爬取网页</h3><ul>
<li><p>先需要导入用到的模块:<code>urllib.request</code></p>
</li>
<li><p>在导入了模块之后，我们需要使用<code>urllib.request.urlopen</code>打开并爬取一个网页</p>
</li>
<li><p>读取内容常见的有3种方式 :</p>
<p><code>read()</code>读取文件的全部内容，与<code>readlines()</code>不同的是，<code>read()</code>会把读取到的内容赋给一个字符串变量。</p>
<p><code>readlines()</code>读取文件的全部内容，<code>readlines()</code>会把读取到的内容赋值给一个列表变量。</p>
<p><code>readline()</code>读取文件的一行内容</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html = request.urlopen(<span class="string">&#x27;http://www.163.com&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.read(<span class="number">10</span>)</span><br><span class="line"><span class="string">b&#x27;&lt;!DOCTYPE &#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.readline()</span><br><span class="line"><span class="string">b&#x27;HTML&gt;\n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.readline()</span><br><span class="line"><span class="string">b&#x27;&lt;!--[if IE 6 ]&gt; &lt;html class=&quot;ne_ua_ie6 ne_ua_ielte8&quot; id=&quot;ne_wrap&quot;&gt; &lt;![endif]--&gt;\n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.readline()</span><br><span class="line"><span class="string">b&#x27;&lt;!--[if IE 7 ]&gt; &lt;html class=&quot;ne_ua_ie7 ne_ua_ielte8&quot; id=&quot;ne_wrap&quot;&gt; &lt;![endif]--&gt;\n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.readlines()</span><br><span class="line"><span class="comment"># 若是读取报错，是因为服务器端口连接，因为客户端打开一个页面，不操作，会一直占用资源，服务器会先断开连接，当客户端点击页面中链接时，服务器重新建立连接</span></span><br><span class="line">[......]</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html = request.urlopen(<span class="string">&#x27;http://www.163.com&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/163.html&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line"><span class="meta">... </span>    fobj.write(html.read())</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">604035</span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># firefox /tmp/163.html	# 用火狐打开</span></span><br></pre></td></tr></table></figure>

<h3 id="爬取图片"><a href="#爬取图片" class="headerlink" title="爬取图片"></a>爬取图片</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url=<span class="string">&#x27;https://t7.baidu.com/it/u=1819248061,230866778&amp;fm=193&amp;f=GIF&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>image = request.urlopen(url)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/tmp/image.jpg&#x27;</span>,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fobj:</span><br><span class="line"><span class="meta">... </span>    fobj.write(image.read())</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">66978</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exit()</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># eog /tmp/image.jpg	# 查看图片</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="下载网络资源"><a href="#下载网络资源" class="headerlink" title="下载网络资源"></a>下载网络资源</h3><ul>
<li><p>urllib不仅可以下载网页，其他网络资源均可下载</p>
</li>
<li><p>有些文件比较大，需要像读取文件一样，每次读取一部分数据</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">html = urllib.request.urlopen(<span class="string">&#x27;http://xxxx&#x27;</span>)</span><br><span class="line">fobj = <span class="built_in">open</span>(<span class="string">&#x27;/tmp/xxx&#x27;</span>,<span class="string">&#x27;ab&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data = html.read(<span class="number">4096</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    fobj.write(data)</span><br><span class="line">fobj.close()</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># pip install wget</span></span><br><span class="line">(mypy) [root@python ~]<span class="comment"># python</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> wget</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wget.download(<span class="string">&#x27;https://t7.baidu.com/it/u=4036010509,3445021118&amp;fm=193&amp;f=GIF&#x27;</span>,<span class="string">&#x27;/tmp/image2.jpg&#x27;</span>)	<span class="comment"># 源，本地</span></span><br><span class="line"><span class="number">100</span>% [..............................................................................] <span class="number">44644</span> / <span class="number">44644</span><span class="string">&#x27;/tmp/image2.jpg&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exit()</span><br><span class="line">(mypy) [root@python ~]<span class="comment"># eog /tmp/image2.jpg </span></span><br></pre></td></tr></table></figure>

<h3 id="案例：爬取图片"><a href="#案例：爬取图片" class="headerlink" title="案例：爬取图片"></a>案例：爬取图片</h3><ul>
<li>将<a target="_blank" rel="noopener" href="https://163.com所有的图片下载到本地/">https://163.com所有的图片下载到本地</a></li>
<li>本地的目录为/tmp/163</li>
<li>图片名与网站上图片名保持一致</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> wget</span><br><span class="line"><span class="keyword">import</span> re	<span class="comment"># 正则表达式模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_url</span>(<span class="params">fname, patt, charset=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&#x27;用于在指定的文件中取出所有模式，返回一个列表&#x27;</span></span><br><span class="line">        result = []</span><br><span class="line">        cpatt = re.<span class="built_in">compile</span>(patt)	<span class="comment"># 模式编译</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(fname) <span class="keyword">as</span> fobj:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">                m = cpatt.search(line)</span><br><span class="line">                <span class="keyword">if</span> m:</span><br><span class="line">                    result.append(m.group())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>  result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    path = <span class="string">&#x27;/tmp/163&#x27;</span></span><br><span class="line">    fname = <span class="string">&#x27;/tmp/163/163.html&#x27;</span></span><br><span class="line">    url = <span class="string">&#x27;http://www.163.com&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):</span><br><span class="line">        os.mkdir(path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(fname):</span><br><span class="line">        wget.download(url, fname)</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 定义图片链接（以http或https开头）:（\w数字字符下划线，点‘.’，斜杠‘/’，减号‘-’）‘+’（至少一次）.（以jpg或jpeg或png或gif结尾）    </span></span><br><span class="line">    url_patt = <span class="string">&#x27;(http|https)://[\w./-]+\.(jpg|jpeg|png|gif)&#x27;</span></span><br><span class="line">    </span><br><span class="line">    img_list = get_url(fname, url_patt, <span class="string">&#x27;gbk&#x27;</span>)	<span class="comment"># 编码格式gbk</span></span><br><span class="line">    <span class="comment">#print(img_list)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> img_url <span class="keyword">in</span> img_list:</span><br><span class="line">        wget.download(img_url, path)</span><br></pre></td></tr></table></figure>

<h2 id="urllib应用"><a href="#urllib应用" class="headerlink" title="urllib应用"></a>urllib应用</h2><h3 id="模拟客户端"><a href="#模拟客户端" class="headerlink" title="模拟客户端"></a>模拟客户端</h3><ul>
<li>有些网页为了防止别人恶意采集其信息，所以进行了一些反爬虫的设置，而我们又想进行爬取</li>
<li>可以设置一些<code>Headers</code>信息<code>（User-Agent）</code>，模拟成浏览器访问这些网站</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url = <span class="string">&#x27;http://www.jianshu.com&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = request.urlopen(url)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  ......</span><br><span class="line">urllib.error.HTTPError: HTTP Error <span class="number">403</span>: Forbidden	<span class="comment"># 不允许</span></span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url = <span class="string">&#x27;http://www.jianshu.com&#x27;</span></span><br><span class="line"><span class="comment"># 请求头，通过浏览器F12获取</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.41&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = request.Request(url, headers=headers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html = request.urlopen(r)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>html.read(<span class="number">20</span>)</span><br><span class="line"><span class="string">b&#x27;&lt;!DOCTYPE html&gt;\n&lt;!--&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="数据编码"><a href="#数据编码" class="headerlink" title="数据编码"></a>数据编码</h3><ul>
<li>一般来说，<code>URL</code>标准中只允许一部分<code>ASCII</code>字符，比如数字、字母、部分符号等</li>
<li>而其他的一些字符，比如汉字等，是不符合<code>URL</code>标准的，此时我们需要编码</li>
<li>如果要进行编码，可以使用<code>urllib.request.quote()</code>进行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> urllib</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>urllib.request.quote(<span class="string">&#x27;hello world!&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;hello%20world%21&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>urllib.request.unquote(<span class="string">&#x27;hello%20world%21&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url = <span class="string">&#x27;https://www.sogou.com/web?query=中国&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>request.urlopen(url)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> request.encode(<span class="string">&#x27;ascii&#x27;</span>)</span><br><span class="line">UnicodeEncodeError: <span class="string">&#x27;ascii&#x27;</span> codec can<span class="string">&#x27;t encode characters in position 15-16: ordinal not in range(128)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt;&gt;&gt; url = &#x27;</span>https://www.sogou.com/web?query=<span class="string">&#x27; + request.quote(&#x27;</span>中国<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; url</span></span><br><span class="line"><span class="string">&#x27;</span>https://www.sogou.com/web?query=%E4%B8%AD%E5%9B%BD<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h3 id="HTTP异常处理"><a href="#HTTP异常处理" class="headerlink" title="HTTP异常处理"></a>HTTP异常处理</h3><ul>
<li>如果访问的页面不存在或拒绝访问，程序将抛出异常</li>
<li>捕获异常需要导入<code>urllib.error</code>模块</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python new]<span class="comment"># yum install httpd -y &amp;&amp; systemctl start httpd  </span></span><br><span class="line">(mypy) [root@python new]<span class="comment"># mkdir /var/www/html/ban</span></span><br><span class="line">(mypy) [root@python new]<span class="comment"># chmod 000 /var/www/html/ban</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url1 = <span class="string">&#x27;http://127.0.0.1/abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url2 = <span class="string">&#x27;http://127.0.0.1/ban&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>request.urlopen(url1)</span><br><span class="line"></span><br><span class="line">urllib.error.HTTPError: HTTP Error <span class="number">404</span>: Not Found</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>request.urlopen(url2)</span><br><span class="line"></span><br><span class="line">urllib.error.HTTPError: HTTP Error <span class="number">403</span>: Forbidden</span><br><span class="line"></span><br><span class="line">************************************************************</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request,error</span><br><span class="line"></span><br><span class="line">url1 = <span class="string">&#x27;http://127.0.0.1/abc&#x27;</span></span><br><span class="line">url2 = <span class="string">&#x27;http://127.0.0.1/ban&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    r1 = request.urlopen(url1)</span><br><span class="line"><span class="keyword">except</span> error.HTTPError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;错误&#x27;</span>, e)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    r1 = request.urlopen(url1)</span><br><span class="line"><span class="keyword">except</span> error.HTTPError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;错误&#x27;</span>, e)</span><br><span class="line">    </span><br><span class="line">错误 HTTP Error <span class="number">404</span>: Not Found</span><br><span class="line">错误 HTTP Error <span class="number">403</span>: Forbidden</span><br></pre></td></tr></table></figure>

<h1 id="paramiko模块应用"><a href="#paramiko模块应用" class="headerlink" title="paramiko模块应用"></a>paramiko模块应用</h1><h2 id="安装paramiko模块"><a href="#安装paramiko模块" class="headerlink" title="安装paramiko模块"></a>安装paramiko模块</h2><ul>
<li>本地安装</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@python ~]<span class="comment"># yum install gcc gcc-c++ python-devel -y   </span></span><br><span class="line">[root@python ~]<span class="comment"># tar xf paramiko-1.15.4.tar.gz</span></span><br><span class="line">[root@python ~]<span class="comment"># python setup.py install</span></span><br></pre></td></tr></table></figure>

<ul>
<li>网络安装</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(mypy) [root@python ~]<span class="comment"># pip install paramiko</span></span><br></pre></td></tr></table></figure>

<h2 id="基础使用介绍"><a href="#基础使用介绍" class="headerlink" title="基础使用介绍"></a>基础使用介绍</h2><ul>
<li><p>SSHClient</p>
<p>创建用于连接ssh服务器的实例</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> paramiko</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ssh = paramiko.SSHClient()</span><br></pre></td></tr></table></figure>

<ul>
<li><p>paramiko.AutoAddPolicy</p>
<p>设置自动添加主机密钥</p>
</li>
<li><p>ssh.connect</p>
<p>连接ssh服务器</p>
</li>
<li><p>ssh.exec_comand</p>
<p>在ssh服务器上执行指定命令</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> paramiko</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ssh = paramiko.SSHClient()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相当于输入yes</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ssh.connect(<span class="string">&#x27;127.0.0.1&#x27;</span>, username=<span class="string">&#x27;root&#x27;</span>, password=<span class="string">&#x27;000000&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ssh.exec_command(<span class="string">&#x27;id root&#x27;</span>)</span><br><span class="line">(&lt;paramiko.ChannelFile <span class="keyword">from</span> &lt;paramiko.Channel <span class="number">0</span> (<span class="built_in">open</span>) window=<span class="number">2097152</span> -&gt; &lt;paramiko.Transport at <span class="number">0xe083ca00</span> (cipher aes128-ctr, <span class="number">128</span> bits) (active; <span class="number">1</span> <span class="built_in">open</span> channel(s))&gt;&gt;&gt;, &lt;paramiko.ChannelFile <span class="keyword">from</span> &lt;paramiko.Channel <span class="number">0</span> (<span class="built_in">open</span>) window=<span class="number">2097152</span> -&gt; &lt;paramiko.Transport at <span class="number">0xe083ca00</span> (cipher aes128-ctr, <span class="number">128</span> bits) (active; <span class="number">1</span> <span class="built_in">open</span> channel(s))&gt;&gt;&gt;, &lt;paramiko.ChannelFile <span class="keyword">from</span> &lt;paramiko.Channel <span class="number">0</span> (<span class="built_in">open</span>) window=<span class="number">2097152</span> -&gt; &lt;paramiko.Transport at <span class="number">0xe083ca00</span> (cipher aes128-ctr, <span class="number">128</span> bits) (active; <span class="number">1</span> <span class="built_in">open</span> channel(s))&gt;&gt;&gt;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入、输出和错误的类文件对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result = ssh.exec_command(<span class="string">&#x27;id root&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result[<span class="number">0</span>]</span><br><span class="line">&lt;paramiko.ChannelFile <span class="keyword">from</span> &lt;paramiko.Channel <span class="number">1</span> (closed) -&gt; &lt;paramiko.Transport at <span class="number">0xe083ca00</span> (cipher aes128-ctr, <span class="number">128</span> bits) (active; <span class="number">0</span> <span class="built_in">open</span> channel(s))&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result[<span class="number">1</span>]</span><br><span class="line">&lt;paramiko.ChannelFile <span class="keyword">from</span> &lt;paramiko.Channel <span class="number">1</span> (closed) -&gt; &lt;paramiko.Transport at <span class="number">0xe083ca00</span> (cipher aes128-ctr, <span class="number">128</span> bits) (active; <span class="number">0</span> <span class="built_in">open</span> channel(s))&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>result[<span class="number">2</span>]</span><br><span class="line">&lt;paramiko.ChannelFile <span class="keyword">from</span> &lt;paramiko.Channel <span class="number">1</span> (closed) -&gt; &lt;paramiko.Transport at <span class="number">0xe083ca00</span> (cipher aes128-ctr, <span class="number">128</span> bits) (active; <span class="number">0</span> <span class="built_in">open</span> channel(s))&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>out = result[<span class="number">1</span>].read() </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>err = result[<span class="number">2</span>].read()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>out</span><br><span class="line"><span class="string">b&#x27;uid=0(root) gid=0(root) \xe7\xbb\x84=0(root)\n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>err</span><br><span class="line"><span class="string">b&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>out.decode()	<span class="comment"># 把byte类型转换为string类型</span></span><br><span class="line"><span class="string">&#x27;uid=0(root) gid=0(root) 组=0(root)\n&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="paramiko实例"><a href="#paramiko实例" class="headerlink" title="paramiko实例"></a>paramiko实例</h2><ul>
<li>编写<code>SSHClient</code>实例</li>
<li>设置添加主机密钥策略</li>
<li>连接<code>ssh</code>服务器</li>
<li>执行指定命令</li>
<li>在<code>shell</code>命令行中接收用于连接远程服务器的密码以及在远程主机上执行的命令</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rcmd</span>(<span class="params">host, user, password , port=<span class="number">22</span>, cmds=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># 创建ssh客户端实例，用于远程执行命令</span></span><br><span class="line">    ssh = paramiko.SSHClient()</span><br><span class="line">    <span class="comment"># 自动接收服务器发来的密钥</span></span><br><span class="line">    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">    <span class="comment"># 连接服务器</span></span><br><span class="line">    ssh.connect(host,username=user,password=password,port=port)</span><br><span class="line">    <span class="comment"># 执行命令</span></span><br><span class="line">    stdin, stdout, stderr = ssh.exec_command(cmds)</span><br><span class="line">    <span class="comment"># 获取执行命令的输出和错误信息</span></span><br><span class="line">    out = stdout.read()</span><br><span class="line">    err = stderr.read()</span><br><span class="line">    <span class="keyword">if</span> out: <span class="comment"># 如果输出非空</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[%s] \033[32;1mOUT\033[0m:\n%s&#x27;</span> % (host,out.decode()))</span><br><span class="line">    <span class="keyword">if</span> err: <span class="comment"># 如果错误非空</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[%s] \033[31;1mERROR\033[0m:\n%s&#x27;</span> % (host,err.decode()))</span><br><span class="line">    <span class="comment"># 关闭连接</span></span><br><span class="line">    ssh.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    rcmd(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;000000&#x27;</span>,cmds=<span class="string">&#x27;id root;id zhangsan&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="案例：多线程ssh并发访问"><a href="#案例：多线程ssh并发访问" class="headerlink" title="案例：多线程ssh并发访问"></a>案例：多线程ssh并发访问</h2><ul>
<li>编写脚本程序</li>
<li>在文件中提取出所有远程主机IP信息</li>
<li>在shell命令行中接受远程服务器IP地址文件、远程服务器密码以及在远程主机上执行的命令</li>
<li>通过多线程实现所有远程服务器上并发执行命令</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rcmd</span>(<span class="params">host, user, password , port=<span class="number">22</span>, cmds=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># 创建ssh客户端实例，用于远程执行命令</span></span><br><span class="line">    ssh = paramiko.SSHClient()</span><br><span class="line">    <span class="comment"># 自动接收服务器发来的密钥</span></span><br><span class="line">    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">    <span class="comment"># 连接服务器</span></span><br><span class="line">    ssh.connect(host,username=user,password=password,port=port)</span><br><span class="line">    <span class="comment"># 执行命令</span></span><br><span class="line">    stdin, stdout, stderr = ssh.exec_command(cmds)</span><br><span class="line">    <span class="comment"># 获取执行命令的输出和错误信息</span></span><br><span class="line">    out = stdout.read()</span><br><span class="line">    err = stderr.read()</span><br><span class="line">    <span class="keyword">if</span> out: <span class="comment"># 如果输出非空</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[%s] \033[32;1mOUT\033[0m:\n%s&#x27;</span> % (host,out.decode()))</span><br><span class="line">    <span class="keyword">if</span> err: <span class="comment"># 如果错误非空</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[%s] \033[31;1mERROR\033[0m:\n%s&#x27;</span> % (host,err.decode()))</span><br><span class="line">    <span class="comment"># 关闭连接</span></span><br><span class="line">    ssh.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># rcmd(&#x27;127.0.0.1&#x27;,&#x27;root&#x27;,&#x27;000000&#x27;,cmds=&#x27;id root;id zhangsan&#x27;)</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">3</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Usage: %s ipfile &#x27;commands&#x27;&quot;</span> % sys.argv[<span class="number">0</span>])</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(sys.argv[<span class="number">1</span>]):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;No such file:&#x27;</span>, sys.argv[<span class="number">1</span>])</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    ipfile = sys.argv[<span class="number">1</span>]</span><br><span class="line">    password = getpass.getpass()</span><br><span class="line">    cmds = sys.argv[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(ipfile) <span class="keyword">as</span> fobj:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fobj:</span><br><span class="line">            ip = line.strip() <span class="comment"># 将文件结尾的\n移除</span></span><br><span class="line">            t = threading.Thread(target=rcmd, args=(ip,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;000000&#x27;</span>,<span class="number">22</span>,cmds))</span><br><span class="line">            t.start()</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">(venv) [root@python new]<span class="comment"># python rcmd.py server.txt &#x27;sleep 3;id root&#x27;</span></span><br><span class="line">Password: </span><br><span class="line">[<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>] OUT:</span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br><span class="line"></span><br><span class="line">[<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>] OUT:</span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br><span class="line"></span><br><span class="line">[<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>] OUT:</span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br><span class="line"></span><br><span class="line">[<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>] OUT:</span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br><span class="line"></span><br><span class="line">[<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>] OUT:</span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br></pre></td></tr></table></figure>

<h1 id="邮件编程"><a href="#邮件编程" class="headerlink" title="邮件编程"></a>邮件编程</h1><h2 id="发送邮件"><a href="#发送邮件" class="headerlink" title="发送邮件"></a>发送邮件</h2><h3 id="设置邮件"><a href="#设置邮件" class="headerlink" title="设置邮件"></a>设置邮件</h3><ul>
<li><p>标准邮件需要三个头部信息</p>
<p>FROM：发件人</p>
<p>To：收件人</p>
<p>Subject：主题</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"></span><br><span class="line">message = MIMEText(<span class="string">&#x27;Python email test&#x27;</span>,<span class="string">&#x27;plain&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)<span class="comment"># 正文</span></span><br><span class="line">message[<span class="string">&#x27;From&#x27;</span>] = Header(<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">message[<span class="string">&#x27;To&#x27;</span>] = Header(<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">subject = <span class="string">&#x27;Python SMTP email test&#x27;</span></span><br><span class="line">message[<span class="string">&#x27;Subject&#x27;</span>] = Header(subject,<span class="string">&#x27;utf8&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="SMTP概述"><a href="#SMTP概述" class="headerlink" title="SMTP概述"></a>SMTP概述</h2><ul>
<li><code>SMTP（Simple Mail Transfer Protocol）</code>即简单邮件传输协议，使用<code>TCP</code>协议<code>25</code>端口</li>
<li>它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式</li>
<li><code>python</code>的<code>smtplib</code>提供了一种很方便的途径发送电子邮件。它对<code>smtp</code>协议进行了简单的封装</li>
</ul>
<h2 id="SMTP对象"><a href="#SMTP对象" class="headerlink" title="SMTP对象"></a>SMTP对象</h2><ul>
<li>Python发送邮件，第一步是创建SMTP对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line">smtp_obj = smtplib.SMTP([host[,port[,local_hostname]]])</span><br></pre></td></tr></table></figure>

<ul>
<li>创建<code>SMTP</code>对象也可以不给定参数，之后再通过对象的其他方法进行绑定</li>
</ul>
<h2 id="sendmail方法"><a href="#sendmail方法" class="headerlink" title="sendmail方法"></a>sendmail方法</h2><ul>
<li>Python SMTP对象使用sendmail方法发送邮件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMTP.sendmail(from_addr,to_addrs,msg[,mail_options,rcpt_options])</span><br></pre></td></tr></table></figure>

<ul>
<li><p>sendmail方法三个必须的参数有：</p>
<p>收件人</p>
<p>发件人</p>
<p>消息主体msg是一个字符串，表示邮件</p>
</li>
<li><p>将准备好的邮件发送</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"></span><br><span class="line">sender = <span class="string">&#x27;from@tarena.com&#x27;</span></span><br><span class="line">receivers = [<span class="string">&#x27;root@localhost&#x27;</span>]</span><br><span class="line">smtp_obj = smtplib.SMTP(<span class="string">&#x27;localhost&#x27;</span>)</span><br><span class="line">smtp_obj.sendmail(sender,receivers,message.as_string())</span><br></pre></td></tr></table></figure>

<h2 id="案例：通过本机发送邮件"><a href="#案例：通过本机发送邮件" class="headerlink" title="案例：通过本机发送邮件"></a>案例：通过本机发送邮件</h2><ul>
<li>创建bob和alice账户</li>
<li>编写发送邮件程序，发件人为root，收件人为本机的bob和alice账户</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备邮件</span></span><br><span class="line"><span class="comment"># plain表示纯文本</span></span><br><span class="line">msg = MIMEText(<span class="string">&#x27;Python email test\n&#x27;</span>,<span class="string">&#x27;plain&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"><span class="comment"># 为邮件添加头部信息</span></span><br><span class="line">msg[<span class="string">&#x27;From&#x27;</span>] = Header(<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">msg[<span class="string">&#x27;To&#x27;</span>] = Header(<span class="string">&#x27;qwe&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">msg[<span class="string">&#x27;Subject&#x27;</span>] = Header(<span class="string">&#x27;by test&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送邮件</span></span><br><span class="line">smtp = smtplib.SMTP(<span class="string">&#x27;127.0.0.1&#x27;</span>)</span><br><span class="line">sender = <span class="string">&#x27;root&#x27;</span></span><br><span class="line">receivers = [<span class="string">&#x27;qwe&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>]</span><br><span class="line">smtp.sendmail(sender,receivers,msg.as_bytes())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(venv) [root@python new]<span class="comment"># useradd qwe</span></span><br><span class="line">(venv) [root@python new]<span class="comment"># mail -u qwe</span></span><br><span class="line">Heirloom Mail version <span class="number">12.5</span> <span class="number">7</span>/<span class="number">5</span>/<span class="number">10.</span>  <span class="type">Type</span> ? <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"><span class="string">&quot;/var/mail/qwe&quot;</span>: <span class="number">1</span> message <span class="number">1</span> new</span><br><span class="line">&gt;N  <span class="number">1</span> =?utf8?q?root?=@pyth  Sun Jun <span class="number">11</span> <span class="number">11</span>:<span class="number">30</span>  <span class="number">19</span>/<span class="number">639</span>   <span class="string">&quot;&quot;</span></span><br><span class="line">&amp; </span><br><span class="line">Message  <span class="number">1</span>:</span><br><span class="line">From root@python.localdomain  Sun Jun <span class="number">11</span> <span class="number">11</span>:<span class="number">30</span>:<span class="number">47</span> <span class="number">2023</span></span><br><span class="line">Return-Path: &lt;root@python.localdomain&gt;</span><br><span class="line">X-Original-To: qwe</span><br><span class="line">Delivered-To: qwe@python.localdomain</span><br><span class="line">Content-<span class="type">Type</span>: text/plain; charset=<span class="string">&quot;utf8&quot;</span></span><br><span class="line">From: root@python.localdomain</span><br><span class="line">To: qwe@python.localdomain</span><br><span class="line">Subject: by test</span><br><span class="line">Date: Sun, <span class="number">11</span> Jun <span class="number">2023</span> <span class="number">11</span>:<span class="number">30</span>:<span class="number">47</span> +0800 (CST)</span><br><span class="line">Status: R</span><br><span class="line"></span><br><span class="line">Python email test</span><br><span class="line">&amp; </span><br></pre></td></tr></table></figure>

<h2 id="SMTP认证"><a href="#SMTP认证" class="headerlink" title="SMTP认证"></a>SMTP认证</h2><ul>
<li>如果本机没有<code>SMTP</code>功能，也可以使用第三方的邮件服务器</li>
<li>第三方邮件服务器往往需要认证</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mail_host=<span class="string">&#x27;mail.tedu.cn&#x27;</span></span><br><span class="line">mail_user=<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">mail_pass=<span class="string">&#x27;zhangsan_pass&#x27;</span></span><br><span class="line">smtp_obj=smtplib.SMTP()</span><br><span class="line">smtp_obj.connect(mail_host,<span class="number">25</span>) <span class="comment"># 25为SMTP端口号</span></span><br><span class="line"><span class="comment"># smtp.starttls()	# 如果使用此证书，打开注释</span></span><br><span class="line">smtp_obj.login(mail_user,mail_pass)</span><br><span class="line">smtp_obj.sendmail(sender,receicers,message.as_string())</span><br></pre></td></tr></table></figure>

<h2 id="案例：通过互联网服务器发送邮件"><a href="#案例：通过互联网服务器发送邮件" class="headerlink" title="案例：通过互联网服务器发送邮件"></a>案例：通过互联网服务器发送邮件</h2><ul>
<li>通过自己互联网注册的邮箱，为其他同学发送邮件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">inet_mail</span>(<span class="params">host, sender, passwd, receivers, body, subject</span>):</span><br><span class="line">    <span class="comment"># 准备邮件</span></span><br><span class="line">    msg = MIMEText(body, <span class="string">&#x27;plain&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="comment"># 为邮件添加头部信息</span></span><br><span class="line">    msg[<span class="string">&#x27;From&#x27;</span>] = Header(sender, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    msg[<span class="string">&#x27;To&#x27;</span>] = Header(receivers[<span class="number">0</span>], <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    msg[<span class="string">&#x27;Subject&#x27;</span>] = Header(subject, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 发送邮件</span></span><br><span class="line">    smtp = smtplib.SMTP()</span><br><span class="line">    smtp.connect(host)</span><br><span class="line">    <span class="comment"># smtp.starttls()  #</span></span><br><span class="line">    smtp.login(sender, passwd)</span><br><span class="line">    smtp.sendmail(sender, receivers, msg.as_bytes())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    server = <span class="string">&#x27;smtp.qq.com&#x27;</span></span><br><span class="line">    sender = <span class="string">&#x27;xxx@qq.com&#x27;</span></span><br><span class="line">    receivers = [<span class="string">&#x27;xxx@qq.com&#x27;</span>, <span class="string">&#x27;xxx@qq.com&#x27;</span>]</span><br><span class="line">    passwd = getpass.getpass()</span><br><span class="line">    body = <span class="string">&#x27;python email test\n&#x27;</span></span><br><span class="line">    subject = <span class="string">&#x27;py python&#x27;</span></span><br><span class="line">    inet_mail(server, sender, passwd, receivers, body, subject)</span><br></pre></td></tr></table></figure>

<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="JSON概述"><a href="#JSON概述" class="headerlink" title="JSON概述"></a>JSON概述</h2><ul>
<li><code>JSON（JavaScript Object Notation）</code>是一种轻量级的数据交换格式</li>
<li>易于人阅读和编写，同时也易于机器解析和生成</li>
<li>基于<code>JavaScript Programming Language</code></li>
<li><code>JSON</code>采用完全独立于语言的文本格式，但是也使用了类似C语言家族的习惯（包括<code>C，C++，C#，Java，JavaScript，Perl，Python</code>等）</li>
<li>这些特性是<code>JSON</code>成为理想的数据交换语言</li>
</ul>
<h2 id="JSON结构"><a href="#JSON结构" class="headerlink" title="JSON结构"></a>JSON结构</h2><ul>
<li><p>JSON主要有两种结构</p>
<p>“键/值”对的集合：python中主要对应成字典</p>
<p>值的有序列表：在大部分语言中，它被理解为数组</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Python</th>
<th>json</th>
</tr>
</thead>
<tbody><tr>
<td>dict</td>
<td>object</td>
</tr>
<tr>
<td>list, tuple</td>
<td>array</td>
</tr>
<tr>
<td>str</td>
<td>string</td>
</tr>
<tr>
<td>int, float</td>
<td>number</td>
</tr>
<tr>
<td>True</td>
<td>true</td>
</tr>
<tr>
<td>False</td>
<td>false</td>
</tr>
<tr>
<td>None</td>
<td>null</td>
</tr>
</tbody></table>
<h2 id="dumps方法"><a href="#dumps方法" class="headerlink" title="dumps方法"></a>dumps方法</h2><ul>
<li>使用简单的<code>json.dumps()</code>方法对简单数据类型进行编码</li>
</ul>
<h2 id="loads方法"><a href="#loads方法" class="headerlink" title="loads方法"></a>loads方法</h2><ul>
<li>对编码后的<code>json</code>对象进行<code>decode</code>解码，得到原始数据，需要使用<code>json.loads()</code>函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> json</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>number = json.dumps(<span class="number">100</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>json.loads(number)</span><br><span class="line"><span class="number">100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>adict = &#123;<span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>json.dumps(adict)</span><br><span class="line"><span class="string">&#x27;&#123;&quot;user&quot;: &quot;tom&quot;, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = json.dumps(adict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(data)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>json.loads(data)</span><br><span class="line">&#123;<span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>jdata = json.loads(data)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(jdata)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="天气预报查询"><a href="#天气预报查询" class="headerlink" title="天气预报查询"></a>天气预报查询</h2><ul>
<li><p>搜索“中国天气网 城市代码查询”，查找城市代码</p>
</li>
<li><p>城市天气情况接口</p>
<p>实况天气获取：<a target="_blank" rel="noopener" href="http://www.weather.com.cn/data/sk/%E5%9F%8E%E5%B8%82%E4%BB%A3%E7%A0%81.html">http://www.weather.com.cn/data/sk/城市代码.html</a></p>
<p>城市信息获取：<a target="_blank" rel="noopener" href="http://www.weather.com.cn/data/cityinfo/%E5%9F%8E%E5%B8%82%E4%BB%A3%E7%A0%81.html">http://www.weather.com.cn/data/cityinfo/城市代码.html</a></p>
<p>详细指数获取：<a target="_blank" rel="noopener" href="http://www.weather.com.cn/data/zs/%E5%9F%8E%E5%B8%82%E4%BB%A3%E7%A0%81.html">http://www.weather.com.cn/data/zs/城市代码.html</a></p>
</li>
</ul>
<h1 id="requests基础"><a href="#requests基础" class="headerlink" title="requests基础"></a>requests基础</h1><h2 id="requests基础-1"><a href="#requests基础-1" class="headerlink" title="requests基础"></a>requests基础</h2><h3 id="requests简介"><a href="#requests简介" class="headerlink" title="requests简介"></a>requests简介</h3><ul>
<li><code>Requests</code>是用<code>Python</code>语言编写的、优雅而简单的<code>HTTP</code>库</li>
<li><code>Requests</code>内部采用<code>urllib3</code></li>
<li><code>Requests</code>使用起来肯定会比<code>urllib3</code>更简单便捷</li>
<li><code>Requests</code>需要单独安装</li>
</ul>
<h3 id="requests特性"><a href="#requests特性" class="headerlink" title="requests特性"></a>requests特性</h3><ul>
<li>支持<code>keep-alive</code>的连接池</li>
<li>支持通用的域名以及<code>URL</code>地址</li>
<li>支持使用<code>cookie</code></li>
<li>支持使用类型浏览器的<code>SSL</code>验证</li>
<li>文件上传、下载</li>
</ul>
<h3 id="GET和POST"><a href="#GET和POST" class="headerlink" title="GET和POST"></a>GET和POST</h3><ul>
<li>通过<code>requests</code>发送一个<code>GET</code>请求，需要在<code>URL</code>里请求的参数可通过<code>params</code>传递</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url=<span class="string">&quot;&quot;</span>, params=&#123;&#125;, headers=&#123;&#125;, cookies=&#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>与<code>GET</code>不同的是，<code>POST</code>请求新增了一个可选参数<code>data</code>，需要通过<code>POST</code>请求传递的<code>body</code>里的数据可以通过<code>data</code>传递</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.post(url=<span class="string">&quot;&quot;</span>, data=&#123;&#125;, params=&#123;&#125;, file=&#123;&#125;, headers=&#123;&#125;, cookies=&#123;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h3><ul>
<li>其他<code>HTTP</code>请求类型：<code>PUT</code>，<code>DELETE</code>，<code>HEAD</code>以及<code>OPETIONS</code>使用起来一样简单</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.put(<span class="string">&#x27;http://httpbin.org/put&#x27;</span>, data = &#123;<span class="string">&#x27;key&#x27;</span>:<span class="string">&#x27;value&#x27;</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.delete(<span class="string">&#x27;http://httpbin.org/delete&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.head(<span class="string">&#x27;http://httpbin.org/get&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.options(<span class="string">&#x27;http://httpbin.org/get&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h3><ul>
<li>当访问一个<code>URL</code>时，我们经常需要发送一些查询的字段作为过滤信息，例如：<code>httpbin.com/get?key=val</code>，这里的<code>key=val</code>就是限定返回条件的参数键值对</li>
<li>当利用<code>python</code>的<code>requests</code>去发送一个需要包含这些参数键值对时，可以将它们传给<code>params</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">payload = &#123;<span class="string">&#x27;key1&#x27;</span>:<span class="string">&#x27;value1&#x27;</span>,<span class="string">&#x27;key2&#x27;</span>:<span class="string">&#x27;value2&#x27;</span>&#125;</span><br><span class="line">r = requests.get(<span class="string">&#x27;http://httpbin.com/get&#x27;</span>,params = payload)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查快递例子</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>kd_url = <span class="string">&#x27;http://www.kuaidi100.com/query&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>params = &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;youzhengguonei&#x27;</span>, <span class="string">&#x27;postid&#x27;</span>: <span class="string">&#x27;9893442769997&#x27;</span>&#125;	<span class="comment"># 邮政国内，单号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL为http://www.kuaidi100.com/query?type=youzhengguonei&amp;postid=9893442769997（?传参）</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.get(kd_url, params=params)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.json()</span><br><span class="line">&#123;<span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;ok&#x27;</span>, <span class="string">&#x27;nu&#x27;</span>: <span class="string">&#x27;9893442769997&#x27;</span>, <span class="string">&#x27;ischeck&#x27;</span>: <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;condition&#x27;</span>: <span class="string">&#x27;00&#x27;</span>, <span class="string">&#x27;com&#x27;</span>: <span class="string">&#x27;youzhengguonei&#x27;</span>, <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;200&#x27;</span>, <span class="string">&#x27;state&#x27;</span>: <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;data&#x27;</span>: [&#123;<span class="string">&#x27;time&#x27;</span>: <span class="string">&#x27;2023-06-09 10:27:57&#x27;</span>, <span class="string">&#x27;ftime&#x27;</span>: <span class="string">&#x27;2023-06-09 10:27:57&#x27;</span>, <span class="string">&#x27;context&#x27;</span>: <span class="string">&#x27;【咸阳市】西安分拨中心已发出,下一站新疆阿克苏集散站电话【099-72661378;18096928353】&#x27;</span>, <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;咸阳市 西安分拨中心&#x27;</span>&#125;, &#123;<span class="string">&#x27;time&#x27;</span>: <span class="string">&#x27;2023-06-07 02:09:57&#x27;</span>, <span class="string">&#x27;ftime&#x27;</span>: <span class="string">&#x27;2023-06-07 02:09:57&#x27;</span>, <span class="string">&#x27;context&#x27;</span>: <span class="string">&#x27;【咸阳市】西安分拨中心快件已到达&#x27;</span>, <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;咸阳市 西安分拨中心&#x27;</span>&#125;, &#123;<span class="string">&#x27;time&#x27;</span>: <span class="string">&#x27;2023-06-06 05:50:17&#x27;</span>, <span class="string">&#x27;ftime&#x27;</span>: <span class="string">&#x27;2023-06-06 05:50:17&#x27;</span>, <span class="string">&#x27;context&#x27;</span>: <span class="string">&#x27;【杭州市】萧山分拨中心已发出,下一站西安分拨中心&#x27;</span>, <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;杭州市 萧山分拨中心&#x27;</span>&#125;, &#123;<span class="string">&#x27;time&#x27;</span>: <span class="string">&#x27;2023-06-05 22:58:45&#x27;</span>, <span class="string">&#x27;ftime&#x27;</span>: <span class="string">&#x27;2023-06-05 22:58:45&#x27;</span>, <span class="string">&#x27;context&#x27;</span>: <span class="string">&#x27;【杭州市】萧山分拨中心快件已到达&#x27;</span>, <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;杭州市 萧山分拨中心&#x27;</span>&#125;, &#123;<span class="string">&#x27;time&#x27;</span>: <span class="string">&#x27;2023-06-05 16:30:26&#x27;</span>, <span class="string">&#x27;ftime&#x27;</span>: <span class="string">&#x27;2023-06-05 16:30:26&#x27;</span>, <span class="string">&#x27;context&#x27;</span>: <span class="string">&#x27;【绍兴市】嵊州正大国际收件员已揽件&#x27;</span>, <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;绍兴市 嵊州正大国际&#x27;</span>&#125;]&#125;</span><br></pre></td></tr></table></figure>

<h3 id="设定头部"><a href="#设定头部" class="headerlink" title="设定头部"></a>设定头部</h3><ul>
<li>用户也可以自己设定请求头</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&#x27;https://api.github.com/some/endpoint&#x27;</span></span><br><span class="line">headers = &#123;<span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>&#125;</span><br><span class="line">r = requests.get(url,headers = headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问简书案例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>js_url = <span class="string">&#x27;http://jianshu.com&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/113.0&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r2 = requests.get(js_url, headers=headers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r2.text</span><br></pre></td></tr></table></figure>

<h3 id="发送请求数据"><a href="#发送请求数据" class="headerlink" title="发送请求数据"></a>发送请求数据</h3><ul>
<li>有时候，用户需要将一些数据放在请求的<code>body</code>内；这时候，就需要对<code>data</code>传参了（仅<code>POST</code>，<code>DELETE</code>，<code>PUT</code>等方法有该参数，<code>GET</code>没有,因为<code>GET</code>请求没有<code>body</code>）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">payload = &#123;<span class="string">&#x27;key1&#x27;</span>:<span class="string">&#x27;value1&#x27;</span>,<span class="string">&#x27;key2&#x27;</span>:<span class="string">&#x27;value2&#x27;</span>&#125;</span><br><span class="line">r = requests.post(<span class="string">&#x27;http://httpbin.org/post&#x27;</span>,data = payload)</span><br></pre></td></tr></table></figure>

<h2 id="requests应用"><a href="#requests应用" class="headerlink" title="requests应用"></a>requests应用</h2><h3 id="相应内容"><a href="#相应内容" class="headerlink" title="相应内容"></a>相应内容</h3><ul>
<li>读取服务器相应的内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.get(<span class="string">&#x27;http://www.baidu.com&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.text</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.get(url)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.text</span><br></pre></td></tr></table></figure>

<ul>
<li>请求发出后，<code>Requests</code>会基于<code>HTTP</code>头部对相应的编码做出有根据的推测</li>
<li>可以找出<code>Requests</code>使用了什么编码，并且能够使用<code>r.encoding</code>属性来改变它</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.encoding</span><br><span class="line"><span class="string">&#x27;ISO-8859-1&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.encoding = <span class="string">&#x27;utf8&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.text</span><br></pre></td></tr></table></figure>

<h3 id="其他相应内容格式"><a href="#其他相应内容格式" class="headerlink" title="其他相应内容格式"></a>其他相应内容格式</h3><ul>
<li>也可以用字节的方式访问请求相应体，尤其是非文本请求(二进制bytes)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.content</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Requests</code>中还有一个内置的<code>JSON</code>解码器，助你处理<code>JSON</code>数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.json()</span><br></pre></td></tr></table></figure>

<h2 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h2><ul>
<li>可以查看以字典形式展开的服务器响应头</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r.headers</span><br><span class="line">&#123;<span class="string">&#x27;Server&#x27;</span>: <span class="string">&#x27;nginx&#x27;</span>, <span class="string">&#x27;Date&#x27;</span>: <span class="string">&#x27;Sun, 11 Jun 2023 09:53:41 GMT&#x27;</span>, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html;charset=UTF-8&#x27;</span>, <span class="string">&#x27;Transfer-Encoding&#x27;</span>: <span class="string">&#x27;chunked&#x27;</span>, <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>, <span class="string">&#x27;Vary&#x27;</span>: <span class="string">&#x27;Accept-Encoding&#x27;</span>, <span class="string">&#x27;P3P&#x27;</span>: <span class="string">&#x27;CP=&quot;IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT&quot;&#x27;</span>, <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>, <span class="string">&#x27;Set-Cookie&#x27;</span>: <span class="string">&#x27;_adadqeqwe1321312dasddocTitle=kuaidi100; domain=.kuaidi100.com; path=/;, _adadqeqwe1321312dasddocReferrer=; domain=.kuaidi100.com; path=/;, _adadqeqwe1321312dasddocHref=; domain=.kuaidi100.com; path=/;, _adadqeqwe1321312dasddocTitle=kuaidi100; domain=.kuaidi100.com; path=/all;&#x27;</span>, <span class="string">&#x27;Content-Encoding&#x27;</span>: <span class="string">&#x27;gzip&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>


</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">૮(˶ᵔ ᵕ ᵔ˶)ა</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/05/12/DN-Python/">http://example.com/2023/05/12/DN-Python/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">૮(˶ᵔ ᵕ ᵔ˶)ა</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="/../images/TITLE/python1.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/18/XM-%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/" title="集群综合项目实战"><img class="cover" src="/../images/TITLE/jiqun.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">集群综合项目实战</div></div></a></div><div class="next-post pull-right"><a href="/2023/05/16/DN-NETWORK/" title="NetWork"><img class="cover" src="/../images/TITLE/network.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">NetWork</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/../images/TITLE/user.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">૮(˶ᵔ ᵕ ᵔ˶)ა</div><div class="author-info__description">这家伙很勤奋，什么都留下了</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">98</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E6%A6%82%E8%BF%B0%E5%8F%8A%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">Python概述及安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">Python简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%B7%E6%BA%90"><span class="toc-number">1.1.1.</span> <span class="toc-text">起源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%88%E6%9C%AC"><span class="toc-number">1.1.2.</span> <span class="toc-text">版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">1.1.3.</span> <span class="toc-text">特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">安装与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96python3%E6%BA%90%E7%A0%81"><span class="toc-number">1.2.1.</span> <span class="toc-text">获取python3源码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">安装依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85python3"><span class="toc-number">1.2.3.</span> <span class="toc-text">安装python3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEPython%E6%94%AF%E6%8C%81tab%E9%94%AE%E8%A1%A5%E5%85%A8"><span class="toc-number">1.2.4.</span> <span class="toc-text">配置Python支持tab键补全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vim%E5%AE%9E%E7%8E%B0python%E6%8F%90%E7%A4%BA"><span class="toc-number">1.2.5.</span> <span class="toc-text">vim实现python提示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEPython-IDE"><span class="toc-number">2.</span> <span class="toc-text">配置Python IDE</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="toc-number">2.1.</span> <span class="toc-text">Python虚拟环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-IDE"><span class="toc-number">2.2.</span> <span class="toc-text">Python IDE</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFIDE"><span class="toc-number">2.2.1.</span> <span class="toc-text">什么是IDE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PyCharm%E7%AE%80%E4%BB%8B"><span class="toc-number">2.2.2.</span> <span class="toc-text">PyCharm简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PyCharm%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.3.</span> <span class="toc-text">PyCharm配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80"><span class="toc-number">3.</span> <span class="toc-text">Python语法基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E8%BF%90%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">Python运行方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E4%BA%92%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="toc-number">3.1.1.</span> <span class="toc-text">交互解释器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%BD%A2%E5%BC%8F"><span class="toc-number">3.1.2.</span> <span class="toc-text">文件形式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.2.</span> <span class="toc-text">Python语法结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E5%8F%A5%E5%9D%97%E7%BC%A9%E8%BF%9B"><span class="toc-number">3.2.1.</span> <span class="toc-text">语句块缩进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A%E5%8F%8A%E7%BB%AD%E8%88%AA"><span class="toc-number">3.2.2.</span> <span class="toc-text">注释及续航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E8%A1%8C%E5%A4%9A%E4%B8%AA%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.2.3.</span> <span class="toc-text">同行多个语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.2.4.</span> <span class="toc-text">输出语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.2.5.</span> <span class="toc-text">输入语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E7%BB%83%E4%B9%A0"><span class="toc-number">3.3.</span> <span class="toc-text">案例练习</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E5%8F%98%E9%87%8F%E5%8F%8A%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.</span> <span class="toc-text">Python变量及运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#python%E5%8F%98%E9%87%8F"><span class="toc-number">4.1.</span> <span class="toc-text">python变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">4.1.1.</span> <span class="toc-text">变量定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%A4%8D%E5%88%B6"><span class="toc-number">4.1.2.</span> <span class="toc-text">变量复制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.2.</span> <span class="toc-text">运算符</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.</span> <span class="toc-text">数字和字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97"><span class="toc-number">5.1.</span> <span class="toc-text">数字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.1.1.</span> <span class="toc-text">基本数字类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">5.1.2.</span> <span class="toc-text">整数数字表示方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.2.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.2.1.</span> <span class="toc-text">定义字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%87%E7%89%87"><span class="toc-number">5.2.2.</span> <span class="toc-text">字符串切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">5.2.3.</span> <span class="toc-text">字符串连接操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E3%80%81%E5%85%83%E7%BB%84%E5%92%8C%E5%AD%97%E5%85%B8"><span class="toc-number">6.</span> <span class="toc-text">列表、元组和字典</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84"><span class="toc-number">6.1.</span> <span class="toc-text">列表和元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%88%97%E8%A1%A8"><span class="toc-number">6.1.1.</span> <span class="toc-text">定义列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">6.1.2.</span> <span class="toc-text">列表操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E7%9A%84%E5%AE%9A%E4%B9%89%E5%8F%8A%E6%93%8D%E4%BD%9C"><span class="toc-number">6.1.3.</span> <span class="toc-text">元组的定义及操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8"><span class="toc-number">6.2.</span> <span class="toc-text">字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E7%9A%84%E5%AE%9A%E4%B9%89%E5%8F%8A%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.1.</span> <span class="toc-text">字典的定义及操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83"><span class="toc-number">6.3.</span> <span class="toc-text">数据类型比较</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.</span> <span class="toc-text">判断语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.1.</span> <span class="toc-text">if语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E8%AF%AD%E5%8F%A5%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="toc-number">7.1.1.</span> <span class="toc-text">if语句语法结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E8%AF%AD%E5%8F%A5%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90"><span class="toc-number">7.1.2.</span> <span class="toc-text">if语句实例解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">7.1.3.</span> <span class="toc-text">条件表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">7.1.4.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95if%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.2.</span> <span class="toc-text">扩展if语句</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5%E6%A1%88%E4%BE%8B"><span class="toc-number">8.</span> <span class="toc-text">判断语句案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%88%A4%E6%96%AD%E6%88%90%E7%BB%A9%E7%9A%84%E7%A8%8B%E5%BA%8F"><span class="toc-number">8.1.</span> <span class="toc-text">编写判断成绩的程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E7%9F%B3%E5%A4%B4%E5%89%AA%E5%88%80%E5%B8%83%E5%B0%8F%E6%B8%B8%E6%88%8F"><span class="toc-number">8.2.</span> <span class="toc-text">编写石头剪刀布小游戏</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#while%E5%BE%AA%E7%8E%AF%E5%9F%BA%E7%A1%80"><span class="toc-number">9.</span> <span class="toc-text">while循环基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E5%9F%BA%E7%A1%80"><span class="toc-number">9.1.</span> <span class="toc-text">循环语句基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E6%A6%82%E8%BF%B0"><span class="toc-number">9.1.1.</span> <span class="toc-text">循环概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="toc-number">9.1.2.</span> <span class="toc-text">while循环语法结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">9.1.3.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#while%E5%BE%AA%E7%8E%AF%E6%89%A9%E5%B1%95%E8%AF%AD%E6%B3%95"><span class="toc-number">10.</span> <span class="toc-text">while循环扩展语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6"><span class="toc-number">10.1.</span> <span class="toc-text">循环语句进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#break%E8%AF%AD%E5%8F%A5"><span class="toc-number">10.1.1.</span> <span class="toc-text">break语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#continue%E8%AF%AD%E5%8F%A5"><span class="toc-number">10.1.2.</span> <span class="toc-text">continue语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#else%E8%AF%AD%E5%8F%A5"><span class="toc-number">10.1.3.</span> <span class="toc-text">else语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-2"><span class="toc-number">10.1.4.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF%E5%8F%8Arange%E5%87%BD%E6%95%B0"><span class="toc-number">11.</span> <span class="toc-text">for循环及range函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="toc-number">11.1.</span> <span class="toc-text">for循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="toc-number">11.1.1.</span> <span class="toc-text">for循环语法结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#range%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.</span> <span class="toc-text">range函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-3"><span class="toc-number">11.2.1.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF%E7%BB%83%E4%B9%A0%E4%B8%8E%E5%88%97%E8%A1%A8%E8%A7%A3%E6%9E%90"><span class="toc-number">12.</span> <span class="toc-text">for循环练习与列表解析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E8%A7%A3%E6%9E%90"><span class="toc-number">12.1.</span> <span class="toc-text">列表解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-4"><span class="toc-number">12.2.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8"><span class="toc-number">12.2.1.</span> <span class="toc-text">九九乘法表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%96%B9%E6%B3%95%E5%8F%8A%E8%AF%BB%E5%8F%96"><span class="toc-number">13.</span> <span class="toc-text">文件打开方法及读取</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%96%B9%E6%B3%95"><span class="toc-number">13.1.</span> <span class="toc-text">文件打开方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#open%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">13.1.1.</span> <span class="toc-text">open内建函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE%E6%A8%A1%E5%BC%8F"><span class="toc-number">13.1.2.</span> <span class="toc-text">文件对象访问模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5"><span class="toc-number">13.2.</span> <span class="toc-text">文件输入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#read%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.1.</span> <span class="toc-text">read方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readline%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.2.</span> <span class="toc-text">readline方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readlines%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.3.</span> <span class="toc-text">readlines方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%BF%AD%E4%BB%A3"><span class="toc-number">13.3.</span> <span class="toc-text">文件迭代</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%99%E6%96%87%E4%BB%B6%E5%8F%8A%E6%96%87%E4%BB%B6%E6%8C%87%E9%92%88"><span class="toc-number">14.</span> <span class="toc-text">写文件及文件指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%BE%93%E5%87%BA"><span class="toc-number">14.1.</span> <span class="toc-text">文件输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#write%E6%96%B9%E6%B3%95"><span class="toc-number">14.1.1.</span> <span class="toc-text">write方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#writelines%E6%96%B9%E6%B3%95"><span class="toc-number">14.1.2.</span> <span class="toc-text">writelines方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6"><span class="toc-number">14.2.</span> <span class="toc-text">操作文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#with%E5%AD%90%E5%8F%A5"><span class="toc-number">14.2.1.</span> <span class="toc-text">with子句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%85%E7%A7%BB%E5%8A%A8"><span class="toc-number">14.3.</span> <span class="toc-text">文件内移动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%A8%A1%E6%8B%9Fcp%E6%93%8D%E4%BD%9C"><span class="toc-number">14.4.</span> <span class="toc-text">案例：模拟cp操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80"><span class="toc-number">15.</span> <span class="toc-text">函数基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">15.1.</span> <span class="toc-text">函数基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">15.1.1.</span> <span class="toc-text">函数的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">15.1.2.</span> <span class="toc-text">创建函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">15.1.3.</span> <span class="toc-text">调用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">15.1.4.</span> <span class="toc-text">函数的返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97%E5%87%BD%E6%95%B0"><span class="toc-number">15.1.5.</span> <span class="toc-text">案例：斐波那契数列函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">16.</span> <span class="toc-text">函数参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0"><span class="toc-number">16.1.</span> <span class="toc-text">定义参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">16.2.</span> <span class="toc-text">传递参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">16.3.</span> <span class="toc-text">位置参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="toc-number">16.4.</span> <span class="toc-text">默认参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%87%BD%E6%95%B0"><span class="toc-number">16.5.</span> <span class="toc-text">案例：复制文件函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%9F%BA%E7%A1%80"><span class="toc-number">17.</span> <span class="toc-text">模块基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"><span class="toc-number">17.1.</span> <span class="toc-text">定义模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">17.1.1.</span> <span class="toc-text">模块基本概念</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">17.2.</span> <span class="toc-text">创建模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%EF%BC%88import%EF%BC%89"><span class="toc-number">17.3.</span> <span class="toc-text">导入模块（import）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD%EF%BC%88load%EF%BC%89"><span class="toc-number">17.4.</span> <span class="toc-text">模块加载（load）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">17.5.</span> <span class="toc-text">案例：创建模块</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%89%B9%E6%80%A7%E5%8F%8A%E6%A1%88%E4%BE%8B"><span class="toc-number">18.</span> <span class="toc-text">模块特性及案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%89%B9%E6%80%A7"><span class="toc-number">18.1.</span> <span class="toc-text">模块特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%85%A5%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">18.1.1.</span> <span class="toc-text">模块导入的特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-5"><span class="toc-number">18.2.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81"><span class="toc-number">18.2.1.</span> <span class="toc-text">生成随机密码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shutil%E6%A8%A1%E5%9D%97"><span class="toc-number">19.</span> <span class="toc-text">shutil模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E5%92%8C%E7%A7%BB%E5%8A%A8"><span class="toc-number">19.1.</span> <span class="toc-text">复制和移动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-number">19.2.</span> <span class="toc-text">目录操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">19.3.</span> <span class="toc-text">权限管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#subprocess%E6%A8%A1%E5%9D%97"><span class="toc-number">20.</span> <span class="toc-text">subprocess模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">20.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#run%E6%96%B9%E6%B3%95"><span class="toc-number">20.2.</span> <span class="toc-text">run方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF"><span class="toc-number">20.3.</span> <span class="toc-text">输出和错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%B0%83%E7%94%A8ping%E5%91%BD%E4%BB%A4"><span class="toc-number">20.4.</span> <span class="toc-text">案例：调用ping命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E8%AF%AD%E6%B3%95%E9%A3%8E%E6%A0%BC%E5%92%8C%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84%E5%B8%83%E5%B1%80"><span class="toc-number">21.</span> <span class="toc-text">python语法风格和模块结构布局</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E9%A3%8E%E6%A0%BC"><span class="toc-number">21.1.</span> <span class="toc-text">语法风格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC"><span class="toc-number">21.1.1.</span> <span class="toc-text">变量赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E6%B3%95%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-number">21.1.2.</span> <span class="toc-text">合法标识符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">21.1.3.</span> <span class="toc-text">关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%94%AE"><span class="toc-number">21.1.4.</span> <span class="toc-text">内键</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84%E5%8F%8A%E5%B8%83%E5%B1%80"><span class="toc-number">21.2.</span> <span class="toc-text">模块结构及布局</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%B8%83%E5%B1%80%E6%A1%88%E4%BE%8B"><span class="toc-number">22.</span> <span class="toc-text">模块布局案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%B5%8B%E8%AF%95%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%BA%E5%90%88%E6%B3%95%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-number">22.1.</span> <span class="toc-text">案例：测试字符串是否为合法标识符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-number">22.2.</span> <span class="toc-text">案例：创建文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%AF%B9%E8%B1%A1%E5%8F%8A%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">23.</span> <span class="toc-text">序列对象及字符串格式化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%8F%E5%88%97"><span class="toc-number">23.1.</span> <span class="toc-text">序列</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">23.1.1.</span> <span class="toc-text">序列类型操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">23.1.2.</span> <span class="toc-text">内建函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0-1"><span class="toc-number">23.1.3.</span> <span class="toc-text">内建函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2-1"><span class="toc-number">23.2.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">23.2.1.</span> <span class="toc-text">字符串操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">23.2.2.</span> <span class="toc-text">格式化操作符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="toc-number">23.3.</span> <span class="toc-text">原始字符串操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">23.4.</span> <span class="toc-text">案例：创建用户</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2-2"><span class="toc-number">24.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">24.1.</span> <span class="toc-text">字符串常用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0-2"><span class="toc-number">24.2.</span> <span class="toc-text">内建函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84-1"><span class="toc-number">25.</span> <span class="toc-text">列表和元组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8"><span class="toc-number">25.1.</span> <span class="toc-text">列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8F%8A%E8%AE%BF%E9%97%AE%E5%88%97%E8%A1%A8"><span class="toc-number">25.1.1.</span> <span class="toc-text">创建及访问列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%88%97%E8%A1%A8"><span class="toc-number">25.1.2.</span> <span class="toc-text">更新列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">25.1.3.</span> <span class="toc-text">列表常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%83%E7%BB%84"><span class="toc-number">25.2.</span> <span class="toc-text">元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%85%83%E7%BB%84"><span class="toc-number">25.2.1.</span> <span class="toc-text">创建元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E7%B4%A0%E5%85%83%E7%BB%84"><span class="toc-number">25.2.2.</span> <span class="toc-text">单元素元组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">26.</span> <span class="toc-text">列表案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E5%88%97%E8%A1%A8%E6%9E%84%E5%BB%BA%E6%A0%88%E7%BB%93%E6%9E%84"><span class="toc-number">26.1.</span> <span class="toc-text">用列表构建栈结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">27.</span> <span class="toc-text">字典及常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C"><span class="toc-number">27.1.</span> <span class="toc-text">字典基础操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%97%E5%85%B8"><span class="toc-number">27.1.1.</span> <span class="toc-text">创建字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%AD%97%E5%85%B8"><span class="toc-number">27.1.2.</span> <span class="toc-text">访问字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%AD%97%E5%85%B8"><span class="toc-number">27.1.3.</span> <span class="toc-text">更新字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%97%E5%85%B8"><span class="toc-number">27.1.4.</span> <span class="toc-text">删除字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">27.1.5.</span> <span class="toc-text">字典操作符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-number">27.2.</span> <span class="toc-text">字典相关函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E4%BA%8E%E5%AD%97%E5%85%B8%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">27.2.1.</span> <span class="toc-text">作用于字典的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%96%B9%E6%B3%95"><span class="toc-number">27.2.2.</span> <span class="toc-text">字典方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%A1%88%E4%BE%8B"><span class="toc-number">28.</span> <span class="toc-text">字典案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%A8%A1%E6%8B%9F%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F"><span class="toc-number">28.1.</span> <span class="toc-text">案例：模拟用户登录信息系统</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">29.</span> <span class="toc-text">集合及常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%9F%BA%E7%A1%80"><span class="toc-number">29.1.</span> <span class="toc-text">集合基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88"><span class="toc-number">29.1.1.</span> <span class="toc-text">创建集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">29.1.2.</span> <span class="toc-text">集合操作符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%96%B9%E6%B3%95"><span class="toc-number">29.2.</span> <span class="toc-text">集合方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">29.2.1.</span> <span class="toc-text">集合常用方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">30.</span> <span class="toc-text">集合案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%8E%BB%E9%87%8D"><span class="toc-number">30.1.</span> <span class="toc-text">案例：去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A-%E6%AF%94%E8%BE%83%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-number">30.2.</span> <span class="toc-text">案例： 比较文件内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#time%E6%A8%A1%E5%9D%97"><span class="toc-number">31.</span> <span class="toc-text">time模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">31.1.</span> <span class="toc-text">时间表示方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#struct-time%E5%85%83%E7%BB%84"><span class="toc-number">31.1.1.</span> <span class="toc-text">struct_time元组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#time%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95"><span class="toc-number">31.2.</span> <span class="toc-text">time模块方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%A0%B7%E5%BC%8F"><span class="toc-number">31.2.1.</span> <span class="toc-text">时间样式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%BC%96%E5%86%99%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">31.3.</span> <span class="toc-text">案例：编写进度条</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#datetime%E6%A8%A1%E5%9D%97"><span class="toc-number">32.</span> <span class="toc-text">datetime模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#datetime%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95"><span class="toc-number">32.1.</span> <span class="toc-text">datetime模块方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E8%AE%A1%E7%AE%97"><span class="toc-number">32.2.</span> <span class="toc-text">时间计算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%8F%96%E5%87%BA%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E7%9A%84%E6%96%87%E6%9C%AC"><span class="toc-number">32.3.</span> <span class="toc-text">案例：取出指定时间段的文本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">33.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">33.1.</span> <span class="toc-text">异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8"><span class="toc-number">33.2.</span> <span class="toc-text">python中的异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#try-except%E8%AF%AD%E5%8F%A5"><span class="toc-number">33.3.</span> <span class="toc-text">try-except语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%8F%82%E6%95%B0"><span class="toc-number">33.4.</span> <span class="toc-text">异常参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#else%E8%AF%AD%E5%8F%A5-1"><span class="toc-number">33.5.</span> <span class="toc-text">else语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#finally%E5%AD%90%E5%8F%A5"><span class="toc-number">33.6.</span> <span class="toc-text">finally子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%AE%80%E5%8C%96%E9%99%A4%E6%B3%95%E5%88%A4%E6%96%AD"><span class="toc-number">33.7.</span> <span class="toc-text">案例：简化除法判断</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">34.</span> <span class="toc-text">自定义异常</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%BC%82%E5%B8%B8"><span class="toc-number">34.1.</span> <span class="toc-text">触发异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#raise%E8%AF%AD%E5%8F%A5"><span class="toc-number">34.1.1.</span> <span class="toc-text">raise语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%AD%E8%A8%80"><span class="toc-number">34.2.</span> <span class="toc-text">断言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">34.3.</span> <span class="toc-text">案例：自定义异常</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#os%E6%A8%A1%E5%9D%97"><span class="toc-number">35.</span> <span class="toc-text">os模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#os%E6%A8%A1%E5%9D%97%E7%AE%80%E4%BB%8B"><span class="toc-number">35.1.</span> <span class="toc-text">os模块简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#os%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95"><span class="toc-number">35.2.</span> <span class="toc-text">os模块方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">35.3.</span> <span class="toc-text">案例：操作文件系统</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pickle%E6%A8%A1%E5%9D%97%E5%8F%8A%E6%A1%88%E4%BE%8B"><span class="toc-number">36.</span> <span class="toc-text">pickle模块及案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pickle%E6%A8%A1%E5%9D%97"><span class="toc-number">36.1.</span> <span class="toc-text">pickle模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pickle%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95"><span class="toc-number">36.2.</span> <span class="toc-text">pickle模块方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%AE%B0%E8%B4%A6%E7%A8%8B%E5%BA%8F"><span class="toc-number">36.3.</span> <span class="toc-text">案例：记账程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6"><span class="toc-number">37.</span> <span class="toc-text">函数进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0-1"><span class="toc-number">37.1.</span> <span class="toc-text">创建函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#def%E8%AF%AD%E5%8F%A5"><span class="toc-number">37.1.1.</span> <span class="toc-text">def语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%90%91%E5%BC%95%E7%94%A8"><span class="toc-number">37.1.2.</span> <span class="toc-text">前向引用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0-1"><span class="toc-number">37.2.</span> <span class="toc-text">调用函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">37.2.1.</span> <span class="toc-text">函数操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%82%E6%95%B0"><span class="toc-number">37.2.2.</span> <span class="toc-text">关键字参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E7%BB%84"><span class="toc-number">37.2.3.</span> <span class="toc-text">参数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%AE%80%E5%8D%95%E7%9A%84%E5%8A%A0%E5%87%8F%E6%B3%95%E6%95%B0%E5%AD%A6%E6%B8%B8%E6%88%8F"><span class="toc-number">37.3.</span> <span class="toc-text">案例：简单的加减法数学游戏</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">38.</span> <span class="toc-text">匿名函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#lambda"><span class="toc-number">38.1.</span> <span class="toc-text">lambda</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#filter-%E5%87%BD%E6%95%B0"><span class="toc-number">38.2.</span> <span class="toc-text">filter()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map-%E5%87%BD%E6%95%B0"><span class="toc-number">38.3.</span> <span class="toc-text">map()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reduce-%E5%87%BD%E6%95%B0"><span class="toc-number">38.4.</span> <span class="toc-text">reduce()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%BF%AE%E6%94%B9%E6%95%B0%E5%AD%A6%E6%B8%B8%E6%88%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">38.5.</span> <span class="toc-text">案例：修改数学游戏程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%8A%E5%81%8F%E5%87%BD%E6%95%B0"><span class="toc-number">39.</span> <span class="toc-text">变量作用域及偏函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">39.1.</span> <span class="toc-text">变量作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">39.1.1.</span> <span class="toc-text">全局变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">39.1.2.</span> <span class="toc-text">局部变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#global%E8%AF%AD%E5%8F%A5"><span class="toc-number">39.1.3.</span> <span class="toc-text">global语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-number">39.2.</span> <span class="toc-text">函数式编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%8F%E5%87%BD%E6%95%B0"><span class="toc-number">39.2.1.</span> <span class="toc-text">偏函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-number">39.3.</span> <span class="toc-text">案例：创建进制转换函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="toc-number">40.</span> <span class="toc-text">递归函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0-1"><span class="toc-number">40.1.</span> <span class="toc-text">递归函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F"><span class="toc-number">40.2.</span> <span class="toc-text">案例：快速排序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">41.</span> <span class="toc-text">生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8-1"><span class="toc-number">41.1.</span> <span class="toc-text">生成器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">41.2.</span> <span class="toc-text">生成器表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">41.3.</span> <span class="toc-text">案例：文件生成器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3"><span class="toc-number">42.</span> <span class="toc-text">模块详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%92%8C%E6%96%87%E4%BB%B6"><span class="toc-number">42.1.</span> <span class="toc-text">模块和文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E5%9D%97"><span class="toc-number">42.1.1.</span> <span class="toc-text">什么是模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E6%96%87%E4%BB%B6"><span class="toc-number">42.1.2.</span> <span class="toc-text">模块文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E8%B7%AF%E5%BE%84"><span class="toc-number">42.1.3.</span> <span class="toc-text">搜索路径</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97"><span class="toc-number">42.2.</span> <span class="toc-text">内置模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tarfile%E6%A8%A1%E5%9D%97"><span class="toc-number">42.2.1.</span> <span class="toc-text">tarfile模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hashlib%E6%A8%A1%E5%9D%97"><span class="toc-number">42.2.2.</span> <span class="toc-text">hashlib模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%96%87%E4%BB%B6md5%E5%80%BC"><span class="toc-number">42.3.</span> <span class="toc-text">案例：计算文件md5值</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E4%BD%9C%E4%B8%9A%E8%AE%B2%E8%A7%A3"><span class="toc-number">43.</span> <span class="toc-text">模块作业讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A4%87%E4%BB%BD%E7%A8%8B%E5%BA%8F"><span class="toc-number">43.1.</span> <span class="toc-text">案例：备份程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OOP%E5%9F%BA%E7%A1%80"><span class="toc-number">44.</span> <span class="toc-text">OOP基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OOP%E5%9F%BA%E7%A1%80-1"><span class="toc-number">44.1.</span> <span class="toc-text">OOP基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">44.1.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B1%BB"><span class="toc-number">44.1.2.</span> <span class="toc-text">创建类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-number">44.1.3.</span> <span class="toc-text">创建实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95"><span class="toc-number">44.2.</span> <span class="toc-text">绑定方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">44.2.1.</span> <span class="toc-text">构造器方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95"><span class="toc-number">44.2.2.</span> <span class="toc-text">其他绑定方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%BC%96%E5%86%99%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%89%A9"><span class="toc-number">44.3.</span> <span class="toc-text">案例：编写游戏人物</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%92%8C%E6%B4%BE%E7%94%9F"><span class="toc-number">45.</span> <span class="toc-text">组合和派生</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88"><span class="toc-number">45.1.</span> <span class="toc-text">组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88"><span class="toc-number">45.1.1.</span> <span class="toc-text">什么是组合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BA%94%E7%94%A8"><span class="toc-number">45.1.2.</span> <span class="toc-text">组合应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%B1%BB"><span class="toc-number">45.2.</span> <span class="toc-text">子类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90%E7%B1%BB"><span class="toc-number">45.2.1.</span> <span class="toc-text">创建子类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">45.2.2.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E8%A6%86%E7%9B%96%E6%96%B9%E6%B3%95"><span class="toc-number">45.2.3.</span> <span class="toc-text">通过继承覆盖方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">45.2.4.</span> <span class="toc-text">多重继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%BF%AE%E6%94%B9%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%89%A9"><span class="toc-number">45.3.</span> <span class="toc-text">案例：修改游戏人物</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95"><span class="toc-number">46.</span> <span class="toc-text">类的特殊方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95"><span class="toc-number">46.1.</span> <span class="toc-text">魔法方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#magic%E5%9F%BA%E7%A1%80"><span class="toc-number">46.1.1.</span> <span class="toc-text">magic基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#init-%E6%96%B9%E6%B3%95"><span class="toc-number">46.1.2.</span> <span class="toc-text">__init__方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#str-%E6%96%B9%E6%B3%95"><span class="toc-number">46.1.3.</span> <span class="toc-text">__str__方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#call-%E6%96%B9%E6%B3%95"><span class="toc-number">46.1.4.</span> <span class="toc-text">__call__方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%87%BA%E7%89%88%E5%95%86%E7%A8%8B%E5%BA%8F"><span class="toc-number">46.2.</span> <span class="toc-text">案例：出版商程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%8Are%E6%A8%A1%E5%9D%97"><span class="toc-number">47.</span> <span class="toc-text">正则表达式及re模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">47.1.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E5%8D%95%E4%B8%AA%E5%AD%97%E7%AC%A6"><span class="toc-number">47.1.1.</span> <span class="toc-text">匹配单个字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E4%B8%80%E7%BB%84%E5%AD%97%E7%AC%A6"><span class="toc-number">47.1.2.</span> <span class="toc-text">匹配一组字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%85%83%E5%AD%97%E7%AC%A6"><span class="toc-number">47.1.3.</span> <span class="toc-text">其他元字符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%96%B9%E6%B3%95"><span class="toc-number">47.2.</span> <span class="toc-text">核心方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#match%E5%87%BD%E6%95%B0"><span class="toc-number">47.2.1.</span> <span class="toc-text">match函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#search%E5%87%BD%E6%95%B0"><span class="toc-number">47.2.2.</span> <span class="toc-text">search函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#group%E6%96%B9%E6%B3%95"><span class="toc-number">47.2.3.</span> <span class="toc-text">group方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#findall%E5%87%BD%E6%95%B0"><span class="toc-number">47.2.4.</span> <span class="toc-text">findall函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finditer%E5%87%BD%E6%95%B0"><span class="toc-number">47.2.5.</span> <span class="toc-text">finditer函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#split%E6%96%B9%E6%B3%95"><span class="toc-number">47.2.6.</span> <span class="toc-text">split方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sub%E6%96%B9%E6%B3%95"><span class="toc-number">47.2.7.</span> <span class="toc-text">sub方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compile%E5%87%BD%E6%95%B0"><span class="toc-number">47.2.8.</span> <span class="toc-text">compile函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%88%86%E6%9E%90apache%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97"><span class="toc-number">47.3.</span> <span class="toc-text">案例：分析apache访问日志</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85"><span class="toc-number">48.</span> <span class="toc-text">Python模块安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PYPI%E4%BB%8B%E7%BB%8D"><span class="toc-number">48.1.</span> <span class="toc-text">PYPI介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97"><span class="toc-number">48.2.</span> <span class="toc-text">本地安装模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85pip"><span class="toc-number">48.2.1.</span> <span class="toc-text">本地安装pip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85wget"><span class="toc-number">48.2.2.</span> <span class="toc-text">安装wget</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97"><span class="toc-number">48.3.</span> <span class="toc-text">在线安装模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E7%AB%99%E7%82%B9"><span class="toc-number">48.3.1.</span> <span class="toc-text">使用国内镜像站点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEpip%E6%94%AF%E6%8C%81tab%E9%94%AE%E8%A1%A5%E5%85%A8"><span class="toc-number">48.3.2.</span> <span class="toc-text">配置pip支持tab键补全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%89%88%E6%9C%AC"><span class="toc-number">48.3.3.</span> <span class="toc-text">查看软件包版本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85pymysql%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC"><span class="toc-number">48.4.</span> <span class="toc-text">安装pymysql最新版本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">49.</span> <span class="toc-text">准备数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A1%88%E4%BE%8B"><span class="toc-number">49.1.</span> <span class="toc-text">数据库案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">49.1.1.</span> <span class="toc-text">需求分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9A%E6%89%80%E9%9C%80%E7%9A%84%E8%A1%A8"><span class="toc-number">49.1.2.</span> <span class="toc-text">确定所需的表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F"><span class="toc-number">49.1.3.</span> <span class="toc-text">数据库范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">49.2.</span> <span class="toc-text">案例：准备数据库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PyMySQL%E6%A8%A1%E5%9D%97%E5%BA%94%E7%94%A8"><span class="toc-number">50.</span> <span class="toc-text">PyMySQL模块应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">50.1.</span> <span class="toc-text">连接数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B8%E6%A0%87"><span class="toc-number">50.2.</span> <span class="toc-text">游标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">50.3.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">50.4.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">50.5.</span> <span class="toc-text">查询数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">50.6.</span> <span class="toc-text">修改数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%AE%B0%E5%BD%95"><span class="toc-number">50.7.</span> <span class="toc-text">删除记录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQLAlchemy%E6%A6%82%E8%BF%B0"><span class="toc-number">51.</span> <span class="toc-text">SQLAlchemy概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">51.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84"><span class="toc-number">51.2.</span> <span class="toc-text">架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">51.3.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5mysql"><span class="toc-number">51.4.</span> <span class="toc-text">连接mysql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BC%9A%E8%AF%9D%E7%B1%BB"><span class="toc-number">51.5.</span> <span class="toc-text">创建会话类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ORM%E5%9F%BA%E7%A1%80"><span class="toc-number">51.6.</span> <span class="toc-text">ORM基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM%E6%A8%A1%E5%9E%8B"><span class="toc-number">51.6.1.</span> <span class="toc-text">ORM模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E6%98%A0%E5%B0%84"><span class="toc-number">51.6.2.</span> <span class="toc-text">声明映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E8%AF%B4%E6%98%8E"><span class="toc-number">51.6.3.</span> <span class="toc-text">映射说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1%E7%AE%A1%E7%90%86"><span class="toc-number">52.</span> <span class="toc-text">数据库对象管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">52.1.</span> <span class="toc-text">创建实体类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%83%A8%E9%97%A8%E7%B1%BB"><span class="toc-number">52.1.1.</span> <span class="toc-text">创建部门类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%83%A8%E9%97%A8%E8%A1%A8"><span class="toc-number">52.1.2.</span> <span class="toc-text">创建部门表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">52.2.</span> <span class="toc-text">外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B7%A5%E8%B5%84%E8%A1%A8salary"><span class="toc-number">52.2.1.</span> <span class="toc-text">创建工资表salary</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6"><span class="toc-number">52.3.</span> <span class="toc-text">完整代码文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQLAIchemy%E5%BA%94%E7%94%A8"><span class="toc-number">53.</span> <span class="toc-text">SQLAIchemy应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%AF%B9%E8%B1%A1"><span class="toc-number">53.1.</span> <span class="toc-text">添加新对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%AF%B9%E8%B1%A1"><span class="toc-number">53.1.1.</span> <span class="toc-text">批量添加新对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E5%91%98%E5%B7%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">53.1.2.</span> <span class="toc-text">批量添加员工数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">53.2.</span> <span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">53.2.1.</span> <span class="toc-text">基本查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">53.2.2.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C%E8%BF%87%E6%BB%A4"><span class="toc-number">53.2.3.</span> <span class="toc-text">结果过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%BF%87%E6%BB%A4%E7%AC%A6"><span class="toc-number">53.2.4.</span> <span class="toc-text">常用过滤符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%AF%B9%E8%B1%A1%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">53.2.5.</span> <span class="toc-text">查询对象返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">53.2.6.</span> <span class="toc-text">多表查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">53.3.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">53.4.</span> <span class="toc-text">删除</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%A6%82%E8%BF%B0"><span class="toc-number">54.</span> <span class="toc-text">多进程概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#forking%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">54.1.</span> <span class="toc-text">forking工作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">54.2.</span> <span class="toc-text">进程的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%8D%95%E8%BF%9B%E7%A8%8B%E3%80%81%E5%8D%95%E7%BA%BF%E7%A8%8Bping"><span class="toc-number">54.3.</span> <span class="toc-text">案例：单进程、单线程ping</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#forking%E7%BC%96%E7%A8%8B%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF"><span class="toc-number">54.4.</span> <span class="toc-text">forking编程基本思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9Aforking%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8"><span class="toc-number">54.5.</span> <span class="toc-text">案例：forking基础应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BA%94%E7%94%A8"><span class="toc-number">55.</span> <span class="toc-text">多进程应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%80%9D%E8%B7%AF"><span class="toc-number">55.1.</span> <span class="toc-text">多进程编程思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%89%AB%E6%8F%8F%E5%AD%98%E6%B4%BB%E4%B8%BB%E6%9C%BA"><span class="toc-number">55.2.</span> <span class="toc-text">案例：扫描存活主机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E9%97%AE%E9%A2%98"><span class="toc-number">55.3.</span> <span class="toc-text">僵尸进程问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3zombie%E9%97%AE%E9%A2%98"><span class="toc-number">55.4.</span> <span class="toc-text">解决zombie问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BA%94%E7%94%A8"><span class="toc-number">56.</span> <span class="toc-text">多线程应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">56.1.</span> <span class="toc-text">多线程工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8A%A8%E6%9C%BA"><span class="toc-number">56.1.1.</span> <span class="toc-text">多线程的动机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%89%B9%E7%82%B9"><span class="toc-number">56.1.2.</span> <span class="toc-text">多线程任务的工作特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9B%E7%A8%8B"><span class="toc-number">56.1.3.</span> <span class="toc-text">什么是进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%BF%E7%A8%8B"><span class="toc-number">56.1.4.</span> <span class="toc-text">什么是线程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B"><span class="toc-number">56.2.</span> <span class="toc-text">多线程编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%A8%A1%E5%9D%97"><span class="toc-number">56.2.1.</span> <span class="toc-text">多线程相关模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%87%BD%E6%95%B0%E7%BB%99Thread%E7%B1%BB"><span class="toc-number">56.2.2.</span> <span class="toc-text">传递函数给Thread类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%89%AB%E6%8F%8F%E5%AD%98%E6%B4%BB%E4%B8%BB%E6%9C%BA-1"><span class="toc-number">56.3.</span> <span class="toc-text">案例：扫描存活主机</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#urllib%E6%A8%A1%E5%9D%97%E6%A6%82%E8%BF%B0"><span class="toc-number">57.</span> <span class="toc-text">urllib模块概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#urllib%E5%9F%BA%E7%A1%80"><span class="toc-number">57.1.</span> <span class="toc-text">urllib基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5"><span class="toc-number">57.1.1.</span> <span class="toc-text">爬取网页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E5%8F%96%E5%9B%BE%E7%89%87"><span class="toc-number">57.1.2.</span> <span class="toc-text">爬取图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90"><span class="toc-number">57.1.3.</span> <span class="toc-text">下载网络资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%88%AC%E5%8F%96%E5%9B%BE%E7%89%87"><span class="toc-number">57.1.4.</span> <span class="toc-text">案例：爬取图片</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#urllib%E5%BA%94%E7%94%A8"><span class="toc-number">57.2.</span> <span class="toc-text">urllib应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">57.2.1.</span> <span class="toc-text">模拟客户端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81"><span class="toc-number">57.2.2.</span> <span class="toc-text">数据编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">57.2.3.</span> <span class="toc-text">HTTP异常处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#paramiko%E6%A8%A1%E5%9D%97%E5%BA%94%E7%94%A8"><span class="toc-number">58.</span> <span class="toc-text">paramiko模块应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85paramiko%E6%A8%A1%E5%9D%97"><span class="toc-number">58.1.</span> <span class="toc-text">安装paramiko模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">58.2.</span> <span class="toc-text">基础使用介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#paramiko%E5%AE%9E%E4%BE%8B"><span class="toc-number">58.3.</span> <span class="toc-text">paramiko实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A4%9A%E7%BA%BF%E7%A8%8Bssh%E5%B9%B6%E5%8F%91%E8%AE%BF%E9%97%AE"><span class="toc-number">58.4.</span> <span class="toc-text">案例：多线程ssh并发访问</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E7%BC%96%E7%A8%8B"><span class="toc-number">59.</span> <span class="toc-text">邮件编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="toc-number">59.1.</span> <span class="toc-text">发送邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%82%AE%E4%BB%B6"><span class="toc-number">59.1.1.</span> <span class="toc-text">设置邮件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SMTP%E6%A6%82%E8%BF%B0"><span class="toc-number">59.2.</span> <span class="toc-text">SMTP概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SMTP%E5%AF%B9%E8%B1%A1"><span class="toc-number">59.3.</span> <span class="toc-text">SMTP对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sendmail%E6%96%B9%E6%B3%95"><span class="toc-number">59.4.</span> <span class="toc-text">sendmail方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="toc-number">59.5.</span> <span class="toc-text">案例：通过本机发送邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SMTP%E8%AE%A4%E8%AF%81"><span class="toc-number">59.6.</span> <span class="toc-text">SMTP认证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%80%9A%E8%BF%87%E4%BA%92%E8%81%94%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="toc-number">59.7.</span> <span class="toc-text">案例：通过互联网服务器发送邮件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSON"><span class="toc-number">60.</span> <span class="toc-text">JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E6%A6%82%E8%BF%B0"><span class="toc-number">60.1.</span> <span class="toc-text">JSON概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E7%BB%93%E6%9E%84"><span class="toc-number">60.2.</span> <span class="toc-text">JSON结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dumps%E6%96%B9%E6%B3%95"><span class="toc-number">60.3.</span> <span class="toc-text">dumps方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loads%E6%96%B9%E6%B3%95"><span class="toc-number">60.4.</span> <span class="toc-text">loads方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">60.5.</span> <span class="toc-text">天气预报查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#requests%E5%9F%BA%E7%A1%80"><span class="toc-number">61.</span> <span class="toc-text">requests基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#requests%E5%9F%BA%E7%A1%80-1"><span class="toc-number">61.1.</span> <span class="toc-text">requests基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#requests%E7%AE%80%E4%BB%8B"><span class="toc-number">61.1.1.</span> <span class="toc-text">requests简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requests%E7%89%B9%E6%80%A7"><span class="toc-number">61.1.2.</span> <span class="toc-text">requests特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GET%E5%92%8CPOST"><span class="toc-number">61.1.3.</span> <span class="toc-text">GET和POST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95"><span class="toc-number">61.1.4.</span> <span class="toc-text">其他方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">61.1.5.</span> <span class="toc-text">请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%AE%9A%E5%A4%B4%E9%83%A8"><span class="toc-number">61.1.6.</span> <span class="toc-text">设定头部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">61.1.7.</span> <span class="toc-text">发送请求数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#requests%E5%BA%94%E7%94%A8"><span class="toc-number">61.2.</span> <span class="toc-text">requests应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%BA%94%E5%86%85%E5%AE%B9"><span class="toc-number">61.2.1.</span> <span class="toc-text">相应内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%9B%B8%E5%BA%94%E5%86%85%E5%AE%B9%E6%A0%BC%E5%BC%8F"><span class="toc-number">61.2.2.</span> <span class="toc-text">其他相应内容格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-number">61.3.</span> <span class="toc-text">响应头</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/04/19/SRE-redis/" title="企业级NoSQL数据库Redis"><img src="/../images/SRE/day49/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="企业级NoSQL数据库Redis"/></a><div class="content"><a class="title" href="/2025/04/19/SRE-redis/" title="企业级NoSQL数据库Redis">企业级NoSQL数据库Redis</a><time datetime="2025-04-19T10:19:31.134Z" title="发表于 2025-04-19 18:19:31">2025-04-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/16/SRE-Keepalived/" title="高可用性集群Keepalived"><img src="/../images/SRE/day48/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高可用性集群Keepalived"/></a><div class="content"><a class="title" href="/2025/04/16/SRE-Keepalived/" title="高可用性集群Keepalived">高可用性集群Keepalived</a><time datetime="2025-04-16T09:15:13.000Z" title="发表于 2025-04-16 17:15:13">2025-04-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/15/SRE-HAProxy/" title="高可用性集群HAProxy"><img src="/../images/SRE/day47/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高可用性集群HAProxy"/></a><div class="content"><a class="title" href="/2025/04/15/SRE-HAProxy/" title="高可用性集群HAProxy">高可用性集群HAProxy</a><time datetime="2025-04-15T15:51:45.000Z" title="发表于 2025-04-15 23:51:45">2025-04-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/13/SRE-docker/" title="企业级容器技术Docker"><img src="/../images/SRE/day46/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="企业级容器技术Docker"/></a><div class="content"><a class="title" href="/2025/04/13/SRE-docker/" title="企业级容器技术Docker">企业级容器技术Docker</a><time datetime="2025-04-13T09:39:38.000Z" title="发表于 2025-04-13 17:39:38">2025-04-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By ૮(˶ᵔ ᵕ ᵔ˶)ა</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index"><img src="../images/BEIAN/icp.png" width="15" height="15">豫ICP备2023009931号</a></br><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162702000178" target="_blank"><img src="../images/BEIAN/beian.png" width="15" height="15">豫公网安备 41162702000178号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas id="universe"></canvas><script src="/js/universe.js"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>